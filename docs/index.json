[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "scripts/.external-ecmascript.js",
    "static": true,
    "longname": "scripts/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "scripts/app.js",
    "content": "\"use strict\";\r\n\r\n/**\r\n Test app\r\n*/\r\n\r\nimport * as simple_controller from './simple_controller.js';\r\n\r\nimport * as util from './util.js';\r\nimport * as icon_enum from './icon_enum.js';\r\nimport * as events from './events.js';\r\nimport * as simple_events from './simple_events.js';\r\nimport * as toolsys from './simple_toolsys.js';\r\nimport * as ui from './ui.js';\r\nimport * as image from './image.js';\r\nimport * as FrameManager from './FrameManager.js';\r\nimport * as FrameManager_ops from './FrameManager_ops.js';\r\nimport * as ScreenArea from './ScreenArea.js';\r\nimport * as ui_widgets from './ui_widgets.js';\r\nimport * as controller from './controller.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as cconst from './const.js';\r\nimport * as config from './config.js';\r\nimport * as ui_menu from './ui_menu.js';\r\nimport * as toolpath from './toolpath.js';\r\nimport {Vector3} from \"./vectormath.js\";\r\n\r\nlet Icons = icon_enum.Icons;\r\nui_base.setIconMap(Icons);\r\n\r\nimport './struct.js';\r\n\r\nlet PackFlags = ui_base.PackFlags;\r\n\r\nwindow.STARTUP_FILE_NAME = \"startup_file_pathux\";\r\n\r\nScreenArea.Area.prototype.getScreen = function() {\r\n  return _appstate.screen;\r\n}\r\n\r\nexport class CanvasArea extends ScreenArea.Area {\r\n  constructor() {\r\n    super();\r\n    \r\n    this.canvas = document.createElement(\"canvas\");\r\n    this.g = this.canvas.getContext(\"2d\");\r\n    \r\n    this.shadow.appendChild(this.canvas);\r\n    \r\n    let mstart = (e) => {\r\n      let sa = this.owning_sarea;\r\n      \r\n      if (!sa) return e;\r\n      \r\n      e = events.copyMouseEvent(e);\r\n      \r\n      e.x -= sa.pos[0];\r\n      e.y -= sa.pos[1];\r\n      e.pageX -= sa.pos[0];\r\n      e.pageY -= sa.pos[1];\r\n      e.clientX -= sa.pos[0];\r\n      e.clientY -= sa.pos[1];\r\n      \r\n      //console.log(e.x, e.y, _appstate.screen.sareas.active.pos === sa);\r\n      \r\n      return e;\r\n    }\r\n\r\n    this.canvas.addEventListener(\"mousedown\", (e) => {\r\n      e = mstart(e);\r\n    });\r\n    \r\n    this.canvas.addEventListener(\"mousemove\", (e) => {\r\n      e = mstart(e);\r\n    });\r\n    \r\n    this.canvas.addEventListener(\"mouseup\", (e) => {\r\n      e = mstart(e);\r\n    });      \r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n    this.remakeUI();\r\n  }\r\n\r\n  remakeUI() {\r\n    if (this.ui !== undefined) {\r\n      this.ui.remove();\r\n      this.canvas.remove();\r\n      this.ui = undefined;\r\n    }\r\n    \r\n    let ui = this.ui = document.createElement(\"container-x\");\r\n    let header = this.makeHeader(ui);\r\n    ui = header;\r\n    //ui = this.headerRow;\r\n\r\n    ui.ctx = _appstate.ctx;\r\n    ui.style[\"width\"] = \"100%\";\r\n    //ui.style[\"height\"] = \"245px\";\r\n    \r\n    this.shadow.appendChild(ui);\r\n    \r\n    let row = ui.row();\r\n    \r\n    row.tool(\"screen.area.split\", PackFlags.USE_ICONS|PackFlags.SMALL_ICON, (cls) => new cls(_appstate.screen));\r\n    row.tool(\"screen.area.split\", 0, (cls) => new cls(_appstate.screen));\r\n    let SEP = ui_menu.Menu.SEP;\r\n    \r\n    row.menu(\"File\", [\r\n      [\"Open\", () => console.log(\"yay open\")],\r\n      \"screen.area.split\",\r\n      \"screen.area.drag\",\r\n      SEP,\r\n      [\"Close\", () => console.log(\"yay close\")],\r\n    ]);\r\n\r\n    row.menu(\"File\", [\r\n      \"screen.area.split\",\r\n      SEP,\r\n      [\"Open\", () => console.log(\"yay open\")],\r\n      [\"Close\", () => console.log(\"yay close\")],\r\n      \"screen.area.drag\",\r\n    ]);\r\n\r\n    row.checkenum(\"state.enumval\", \"Enum\", ui_base.PackFlags.USE_ICONS|ui_base.PackFlags.SMALL_ICON);\r\n    row.listenum(\"state.enumval\", \"Enum\");\r\n    //*/\r\n\r\n    row.simpleslider(\"state.sliderval\", \"sliderval\");\r\n\r\n    row = ui.row();\r\n    let tabs = row.tabs(\"right\");\r\n    tabs.style[\"width\"] = \"300px\";\r\n    tabs.style[\"height\"] = \"400px\";\r\n    tabs.float(1, 75*ui_base.UIBase.getDPI(), 7);\r\n    //*\r\n    \r\n    let tab = tabs.tab(\"yay\");\r\n\r\n    //tab.float(1, 1, 7);\r\n    //tab.slider(\"EXAMPLE_PARAM\", \"Example\", 128, 1, 512, true, false);\r\n    tab.prop(\"state.color\");\r\n    tab.simpleslider(\"state.sliderval\", \"sliderval\");\r\n    //tab.checkenum(\"state.enumval\", undefined, PackFlags.VERTICAL);\r\n    //tab.checkenum_panel(\"state.enumval\", undefined, PackFlags.VERTICAL);\r\n\r\n    tab.prop(\"state.vec3\").onchange = (val) => {\r\n      console.log(val);\r\n    };\r\n\r\n    tab = tabs.tab(\"Display\");\r\n    \r\n    tabs.tab(\"one\");\r\n    tabs.tab(\"two\");\r\n    tabs.tab(\"three\");\r\n    //*/\r\n    \r\n    ui.update();\r\n    \r\n    let mpos = [0, 0];\r\n    let start_mpos = [0, 0];\r\n    let mdown = false;\r\n    \r\n    ui.addEventListener(\"mousedown\", (e) => {\r\n      mpos[0] = e.x;\r\n      mpos[1] = e.y;\r\n      \r\n      start_mpos[0] = mpos[0];\r\n      start_mpos[1] = mpos[1];\r\n      \r\n      mdown = true;\r\n    });\r\n    \r\n    ui.addEventListener(\"mouseup\", (e) => {\r\n      mpos[0] = e.x;\r\n      mpos[1] = e.y;\r\n      mdown = false;\r\n    });\r\n\r\n    this.shadow.appendChild(this.canvas);\r\n  }\r\n  \r\n  static define() { return {\r\n    tagname  : \"canvasarea-x\",\r\n    areaname : \"canvas_area\",\r\n    uiname   : \"Canvas Area\",\r\n    areatype : ScreenArea.AreaTypes.TEST_CANVAS_EDITOR\r\n  };}\r\n  \r\n  copy() {\r\n    let ret = document.createElement(\"canvasarea-x\");\r\n    \r\n    ret.ctx = this.ctx;\r\n    \r\n    return ret;\r\n  }\r\n\r\n  draw() {\r\n    if (this.ctx !== undefined) {\r\n      this.g.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n  }\r\n  \r\n  on_resize(size) {\r\n    super.on_resize();\r\n    \r\n    this.canvas.width = size[0];\r\n    this.canvas.height = size[1];\r\n    \r\n    if (window.redraw_all)\r\n      window.redraw_all();\r\n  }\r\n  \r\n  update() {\r\n    //console.log(\"update\");\r\n    \r\n    //this.canvas.style[\"left\"] = this.pos[0];\r\n    //this.canvas.style[\"top\"] = this.pos[1];\r\n    super.update();\r\n    this.ui.update();\r\n  }\r\n  \r\n  static fromSTRUCT(reader) {\r\n    let ret = document.createElement(\"canvasarea-x\");\r\n    ret.ctx = _appstate.ctx;\r\n    \r\n    reader(ret);\r\n    ret.remakeUI();\r\n    ret.afterSTRUCT();\r\n    \r\n    return ret;\r\n  }\r\n\r\n}\r\n\r\nCanvasArea.STRUCT = nstructjs.STRUCT.inherit(CanvasArea, ScreenArea.Area) + `\r\n  }\r\n`;\r\n\r\nnstructjs.manager.add_class(CanvasArea);\r\nScreenArea.Area.register(CanvasArea);\r\n\r\nexport class AppState extends events.EventHandler {\r\n  constructor() {\r\n    super();\r\n    \r\n    this.lastsize = [0, 0];\r\n    \r\n    this.last_save = 0;\r\n    \r\n    this.ctx = new toolsys.ContextExample();\r\n    this.toolstack = new toolsys.ToolStack();\r\n    \r\n    this._modal_dom_root = undefined;\r\n    \r\n    this.initAPI();\r\n\r\n    //this.makeGUI();\r\n    this.image = undefined;\r\n    this.enumval = 0;\r\n    this.sliderval = 0;\r\n    this.vec3 = new Vector3();\r\n    this.color = [1, 0, 0, 1];\r\n  }\r\n  \r\n  initAPI() {\r\n    this.api = new simple_controller.DataAPI();\r\n    \r\n    toolpath.initToolPaths();\r\n    window._ToolPaths = toolpath.ToolPaths;\r\n    \r\n    let stt = this.api.rootContextStruct = this.api.mapStruct(toolsys.ContextExample);\r\n    stt = stt.struct(\"state\", \"state\", \"state\", this.api.mapStruct(AppState));\r\n    stt.vec3(\"vec3\", \"vec3\", \"vec3\");\r\n\r\n    let def = stt.enum(\"enumval\",  \"enumval\", {A : 0, Test : 1, Triangle : 2, Bleh : 3, Yay : 4});\r\n    def.icons({\r\n      A : Icons.DELETE,\r\n      Test : Icons.UNDO,\r\n      Triangle : Icons.REDO,\r\n      Bleh : Icons.FOLDER,\r\n      Yay : Icons.BACKSPACE\r\n    });\r\n\r\n    stt.float(\"sliderval\", \"sliderval\", \"Sliderval\");\r\n\r\n    stt.color4(\"color\", \"color\", \"color\", \"color\");\r\n  }\r\n  \r\n  makeScreen() {\r\n    this.screen = this.gui = document.createElement(\"screen-x\");\r\n    this.screen.ctx = this.ctx;\r\n    this.screen.listen();\r\n    \r\n    this.screen.size = [window.innerWidth, window.innerHeight];\r\n    \r\n    let sarea = document.createElement(\"screenarea-x\");\r\n    \r\n    sarea.size[0] = window.innerWidth;\r\n    sarea.size[1] = window.innerHeight;\r\n    \r\n    this.screen.makeBorders();\r\n    \r\n    sarea.setCSS();\r\n    this.screen.setCSS();\r\n    \r\n    document.body.appendChild(this.screen);\r\n    this.screen.appendChild(sarea);\r\n    \r\n    sarea.switch_editor(CanvasArea);\r\n    \r\n    let canvas = sarea.area.canvas;\r\n    this.canvas = canvas;\r\n    \r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    \r\n    //canvas.style[\"width\"] = \"100%\";\r\n    //canvas.style[\"height\"] = \"100%\";\r\n    //canvas.style[\"z-index\"] = 2;\r\n    \r\n    //this.g = canvas.getContext(\"2d\");\r\n    \r\n    console.log(sarea, \"SAREA!\");\r\n    \r\n    this.screen.makeBorders();\r\n    this._modal_dom_root = this.screen;\r\n    \r\n    this.screen.splitArea(this.screen.sareas[0], 0.333, false)\r\n    this.screen.splitArea(this.screen.sareas[0], 0.333, true)\r\n  }\r\n  \r\n  makeGUI() {\r\n    this.gui = document.createElement(\"container-x\")\r\n    this.gui.ctx = this.ctx;\r\n    this.gui.style[\"width\"] = \"300px\";\r\n\r\n    document.body.appendChild(this.gui);\r\n    this.gui.float(300, 10, 1);\r\n  }\r\n  \r\n  setsize() {\r\n    var w = window.innerWidth, h = window.innerHeight;\r\n    \r\n    var eventfire = this.lastsize[0] != w || this.lastsize[1] != h;\r\n    \r\n    this.lastsize[0] = w;\r\n    this.lastsize[1] = h;\r\n    \r\n    //if (this.canvas.width != w)\r\n    //  this.canvas.width = w;\r\n    //if (this.canvas.height != h)\r\n    //  this.canvas.height = h;\r\n    \r\n    if (eventfire)\r\n      this.screen.on_resize([w, h]);\r\n  }\r\n  \r\n  draw() {\r\n    if (this.canvas === undefined) {\r\n      window.redraw_all();\r\n      return;\r\n    }\r\n    \r\n    this.setsize();\r\n\r\n    this.screen.draw();\r\n    \r\n    //this.g.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n    //if (this.image !== undefined) {\r\n    //  this.g.putImageData(this.image, 20, 20);\r\n    //}\r\n\r\n  }\r\n  \r\n  genFile() {\r\n    return JSON.stringify(this);\r\n  }\r\n  \r\n  save() {\r\n    localStorage[STARTUP_FILE_NAME] = this.genFile();\r\n  }\r\n      \r\n  load(buf) {\r\n    buf = buf === undefined ?  localStorage[STARTUP_FILE_NAME] : buf;\r\n    \r\n    try {\r\n      this.loadJSON(JSON.parse(buf));\r\n      this.gui.load();\r\n    } catch (error) {\r\n      util.print_stack(error);\r\n      \r\n      console.warn(\"Failed to load start-up file\");\r\n      return false;\r\n    }\r\n    \r\n    this.gui.update();\r\n    return true;\r\n  }\r\n  \r\n  toJSON() {\r\n    return {\r\n      version : cconst.APP_VERSION,\r\n      config  : config\r\n    };\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    \r\n    //console.log(obj.config, \"yay\");\r\n    \r\n    if (obj.config !== undefined) {\r\n      config.loadJSON(obj.config);\r\n    }\r\n    \r\n    window.redraw_all();\r\n    return this;\r\n  }\r\n  \r\n  on_resize(newsize) {\r\n    console.log(\"resize event\");\r\n    \r\n    this.screen.on_resize(newsize);\r\n  }\r\n  \r\n  on_mousedown(e) {\r\n  }\r\n  \r\n  on_mousemove(e) {\r\n  }\r\n  \r\n  on_mouseup(e) {\r\n  }\r\n  \r\n  menuTest() {\r\n    console.log(\"menu test!\");\r\n    \r\n    let menu = document.createElement(\"menu-x\");\r\n    \r\n    menu.addItem(\"one\");\r\n    menu.addItem(\"two\");\r\n    menu.addItem(\"three\");\r\n    menu.addItem(\"test\");\r\n    menu.addItem(\"Item\");\r\n    menu.addItem(\"Triangle\");\r\n    menu.addItem(\"Vertex\");\r\n    \r\n    this.screen.appendChild(menu);\r\n    let mpos = this.screen.mpos;\r\n    let x = mpos[0], y = mpos[1];\r\n    \r\n    menu.start();\r\n    menu.float(x, y, 50);\r\n    return;\r\n    \r\n    let dpi = ui_base.UIBase.getDPI();\r\n    let rect = menu.dom.getClientRects();\r\n    let maxy = window.innerHeight - 10;\r\n    let maxx = window.innerWidth - 10;\r\n    \r\n    console.log(rect.length > 0 ? rect[0] : undefined)\r\n    \r\n    if (rect.length > 0) {\r\n      rect = rect[0];\r\n      console.log(y + rect.height);\r\n      if (y + rect.height > maxy) {\r\n        console.log(\"greater\");\r\n        y = maxy - rect.height - 1;\r\n      }\r\n      \r\n      if (x + rect.width > maxx) {\r\n        console.log(\"greater\");\r\n        x = maxx - rect.width - 1;\r\n      }\r\n    }\r\n    \r\n    menu.float(x, y, 50);\r\n  }\r\n  \r\n  on_tick() {\r\n    this.setsize();\r\n    \r\n    /*\r\n    if (util.time_ms() - this.last_save > 900) {\r\n      console.log(\"autosaving\");\r\n      this.save();\r\n      \r\n      this.last_save = util.time_ms();\r\n    }\r\n    //*/\r\n  }\r\n  \r\n  on_keydown(e) {\r\n\r\n    switch (e.keyCode) {\r\n      case 87: //wkey\r\n        this.menuTest();\r\n        break;\r\n      case 75: //kkey\r\n        this.screen.splitTool();\r\n        break;\r\n      case 67: //ckey\r\n        this.screen.areaDragTool();\r\n        break;\r\n      case 90: //zkey\r\n        if (e.ctrlKey && e.shiftKey && !e.altKey) {\r\n          this.toolstack.redo();\r\n          window.redraw_all();\r\n        } else if (e.ctrlKey && !e.altKey) {\r\n          this.toolstack.undo();\r\n          window.redraw_all();\r\n        }\r\n        break;\r\n      case 89: //ykey\r\n        if (e.ctrlKey && !e.shiftKey && !e.altKey) {\r\n          this.toolstack.redo();\r\n          window.redraw_all();\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport function start() {\r\n  if (window._appstate !== undefined) { \r\n    //already initialized\r\n    return;\r\n  }\r\n  \r\n  window._appstate = new AppState();\r\n  _appstate.makeScreen();\r\n  \r\n  //_appstate.pushModal(_appstate.screen, true);\r\n  \r\n  var animreq = undefined;\r\n  function dodraw() {\r\n    animreq = undefined;\r\n    _appstate.draw();\r\n  }\r\n  \r\n  window.redraw_all = function redraw_all() {\r\n    if (animreq !== undefined) {\r\n      return;\r\n    }\r\n    \r\n    animreq = requestAnimationFrame(dodraw);\r\n  }\r\n  \r\n  if (STARTUP_FILE_NAME in localStorage) {\r\n    _appstate.load();\r\n    window.redraw_all();\r\n  }\r\n  \r\n  window.setInterval(function() {\r\n    _appstate.on_tick();\r\n  }, 250);\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/app.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "variable",
    "name": "Icons",
    "memberof": "scripts/app.js",
    "static": true,
    "longname": "scripts/app.js~Icons",
    "access": "public",
    "export": false,
    "importPath": "./scripts/app.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 50,
    "kind": "variable",
    "name": "PackFlags",
    "memberof": "scripts/app.js",
    "static": true,
    "longname": "scripts/app.js~PackFlags",
    "access": "public",
    "export": false,
    "importPath": "./scripts/app.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "getScreen",
    "memberof": "scripts/app.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/app.js~getScreen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/app.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 52,
    "kind": "class",
    "name": "CanvasArea",
    "memberof": "scripts/app.js",
    "static": true,
    "longname": "scripts/app.js~CanvasArea",
    "access": "public",
    "export": true,
    "importPath": "./scripts/app.js",
    "importStyle": "{CanvasArea}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ScreenArea.js~ScreenArea.Area"
    ]
  },
  {
    "__docId__": 53,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true
  },
  {
    "__docId__": 54,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/app.js~CanvasArea",
    "static": false,
    "longname": "scripts/app.js~CanvasArea#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 55,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/app.js~CanvasArea",
    "static": false,
    "longname": "scripts/app.js~CanvasArea#g",
    "access": "public",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 56,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#init",
    "access": "public",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 57,
    "kind": "method",
    "name": "remakeUI",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#remakeUI",
    "access": "public",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 58,
    "kind": "member",
    "name": "ui",
    "memberof": "scripts/app.js~CanvasArea",
    "static": false,
    "longname": "scripts/app.js~CanvasArea#ui",
    "access": "public",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/app.js~CanvasArea.define",
    "access": "public",
    "description": null,
    "lineNumber": 185,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"areaname\": string, \"uiname\": string, \"areatype\": *}"
      ]
    }
  },
  {
    "__docId__": 60,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#copy",
    "access": "public",
    "description": null,
    "lineNumber": 192,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 61,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#draw",
    "access": "public",
    "description": null,
    "lineNumber": 200,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 62,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 63,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~CanvasArea#update",
    "access": "public",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 64,
    "kind": "method",
    "name": "fromSTRUCT",
    "memberof": "scripts/app.js~CanvasArea",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/app.js~CanvasArea.fromSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 225,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "class",
    "name": "AppState",
    "memberof": "scripts/app.js",
    "static": true,
    "longname": "scripts/app.js~AppState",
    "access": "public",
    "export": true,
    "importPath": "./scripts/app.js",
    "importStyle": "{AppState}",
    "description": null,
    "lineNumber": 245,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/events.js~events.EventHandler"
    ]
  },
  {
    "__docId__": 66,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 246,
    "undocument": true
  },
  {
    "__docId__": 67,
    "kind": "member",
    "name": "lastsize",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#lastsize",
    "access": "public",
    "description": null,
    "lineNumber": 249,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 68,
    "kind": "member",
    "name": "last_save",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#last_save",
    "access": "public",
    "description": null,
    "lineNumber": 251,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 69,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 253,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 70,
    "kind": "member",
    "name": "toolstack",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#toolstack",
    "access": "public",
    "description": null,
    "lineNumber": 254,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 71,
    "kind": "member",
    "name": "_modal_dom_root",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#_modal_dom_root",
    "access": "private",
    "description": null,
    "lineNumber": 256,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 72,
    "kind": "member",
    "name": "image",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#image",
    "access": "public",
    "description": null,
    "lineNumber": 261,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 73,
    "kind": "member",
    "name": "enumval",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#enumval",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 74,
    "kind": "member",
    "name": "sliderval",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#sliderval",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 75,
    "kind": "member",
    "name": "vec3",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#vec3",
    "access": "public",
    "description": null,
    "lineNumber": 264,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 76,
    "kind": "member",
    "name": "color",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#color",
    "access": "public",
    "description": null,
    "lineNumber": 265,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 77,
    "kind": "method",
    "name": "initAPI",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#initAPI",
    "access": "public",
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 78,
    "kind": "member",
    "name": "api",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#api",
    "access": "public",
    "description": null,
    "lineNumber": 269,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 79,
    "kind": "method",
    "name": "makeScreen",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#makeScreen",
    "access": "public",
    "description": null,
    "lineNumber": 292,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 80,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#screen",
    "access": "public",
    "description": null,
    "lineNumber": 293,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 81,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 83,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 84,
    "kind": "member",
    "name": "gui",
    "memberof": "scripts/app.js~AppState",
    "static": false,
    "longname": "scripts/app.js~AppState#gui",
    "access": "public",
    "description": null,
    "lineNumber": 336,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 85,
    "kind": "method",
    "name": "setsize",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#setsize",
    "access": "public",
    "description": null,
    "lineNumber": 344,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 86,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#draw",
    "access": "public",
    "description": null,
    "lineNumber": 361,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 87,
    "kind": "method",
    "name": "genFile",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#genFile",
    "access": "public",
    "description": null,
    "lineNumber": 379,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 88,
    "kind": "method",
    "name": "save",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#save",
    "access": "public",
    "description": null,
    "lineNumber": 383,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 89,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#load",
    "access": "public",
    "description": null,
    "lineNumber": 387,
    "undocument": true,
    "params": [
      {
        "name": "buf",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 90,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 404,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"version\": *, \"config\": *}"
      ]
    }
  },
  {
    "__docId__": 91,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 411,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 92,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 423,
    "undocument": true,
    "params": [
      {
        "name": "newsize",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 93,
    "kind": "method",
    "name": "on_mousedown",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_mousedown",
    "access": "public",
    "description": null,
    "lineNumber": 429,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 94,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 432,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 95,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 435,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 96,
    "kind": "method",
    "name": "menuTest",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#menuTest",
    "access": "public",
    "description": null,
    "lineNumber": 438,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 97,
    "kind": "method",
    "name": "on_tick",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_tick",
    "access": "public",
    "description": null,
    "lineNumber": 483,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 98,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/app.js~AppState",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/app.js~AppState#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 496,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 99,
    "kind": "function",
    "name": "start",
    "memberof": "scripts/app.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/app.js~start",
    "access": "public",
    "export": true,
    "importPath": "./scripts/app.js",
    "importStyle": "{start}",
    "description": null,
    "lineNumber": 527,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 100,
    "kind": "file",
    "name": "scripts/config.js",
    "content": "class Config {\n  constructor() {\n    this.EXAMPLE_PARAM = 128;\n    this.EXAMPLE_OPTION = false;\n    this.EXAMPLE_ENUM = 0;\n  }\n  \n  copy() {\n    let ret = JSON.parse(JSON.stringify(this));\n    \n    ret.copy = this.copy;\n    ret.loadJSON = this.loadJSON;\n    ret.toJSON = this.toJSON;\n    \n    return ret;\n  }\n\n  toJSON() {\n    let ret = {};\n    \n    for (let k in this) {\n      let v = this[k];\n      \n      if (typeof v != \"function\") {\n        ret[k] = v;\n      }\n    }\n    \n    return ret;\n  } \n\n  loadJSON(obj) {\n    for (let k in obj) {\n      let v = obj[k];\n      \n      if (typeof v == \"function\" || (typeof v == \"object\" && v.is_new_curve)) {\n        continue;\n      }\n      \n      if (!(k in this)) {\n        console.log(\"unknown config key\", k);\n        continue;\n      }\n      \n      this[k] = obj[k];\n    }\n    \n    return this;\n  }\n}\n\nvar config = new Config();\nexport default config;\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/config.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 101,
    "kind": "class",
    "name": "Config",
    "memberof": "scripts/config.js",
    "static": true,
    "longname": "scripts/config.js~Config",
    "access": "public",
    "export": true,
    "importPath": "./scripts/config.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "pseudoExport": true,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 102,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/config.js~Config",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/config.js~Config#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 2,
    "undocument": true
  },
  {
    "__docId__": 103,
    "kind": "member",
    "name": "EXAMPLE_PARAM",
    "memberof": "scripts/config.js~Config",
    "static": false,
    "longname": "scripts/config.js~Config#EXAMPLE_PARAM",
    "access": "public",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 104,
    "kind": "member",
    "name": "EXAMPLE_OPTION",
    "memberof": "scripts/config.js~Config",
    "static": false,
    "longname": "scripts/config.js~Config#EXAMPLE_OPTION",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 105,
    "kind": "member",
    "name": "EXAMPLE_ENUM",
    "memberof": "scripts/config.js~Config",
    "static": false,
    "longname": "scripts/config.js~Config#EXAMPLE_ENUM",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 106,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/config.js~Config",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/config.js~Config#copy",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 107,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/config.js~Config",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/config.js~Config#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 108,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/config.js~Config",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/config.js~Config#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 109,
    "kind": "member",
    "name": "[k]",
    "memberof": "scripts/config.js~Config",
    "static": false,
    "longname": "scripts/config.js~Config#[k]",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 110,
    "kind": "variable",
    "name": "config",
    "memberof": "scripts/config.js",
    "static": true,
    "longname": "scripts/config.js~config",
    "access": "public",
    "export": true,
    "importPath": "./scripts/config.js",
    "importStyle": "config",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "type": {
      "types": [
        "scripts/config.js~Config"
      ]
    }
  },
  {
    "__docId__": 111,
    "kind": "file",
    "name": "scripts/const.js",
    "content": "export var DEBUG = {\n  screenborders : false\n};\n\nif (window.DEBUG !== undefined) {\n  window.DEBUG = DEBUG;\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/const.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 112,
    "kind": "variable",
    "name": "DEBUG",
    "memberof": "scripts/const.js",
    "static": true,
    "longname": "scripts/const.js~DEBUG",
    "access": "public",
    "export": true,
    "importPath": "./scripts/const.js",
    "importStyle": "{DEBUG}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"screenborders\": *}"
      ]
    }
  },
  {
    "__docId__": 113,
    "kind": "file",
    "name": "scripts/context.js",
    "content": "import * as util from './util.js';\r\n\r\n/*\r\nsee doc_src/context.md\r\n*/\r\n\r\nexport const ContextFlags = {\r\n  IS_VIEW : 1\r\n};\r\n\r\nclass InheritFlag {\r\n  constructor(data) {\r\n    this.data = data;\r\n  }\r\n}\r\n\r\nlet __idgen = 1;\r\n\r\nif (Symbol.ContextID === undefined) {\r\n  Symbol.ContextID = Symbol(\"ContextID\");\r\n}\r\n\r\nif (Symbol.CachedDef === undefined) {\r\n  Symbol.CachedDef = Symbol(\"CachedDef\");\r\n}\r\n\r\nexport const OverlayClasses = [];\r\n\r\nexport class ContextOverlay {\r\n  constructor(appstate) {\r\n    this.ctx = undefined; //owning context\r\n    this._state = appstate;\r\n  }\r\n\r\n  get state() {\r\n    return this._state;\r\n  }\r\n\r\n  onRemove(have_new_file=false) {\r\n  }\r\n\r\n  copy() {\r\n    return new this.constructor(this._state);\r\n  }\r\n\r\n  validate() {\r\n    throw new Error(\"Implement me!\");\r\n  }\r\n\r\n\r\n  //base classes override this\r\n  static contextDefine() {\r\n    throw new Error(\"implement me!\");\r\n    return {\r\n      name   :   \"\",\r\n      flag   :   0\r\n    }\r\n  }\r\n\r\n  //don't override this\r\n  static resolveDef() {\r\n    if (this.hasOwnProperty(Symbol.CachedDef)) {\r\n      return this[Symbol.CachedDef];\r\n    }\r\n\r\n    let def2 = Symbol.CachedDef = {};\r\n\r\n    let def = this.contextDefine();\r\n\r\n    if (def === undefined) {\r\n      def = {};\r\n    }\r\n\r\n    for (let k in def) {\r\n      def2[k] = def[k];\r\n    }\r\n\r\n    if (!(\"flag\") in def) {\r\n      def2.flag = Context.inherit(0);\r\n    }\r\n\r\n    let parents = [];\r\n    let p = util.getClassParent(this);\r\n\r\n    while (p && p !== ContextOverlay) {\r\n      parents.push(p);\r\n      p = util.getClassParent(p);\r\n    }\r\n\r\n    if (def2.flag instanceof InheritFlag) {\r\n      let flag = def2.flag.data;\r\n      for (let p of parents) {\r\n        let def = p.contextDefine();\r\n\r\n        if (!def.flag) {\r\n          continue;\r\n        }else if (def.flag instanceof InheritFlag) {\r\n          flag |= def.flag.data;\r\n        } else {\r\n          flag |= def.flag;\r\n          //don't go past non-inheritable parents\r\n          break;\r\n        }\r\n      }\r\n\r\n      def2.flag = flag;\r\n    }\r\n\r\n    return def2;\r\n  }\r\n}\r\n\r\nexport const excludedKeys = new Set([\"onRemove\", \"reset\", \"toString\",\r\n  \"valueOf\", \"copy\", \"next\", \"save\", \"load\", \"clear\", \"hasOwnProperty\",\r\n  \"toLocaleString\", \"constructor\", \"propertyIsEnumerable\", \"isPrototypeOf\"]);\r\n\r\nexport class LockedContext {\r\n  constructor(ctx) {\r\n    this.props = {};\r\n\r\n    this.load(ctx);\r\n  }\r\n\r\n  load(ctx) {\r\n    let keys = util.getAllKeys(ctx);\r\n\r\n    for (let k of keys) {\r\n      let v;\r\n\r\n      try {\r\n        v = ctx[k];\r\n      } catch (error) {\r\n        console.warn(\"failed to look up property in context: \", k);\r\n        continue;\r\n      }\r\n\r\n\r\n    }\r\n  }\r\n}\r\n\r\nlet next_key = {};\r\nlet idgen = 1;\r\n\r\nexport class Context {\r\n  constructor() {\r\n    this._stack = [];\r\n  }\r\n\r\n  clear(have_new_file=false) {\r\n    for (let overlay of this._stack) {\r\n      overlay.onRemove(have_new_file);\r\n    }\r\n\r\n    this._stack = [];\r\n  }\r\n\r\n  //this is implemented by child classes\r\n  //it should load the same default overlays as in constructor\r\n  reset(have_new_file=false) {\r\n    this.clear(have_new_file);\r\n  }\r\n\r\n  //returns a new context with overriden properties\r\n  //unlike pushOverlay, overrides can be a simple object\r\n  override(overrides) {\r\n    if (overrides.copy === undefined) {\r\n      overrides.copy = function() {\r\n        return Object.assign({}, this);\r\n      }\r\n    }\r\n\r\n    let ctx = this.copy();\r\n    ctx.pushOverlay(overrides);\r\n    return ctx;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new this.constructor();\r\n\r\n    for (let item of this._stack) {\r\n      ret.pushOverlay(item.copy());\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   Used by overlay property getters.  If returned,\r\n   the next overlay in the struct will have its getter used.\r\n\r\n   Example:\r\n\r\n   class overlay {\r\n      get scene() {\r\n        if (some_reason) {\r\n          return Context.super();\r\n        }\r\n\r\n        return something_else;\r\n      }\r\n    }\r\n   */\r\n  static super() {\r\n    return next_key;\r\n  }\r\n\r\n  ensureProperty(name) {\r\n    if (this.hasOwnProperty(name)) {\r\n      return;\r\n    }\r\n\r\n    let inside_map = {};\r\n\r\n    Object.defineProperty(this, name, {\r\n      get : function() {\r\n        let stack = this._stack;\r\n\r\n        if (DEBUG.contextSystem) {\r\n          console.log(name, inside_map);\r\n        }\r\n\r\n        for (let i=stack.length-1; i >= 0; i--) {\r\n          let overlay = stack[i];\r\n          let ret = next_key;\r\n\r\n          if (DEBUG.contextSystem) {\r\n            console.log(overlay[Symbol.ContextID], overlay);\r\n          }\r\n\r\n          if (inside_map[overlay[Symbol.ContextID]]) {\r\n            continue;\r\n          }\r\n\r\n          if (overlay.__allKeys.has(name)) {\r\n            if (DEBUG.contextSystem) {\r\n              console.log(\"getting value\");\r\n            }\r\n\r\n            inside_map[overlay[Symbol.ContextID]] = 1;\r\n\r\n            try {\r\n              ret = overlay[name];\r\n            } catch (error) {\r\n              inside_map[overlay[Symbol.ContextID]] = 0;\r\n              throw error;\r\n            }\r\n\r\n            inside_map[overlay[Symbol.ContextID]] = 0;\r\n          }\r\n\r\n          if (ret !== next_key) {\r\n            return ret;\r\n          }\r\n        }\r\n      }, set : function() {\r\n        throw new Error(\"Cannot set ctx properties\")\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Returns a new context that doesn't\r\n   * contain any direct object references\r\n   * except for .state .datalib and .api, but\r\n   * instead uses those three to look up references\r\n   * on property access.\r\n   * */\r\n  toLocked() {\r\n    return new LockedContext(this);\r\n  }\r\n\r\n  pushOverlay(overlay) {\r\n    if (!overlay.hasOwnProperty(Symbol.ContextID)) {\r\n      overlay[Symbol.ContextID] = idgen++;\r\n    }\r\n\r\n    let keys = new Set();\r\n    for (let key of util.getAllKeys(overlay)) {\r\n      if (!excludedKeys.has(key) && !(typeof key === \"string\" && key[0] === \"_\")) {\r\n        keys.add(key);\r\n      }\r\n    }\r\n\r\n    overlay.ctx = this;\r\n\r\n    if (overlay.__allKeys === undefined) {\r\n      overlay.__allKeys = keys;\r\n    }\r\n\r\n    for (let k of keys) {\r\n      let bad = typeof k === \"symbol\" || excludedKeys.has(k);\r\n      bad = bad || (typeof k === \"string\" && k[0] === \"_\");\r\n      bad = bad || (typeof k === \"string\" && k.endsWith(\"_save\"));\r\n      bad = bad || (typeof k === \"string\" && k.endsWith(\"_load\"));\r\n\r\n      if (bad) {\r\n        continue;\r\n      }\r\n\r\n      this.ensureProperty(k);\r\n    }\r\n\r\n    if (this._stack.indexOf(overlay) >= 0) {\r\n      console.warn(\"Overlay already added once\");\r\n      if (this._stack[this._stack.length-1] === overlay) {\r\n        console.warn(\"  Definitely an error, overlay is already at top of stack\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._stack.push(overlay);\r\n  }\r\n\r\n  popOverlay(overlay) {\r\n    if (overlay !== this._stack[this._stack.length-1]) {\r\n      console.warn(\"Context.popOverlay called in error\", overlay);\r\n      return;\r\n    }\r\n\r\n    overlay.onRemove();\r\n    this._stack.pop();\r\n  }\r\n\r\n  removeOverlay(overlay) {\r\n    if (this._stack.indexOf(overlay) < 0) {\r\n      console.warn(\"Context.removeOverlay called in error\", overlay);\r\n      return;\r\n    }\r\n\r\n    overlay.onRemove();\r\n    this._stack.remove(overlay);\r\n  }\r\n\r\n  static inherit(data) {\r\n    return new InheritFlag(data);\r\n  }\r\n\r\n  static register(cls) {\r\n    if (cls[Symbol.ContextID]) {\r\n      console.warn(\"Tried to register same class twice:\", cls);\r\n      return;\r\n    }\r\n\r\n    cls[Symbol.ContextID] = __idgen++;\r\n    OverlayClasses.push(cls);\r\n  }\r\n}\r\n\r\nexport function test() {\r\n  function testInheritance() {\r\n    class Test0 extends ContextOverlay {\r\n      static contextDefine() {\r\n        return {\r\n          flag: 1\r\n        }\r\n      }\r\n    }\r\n\r\n    class Test1 extends Test0 {\r\n      static contextDefine() {\r\n        return {\r\n          flag: 2\r\n        }\r\n      }\r\n    }\r\n\r\n    class Test2 extends Test1 {\r\n      static contextDefine() {\r\n        return {\r\n          flag: Context.inherit(4)\r\n        }\r\n      }\r\n    }\r\n\r\n    class Test3 extends Test2 {\r\n      static contextDefine() {\r\n        return {\r\n          flag: Context.inherit(8)\r\n        }\r\n      }\r\n    }\r\n\r\n    class Test4 extends Test3 {\r\n      static contextDefine() {\r\n        return {\r\n          flag: Context.inherit(16)\r\n        }\r\n      }\r\n    }\r\n\r\n    return Test4.resolveDef().flag === 30;\r\n  }\r\n\r\n  return testInheritance();\r\n}\r\n\r\nif (!test()) {\r\n  throw new Error(\"Context test failed\");\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/context.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 114,
    "kind": "variable",
    "name": "ContextFlags",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~ContextFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{ContextFlags}",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "{\"IS_VIEW\": number}"
      ]
    }
  },
  {
    "__docId__": 115,
    "kind": "class",
    "name": "InheritFlag",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~InheritFlag",
    "access": "public",
    "export": false,
    "importPath": "./scripts/context.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 116,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/context.js~InheritFlag",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~InheritFlag#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 12,
    "undocument": true
  },
  {
    "__docId__": 117,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/context.js~InheritFlag",
    "static": false,
    "longname": "scripts/context.js~InheritFlag#data",
    "access": "public",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 118,
    "kind": "variable",
    "name": "__idgen",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~__idgen",
    "access": "private",
    "export": false,
    "importPath": "./scripts/context.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 119,
    "kind": "variable",
    "name": "OverlayClasses",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~OverlayClasses",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{OverlayClasses}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 120,
    "kind": "class",
    "name": "ContextOverlay",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~ContextOverlay",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{ContextOverlay}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 121,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true
  },
  {
    "__docId__": 122,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/context.js~ContextOverlay",
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 123,
    "kind": "member",
    "name": "_state",
    "memberof": "scripts/context.js~ContextOverlay",
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#_state",
    "access": "private",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 124,
    "kind": "get",
    "name": "state",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#state",
    "access": "public",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 125,
    "kind": "method",
    "name": "onRemove",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#onRemove",
    "access": "public",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "params": [
      {
        "name": "have_new_file",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 126,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#copy",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 127,
    "kind": "method",
    "name": "validate",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~ContextOverlay#validate",
    "access": "public",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 128,
    "kind": "method",
    "name": "contextDefine",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~ContextOverlay.contextDefine",
    "access": "public",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": *, \"flag\": *}"
      ]
    }
  },
  {
    "__docId__": 129,
    "kind": "method",
    "name": "resolveDef",
    "memberof": "scripts/context.js~ContextOverlay",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~ContextOverlay.resolveDef",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 130,
    "kind": "variable",
    "name": "excludedKeys",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~excludedKeys",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{excludedKeys}",
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 131,
    "kind": "class",
    "name": "LockedContext",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~LockedContext",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{LockedContext}",
    "description": null,
    "lineNumber": 117,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 132,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/context.js~LockedContext",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~LockedContext#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 118,
    "undocument": true
  },
  {
    "__docId__": 133,
    "kind": "member",
    "name": "props",
    "memberof": "scripts/context.js~LockedContext",
    "static": false,
    "longname": "scripts/context.js~LockedContext#props",
    "access": "public",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 134,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/context.js~LockedContext",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~LockedContext#load",
    "access": "public",
    "description": null,
    "lineNumber": 124,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 135,
    "kind": "variable",
    "name": "next_key",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~next_key",
    "access": "public",
    "export": false,
    "importPath": "./scripts/context.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 142,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 136,
    "kind": "variable",
    "name": "idgen",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~idgen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/context.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 137,
    "kind": "class",
    "name": "Context",
    "memberof": "scripts/context.js",
    "static": true,
    "longname": "scripts/context.js~Context",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{Context}",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 138,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 146,
    "undocument": true
  },
  {
    "__docId__": 139,
    "kind": "member",
    "name": "_stack",
    "memberof": "scripts/context.js~Context",
    "static": false,
    "longname": "scripts/context.js~Context#_stack",
    "access": "private",
    "description": null,
    "lineNumber": 147,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 140,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#clear",
    "access": "public",
    "description": null,
    "lineNumber": 150,
    "undocument": true,
    "params": [
      {
        "name": "have_new_file",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 142,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#reset",
    "access": "public",
    "description": null,
    "lineNumber": 160,
    "undocument": true,
    "params": [
      {
        "name": "have_new_file",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 143,
    "kind": "method",
    "name": "override",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#override",
    "access": "public",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [
      {
        "name": "overrides",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 144,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#copy",
    "access": "public",
    "description": null,
    "lineNumber": 178,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 145,
    "kind": "method",
    "name": "super",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~Context.super",
    "access": "public",
    "description": "Used by overlay property getters.  If returned,\nthe next overlay in the struct will have its getter used.\n\nExample:\n\nclass overlay {\nget scene() {\nif (some_reason) {\nreturn Context.super();\n}\n\nreturn something_else;\n}\n}",
    "lineNumber": 204,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 146,
    "kind": "method",
    "name": "ensureProperty",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#ensureProperty",
    "access": "public",
    "description": null,
    "lineNumber": 208,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 147,
    "kind": "method",
    "name": "toLocked",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#toLocked",
    "access": "public",
    "description": "Returns a new context that doesn't\ncontain any direct object references\nexcept for .state .datalib and .api, but\ninstead uses those three to look up references\non property access.",
    "lineNumber": 269,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 148,
    "kind": "method",
    "name": "pushOverlay",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#pushOverlay",
    "access": "public",
    "description": null,
    "lineNumber": 273,
    "undocument": true,
    "params": [
      {
        "name": "overlay",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 149,
    "kind": "method",
    "name": "popOverlay",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#popOverlay",
    "access": "public",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "params": [
      {
        "name": "overlay",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 150,
    "kind": "method",
    "name": "removeOverlay",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/context.js~Context#removeOverlay",
    "access": "public",
    "description": null,
    "lineNumber": 325,
    "undocument": true,
    "params": [
      {
        "name": "overlay",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 151,
    "kind": "method",
    "name": "inherit",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~Context.inherit",
    "access": "public",
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/context.js~Context",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~Context.register",
    "access": "public",
    "description": null,
    "lineNumber": 339,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 153,
    "kind": "function",
    "name": "test",
    "memberof": "scripts/context.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/context.js~test",
    "access": "public",
    "export": true,
    "importPath": "./scripts/context.js",
    "importStyle": "{test}",
    "description": null,
    "lineNumber": 350,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 154,
    "kind": "file",
    "name": "scripts/controller.js",
    "content": "import * as toolprop from './toolprop.js';\nimport {ToolOp} from './simple_toolsys.js';\nimport {print_stack} from './util.js';\nimport * as toolprop_abstract from \"./toolprop_abstract.js\";\n\nlet PropFlags = toolprop.PropFlags,\n    PropTypes = toolprop.PropTypes;\n\nexport function isVecProperty(prop) {\n  if (!prop)\n    return false;\n\n  let ok = false;\n\n  ok = ok || prop instanceof toolprop_abstract.Vec2Property;\n  ok = ok || prop instanceof toolprop_abstract.Vec3Property;\n  ok = ok || prop instanceof toolprop_abstract.Vec4Property;\n\n  ok = ok || prop.type === PropTypes.VEC2;\n  ok = ok || prop.type === PropTypes.VEC3;\n  ok = ok || prop.type === PropTypes.VEC4;\n  ok = ok || prop.type === PropTypes.QUAT;\n\n  return ok;\n}\n\nexport const DataFlags = {\n  READ_ONLY : 1\n};\n\nexport class DataPathError extends Error {\n};\n\nexport class ListIface {\n  getStruct(api, list, key) {\n\n  }\n  get(api, list, key) {\n\n  }\n\n  getKey(api, list, obj) {\n\n  }\n\n  getActive(api, list) {\n\n  }\n\n  setActive(api, list, val) {\n\n  }\n\n  set(api, list, key, val) {\n    list[key] = val;\n  }\n\n  getIter() {\n\n  }\n\n  filter(api, list, filter) {\n\n  }\n}\n\nexport class ToolOpIface {\n  constructor() {\n  }\n  \n  static tooldef() {return {\n    uiname      : \"!untitled tool\",\n    icon        : -1,\n    toolpath    : \"logical_module.tool\", //logical_module need not match up to real module name\n    description : undefined,\n    is_modal    : false,\n    inputs      : {}, //tool properties\n    outputs     : {}  //tool properties\n  }}\n};\n\nexport class ModelInterface {\n  constructor() {\n    this.prefix = \"\";\n  }\n  \n  getToolDef(path) {\n    throw new Error(\"implement me\");\n  }\n\n  getToolPathHotkey(ctx, path) {\n    return undefined;\n  }\n\n  get list() {\n    throw new Error(\"implement me\");\n    return ListIface;\n  }\n\n  createTool(path, inputs={}, constructor_argument=undefined) {\n    throw new Error(\"implement me\");\n  }\n  \n  //returns tool class, or undefined if one cannot be found for path\n  parseToolPath(path) {\n    throw new Error(\"implement me\");\n  }\n  \n  execTool(ctx, path, inputs={}, constructor_argument=undefined) {\n    return new Promise((accept, reject) => {\n      let tool = path;\n      \n      try {\n        if (typeof tool == \"string\" || !(tool instanceof ToolOp)) {\n          tool = this.createTool(ctx, path, inputs, constructor_argument);\n        }\n      } catch (error) {\n        print_stack(error);\n        reject(error);\n        return;\n      }\n      \n      //give client a chance to change tool instance directly\n      accept(tool);\n      \n      //execute\n      try {\n        ctx.state.toolstack.execTool(tool, ctx);\n      } catch (error) { //for some reason chrome is suppressing errors\n        print_stack(error);\n        throw error;\n      }\n    });\n  }\n  \n  static toolRegistered(tool) {\n    throw new Error(\"implement me\");\n  }\n  \n  static registerTool(tool) {\n    throw new Error(\"implement me\");\n  }\n  \n  //not yet supported by path.ux's controller implementation\n  massSetProp(ctx, mass_set_path, value) {\n    throw new Error(\"implement me\");\n  }\n  \n  /**\n   * @example\n   *\n   * return {\n   *   obj      : [object owning property key]\n   *   parent   : [parent of obj]\n   *   key      : [property key]\n   *   subkey   : used by flag properties, represents a key within the property\n   *   value    : [value of property]\n   *   prop     : [optional toolprop.ToolProperty representing the property definition]\n   *   struct   : [optional datastruct representing the type, if value is an object]\n   *   mass_set : mass setter string, if controller implementation supports it\n   * }\n   */\n  resolvePath(ctx, path, ignoreExistence) {\n  }\n  \n  setValue(ctx, path, val) {\n    let res = this.resolvePath(ctx, path);\n    let prop = res.prop;\n\n    if (prop !== undefined && (prop.flag & PropFlags.USE_CUSTOM_GETSET)) {\n      prop.setValue(val);\n      return;\n    }\n\n    if (prop !== undefined) {\n      let use_range = (prop.type & (PropTypes.INT | PropTypes.FLOAT));\n\n      use_range = use_range || (res.subkey && (prop.type & (PropTypes.VEC2 | PropTypes.VEC3 | PropTypes.VEC4)));\n      use_range = use_range && prop.range;\n      use_range = use_range && !(prop.range[0] === 0.0 && prop.range[1] === 0.0);\n\n      if (use_range) {\n        val = Math.min(Math.max(val, prop.range[0]), prop.range[1]);\n      }\n    }\n\n    let old = res.obj[res.key];\n\n    if (res.subkey !== undefined && res.prop !== undefined && res.prop.type == PropTypes.ENUM) {\n      let ival = res.prop.values[res.subkey];\n\n      if (val) {\n        res.obj[res.key] = ival;\n      }\n    } else if (res.prop !== undefined && res.prop.type == PropTypes.FLAG) {\n      let ival = res.prop.values[res.subkey];\n\n      if (val) {\n        res.obj[res.key] |= ival;\n      } else {\n        res.obj[res.key] &= ~ival;\n      }\n    } else if (res.subkey !== undefined && isVecProperty(res.prop)) {\n      res.obj[res.subkey] = val;\n    } else if (!(prop !== undefined && prop instanceof ListIface)) {\n      res.obj[res.key] = val;\n    }\n\n    if (prop !== undefined && prop instanceof ListIface) {\n      prop.set(this, res.obj, res.key, val);\n    } else if (prop !== undefined) {\n      prop.dataref = res.obj;\n      prop._fire(\"change\", res.obj[res.key], old);\n    }\n  }\n  \n  getValue(ctx, path) {\n    if (typeof ctx == \"string\") {\n      throw new Error(\"You forgot to pass context to getValue\");\n    }\n\n    let ret = this.resolvePath(ctx, path);\n    \n    if (ret === undefined) {\n      throw new DataPathError(\"invalid path\", path);\n    }\n    \n    if (ret.prop !== undefined && (ret.prop.flag & PropFlags.USE_CUSTOM_GETSET)) {\n      ret.prop.dataref = ret.obj;\n      \n      return ret.prop.getValue();\n    }\n    \n    return this.resolvePath(ctx, path).value;\n  }\n}\n\nlet DataAPIClass = undefined;\nexport function setImplementationClass(cls) {\n  DataAPIClass = cls;\n}\n\nexport function registerTool(cls) {\n  if (DataAPIClass === undefined) {\n    throw new Error(\"data api not initialized properly; call setImplementationClass\");\n  }\n  \n  return DataAPIClass.registerTool(cls);\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/controller.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 155,
    "kind": "variable",
    "name": "PropFlags",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~PropFlags",
    "access": "public",
    "export": false,
    "importPath": "./scripts/controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 156,
    "kind": "function",
    "name": "isVecProperty",
    "memberof": "scripts/controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~isVecProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{isVecProperty}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "prop",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 157,
    "kind": "variable",
    "name": "DataFlags",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~DataFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{DataFlags}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "{\"READ_ONLY\": number}"
      ]
    }
  },
  {
    "__docId__": 158,
    "kind": "class",
    "name": "DataPathError",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~DataPathError",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{DataPathError}",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "interface": false,
    "extends": [
      "Error"
    ]
  },
  {
    "__docId__": 159,
    "kind": "class",
    "name": "ListIface",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~ListIface",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{ListIface}",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 160,
    "kind": "method",
    "name": "getStruct",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#getStruct",
    "access": "public",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 161,
    "kind": "method",
    "name": "get",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#get",
    "access": "public",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 162,
    "kind": "method",
    "name": "getKey",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#getKey",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 163,
    "kind": "method",
    "name": "getActive",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#getActive",
    "access": "public",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 164,
    "kind": "method",
    "name": "setActive",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#setActive",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 165,
    "kind": "method",
    "name": "set",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#set",
    "access": "public",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 166,
    "kind": "method",
    "name": "getIter",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#getIter",
    "access": "public",
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 167,
    "kind": "method",
    "name": "filter",
    "memberof": "scripts/controller.js~ListIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ListIface#filter",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "filter",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 168,
    "kind": "class",
    "name": "ToolOpIface",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~ToolOpIface",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{ToolOpIface}",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 169,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/controller.js~ToolOpIface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ToolOpIface#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true
  },
  {
    "__docId__": 170,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/controller.js~ToolOpIface",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~ToolOpIface.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string, \"icon\": *, \"toolpath\": string, \"description\": *, \"is_modal\": *, \"inputs\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 171,
    "kind": "class",
    "name": "ModelInterface",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~ModelInterface",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{ModelInterface}",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 172,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 83,
    "undocument": true
  },
  {
    "__docId__": 173,
    "kind": "member",
    "name": "prefix",
    "memberof": "scripts/controller.js~ModelInterface",
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#prefix",
    "access": "public",
    "description": null,
    "lineNumber": 84,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 174,
    "kind": "method",
    "name": "getToolDef",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#getToolDef",
    "access": "public",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 175,
    "kind": "method",
    "name": "getToolPathHotkey",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#getToolPathHotkey",
    "access": "public",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 176,
    "kind": "get",
    "name": "list",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#list",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 177,
    "kind": "method",
    "name": "createTool",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#createTool",
    "access": "public",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "inputs",
        "optional": true,
        "types": [
          "{}"
        ],
        "defaultRaw": {},
        "defaultValue": "{}"
      },
      {
        "name": "constructor_argument",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": null
  },
  {
    "__docId__": 178,
    "kind": "method",
    "name": "parseToolPath",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#parseToolPath",
    "access": "public",
    "description": null,
    "lineNumber": 105,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 179,
    "kind": "method",
    "name": "execTool",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#execTool",
    "access": "public",
    "description": null,
    "lineNumber": 109,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "inputs",
        "optional": true,
        "types": [
          "{}"
        ],
        "defaultRaw": {},
        "defaultValue": "{}"
      },
      {
        "name": "constructor_argument",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 180,
    "kind": "method",
    "name": "toolRegistered",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~ModelInterface.toolRegistered",
    "access": "public",
    "description": null,
    "lineNumber": 136,
    "undocument": true,
    "params": [
      {
        "name": "tool",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 181,
    "kind": "method",
    "name": "registerTool",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~ModelInterface.registerTool",
    "access": "public",
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "params": [
      {
        "name": "tool",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 182,
    "kind": "method",
    "name": "massSetProp",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#massSetProp",
    "access": "public",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "mass_set_path",
        "types": [
          "*"
        ]
      },
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 183,
    "kind": "method",
    "name": "resolvePath",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#resolvePath",
    "access": "public",
    "description": "",
    "examples": [
      "\nreturn {\n  obj      : [object owning property key]\n  parent   : [parent of obj]\n  key      : [property key]\n  subkey   : used by flag properties, represents a key within the property\n  value    : [value of property]\n  prop     : [optional toolprop.ToolProperty representing the property definition]\n  struct   : [optional datastruct representing the type, if value is an object]\n  mass_set : mass setter string, if controller implementation supports it\n}"
    ],
    "lineNumber": 163,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "ignoreExistence",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 184,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 185,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/controller.js~ModelInterface",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/controller.js~ModelInterface#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 217,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 186,
    "kind": "variable",
    "name": "DataAPIClass",
    "memberof": "scripts/controller.js",
    "static": true,
    "longname": "scripts/controller.js~DataAPIClass",
    "access": "public",
    "export": false,
    "importPath": "./scripts/controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 238,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 187,
    "kind": "function",
    "name": "setImplementationClass",
    "memberof": "scripts/controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~setImplementationClass",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{setImplementationClass}",
    "description": null,
    "lineNumber": 239,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 188,
    "kind": "function",
    "name": "registerTool",
    "memberof": "scripts/controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/controller.js~registerTool",
    "access": "public",
    "export": true,
    "importPath": "./scripts/controller.js",
    "importStyle": "{registerTool}",
    "description": null,
    "lineNumber": 243,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 189,
    "kind": "file",
    "name": "scripts/events.js",
    "content": "\"use strict\";\n\nimport * as util from './util.js';\nimport * as simple_events from './simple_events.js';\n\nexport function copyMouseEvent(e) {\n  let ret = {};\n  \n  function bind(func, obj) {\n    return function() {\n      return this._orig.apply(func, arguments);\n    }\n  }\n  \n  let exclude = new Set([\n    //\"prototype\",\n    //\"constructor\",\n    \"__proto__\"\n  ]);\n  \n  ret._orig = e;\n  \n  for (let k in e) {\n    let v = e[k];\n    \n    if (exclude.has(k)) {\n      continue;\n    }\n    \n    if (typeof v == \"function\") {\n      v = bind(v);\n    }\n    \n    ret[k] = v;\n  }\n  \n  return ret;\n}\n\nexport const DomEventTypes = {\n  on_mousemove   : 'mousemove',\n  on_mousedown   : 'mousedown',\n  on_mouseup     : 'mouseup',\n  on_touchstart  : 'touchstart',\n  on_touchcancel : 'touchcanel',\n  on_touchmove   : 'touchmove',\n  on_touchend    : 'touchend',\n  on_mousewheel  : 'mousewheel',\n  on_keydown     : 'keydown',\n  on_keyup       : 'keyup',\n  //on_keypress    : 'keypress'\n};\n\nfunction getDom(dom, eventtype) {\n  if (eventtype.startsWith(\"key\"))\n    return window;\n  return dom;\n}\n\nexport let modalStack = [];\nexport function isModalHead(owner) {\n  return modalStack.length == 0 || \n         modalStack[modalStack.length-1] === owner;\n}\n\nexport class EventHandler {\n  pushModal(dom, _is_root) {\n    this._modalstate = simple_events.pushModalLight(this);\n    return;\n    /*\n    if (!_is_root) {\n      console.trace(\"pushModal called\");\n    }\n    \n    if (this.modal_pushed) {\n      console.trace(\"Error: pushModal called twice\", this, dom);\n      return;\n    }\n    \n    var this2 = this;\n    \n    this.modal_pushed = true;\n    modalStack.push(this);\n    \n    let stop_prop = (func) => {\n      return (e) => {\n        //XXX this isModalHead call really shouldn't be necassary.  argh!\n        if (!isModalHead(this))\n          return;\n        \n        if (!_is_root) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n        \n          func.call(this, e);\n      }\n    }\n    \n    for (var k in DomEventTypes) {\n      var type = DomEventTypes[k];\n      \n      if (this[k] === undefined)\n        continue;\n      \n      if (this[\"__\"+k] === undefined) {\n        this[\"__\"+k] = stop_prop(this[k]);\n      }\n      \n      getDom(dom, type).addEventListener(type, this[\"__\"+k], true);\n    }\n    */\n  }\n  \n  popModal(dom) {\n    if (this._modalstate !== undefined) {\n      simple_events.popModalLight(this._modalstate);\n      this._modalstate = undefined;\n    }\n    return;\n    console.trace(\"popModal called\");\n    \n    var ok = modalStack[modalStack.length-1] === this;\n    ok = ok && this.modal_pushed;\n    \n    if (!ok) {\n      console.trace(\"Error: popModal called but pushModal wasn't\", this, dom);\n      return;\n    }\n    \n    modalStack.pop();\n    \n    for (var k in DomEventTypes) {\n      if (this[\"__\"+k] === undefined)\n        continue;\n\n      var type = DomEventTypes[k];\n      \n      getDom(dom, type).removeEventListener(type, this[\"__\"+k], true);\n    }\n    \n    this.modal_pushed = false;\n  }\n}\n\nexport function pushModal(dom, handlers) {\n  console.warn(\"Deprecated call to pathux.events.pushModal; use api in simple_events.js instead\");\n  let h = new EventHandler();\n  \n  for (let k in handlers) {\n    h[k] = handlers[k];\n  }\n  \n  handlers.popModal = () => {\n    return h.popModal(dom);\n  }\n  \n  h.pushModal(dom, false);\n  \n  return h;\n}\n\nexport var keymap_latin_1 = {\n  \"Space\": 32,\n  \"Escape\" : 27,\n  \"Enter\": 13,\n  \"Up\" : 38,\n  \"Down\" : 40,\n  \"Left\": 37,\n  \"Right\": 39,\n\n  \"Num0\": 96,\n  \"Num1\": 97,\n  \"Num2\": 98,\n  \"Num3\": 99,\n  \"Num4\": 100,\n  \"Num5\": 101,\n  \"Num6\": 102,\n  \"Num7\": 103,\n  \"Num8\": 104,\n  \"Num9\": 105,\n  \"Home\": 36,\n  \"End\": 35,\n  \"Delete\": 46,\n  \"Backspace\": 8,\n  \"Insert\": 45,\n  \"PageUp\": 33,\n  \"PageDown\": 34,\n  \"Tab\" : 9,\n  \"-\" : 189,\n  \"=\" : 187,\n  \"NumPlus\" : 107,\n  \"NumMinus\" : 109,\n  \"Shift\" : 16,\n  \"Ctrl\" : 17,\n  \"Control\" : 17,\n  \"Alt\" : 18\n}\n\nfor (var i=0; i<26; i++) {\n  keymap_latin_1[String.fromCharCode(i+65)] = i+65\n}\nfor (var i=0; i<10; i++) {\n  keymap_latin_1[String.fromCharCode(i+48)] = i+48\n}\n\nfor (var k in keymap_latin_1) {\n  keymap_latin_1[keymap_latin_1[k]] = k;\n}\n\nvar keymap_latin_1_rev = {}\nfor (var k in keymap_latin_1) {\n  keymap_latin_1_rev[keymap_latin_1[k]] = k\n}\n\nexport var keymap = keymap_latin_1;\nexport var reverse_keymap = keymap_latin_1_rev;\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/events.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 190,
    "kind": "function",
    "name": "copyMouseEvent",
    "memberof": "scripts/events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/events.js~copyMouseEvent",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{copyMouseEvent}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 191,
    "kind": "variable",
    "name": "DomEventTypes",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~DomEventTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{DomEventTypes}",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "{\"on_mousemove\": string, \"on_mousedown\": string, \"on_mouseup\": string, \"on_touchstart\": string, \"on_touchcancel\": string, \"on_touchmove\": string, \"on_touchend\": string, \"on_mousewheel\": string, \"on_keydown\": string, \"on_keyup\": string}"
      ]
    }
  },
  {
    "__docId__": 192,
    "kind": "function",
    "name": "getDom",
    "memberof": "scripts/events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/events.js~getDom",
    "access": "public",
    "export": false,
    "importPath": "./scripts/events.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "eventtype",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 193,
    "kind": "variable",
    "name": "modalStack",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~modalStack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{modalStack}",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 194,
    "kind": "function",
    "name": "isModalHead",
    "memberof": "scripts/events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/events.js~isModalHead",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{isModalHead}",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [
      {
        "name": "owner",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 195,
    "kind": "class",
    "name": "EventHandler",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~EventHandler",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{EventHandler}",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 196,
    "kind": "method",
    "name": "pushModal",
    "memberof": "scripts/events.js~EventHandler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/events.js~EventHandler#pushModal",
    "access": "public",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "_is_root",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 197,
    "kind": "member",
    "name": "_modalstate",
    "memberof": "scripts/events.js~EventHandler",
    "static": false,
    "longname": "scripts/events.js~EventHandler#_modalstate",
    "access": "private",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 198,
    "kind": "method",
    "name": "popModal",
    "memberof": "scripts/events.js~EventHandler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/events.js~EventHandler#popModal",
    "access": "public",
    "description": null,
    "lineNumber": 115,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 200,
    "kind": "member",
    "name": "modal_pushed",
    "memberof": "scripts/events.js~EventHandler",
    "static": false,
    "longname": "scripts/events.js~EventHandler#modal_pushed",
    "access": "public",
    "description": null,
    "lineNumber": 142,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 201,
    "kind": "function",
    "name": "pushModal",
    "memberof": "scripts/events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/events.js~pushModal",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{pushModal}",
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "handlers",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 202,
    "kind": "variable",
    "name": "keymap_latin_1",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~keymap_latin_1",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{keymap_latin_1}",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "type": {
      "types": [
        "{\"Space\": number, \"Escape\": number, \"Enter\": number, \"Up\": number, \"Down\": number, \"Left\": number, \"Right\": number, \"Num0\": number, \"Num1\": number, \"Num2\": number, \"Num3\": number, \"Num4\": number, \"Num5\": number, \"Num6\": number, \"Num7\": number, \"Num8\": number, \"Num9\": number, \"Home\": number, \"End\": number, \"Delete\": number, \"Backspace\": number, \"Insert\": number, \"PageUp\": number, \"PageDown\": number, \"Tab\": number, \"-\": number, \"=\": number, \"NumPlus\": number, \"NumMinus\": number, \"Shift\": number, \"Ctrl\": number, \"Control\": number, \"Alt\": number}"
      ]
    }
  },
  {
    "__docId__": 203,
    "kind": "variable",
    "name": "keymap_latin_1_rev",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~keymap_latin_1_rev",
    "access": "public",
    "export": false,
    "importPath": "./scripts/events.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 211,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 204,
    "kind": "variable",
    "name": "keymap",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~keymap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{keymap}",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 205,
    "kind": "variable",
    "name": "reverse_keymap",
    "memberof": "scripts/events.js",
    "static": true,
    "longname": "scripts/events.js~reverse_keymap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/events.js",
    "importStyle": "{reverse_keymap}",
    "description": null,
    "lineNumber": 217,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 206,
    "kind": "file",
    "name": "scripts/FrameManager.js",
    "content": "let _FrameManager = undefined;\r\nimport './ui_widgets2.js';\r\n\r\nimport {DEBUG} from './const.js';\r\nimport {haveModal, pushModalLight, popModalLight} from './simple_events.js';\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as ui from './ui.js';\r\nimport * as ScreenArea from './ScreenArea.js';\r\nimport * as events from './events.js';\r\nimport * as FrameManager_ops from './FrameManager_ops.js';\r\nimport * as math from './math.js';\r\nimport * as ui_colorpicker from './ui_colorpicker.js';\r\nimport * as ui_tabs from './ui_tabs.js';\r\nimport './struct.js';\r\nimport {KeyMap, HotKey} from './simple_events.js';\r\n\r\nlet Area = ScreenArea.Area;\r\n\r\nimport './ui_widgets.js';\r\nimport './ui_tabs.js';\r\nimport './ui_colorpicker2.js';\r\nimport './ui_noteframe.js';\r\nimport './ui_listbox.js';\r\nimport './ui_menu.js';\r\nimport './ui_table.js';\r\n\r\nimport * as ui_menu from './ui_menu.js';\r\n\r\nui_menu.startMenuEventWrangling();\r\n\r\nexport function registerToolStackGetter(func) {\r\n  FrameManager_ops.registerToolStackGetter(func);\r\n}\r\n\r\n//XXX why!!!\r\nwindow._nstructjs = nstructjs;\r\n\r\nlet Vector2 = vectormath.Vector2,\r\n  UIBase = ui_base.UIBase;\r\n\r\nlet update_stack = new Array(8192);\r\nupdate_stack.cur = 0;\r\n\r\nexport class ScreenVert extends Vector2 {\r\n  constructor(pos, id, side) {\r\n    super(pos);\r\n\r\n    this.side = side;\r\n    this.sareas = [];\r\n    this.borders = [];\r\n\r\n    this._id = id;\r\n  }\r\n\r\n  static hash(pos, side) {\r\n    //try to fix a bug where areas collapse into nothingness\r\n    //by hashing outer screenverts differently\r\n\r\n    return pos[0].toFixed(3) + \":\" + pos[1].toFixed(3);\r\n  }\r\n\r\n  valueOf() {\r\n    return ScreenVert.hash(this, this.side);\r\n  }\r\n\r\n  [Symbol.keystr]() {\r\n    return ScreenVert.hash(this, this.side);\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.load(this._vec);\r\n    delete this._vec;\r\n  }\r\n}\r\n\r\nScreenVert.STRUCT = `\r\npathux.ScreenVert {\r\n  _vec : vec2;\r\n}\r\n`;\r\n\r\nexport class ScreenBorder extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.screen = undefined;\r\n    this.v1 = undefined;\r\n    this.v2 = undefined;\r\n    this._id = undefined;\r\n\r\n    this.side = 0; //which side of area are we on, going counterclockwise\r\n\r\n    this.sareas = [];\r\n\r\n    this._innerstyle = document.createElement(\"style\");\r\n    this._style = undefined;\r\n\r\n    this.shadow.appendChild(this._innerstyle);\r\n\r\n    this.inner = document.createElement(\"div\");\r\n    //this.inner.innerText = \"sdfsdfsdf\";\r\n    this.shadow.appendChild(this.inner);\r\n\r\n    this.addEventListener(\"mousedown\", (e) => {\r\n      console.log(this.sareas.length, this.sareas, \"|||||\");\r\n\r\n      if (this.valence < 2) {\r\n        let ok = false;\r\n\r\n        for (let sarea of this.sareas) {\r\n          if (sarea.floating) {\r\n            ok = true;\r\n          }\r\n        }\r\n\r\n        if (!ok) {\r\n          console.log(this, this.sareas);\r\n          console.log(\"ignoring border ScreenArea\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (!this.movable) {\r\n        return;\r\n      }\r\n\r\n      console.log(\"area resize start!\");\r\n      let tool = new FrameManager_ops.AreaResizeTool(this.screen, this, [e.x, e.y]);\r\n\r\n      tool.start();\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    });\r\n  }\r\n\r\n  get valence() {\r\n    let ret = 0; //this.sareas.length;\r\n    let horiz = this.horiz;\r\n\r\n    let visit = {};\r\n\r\n    for (let i = 0; i < 2; i++) {\r\n      let sv = i ? this.v2 : this.v1;\r\n      //console.log(sv);\r\n\r\n      for (let sa of sv.borders) {\r\n        if (sa.horiz != this.horiz)\r\n          continue;\r\n        if (sa._id in visit)\r\n          continue;\r\n\r\n        visit[sa._id] = 1;\r\n\r\n        let a0x = Math.min(this.v1[0], this.v2[0]);\r\n        let a0y = Math.min(this.v1[1], this.v2[1]);\r\n        let a1x = Math.max(this.v1[0], this.v2[0]);\r\n        let a1y = Math.max(this.v1[1], this.v2[1]);\r\n\r\n        let b0x = Math.min(sa.v1[0], sa.v2[0]);\r\n        let b0y = Math.min(sa.v1[1], sa.v2[1]);\r\n        let b1x = Math.min(sa.v1[0], sa.v2[0]);\r\n        let b1y = Math.min(sa.v1[1], sa.v2[1]);\r\n\r\n        let ok;\r\n\r\n        let eps = 0.001;\r\n        if (horiz) {\r\n          ok = (a0y <= b1y + eps && a1y >= a0y - eps);\r\n        } else {\r\n          ok = (a0x <= b1x + eps && a1x >= a0x - eps);\r\n        }\r\n\r\n        if (ok) {\r\n          //console.log(\"found\");\r\n          ret += sa.sareas.length;\r\n        }\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  otherVert(v) {\r\n    if (v === this.v1)\r\n      return this.v2;\r\n    else\r\n      return this.v1;\r\n  }\r\n\r\n  get horiz() {\r\n    let dx = this.v2[0] - this.v1[0];\r\n    let dy = this.v2[1] - this.v1[1];\r\n\r\n    return Math.abs(dx) > Math.abs(dy);\r\n  }\r\n\r\n  setCSS() {\r\n    if (this._style === undefined) {\r\n      this._style = document.createElement(\"style\");\r\n      this.appendChild(this._style);\r\n    }\r\n\r\n    let wid = 8, iwid = 4;\r\n\r\n    let v1 = this.v1, v2 = this.v2;\r\n    let vec = new Vector2(v2).sub(v1);\r\n\r\n    let x = Math.min(v1[0], v2[0]), y = Math.min(v1[1], v2[1]);\r\n    let w, h;\r\n    let cursor, bstyle, mstyle;\r\n\r\n    if (Math.abs(vec[0]) < Math.abs(vec[1])) {\r\n      x -= wid / 2;\r\n\r\n      w = wid;\r\n      h = Math.abs(vec[1]);\r\n\r\n      cursor = 'e-resize';\r\n\r\n      bstyle = \"border-left-style : solid;\\n    border-right-style : solid;\\n\";\r\n      mstyle = \"margin-left : 2px;\\n    margin-right : 2px;\\n    \";\r\n      mstyle += \"height : 100%;\\n    width:${iwid}px;\\n\";\r\n    } else {\r\n      y -= wid / 2;\r\n\r\n      w = Math.abs(vec[0]);\r\n      h = wid;\r\n      cursor = 'n-resize';\r\n      bstyle = \"border-top-style : solid;\\n    border-bottom-style : solid;\\n\";\r\n      mstyle = \"margin-top : 2px;\\n    margin-bottom : 2px;\\n    \";\r\n      mstyle += \"width : 100%;\\n    height:${iwid}px;\\n\";\r\n    }\r\n\r\n    let color = this.getDefault(\"ScreenBorderOuter\");\r\n    if (DEBUG.screenborders) {\r\n      if (!this.movable) {\r\n        color = \"black\";\r\n      }\r\n    }\r\n\r\n    let innerbuf = `\r\n        .screenborder_inner_${this._id} {\r\n          ${bstyle}\r\n          ${mstyle}\r\n          background-color : ${this.getDefault(\"ScreenBorderInner\")};\r\n          border-color : ${color};\r\n          border-width : 1px;\r\n          pointer-events : none;\r\n        }`;\r\n\r\n    let sbuf = `\r\n        .screenborder_${this._id} {\r\n          padding : 0;\r\n          margin : 0;\r\n        }\r\n    `;\r\n\r\n    let ok = this.valence >= 2;\r\n    for (let sarea of this.sareas) {\r\n      ok = ok || sarea.floating;\r\n    }\r\n\r\n    if (ok) {\r\n      sbuf += `\r\n        .screenborder_${this._id}:hover {\r\n          cursor : ${cursor};\r\n        }\r\n      `;\r\n    }\r\n\r\n    this._style.textContent = sbuf;\r\n    this._innerstyle.textContent = innerbuf;\r\n\r\n    this.setAttribute(\"class\", \"screenborder_\" + this._id);\r\n    this.inner.setAttribute(\"class\", \"screenborder_inner_\" + this._id);\r\n\r\n    this.style[\"position\"] = \"absolute\";\r\n    this.style[\"left\"] = x + \"px\";\r\n    this.style[\"top\"] = y + \"px\";\r\n    this.style[\"width\"] = w + \"px\";\r\n    this.style[\"height\"] = h + \"px\";\r\n    this.style[\"z-index\"] = 5;\r\n  }\r\n\r\n  static hash(v1, v2, side) {\r\n    return Math.min(v1._id, v2._id) + \":\" + Math.max(v1._id, v2._id);\r\n  }\r\n\r\n  valueOf() {\r\n    return ScreenBorder.hash(this.v1, this.v2);\r\n  }\r\n\r\n  [Symbol.keystr]() {\r\n    return ScreenBorder.hash(this.v1, this.v2);\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"screenborder-x\"\r\n    };\r\n  }\r\n}\r\n\r\nui_base.UIBase.register(ScreenBorder);\r\n\r\nlet screen_idgen = 0;\r\n\r\nexport class Screen extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.needsTabRecalc = true;\r\n\r\n    this._screen_id = screen_idgen++;\r\n\r\n    this._popups = [];\r\n\r\n    this._ctx = undefined;\r\n\r\n    this.keymap = new KeyMap();\r\n\r\n    this.size = [512, 512];\r\n    this.idgen = 0;\r\n    this.sareas = [];\r\n    this.sareas.active = undefined;\r\n    this.mpos = [0, 0];\r\n\r\n    this.screenverts = [];\r\n    this._vertmap = {};\r\n    this._edgemap = {};\r\n    this._idmap = {};\r\n\r\n    //effective bounds of screen\r\n    this._aabb = [new Vector2(), new Vector2()];\r\n\r\n    this.shadow.addEventListener(\"mousemove\", (e) => {\r\n      this.mpos[0] = e.x;\r\n      this.mpos[1] = e.y;\r\n    });\r\n\r\n    this.shadow.addEventListener(\"touchmove\", (e) => {\r\n      this.mpos[0] = e.touches[0].pageX;\r\n      this.mpos[1] = e.touches[0].pageY;\r\n    });\r\n\r\n  }\r\n\r\n  copy() {\r\n    let ret = document.createElement(this.constructor.define().tagname);\r\n    ret.ctx = this.ctx;\r\n    ret._init();\r\n\r\n    for (let sarea of this.sareas) {\r\n      let sarea2 = sarea.copy(ret);\r\n\r\n      sarea2._ctx = this.ctx;\r\n      sarea2.screen = ret;\r\n      sarea2.parentWidget = ret;\r\n\r\n      ret.appendChild(sarea2);\r\n    }\r\n\r\n    for (let sarea of ret.sareas) {\r\n      sarea.ctx = this.ctx;\r\n      sarea.area.ctx = this.ctx;\r\n\r\n      sarea.area.push_ctx_active();\r\n      sarea._init();\r\n      sarea.area._init();\r\n      sarea.area.pop_ctx_active();\r\n\r\n      for (let area of sarea.editors) {\r\n        area.ctx = this.ctx;\r\n\r\n        area.push_ctx_active();\r\n        area._init();\r\n        area.pop_ctx_active();\r\n      }\r\n    }\r\n\r\n    ret.update();\r\n    ret.regenBorders();\r\n    ret.setCSS();\r\n\r\n    return ret;\r\n  }\r\n\r\n  //pickElement(x, y, sx=0, sy=0, nodeclass=undefined) {\r\n\r\n  //}\r\n\r\n  pickElement(x, y, sx, sy, nodeclass) {\r\n    let ret;\r\n\r\n    for (let popup of this._popups) {\r\n      ret = ret || popup.pickElement(...arguments);\r\n    }\r\n\r\n    ret = ret || super.pickElement(...arguments);\r\n\r\n    return ret;\r\n  }\r\n\r\n  /** makes a popup at x,y and returns a new container-x for it */\r\n  popup(elem_or_x, y, closeOnMouseOut=true) {\r\n    let x;\r\n\r\n    if (typeof elem_or_x === \"object\") {\r\n      let r = elem_or_x.getClientRects()[0];\r\n\r\n      x = r.x;\r\n      y = r.y;\r\n    } else {\r\n      x = elem_or_x;\r\n    }\r\n\r\n    let container = document.createElement(\"container-x\");\r\n\r\n    let remove = container.remove;\r\n    container.remove = () => {\r\n      if (this._popups.indexOf(container) >= 0) {\r\n        this._popups.remove(container);\r\n      }\r\n\r\n      return remove.apply(container, arguments);\r\n    };\r\n\r\n    container.background = this.getDefault(\"BoxSubBG\");\r\n    container.style[\"display\"] = \"float\";\r\n    container.style[\"position\"] = \"absolute\";\r\n    container.style[\"z-index\"] = 205;\r\n    container.style[\"left\"] = x + \"px\";\r\n    container.style[\"top\"] = y + \"px\";\r\n\r\n    this.shadow.appendChild(container);\r\n    this._popups.push(container);\r\n\r\n    let touchstart;\r\n\r\n    let done = false;\r\n    let end = () => {\r\n      if (done) return;\r\n      console.log(\"container end\");\r\n\r\n      this.ctx.screen.removeEventListener(\"touchstart\", touchstart, true);\r\n      this.ctx.screen.removeEventListener(\"touchmove\", touchstart, true);\r\n\r\n      done = true;\r\n      container.remove();\r\n    };\r\n\r\n    container.end = end;\r\n\r\n    touchstart = (e) => {\r\n      //console.log(\"=======================================================popup touch start\");\r\n      //console.log(e);\r\n\r\n      let x = e.touches[0].screenX, y = e.touches[0].screenY;\r\n      let elem = this.pickElement(x, y, 55, 45);\r\n\r\n      if (elem === undefined) {\r\n        if (closeOnMouseOut) {\r\n          end();\r\n        }\r\n        return;\r\n      }\r\n\r\n      let ok = false;\r\n\r\n      while (elem) {\r\n        if (elem === container) {\r\n          ok = true;\r\n          break;\r\n        }\r\n        elem = elem.parentWidget;\r\n      }\r\n\r\n      if (!ok) {\r\n        e.stopPropagation();\r\n\r\n        if (closeOnMouseOut) {\r\n          end();\r\n        }\r\n      }\r\n    };\r\n\r\n    //*\r\n    this.ctx.screen.addEventListener(\"touchstart\", touchstart, true);\r\n    this.ctx.screen.addEventListener(\"touchmove\", touchstart, true);\r\n\r\n    container.addEventListener(\"mouseleave\", (e) => {\r\n      console.log(\"popup mouse leave\");\r\n      if (closeOnMouseOut)\r\n        end();\r\n    });\r\n    container.addEventListener(\"mouseout\", (e) => {\r\n      console.log(\"popup mouse out\");\r\n      if (closeOnMouseOut)\r\n        end();\r\n    });\r\n    //*/\r\n\r\n    this.calcTabOrder();\r\n\r\n    return container;\r\n  }\r\n\r\n  _recalcAABB() {\r\n    let mm = new math.MinMax(2);\r\n\r\n    for (let sarea of this.sareas) {\r\n      this.minmaxArea(sarea, mm);\r\n    }\r\n\r\n    this._aabb[0].load(mm.min);\r\n    this._aabb[1].load(mm.max);\r\n  }\r\n\r\n  get borders() {\r\n    let this2 = this;\r\n\r\n    return (function* () {\r\n      for (let k in this2._edgemap) {\r\n        yield this2._edgemap[k];\r\n      }\r\n    })();\r\n  }\r\n\r\n  //XXX look at if this is referenced anywhere\r\n  load() {\r\n  }\r\n\r\n  //XXX look at if this is referenced anywhere\r\n  save() {\r\n  }\r\n\r\n  remove(trigger_destroy = true) {\r\n    this.unlisten();\r\n\r\n    if (trigger_destroy) {\r\n      return super.remove();\r\n    } else {\r\n      HTMLElement.prototype.remove.call(this);\r\n    }\r\n  }\r\n\r\n  unlisten() {\r\n    if (this.listen_timer !== undefined) {\r\n      window.clearInterval(this.listen_timer);\r\n      this.listen_timer = undefined;\r\n    }\r\n  }\r\n\r\n  listen() {\r\n    ui_menu.setWranglerScreen(this);\r\n\r\n    if (this.listen_timer !== undefined) {\r\n      return; //already listening\r\n    }\r\n\r\n    this.listen_timer = window.setInterval(() => {\r\n      this.update();\r\n    }, 150);\r\n  }\r\n\r\n  _ondestroy() {\r\n    if (ui_menu.getWranglerScreen() === this) {\r\n      //ui_menu.setWranglerScreen(undefined);\r\n    }\r\n\r\n    this.unlisten();\r\n\r\n    //unlike other ondestroy functions, this one physically dismantles the DOM tree\r\n    let recurse = (n, second_pass, parent) => {\r\n      if (n.__pass === second_pass) {\r\n        console.warn(\"CYCLE IN DOM TREE!\", n, parent);\r\n        return;\r\n      }\r\n\r\n      n.__pass = second_pass;\r\n\r\n      n._forEachChildWidget(n2 => {\r\n        if (n === n2)\r\n          return;\r\n        recurse(n2, second_pass, n);\r\n\r\n        try {\r\n          if (!second_pass && !n2.__destroyed) {\r\n            n2.__destroyed = true;\r\n            n2._ondestroy();\r\n          }\r\n        } catch (error) {\r\n          print_stack(error);\r\n          console.log(\"failed to exectue an ondestroy callback\");\r\n        }\r\n\r\n        n2.__destroyed = true;\r\n\r\n        try {\r\n          if (second_pass) {\r\n            n2.remove();\r\n          }\r\n        } catch (error) {\r\n          print_stack(error);\r\n          console.log(\"failed to remove element after ondestroy callback\");\r\n        }\r\n      });\r\n    };\r\n\r\n    let id = ~~(Math.random() * 1024 * 1024);\r\n\r\n    recurse(this, id);\r\n    recurse(this, id + 1);\r\n  }\r\n\r\n  destroy() {\r\n    this._ondestroy();\r\n  }\r\n\r\n  clear() {\r\n    this._ondestroy();\r\n\r\n    this.sareas = [];\r\n    this.sareas.active = undefined;\r\n\r\n    for (let child of list(this.childNodes)) {\r\n      child.remove();\r\n    }\r\n    for (let child of list(this.shadow.childNodes)) {\r\n      child.remove();\r\n    }\r\n  }\r\n\r\n  _test_save() {\r\n    let obj = JSON.parse(JSON.stringify(this));\r\n    console.log(JSON.stringify(this));\r\n\r\n    this.loadJSON(obj);\r\n  }\r\n\r\n  loadJSON(obj, schedule_resize = false) {\r\n    this.clear();\r\n    super.loadJSON();\r\n\r\n    for (let sarea of obj.sareas) {\r\n      let sarea2 = document.createElement(\"screenarea-x\");\r\n\r\n      sarea2.ctx = this.ctx;\r\n      sarea2.screen = this;\r\n\r\n      this.appendChild(sarea2);\r\n\r\n      sarea2.loadJSON(sarea);\r\n    }\r\n\r\n    this.regenBorders();\r\n    this.setCSS();\r\n\r\n    if (schedule_resize) {\r\n      window.setTimeout(() => {\r\n        this.on_resize([window.innerWidth, window.innerHeight]);\r\n      }, 50);\r\n    }\r\n  }\r\n\r\n  static fromJSON(obj, schedule_resize = false) {\r\n    let ret = document.createElement(this.define().tagname);\r\n    return ret.loadJSON(obj, schedule_resize);\r\n  }\r\n\r\n  toJSON() {\r\n    let ret = {\r\n      sareas: this.sareas\r\n    };\r\n\r\n    ret.size = this.size;\r\n    ret.idgen = this.idgen;\r\n\r\n    return Object.assign(super.toJSON(), ret);\r\n  }\r\n\r\n  getHotKey(toolpath) {\r\n    let test = (keymap) => {\r\n      for (let hk of keymap) {\r\n        if (typeof hk.action != \"string\")\r\n          continue;\r\n\r\n        if (hk.action.trim().startsWith(toolpath.trim())) {\r\n          return hk;\r\n        }\r\n      }\r\n    }\r\n\r\n    let ret = test(this.keymap);\r\n    if (ret)\r\n      return ret;\r\n\r\n    if (this.sareas.active && this.sareas.active.keymap) {\r\n      let area = this.sareas.active.area;\r\n\r\n      for (let keymap of area.getKeyMaps()) {\r\n        ret = test(keymap);\r\n\r\n        if (ret)\r\n          return ret;\r\n      }\r\n    }\r\n\r\n    if (ret === undefined) {\r\n      //just to be safe, check all areas in case the\r\n      //context is confused as to which area is currently \"active\"\r\n\r\n      for (let sarea of this.sareas) {\r\n        let area = sarea.area;\r\n\r\n        for (let keymap of area.getKeyMaps()) {\r\n          ret = test(keymap);\r\n\r\n          if (ret) {\r\n            return ret;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  execKeyMap(e) {\r\n    let handled = false;\r\n\r\n    if (this.sareas.active && this.sareas.active.area.keymap) {\r\n      let area = this.sareas.active.area;\r\n      //console.log(area.getKeyMaps());\r\n      for (let keymap of area.getKeyMaps()) {\r\n        if (keymap.handle(this.ctx, e)) {\r\n          handled = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    handled = handled || this.keymap.handle(this.ctx, e);\r\n\r\n    return handled;\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"screen-x\"\r\n    };\r\n  }\r\n\r\n  calcTabOrder() {\r\n    let nodes = [];\r\n    let visit = {};\r\n\r\n    let rec = (n) => {\r\n      let bad = n.tabIndex < 0 || n.tabIndex === undefined || n.tabIndex === null;\r\n\r\n      if (n._id in visit || n.hidden) {\r\n        return;\r\n      }\r\n\r\n      visit[n._id] = 1;\r\n\r\n      if (!bad) {\r\n        n.__pos = n.getClientRects()[0];\r\n        if (n.__pos) {\r\n          nodes.push(n);\r\n        }\r\n      }\r\n\r\n      n._forEachChildWidget((n2) => {\r\n        rec(n2);\r\n      });\r\n    };\r\n\r\n    for (let sarea of this.sareas) {\r\n      rec(sarea);\r\n    }\r\n\r\n    for (let popup of this._popups) {\r\n      rec(popup);\r\n    }\r\n\r\n    let nodes2 = nodes;\r\n    /*\r\n    let nodes2 = [];\r\n    let visit2 = {};\r\n\r\n    for (let node of nodes) {\r\n      let r = node.__pos;\r\n      let elem = this.pickElement(~~(r.x+r.width*0.5), ~~(r.y+r.height*0.5), 2, 2);\r\n\r\n      if (elem === undefined) {\r\n        elem = node;\r\n      }\r\n\r\n      if (elem !== node) {\r\n        //console.log(\"Overlapping leaf UI elements detected:\", elem, node);\r\n      }\r\n\r\n      if (!(elem._id in visit2)) {\r\n        visit2[elem._id] = 1;\r\n        nodes2.push(elem);\r\n      }\r\n    }\r\n    //*/\r\n\r\n    //console.log(\"nodes2\", nodes2);\r\n    for (let i=0; i<nodes2.length; i++) {\r\n      let n = nodes2[i];\r\n\r\n      n.tabIndex = i + 1;\r\n      //console.log(n.tabIndex);\r\n    }\r\n  }\r\n\r\n  drawUpdate() {\r\n    if (window.redraw_all !== undefined) {\r\n      window.redraw_all();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    if (this.needsTabRecalc) {\r\n      this.needsTabRecalc = false;\r\n      this.calcTabOrder();\r\n    }\r\n\r\n    for (let sarea of this.sareas) {\r\n      for (let b of sarea._borders) {\r\n        let movable = this.isBorderMovable(sarea, b);\r\n\r\n        if (movable != b.movable) {\r\n          console.log(\"detected change in movable borders\");\r\n          this.regenBorders();\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this._update_gen) {\r\n      let ret;\r\n\r\n      try {\r\n        ret = this._update_gen.next();\r\n      } catch (error) {\r\n        util.print_stack(error);\r\n        console.log(\"error in update_intern tasklet\");\r\n        this._update_gen = undefined;\r\n        return;\r\n      }\r\n\r\n      if (ret !== undefined && ret.done) {\r\n        this._update_gen = undefined;\r\n      }\r\n    } else {\r\n      this._update_gen = this.update_intern();\r\n    }\r\n  }\r\n\r\n  get ctx() {\r\n    return this._ctx;\r\n  }\r\n\r\n  set ctx(val) {\r\n    this._ctx = val;\r\n\r\n    //fully recurse tree\r\n    let rec = (n) => {\r\n      if (n instanceof UIBase) {\r\n        n.ctx = val;\r\n      }\r\n\r\n      for (let n2 of n.childNodes) {\r\n        rec(n2);\r\n      }\r\n\r\n      if (n.shadow) {\r\n        for (let n2 of n.shadow.childNodes) {\r\n          rec(n2);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let n of this.childNodes) {\r\n      rec(n);\r\n    }\r\n\r\n    for (let n of this.shadow.childNodes) {\r\n      rec(n);\r\n    }\r\n  }\r\n\r\n  //XXX race condition warning\r\n  update_intern() {\r\n    super.update();\r\n    let this2 = this;\r\n\r\n    //ensure each area has proper ctx set\r\n    for (let sarea of this.sareas) {\r\n      sarea.ctx = this.ctx;\r\n    }\r\n\r\n    return (function* () {\r\n      let stack = update_stack;\r\n      stack.cur = 0;\r\n\r\n      let lastn = this2;\r\n\r\n      function push(n) {\r\n        stack[stack.cur++] = n;\r\n      }\r\n\r\n      function pop(n) {\r\n        if (stack.cur < 0) {\r\n          throw new Error(\"Screen.update(): stack overflow!\");\r\n        }\r\n\r\n        return stack[--stack.cur];\r\n      }\r\n\r\n      let ctx = this2.ctx;\r\n\r\n      let SCOPE_POP = Symbol(\"pop\");\r\n      let AREA_CTX_POP = Symbol(\"pop2\");\r\n\r\n      let scopestack = [];\r\n      let areastack = [];\r\n\r\n      let t = util.time_ms();\r\n      push(this2);\r\n      while (stack.cur > 0) {\r\n        let n = pop();\r\n\r\n        if (n === undefined) {\r\n          //console.log(\"eek!\", stack.length);\r\n          continue;\r\n        } else if (n == SCOPE_POP) {\r\n          scopestack.pop();\r\n          continue;\r\n        } else if (n == AREA_CTX_POP) {\r\n          //console.log(\"POP\", areastack[areastack.length-1].constructor.name);\r\n          areastack.pop().pop_ctx_active(ctx);\r\n          continue;\r\n        }\r\n\r\n        if (n instanceof Area) {\r\n          //console.log(\"PUSH\", n.constructor.name);\r\n          areastack.push(n);\r\n          n.push_ctx_active(ctx);\r\n          push(AREA_CTX_POP);\r\n        }\r\n\r\n        if (n !== this2 && n instanceof UIBase) {\r\n          n._ctx = ctx;\r\n\r\n          if (scopestack.length > 0 && scopestack[scopestack.length - 1]) {\r\n            n.parentWidget = scopestack[scopestack.length - 1];\r\n\r\n            if (n.parentWidget && n._useDataPathToolOp === undefined && n.parentWidget._useDataPathToolOp !== undefined) {\r\n              n._useDataPathToolOp = n.parentWidget._useDataPathToolOp;\r\n            }\r\n          }\r\n\r\n          n.update();\r\n        }\r\n\r\n        if (util.time_ms() - t > 30) {\r\n          yield;\r\n          t = util.time_ms();\r\n        }\r\n\r\n        for (let n2 of n.childNodes) {\r\n          push(n2);\r\n        }\r\n\r\n        if (n.shadow === undefined) {\r\n          continue;\r\n        }\r\n\r\n        for (let n2 of n.shadow.childNodes) {\r\n          push(n2);\r\n        }\r\n\r\n        if (n instanceof UIBase) {\r\n          scopestack.push(n);\r\n          push(SCOPE_POP);\r\n        }\r\n      }\r\n    })();\r\n  }\r\n\r\n  loadFromVerts() {\r\n    for (let sarea of this.sareas) {\r\n      sarea.loadFromVerts();\r\n      sarea.on_resize(sarea.size);\r\n      sarea.setCSS();\r\n    }\r\n\r\n    this.setCSS();\r\n  }\r\n\r\n  splitArea(sarea, t = 0.5, horiz = true) {\r\n    let w = sarea.size[0], h = sarea.size[1];\r\n    let x = sarea.pos[0], y = sarea.size[1];\r\n    let s1, s2;\r\n\r\n    if (!horiz) {\r\n      s1 = sarea;\r\n      if (s1.ctx === undefined) {\r\n        s1.ctx = this.ctx;\r\n      }\r\n      s2 = s1.copy(this);\r\n\r\n      s1.size[0] *= t;\r\n      s2.size[0] *= (1.0 - t);\r\n\r\n      s2.pos[0] += w * t;\r\n    } else {\r\n      s1 = sarea;\r\n      if (s1.ctx === undefined) {\r\n        s1.ctx = this.ctx;\r\n      }\r\n      s2 = s1.copy(this);\r\n\r\n      s1.size[1] *= t;\r\n      s2.size[1] *= (1.0 - t);\r\n\r\n      s2.pos[1] += h * t;\r\n    }\r\n\r\n    s2.ctx = this.ctx;\r\n    this.appendChild(s2);\r\n\r\n    s1.on_resize(s1.size);\r\n    s2.on_resize(s2.size);\r\n\r\n    this.regenBorders();\r\n\r\n    s1.setCSS();\r\n    s2.setCSS();\r\n\r\n    this.setCSS();\r\n\r\n    //XXX not sure if this is right place to do this or really necassary\r\n    if (s2.area !== undefined)\r\n      s2.area.onadd();\r\n\r\n    return s2;\r\n  }\r\n\r\n  setCSS() {\r\n    this.style[\"width\"] = this.size[0] + \"px\";\r\n    this.style[\"height\"] = this.size[1] + \"px\";\r\n\r\n    //call setCSS on borders\r\n    for (let key in this._edgemap) {\r\n      let b = this._edgemap[key];\r\n\r\n      b.setCSS();\r\n    }\r\n  }\r\n\r\n  regenScreenMesh() {\r\n    this.regenBorders();\r\n  }\r\n\r\n  //XXX rename to regenScreenMesh\r\n  regenBorders() {\r\n    for (let k in this._edgemap) {\r\n      let b = this._edgemap[k];\r\n\r\n      b.remove();\r\n    }\r\n\r\n    this._edgemap = {};\r\n    this._vertmap = {};\r\n    this.screenverts.length = 0;\r\n\r\n    for (let sarea of this.sareas) {\r\n      sarea.makeBorders(this);\r\n    }\r\n\r\n    for (let key in this._edgemap) {\r\n      let b = this._edgemap[key];\r\n\r\n      b.setCSS();\r\n    }\r\n\r\n    this._recalcAABB();\r\n  }\r\n\r\n  snapScreenVerts() {\r\n    let min = [1e17, 1e17], max = [-1e17, -1e17];\r\n\r\n    this.regenBorders();\r\n\r\n    //fit entire screen to, well, the entire screen (size)\r\n    for (let v of this.screenverts) {\r\n      for (let i = 0; i < 2; i++) {\r\n        min[i] = Math.min(min[i], v[i]);\r\n        max[i] = Math.max(max[i], v[i]);\r\n      }\r\n    }\r\n\r\n    let vec = new Vector2(max).sub(min);\r\n    let sz = new Vector2(this.size);\r\n\r\n    sz.div(vec);\r\n\r\n    for (let v of this.screenverts) {\r\n      v.sub(min).mul(sz);\r\n    }\r\n\r\n    for (let sarea of this.sareas) {\r\n      sarea.on_resize(sarea.size);\r\n      sarea.loadFromVerts();\r\n    }\r\n\r\n    this.regenBorders();\r\n\r\n    for (let sarea of this.sareas) {\r\n      sarea.makeBorders(this);\r\n      sarea.setCSS();\r\n    }\r\n\r\n    this.setCSS();\r\n  }\r\n\r\n  on_resize(size) {\r\n    size[0] = ~~size[0];\r\n    size[1] = ~~size[1];\r\n\r\n    let ratio = [size[0] / this.size[0], size[1] / this.size[1]];\r\n\r\n    //console.log(\"resize!\", ratio);\r\n\r\n    this.regenBorders();\r\n\r\n    let min = [1e17, 1e17], max = [-1e17, -1e17];\r\n\r\n    //fit entire screen to, well, the entire screen (size)\r\n    for (let v of this.screenverts) {\r\n      v[0] *= ratio[0];\r\n      v[1] *= ratio[1];\r\n\r\n      for (let i = 0; i < 2; i++) {\r\n        min[i] = Math.min(min[i], v[i]);\r\n        max[i] = Math.max(max[i], v[i]);\r\n      }\r\n    }\r\n\r\n    let vec = new Vector2(max).sub(min);\r\n    let sz = new Vector2(size);\r\n\r\n    sz.div(vec);\r\n\r\n    for (let v of this.screenverts) {\r\n      v.sub(min).mul(sz);\r\n    }\r\n\r\n    let olds = [];\r\n\r\n    for (let sarea of this.sareas) {\r\n      olds.push([sarea.size[0], sarea.size[1]]);\r\n\r\n      sarea.loadFromVerts();\r\n    }\r\n\r\n    this.size[0] = size[0];\r\n    this.size[1] = size[1];\r\n\r\n    this.regenBorders();\r\n\r\n    let i = 0;\r\n    for (let sarea of this.sareas) {\r\n      sarea.on_resize(sarea.size, olds[i]);\r\n      sarea.setCSS();\r\n      i++;\r\n    }\r\n\r\n    this.setCSS();\r\n\r\n    this._recalcAABB();\r\n    this.calcTabOrder();\r\n  }\r\n\r\n  getScreenVert(pos, side, is_outer = false) {\r\n    let key = ScreenVert.hash(pos, side);\r\n\r\n    if (!(key in this._vertmap)) {\r\n      let v = new ScreenVert(pos, this.idgen++, is_outer, side);\r\n\r\n      this._vertmap[key] = v;\r\n      this._idmap[v._id] = v;\r\n\r\n      this.screenverts.push(v);\r\n    }\r\n\r\n    return this._vertmap[key];\r\n  }\r\n\r\n\r\n  isBorderOuter(sarea, border) {\r\n    let side = sarea._borders.indexOf(border);\r\n\r\n    if (side < 0) {\r\n      console.warn(\"Missing border\", border, sarea._borders);\r\n      return false;\r\n    }\r\n\r\n    let b = sarea._borders[side];\r\n    let v1 = b.v1;\r\n    let v2 = b.v2;\r\n\r\n    let is_outer = false;\r\n    const outer_snap_limit = 25;\r\n\r\n    let table = [];\r\n\r\n    let rect = this.getClientRects()[0];\r\n    let pos = rect !== undefined ? [rect.x, rect.y] : [0, 0];\r\n\r\n    let box = [\r\n      pos[0],\r\n      this.size[1] + pos[1],\r\n      this.size[0] + pos[0],\r\n      pos[1],\r\n    ];\r\n\r\n    let axis = side & 1;\r\n\r\n    return Math.abs(v1[axis] - box[side]) < 5;\r\n\r\n    return false;\r\n\r\n\r\n    //side = side == 2 ? side : undefined;\r\n\r\n    if (side !== undefined) {\r\n      let off = table[side];\r\n      let diff = Math.abs(v1[off[1]] - this._aabb[off[0]][off[1]]);\r\n\r\n      //console.log(\"getScreenBorder\", diff, v1[off[1]], this._aabb[off[0]][off[1]]);\r\n\r\n      if (diff < outer_snap_limit) {\r\n        //console.log(\"outer border!\", side);\r\n        is_outer = side + 1;\r\n      }\r\n    }\r\n\r\n    return is_outer;\r\n  }\r\n\r\n  isBorderMovable(sarea, b, limit = 5) {\r\n    let side = sarea._borders.indexOf(b);\r\n\r\n    if (side < 0) {\r\n      console.warn(\"border corruption\");\r\n      return true;\r\n    }\r\n\r\n    let bad = sarea.size[0] < limit || sarea.size[1] < limit;\r\n    bad = bad || this.isBorderOuter(sarea, b)\r\n    bad = bad || (sarea.borderLock & (1 << side));\r\n\r\n    for (let v of [b.v1, b.v2]) {\r\n      for (let b2 of v.borders) {\r\n        for (let sarea2 of b2.sareas) {\r\n          let box = [\r\n            sarea2.pos[0],\r\n            sarea2.pos[1] + sarea2.size[1],\r\n            sarea2.pos[0] + sarea2.size[0],\r\n            sarea2.pos[1],\r\n          ];\r\n\r\n          for (let side2 = 0; side2 < 4; side2++) {\r\n            let axis = side % 2;\r\n            let horiz = side2 % 2;\r\n\r\n            if (!!horiz !== !!b.horiz) {\r\n              //continue;\r\n            }\r\n\r\n            //console.log(box[side2], b.v1[axis], b.v2[axis]);\r\n\r\n            if (Math.abs(box[side2] - b.v1[axis]) < 3) {\r\n              bad = bad || (sarea2.borderLock & (1 << side2));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (bad) {\r\n      return false;\r\n    }\r\n\r\n    if (limit && b.valence > 1) {\r\n      return true;\r\n    }\r\n\r\n    let horiz = Math.abs(b.v2[0] - b.v1[0]) > Math.abs(b.v2[1] - b.v1[1]);\r\n    const snap_limit = 3;\r\n\r\n    let table = [\r\n      0, //min\r\n      1, //max\r\n      1, //max\r\n      0, //min\r\n    ]\r\n\r\n    let axis = this._aabb[b.side & 1][horiz ^ 1];\r\n    if (Math.abs(axis - b.v1[horiz ^ 1]) < snap_limit) {\r\n      //console.log(\"border is not movable\");\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  getScreenBorder(sarea, v1, v2, side) {\r\n    if (!(v1 instanceof ScreenVert)) {\r\n      v1 = this.getScreenVert(v1, side);\r\n    }\r\n\r\n    if (!(v2 instanceof ScreenVert)) {\r\n      v2 = this.getScreenVert(v2, side);\r\n    }\r\n\r\n    let hash = ScreenBorder.hash(v1, v2, side);\r\n\r\n    if (!(hash in this._edgemap)) {\r\n      let sb = this._edgemap[hash] = document.createElement(\"screenborder-x\");\r\n\r\n      sb.side = side;\r\n\r\n      sb.screen = this;\r\n      sb.v1 = v1;\r\n      sb.v2 = v2;\r\n      sb._id = this.idgen++;\r\n\r\n      v1.borders.push(sb);\r\n      v2.borders.push(sb);\r\n\r\n      sb.ctx = this.ctx;\r\n      this.appendChild(sb);\r\n\r\n      sb.setCSS();\r\n\r\n      this._edgemap[hash] = sb;\r\n      this._idmap[sb._id] = sb;\r\n    }\r\n\r\n    return this._edgemap[hash];\r\n  }\r\n\r\n  minmaxArea(sarea, mm = undefined) {\r\n    if (mm === undefined) {\r\n      mm = new math.MinMax(2);\r\n    }\r\n\r\n    for (let b of sarea._borders) {\r\n      mm.minmax(b.v1);\r\n      mm.minmax(b.v2);\r\n    }\r\n\r\n    return mm;\r\n  }\r\n\r\n  //does sarea1 border sarea2?\r\n  areasBorder(sarea1, sarea2) {\r\n    for (let b of sarea1._borders) {\r\n      for (let sa of b.sareas) {\r\n        if (sa === sarea2)\r\n          return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  replaceArea(dst, src) {\r\n    if (dst === src)\r\n      return;\r\n\r\n    src.pos[0] = dst.pos[0];\r\n    src.pos[1] = dst.pos[1];\r\n    src.size[0] = dst.size[0];\r\n    src.size[1] = dst.size[1];\r\n\r\n    if (this.sareas.indexOf(src) < 0) {\r\n      this.appendChild(src);\r\n    }\r\n\r\n    //this.sareas.remove(dst);\r\n    //dst.remove();\r\n\r\n    this.removeArea(dst);\r\n\r\n    this.regenBorders();\r\n    this.snapScreenVerts();\r\n    this._updateAll();\r\n  }\r\n\r\n  //regenerates borders, sets css and calls this.update\r\n  _internalRegenAll() {\r\n    this.regenBorders();\r\n    this._updateAll();\r\n    this.calcTabOrder();\r\n  }\r\n\r\n\r\n  _updateAll() {\r\n    for (let sarea of this.sareas) {\r\n      sarea.setCSS();\r\n    }\r\n    this.setCSS();\r\n    this.update();\r\n  }\r\n\r\n  removeArea(sarea) {\r\n    if (this.sareas.indexOf(sarea) < 0) {\r\n      console.warn(sarea, \"<- Warning: tried to remove unknown area\");\r\n      return;\r\n    }\r\n\r\n    this.sareas.remove(sarea);\r\n    sarea.remove();\r\n\r\n    this.snapScreenVerts();\r\n    this.regenBorders();\r\n\r\n    this._updateAll();\r\n    this.drawUpdate();\r\n  }\r\n\r\n  appendChild(child) {\r\n    if (child instanceof UIBase) {\r\n      if (child._useDataPathToolOp === undefined) {\r\n        child.useDataPathToolOp = this.useDataPathToolOp;\r\n      }\r\n    }\r\n\r\n    if (child instanceof ScreenArea.ScreenArea) {\r\n      child.screen = this;\r\n      child.ctx = this.ctx;\r\n\r\n      if (!child._has_evts) {\r\n        child._has_evts = true;\r\n\r\n        let onfocus = (e) => {\r\n          this.sareas.active = child;\r\n        }\r\n\r\n        let onblur = (e) => {\r\n          if (this.sareas.active === child) {\r\n            this.sareas.active = undefined;\r\n          }\r\n        }\r\n\r\n        child.addEventListener(\"focus\", onfocus);\r\n        child.addEventListener(\"mouseenter\", onfocus);\r\n        child.addEventListener(\"blur\", onblur);\r\n        child.addEventListener(\"mouseleave\", onblur);\r\n      }\r\n\r\n      this.sareas.push(child);\r\n      this.drawUpdate();\r\n    }\r\n\r\n    return this.shadow.appendChild(child);\r\n    //return super.appendChild(child);\r\n  }\r\n\r\n  splitTool() {\r\n    console.log(\"screen split!\");\r\n\r\n    //let tool = new FrameManager_ops.SplitTool(this);\r\n    let tool = new FrameManager_ops.AreaDragTool(this, undefined, this.mpos);\r\n    tool.start();\r\n  }\r\n\r\n  areaDragTool(sarea = this.sareas.active) {\r\n    if (sarea === undefined) {\r\n      console.warn(\"no active screen area\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"screen area drag!\");\r\n\r\n    let mpos = this.mpos;\r\n    let tool = new FrameManager_ops.AreaDragTool(this, this.sareas.active, mpos);\r\n\r\n    tool.start();\r\n  }\r\n\r\n  makeBorders() {\r\n    for (let sarea of this.sareas) {\r\n      sarea.makeBorders(this);\r\n    }\r\n  }\r\n\r\n  on_keydown(e) {\r\n    if (!haveModal() && this.execKeyMap(e)) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    if (!haveModal() && this.sareas.active !== undefined && this.sareas.active.on_keydown) {\r\n      let area = this.sareas.active;\r\n      return this.sareas.active.on_keydown(e);\r\n    }\r\n  }\r\n\r\n  on_keyup(e) {\r\n    if (!haveModal() && this.sareas.active !== undefined && this.sareas.active.on_keyup) {\r\n      return this.sareas.active.on_keyup(e);\r\n    }\r\n  }\r\n\r\n  on_keypress(e) {\r\n    if (!haveModal() && this.sareas.active !== undefined && this.sareas.active.on_keypress) {\r\n      return this.sareas.active.on_keypress(e);\r\n    }\r\n  }\r\n\r\n  /*\r\n  _do_mouse_event(e) {\r\n    let type = e.type.toLowerCase();\r\n    \r\n    if (this.sareas.active !== undefined) {\r\n      let x = e.x, y = e.y;\r\n      let ret, sa = this.sareas.active;\r\n      \r\n      e.x -= sa.pos[0];\r\n      e.y -= sa.pos[1];\r\n      \r\n      let key = \"on_\" + type.toLowerCase();\r\n      \r\n      try {\r\n        ret = sa[key](e);\r\n      } catch (error) {\r\n        util.print_stack(error);\r\n        console.error(\"Exception raised in Screen._do_mouse_event for a ScreenArea\");\r\n        \r\n        ret = undefined;\r\n      }\r\n      \r\n      e.x = x;\r\n      e.y = y;\r\n    }\r\n    \r\n    return e;\r\n  }\r\n  \r\n  on_mousedown(e) {\r\n    super.on_mousedown(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_mousemove(e) {\r\n    super.on_mousemove(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_mouseup(e) {\r\n    super.on_mouseup(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_touchstart(e) {\r\n    super.on_touchstart(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_touchmove(e) {\r\n    super.on_touchmove(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_touchcancel(e) {\r\n    super.on_touchcancel(e);\r\n    return this._do_mouse_event(e);\r\n  }\r\n  on_touchend(e) {\r\n    super.on_touchend(e);\r\n    return this._do_mouse_event(e);\r\n  }//*/\r\n\r\n  draw() {\r\n    for (let sarea of this.sareas) {\r\n      sarea.draw();\r\n    }\r\n  }\r\n\r\n  static newSTRUCT() {\r\n    return document.createElement(this.define().tagname);\r\n  }\r\n\r\n  afterSTRUCT() {\r\n    for (let sarea of this.sareas) {\r\n      sarea._ctx = this.ctx;\r\n      sarea.afterSTRUCT();\r\n    }\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    let sareas = this.sareas;\r\n    this.sareas = [];\r\n\r\n    for (let sarea of sareas) {\r\n      sarea.screen = this;\r\n      this.appendChild(sarea);\r\n    }\r\n\r\n    this.regenBorders();\r\n    this.setCSS();\r\n\r\n    this.doOnce(() => {\r\n      this.loadUIData(this.uidata);\r\n      this.uidata = undefined;\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  test_struct() {\r\n    let data = [];\r\n    //let scripts = nstructjs.write_scripts();\r\n    nstructjs.manager.write_object(data, this);\r\n    data = new DataView(new Uint8Array(data).buffer);\r\n\r\n    let screen2 = nstructjs.manager.read_object(data, this.constructor);\r\n    screen2.ctx = this.ctx;\r\n\r\n    for (let sarea of screen2.sareas) {\r\n      sarea.screen = screen2;\r\n      sarea.ctx = this.ctx;\r\n      sarea.area.ctx = this.ctx;\r\n    }\r\n\r\n    let parent = this.parentElement;\r\n    this.remove();\r\n\r\n    this.ctx.screen = screen2;\r\n\r\n    parent.appendChild(screen2);\r\n\r\n    //for (let \r\n    screen2.regenBorders();\r\n    screen2.update();\r\n    screen2.listen();\r\n\r\n    screen2.doOnce(() => {\r\n      screen2.on_resize([window.innerWidth, window.innerHeight]);\r\n    });\r\n\r\n    console.log(data)\r\n    return screen2;\r\n  }\r\n\r\n  saveUIData() {\r\n    try {\r\n      return ui_base.saveUIData(this, \"screen\");\r\n    } catch (error) {\r\n      util.print_stack(error);\r\n      console.log(\"Failed to save UI state data\");\r\n    }\r\n  }\r\n\r\n  loadUIData(str) {\r\n    try {\r\n      ui_base.loadUIData(this, str);\r\n    } catch (error) {\r\n      util.print_stack(error);\r\n      console.log(\"Failed to load UI state data\");\r\n    }\r\n  }\r\n}\r\n\r\nScreen.STRUCT = `\r\npathux.Screen { \r\n  size  : array(float);\r\n  sareas : array(pathux.ScreenArea);\r\n  idgen : int;\r\n  uidata : string | obj.saveUIData();\r\n}\r\n`;\r\n\r\nnstructjs.manager.add_class(Screen);\r\nui_base.UIBase.register(Screen);\r\n\r\nScreenArea.setScreenClass(Screen);\r\n\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/FrameManager.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 207,
    "kind": "variable",
    "name": "_FrameManager",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~_FrameManager",
    "access": "private",
    "export": false,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 208,
    "kind": "variable",
    "name": "Area",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~Area",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 209,
    "kind": "function",
    "name": "registerToolStackGetter",
    "memberof": "scripts/FrameManager.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~registerToolStackGetter",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": "{registerToolStackGetter}",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "params": [
      {
        "name": "func",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 210,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 211,
    "kind": "variable",
    "name": "update_stack",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~update_stack",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 212,
    "kind": "class",
    "name": "ScreenVert",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~ScreenVert",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": "{ScreenVert}",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "interface": false,
    "extends": [
      "Vector2"
    ]
  },
  {
    "__docId__": 213,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true
  },
  {
    "__docId__": 214,
    "kind": "member",
    "name": "side",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#side",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 215,
    "kind": "member",
    "name": "sareas",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#sareas",
    "access": "public",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 216,
    "kind": "member",
    "name": "borders",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#borders",
    "access": "public",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "member",
    "name": "_id",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#_id",
    "access": "private",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 218,
    "kind": "method",
    "name": "hash",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~ScreenVert.hash",
    "access": "public",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "params": [
      {
        "name": "pos",
        "types": [
          "*"
        ]
      },
      {
        "name": "side",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 219,
    "kind": "method",
    "name": "valueOf",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#valueOf",
    "access": "public",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 220,
    "kind": "method",
    "name": "[Symbol.keystr]",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#[Symbol.keystr]",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 221,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/FrameManager.js~ScreenVert",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenVert#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 222,
    "kind": "class",
    "name": "ScreenBorder",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~ScreenBorder",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": "{ScreenBorder}",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 223,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 87,
    "undocument": true
  },
  {
    "__docId__": 224,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#screen",
    "access": "public",
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 225,
    "kind": "member",
    "name": "v1",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#v1",
    "access": "public",
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 226,
    "kind": "member",
    "name": "v2",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#v2",
    "access": "public",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 227,
    "kind": "member",
    "name": "_id",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#_id",
    "access": "private",
    "description": null,
    "lineNumber": 93,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 228,
    "kind": "member",
    "name": "side",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#side",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 229,
    "kind": "member",
    "name": "sareas",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#sareas",
    "access": "public",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 230,
    "kind": "member",
    "name": "_innerstyle",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#_innerstyle",
    "access": "private",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 231,
    "kind": "member",
    "name": "_style",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#_style",
    "access": "private",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 232,
    "kind": "member",
    "name": "inner",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#inner",
    "access": "public",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 233,
    "kind": "get",
    "name": "valence",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#valence",
    "access": "public",
    "description": null,
    "lineNumber": 141,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 234,
    "kind": "method",
    "name": "otherVert",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#otherVert",
    "access": "public",
    "description": null,
    "lineNumber": 188,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 235,
    "kind": "get",
    "name": "horiz",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#horiz",
    "access": "public",
    "description": null,
    "lineNumber": 195,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 236,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 202,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 238,
    "kind": "method",
    "name": "hash",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~ScreenBorder.hash",
    "access": "public",
    "description": null,
    "lineNumber": 290,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "side",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 239,
    "kind": "method",
    "name": "valueOf",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#valueOf",
    "access": "public",
    "description": null,
    "lineNumber": 294,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 240,
    "kind": "method",
    "name": "[Symbol.keystr]",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~ScreenBorder#[Symbol.keystr]",
    "access": "public",
    "description": null,
    "lineNumber": 298,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 241,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/FrameManager.js~ScreenBorder",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~ScreenBorder.define",
    "access": "public",
    "description": null,
    "lineNumber": 302,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 242,
    "kind": "variable",
    "name": "screen_idgen",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~screen_idgen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 311,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 243,
    "kind": "class",
    "name": "Screen",
    "memberof": "scripts/FrameManager.js",
    "static": true,
    "longname": "scripts/FrameManager.js~Screen",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager.js",
    "importStyle": "{Screen}",
    "description": null,
    "lineNumber": 313,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 244,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 314,
    "undocument": true
  },
  {
    "__docId__": 245,
    "kind": "member",
    "name": "needsTabRecalc",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#needsTabRecalc",
    "access": "public",
    "description": null,
    "lineNumber": 317,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 246,
    "kind": "member",
    "name": "_screen_id",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_screen_id",
    "access": "private",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 247,
    "kind": "member",
    "name": "_popups",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_popups",
    "access": "private",
    "description": null,
    "lineNumber": 321,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 248,
    "kind": "member",
    "name": "_ctx",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_ctx",
    "access": "private",
    "description": null,
    "lineNumber": 323,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "member",
    "name": "keymap",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#keymap",
    "access": "public",
    "description": null,
    "lineNumber": 325,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 250,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#size",
    "access": "public",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 251,
    "kind": "member",
    "name": "idgen",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#idgen",
    "access": "public",
    "description": null,
    "lineNumber": 328,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 252,
    "kind": "member",
    "name": "sareas",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#sareas",
    "access": "public",
    "description": null,
    "lineNumber": 329,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 253,
    "kind": "member",
    "name": "mpos",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#mpos",
    "access": "public",
    "description": null,
    "lineNumber": 331,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 254,
    "kind": "member",
    "name": "screenverts",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#screenverts",
    "access": "public",
    "description": null,
    "lineNumber": 333,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 255,
    "kind": "member",
    "name": "_vertmap",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_vertmap",
    "access": "private",
    "description": null,
    "lineNumber": 334,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 256,
    "kind": "member",
    "name": "_edgemap",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_edgemap",
    "access": "private",
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 257,
    "kind": "member",
    "name": "_idmap",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_idmap",
    "access": "private",
    "description": null,
    "lineNumber": 336,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 258,
    "kind": "member",
    "name": "_aabb",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_aabb",
    "access": "private",
    "description": null,
    "lineNumber": 339,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 259,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#copy",
    "access": "public",
    "description": null,
    "lineNumber": 353,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 260,
    "kind": "method",
    "name": "pickElement",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#pickElement",
    "access": "public",
    "description": null,
    "lineNumber": 397,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "sx",
        "types": [
          "*"
        ]
      },
      {
        "name": "sy",
        "types": [
          "*"
        ]
      },
      {
        "name": "nodeclass",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 261,
    "kind": "method",
    "name": "popup",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#popup",
    "access": "public",
    "description": "makes a popup at x,y and returns a new container-x for it",
    "lineNumber": 410,
    "params": [
      {
        "name": "elem_or_x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "closeOnMouseOut",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 262,
    "kind": "method",
    "name": "_recalcAABB",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_recalcAABB",
    "access": "private",
    "description": null,
    "lineNumber": 513,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 263,
    "kind": "get",
    "name": "borders",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#borders",
    "access": "public",
    "description": null,
    "lineNumber": 524,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 264,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#load",
    "access": "public",
    "description": null,
    "lineNumber": 535,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 265,
    "kind": "method",
    "name": "save",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#save",
    "access": "public",
    "description": null,
    "lineNumber": 539,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 266,
    "kind": "method",
    "name": "remove",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#remove",
    "access": "public",
    "description": null,
    "lineNumber": 542,
    "undocument": true,
    "params": [
      {
        "name": "trigger_destroy",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 267,
    "kind": "method",
    "name": "unlisten",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#unlisten",
    "access": "public",
    "description": null,
    "lineNumber": 552,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 268,
    "kind": "member",
    "name": "listen_timer",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#listen_timer",
    "access": "public",
    "description": null,
    "lineNumber": 555,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 269,
    "kind": "method",
    "name": "listen",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#listen",
    "access": "public",
    "description": null,
    "lineNumber": 559,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 271,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 571,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 272,
    "kind": "method",
    "name": "destroy",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 621,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 273,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#clear",
    "access": "public",
    "description": null,
    "lineNumber": 625,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 275,
    "kind": "method",
    "name": "_test_save",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_test_save",
    "access": "private",
    "description": null,
    "lineNumber": 639,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 276,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 646,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      },
      {
        "name": "schedule_resize",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 277,
    "kind": "method",
    "name": "fromJSON",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~Screen.fromJSON",
    "access": "public",
    "description": null,
    "lineNumber": 671,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      },
      {
        "name": "schedule_resize",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 278,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 676,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 279,
    "kind": "method",
    "name": "getHotKey",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#getHotKey",
    "access": "public",
    "description": null,
    "lineNumber": 687,
    "undocument": true,
    "params": [
      {
        "name": "toolpath",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 280,
    "kind": "method",
    "name": "execKeyMap",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#execKeyMap",
    "access": "public",
    "description": null,
    "lineNumber": 734,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 281,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~Screen.define",
    "access": "public",
    "description": null,
    "lineNumber": 753,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 282,
    "kind": "method",
    "name": "calcTabOrder",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#calcTabOrder",
    "access": "public",
    "description": null,
    "lineNumber": 759,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 283,
    "kind": "method",
    "name": "drawUpdate",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#drawUpdate",
    "access": "public",
    "description": null,
    "lineNumber": 825,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 284,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#update",
    "access": "public",
    "description": null,
    "lineNumber": 831,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 286,
    "kind": "member",
    "name": "_update_gen",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_update_gen",
    "access": "private",
    "description": null,
    "lineNumber": 856,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 289,
    "kind": "get",
    "name": "ctx",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 868,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 290,
    "kind": "set",
    "name": "ctx",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 872,
    "undocument": true
  },
  {
    "__docId__": 292,
    "kind": "method",
    "name": "update_intern",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#update_intern",
    "access": "public",
    "description": null,
    "lineNumber": 902,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 293,
    "kind": "method",
    "name": "loadFromVerts",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#loadFromVerts",
    "access": "public",
    "description": null,
    "lineNumber": 1000,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 294,
    "kind": "method",
    "name": "splitArea",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#splitArea",
    "access": "public",
    "description": null,
    "lineNumber": 1010,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      },
      {
        "name": "t",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0.5,
        "defaultValue": "0.5"
      },
      {
        "name": "horiz",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 295,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1059,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 296,
    "kind": "method",
    "name": "regenScreenMesh",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#regenScreenMesh",
    "access": "public",
    "description": null,
    "lineNumber": 1071,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 297,
    "kind": "method",
    "name": "regenBorders",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#regenBorders",
    "access": "public",
    "description": null,
    "lineNumber": 1076,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 300,
    "kind": "method",
    "name": "snapScreenVerts",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#snapScreenVerts",
    "access": "public",
    "description": null,
    "lineNumber": 1100,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 301,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 1137,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 302,
    "kind": "method",
    "name": "getScreenVert",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#getScreenVert",
    "access": "public",
    "description": null,
    "lineNumber": 1195,
    "undocument": true,
    "params": [
      {
        "name": "pos",
        "types": [
          "*"
        ]
      },
      {
        "name": "side",
        "types": [
          "*"
        ]
      },
      {
        "name": "is_outer",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 303,
    "kind": "method",
    "name": "isBorderOuter",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#isBorderOuter",
    "access": "public",
    "description": null,
    "lineNumber": 1211,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      },
      {
        "name": "border",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 304,
    "kind": "method",
    "name": "isBorderMovable",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#isBorderMovable",
    "access": "public",
    "description": null,
    "lineNumber": 1262,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "limit",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 5,
        "defaultValue": "5"
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 305,
    "kind": "method",
    "name": "getScreenBorder",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#getScreenBorder",
    "access": "public",
    "description": null,
    "lineNumber": 1329,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      },
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "side",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 306,
    "kind": "method",
    "name": "minmaxArea",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#minmaxArea",
    "access": "public",
    "description": null,
    "lineNumber": 1365,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      },
      {
        "name": "mm",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 307,
    "kind": "method",
    "name": "areasBorder",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#areasBorder",
    "access": "public",
    "description": null,
    "lineNumber": 1379,
    "undocument": true,
    "params": [
      {
        "name": "sarea1",
        "types": [
          "*"
        ]
      },
      {
        "name": "sarea2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 308,
    "kind": "method",
    "name": "replaceArea",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#replaceArea",
    "access": "public",
    "description": null,
    "lineNumber": 1390,
    "undocument": true,
    "params": [
      {
        "name": "dst",
        "types": [
          "*"
        ]
      },
      {
        "name": "src",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 309,
    "kind": "method",
    "name": "_internalRegenAll",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_internalRegenAll",
    "access": "private",
    "description": null,
    "lineNumber": 1414,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 310,
    "kind": "method",
    "name": "_updateAll",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#_updateAll",
    "access": "private",
    "description": null,
    "lineNumber": 1421,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 311,
    "kind": "method",
    "name": "removeArea",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#removeArea",
    "access": "public",
    "description": null,
    "lineNumber": 1429,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 312,
    "kind": "method",
    "name": "appendChild",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#appendChild",
    "access": "public",
    "description": null,
    "lineNumber": 1445,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 313,
    "kind": "method",
    "name": "splitTool",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#splitTool",
    "access": "public",
    "description": null,
    "lineNumber": 1483,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 314,
    "kind": "method",
    "name": "areaDragTool",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#areaDragTool",
    "access": "public",
    "description": null,
    "lineNumber": 1491,
    "undocument": true,
    "params": [
      {
        "name": "sarea",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 315,
    "kind": "method",
    "name": "makeBorders",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#makeBorders",
    "access": "public",
    "description": null,
    "lineNumber": 1505,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 316,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 1511,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 317,
    "kind": "method",
    "name": "on_keyup",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#on_keyup",
    "access": "public",
    "description": null,
    "lineNumber": 1523,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 318,
    "kind": "method",
    "name": "on_keypress",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#on_keypress",
    "access": "public",
    "description": null,
    "lineNumber": 1529,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 319,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#draw",
    "access": "public",
    "description": null,
    "lineNumber": 1593,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 320,
    "kind": "method",
    "name": "newSTRUCT",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager.js~Screen.newSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1599,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 321,
    "kind": "method",
    "name": "afterSTRUCT",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#afterSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1603,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 322,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1610,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 324,
    "kind": "member",
    "name": "uidata",
    "memberof": "scripts/FrameManager.js~Screen",
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#uidata",
    "access": "public",
    "description": null,
    "lineNumber": 1626,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 325,
    "kind": "method",
    "name": "test_struct",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#test_struct",
    "access": "public",
    "description": null,
    "lineNumber": 1632,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 326,
    "kind": "method",
    "name": "saveUIData",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#saveUIData",
    "access": "public",
    "description": null,
    "lineNumber": 1667,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 327,
    "kind": "method",
    "name": "loadUIData",
    "memberof": "scripts/FrameManager.js~Screen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager.js~Screen#loadUIData",
    "access": "public",
    "description": null,
    "lineNumber": 1676,
    "undocument": true,
    "params": [
      {
        "name": "str",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 328,
    "kind": "file",
    "name": "scripts/FrameManager_ops.js",
    "content": "\"use strict\";\n\n//set default datapath controller implementation class\nimport {DEBUG} from './const.js';\n\n//XXX eek why was this here!\n//import {DataAPI} from './simple_controller.js';\n//import {setImplementationClass} from './controller.js';\n//setImplementationClass(DataAPI);\n\nimport * as util from './util.js';\nimport * as vectormath from './vectormath.js';\nimport * as ui_base from './ui_base.js';\nimport * as ui from './ui.js';\nimport * as ScreenArea from './ScreenArea.js';\nimport * as events from './events.js';\nimport * as controller from './controller.js';\nimport * as ScreenOverdraw from './ScreenOverdraw.js';\nimport * as simple_toolsys from './simple_toolsys.js';\n\n/*\nwhy am I using a toolstack here at all?  time to remove!\n*/\n\nlet toolstack_getter = function() {\n  throw new Error(\"must pass a toolstack getter to registerToolStackGetter, I know it's dumb\")\n}\n\nexport function registerToolStackGetter(func) {\n  toolstack_getter = func;\n}\n\nlet Vector2 = vectormath.Vector2,\n    Vector3 = vectormath.Vector3,\n    UndoFlags = simple_toolsys.UndoFlags,\n    ToolFlags = simple_toolsys.ToolFlags;\n\nimport {pushModalLight, popModalLight, keymap} from \"./simple_events.js\";\n//import {keymap} from './events';\n\nexport class ToolBase extends simple_toolsys.ToolOp {\n  constructor(screen) {\n    super();\n\n    if (screen === undefined) screen = _appstate.screen; //XXX hackish!\n    \n    //super();\n    \n    this._finished = false;\n    this.screen = screen;\n  }\n  \n  start() {\n    //toolstack_getter().execTool(this);\n    this.modalStart(undefined);\n  }\n  \n  cancel() {\n    this.finish();\n  }\n  \n  finish() {\n    this._finished = true;\n    this.overdraw.end();\n    this.popModal(this.screen);\n  }\n\n  popModal() {\n    console.log(\"popModal called\");\n\n    popModalLight(this.modaldata);\n    this.modaldata = undefined;\n  }\n\n  modalStart(ctx) {\n    this.ctx = ctx;\n\n    if (this.modaldata !== undefined) {\n      console.log(\"Error, modaldata was not undefined\");\n      popModalLight(this.modaldata);\n    }\n\n    this.overdraw = document.createElement(\"overdraw-x\");\n    this.overdraw.start(this.screen);\n\n    let handlers = {};\n    let keys = Object.getOwnPropertyNames(this);\n    for (let k in this.__proto__) {\n      keys.push(k);\n    }\n    for (let k of Object.getOwnPropertyNames(this.__proto__)) {\n      keys.push(k);\n    }\n\n    for (let k in this) {\n      keys.push(k);\n    }\n\n    for (let k of keys) {\n      if (k.startsWith(\"on\")) {\n        handlers[k] = this[k].bind(this);\n      }\n    }\n\n    //window.setTimeout(() => {\n      this.modaldata = pushModalLight(handlers);\n      //console.log(\"HANDLERS\", this.modaldata.handlers);\n      \n    //}, 100);\n\n    //window.addEventListener(\"touchmove\", (e) => {\n    //  console.log(\"touchmove\");\n    //}, {passive : false});\n  }\n  \n  on_mousemove(e) {\n  }\n  \n  on_mouseup(e) {\n    this.finish();\n  }\n  \n  on_keydown(e) {\n    console.log(\"s\", e.keyCode);\n    \n    switch (e.keyCode) {\n      case keymap.Escape: //esc\n        this.cancel();\n        break;\n      case keymap.Space: //space\n      case keymap.Enter: //return\n        this.finish();\n        break;\n    }\n  }\n}\n\nexport class AreaResizeTool extends ToolBase {\n  constructor(screen, border, mpos) {\n    if (screen === undefined) screen = _appstate.screen; //XXX hackish!\n    \n    super(screen);\n    \n    this.start_mpos = new Vector2(mpos);\n    this.border = border;\n    this.screen = screen;\n  }\n  \n  static tooldef() {return {\n    uiname   : \"Resize Area\",\n    toolpath : \"screen.area.resize\",\n    icon     : ui_base.Icons.RESIZE,\n    description : \"change size of area\",\n    is_modal : true,\n    hotkey : undefined,\n    undoflag : UndoFlags.NO_UNDO,\n    flag     : 0,\n    inputs   : {}, //tool properties\n    outputs  : {}  //tool properties\n  }}\n  \n  getBorders() {\n    let horiz = this.border.horiz;\n    \n    let ret = [];\n    let visit = new Set();\n    \n    let rec = (v) => {\n      if (visit.has(v._id)) {\n        return;\n      }\n      \n      visit.add(v._id);\n      \n      for (let border of v.borders) {\n        if (border.horiz == horiz && !visit.has(border._id)) {\n          visit.add(border._id);\n          ret.push(border);\n          \n          rec(border.otherVert(v));\n        }\n      }\n    }\n    \n    rec(this.border.v1);\n    rec(this.border.v2);\n    \n    return ret;\n  }\n\n  on_mouseup(e) {\n    this.finish();\n  }\n\n  on_keydown(e) {\n    switch (e.keyCode) {\n      case keymap[\"Escape\"]:\n      case keymap[\"Enter\"]:\n      case keymap[\"Space\"]:\n        this.finish();\n        break;\n    }\n  }\n  on_mousemove(e) {\n    let mpos = new Vector2([e.x, e.y]);\n    \n    mpos.sub(this.start_mpos);\n    \n    let axis = this.border.horiz ? 1 : 0;\n    \n    //console.log(this.border.horiz);\n    \n    this.overdraw.clear();\n    \n    let visit = new Set();\n    let borders = this.getBorders();\n\n    let color = DEBUG.screenborders ? \"rgba(1.0, 0.5, 0.0, 0.1)\" : \"rgba(1.0, 0.5, 0.0, 1.0)\";\n\n    let bad = false;\n\n    for (let border of borders) {\n      for (let sarea of border.sareas) {\n        bad = bad || !this.screen.isBorderMovable(sarea, border);\n      }\n\n      border.oldv1 = new Vector2(border.v1);\n      border.oldv2 = new Vector2(border.v2);\n    }\n\n    if (bad) {\n      console.log(\"border is not movable\");\n      return;\n    }\n\n    let check = () => {\n      let count = 0;\n\n      for (let sarea of this.screen.sareas) {\n        if (sarea.size[0] < 15 || sarea.size[1] < 15) {\n          count++;\n        }\n      }\n\n      return count;\n    };\n\n    let badcount = check();\n\n    for (let border of borders) {\n      this.overdraw.line(border.v1, border.v2, color);\n      \n      if (!visit.has(border.v1._id)) {\n        border.v1[axis] += mpos[axis];\n        visit.add(border.v1._id);\n      }\n      \n      if (!visit.has(border.v2._id)) {\n        border.v2[axis] += mpos[axis];\n        visit.add(border.v2._id);\n      }\n    }\n    \n    this.start_mpos[0] = e.x;\n    this.start_mpos[1] = e.y;\n    this.screen.loadFromVerts();\n    this.screen.setCSS();\n\n    if (check() != badcount) {\n      console.log(\"bad\");\n\n      for (let border of borders) {\n        border.v1.load(border.oldv1);\n        border.v2.load(border.oldv2);\n      }\n    }\n\n    this.screen.loadFromVerts();\n    this.screen.setCSS();\n  }\n}\n\n//controller.registerTool(AreaResizeTool);\n\nexport class SplitTool extends ToolBase {\n  constructor(screen) {\n    if (screen === undefined) screen = _appstate.screen; //XXX hackish!\n    \n    super(screen);\n\n    this.done = false;\n    this.screen = screen;\n    this.ctx = screen.ctx;\n    this.sarea = undefined;\n    this.t = undefined;\n\n    this.start = false;\n  }\n  \n  static tooldef() {return {\n    uiname   : \"Split Area\",\n    toolpath : \"screen.area.split\",\n    icon     : ui_base.Icons.SMALL_PLUS,\n    description : \"split an area in two\",\n    is_modal : true,\n    hotkey   : \"BLEH-B\",\n    undoflag : UndoFlags.NO_UNDO,\n    flag     : 0,\n    inputs   : {}, //tool properties\n    outputs  : {}  //tool properties\n  }}\n  \n  modalStart(ctx) {\n    if (this.started) {\n      console.trace(\"double call to modalStart()\");\n      return;\n    }\n    \n    this.overdraw = document.createElement(\"overdraw-x\");\n    this.overdraw.start(this.screen);\n    \n    super.modalStart(ctx);\n  }\n  \n  cancel() {\n    return this.finish(true);\n  }\n  \n  finish(canceled=false) {\n    if (this.done) {\n      return;\n    }\n\n    this.done = true;\n    this.overdraw.end();\n\n    this.popModal(this.screen);\n\n    if (canceled || !this.sarea) {\n      return;\n    }\n\n    let sarea = this.sarea, screen = this.screen;\n    let t = this.t;\n\n    screen.splitArea(sarea, t, this.horiz);\n    screen._internalRegenAll();\n  }\n  \n  on_mousemove(e) {\n    let x = e.x, y = e.y;\n\n    let screen = this.screen;\n\n    let sarea = screen.pickElement(x, y, 0, 0, ScreenArea.ScreenArea);\n    this.overdraw.clear();\n\n    if (sarea !== undefined) {\n      //x -= sarea.pos[0];\n      //y -= sarea.pos[1];\n      x = (x - sarea.pos[0]) / (sarea.size[0]);\n      y = (y - sarea.pos[1]) / (sarea.size[1]);\n\n      let dx = 1.0 - Math.abs(x-0.5);\n      let dy = 1.0 - Math.abs(y-0.5);\n\n      this.sarea = sarea;\n      let horiz = this.horiz = dx < dy;\n\n      if (horiz) {\n        this.t = y;\n        this.overdraw.line([sarea.pos[0], e.y], [sarea.pos[0]+sarea.size[0], e.y]);\n      } else {\n        this.t = x;\n        this.overdraw.line([e.x, sarea.pos[1]], [e.x, sarea.pos[1]+sarea.size[1]]);\n      }\n    }\n    //console.warn(\"sarea:\", sarea);\n\n    //let sarea = this.\n    //console.log(e.x, e.y);\n    //this.overdraw.clear();\n    //this.overdraw.line([e.x, e.y-200], [e.x, e.y+200], \"grey\");\n  }\n  \n  on_mousedown(e) {\n  }\n  \n  on_mouseup(e) {\n    this.finish();\n    \n    if (e.button) {\n      this.stopPropagation();\n      this.preventDefault();\n    }\n  }\n  \n  on_keydown(e) {\n    console.log(\"s\", e.keyCode);\n    \n    switch (e.keyCode) {\n      case keymap.Escape: //esc\n        this.cancel();\n        break;\n      case keymap.Space: //space\n      case keymap.Enter: //return\n        this.finish();\n        break;\n    }\n  }\n}\n\n//controller.registerTool(SplitTool);\n\n\nexport class AreaDragTool extends ToolBase {\n  constructor(screen, sarea, mpos) {\n    if (screen === undefined) screen = _appstate.screen; //XXX hackish!\n    \n    super(screen);\n    \n    this.cursorbox = undefined;\n    this.boxes = [];\n    this.boxes.active = undefined;\n\n    this.sarea = sarea;\n    this.start_mpos = new Vector2(mpos);\n    this.screen = screen;\n  }\n  \n  static tooldef() {return {\n    uiname   : \"Drag Area\",\n    toolpath : \"screen.area.drag\",\n    icon     : ui_base.Icons.TRANSLATE,\n    description : \"move or duplicate area\",\n    is_modal : true,\n    hotkey : undefined,\n    undoflag : UndoFlags.NO_UNDO,\n    flag     : 0,\n    inputs   : {}, //tool properties\n    outputs  : {}  //tool properties\n  }}\n  \n  finish() {\n    super.finish();\n    \n    console.log(\"tool finish\");\n  }\n  \n  getBoxRect(b) {\n    let sa = b.sarea;\n    let pos, size;\n    \n    if (b.horiz == -1) {\n      //replacement mode\n      pos = sa.pos;\n      size = sa.size;\n    } else if (b.horiz) {\n      if (b.side == 'b') {\n        pos = [sa.pos[0], sa.pos[1]+sa.size[1]*b.t]\n        size = [sa.size[0], sa.size[1]*(1.0-b.t)]\n      } else {\n        pos = [sa.pos[0], sa.pos[1]];\n        size = [sa.size[0], sa.size[1]*b.t]\n      }\n    } else {\n      if (b.side == 'r') {\n        pos = [sa.pos[0]+sa.size[0]*b.t, sa.pos[1]]\n        size = [sa.size[0]*(1.0-b.t), sa.size[1]]\n      } else {\n        pos = [sa.pos[0], sa.pos[1]];\n        size = [sa.size[0]*b.t, sa.size[1]]\n      }\n    }\n    \n    let color = \"rgba(100, 100, 100, 0.2)\";\n    \n    let ret = this.overdraw.rect(pos, size, color);\n    ret.style[\"pointer-events\"] = \"none\";\n    \n    return ret;\n  }\n  \n  doSplit(b) {\n    if (this.sarea) {\n      return this.doSplitDrop(b);\n    }\n    \n    let src = this.sarea, dst = b.sarea;\n    let screen = this.screen;\n    \n    let t = b.t;\n    \n    screen.splitArea(dst, t, b.horiz);\n    screen._internalRegenAll();\n  }\n  \n  doSplitDrop(b) {\n    //first check if there was no change\n    if (b.horiz == -1 && b.sarea === this.sarea) {\n      return;\n    }\n    \n    let can_rip = false;\n    let sa = this.sarea;\n    let screen = this.screen;\n    \n    //rip conditions\n    can_rip = sa.size[0] == screen.size[0] || sa.size[1] == screen.size[1];\n    can_rip = can_rip && b.sarea !== sa;\n    can_rip = can_rip && (b.horiz == -1 || !screen.areasBorder(sa, b.sarea));\n    \n    let expand = b.horiz == -1 && b.sarea !== sa && screen.areasBorder(b.sarea, sa);\n    \n    can_rip = can_rip || expand;\n    \n    console.log(\"can_rip:\", can_rip, expand);\n    \n    if (can_rip) {\n      screen.removeArea(sa);\n      screen.snapScreenVerts();\n    }\n    \n    if (b.horiz == -1) {\n      //replacement\n      let src = this.sarea, dst = b.sarea;\n      \n      if (can_rip) {\n        let mm;\n        \n        //handle case of one area \"consuming\" another\n        if (expand) {\n          mm = screen.minmaxArea(src);\n          screen.minmaxArea(dst, mm);\n        }\n        \n        console.log(\"replacing. . .\", expand);\n        screen.replaceArea(dst, src);\n        \n        if (expand) {\n          console.log(\"\\na:\", src.size[0], src.size[1]);\n          \n          src.pos[0] = mm.min[0];\n          src.pos[1] = mm.min[1];\n          \n          src.size[0] = mm.max[0] - mm.min[0];\n          src.size[1] = mm.max[1] - mm.min[1];\n          \n          console.log(\"b:\", src.size[0], src.size[1], \"\\n\");\n          \n          screen._internalRegenAll();\n        }\n      } else {\n        console.log(\"copying. . .\");\n        screen.replaceArea(dst, src.copy());\n      }\n    } else {\n      let src = this.sarea, dst = b.sarea;\n      \n      let t = b.t;\n      \n      let nsa = screen.splitArea(dst, t, b.horiz);\n      \n      if (can_rip) {\n        console.log(\"replacing\");\n        screen.replaceArea(nsa, src);\n      } else {\n        console.log(\"copying\");\n        screen.replaceArea(nsa, src.copy());\n      }\n    }\n  }\n  \n  makeBoxes(sa) {\n    let sz = 40;\n    let cx = sa.pos[0] + sa.size[0]*0.5;\n    let cy = sa.pos[1] + sa.size[1]*0.5;\n    \n    let color = this.color = \"rgba(200, 200, 200, 0.55)\";\n    let hcolor = this.hcolor = \"rgba(230, 230, 230, 0.75)\";\n    let idgen = 0;\n    let boxes = this.boxes;\n    \n    let box = (x, y, sz, horiz, t, side) => {\n      //console.log(x, y, sz);\n      \n      let b = this.overdraw.rect([x-sz[0]*0.5, y-sz[1]*0.5], sz, color);\n      boxes.push(b);\n\n      b.sarea = sa;\n      \n      let style = document.createElement(\"style\")\n      let cls = `mybox_${idgen++}`;\n      \n      b.horiz = horiz;\n      b.t = t;\n      b.side = side;\n      b.setAttribute(\"class\", cls);\n      b.setAttribute(\"is_box\", true);\n\n      b.addEventListener(\"mousemove\", this.on_mousemove.bind(this));\n\n      let onclick = b.onclick = (e) => {\n        let type = e.type.toLowerCase();\n\n        if ((e.type == \"mousedown\" || e.type == \"mouseup\") && e.button != 0) {\n          return; //another handler will cancel\n        }\n\n        console.log(\"split click\");\n\n        if (!this._finished) {\n          this.finish();\n          this.doSplit(b);\n          \n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n      \n      b.addEventListener(\"click\", onclick);\n      b.addEventListener(\"mousedown\", onclick);\n      b.addEventListener(\"mouseup\", onclick);\n\n      b.addEventListener(\"mouseenter\", (e) => {\n        console.log(\"mouse enter box\");\n        \n        if (this.curbox !== undefined) {\n          if (this.curbox.rect) {\n            this.curbox.rect.remove()\n            this.curbox.rect = undefined;\n          }\n        }\n        \n        if (b.rect !== undefined) {\n          b.rect.remove();\n          b.rect = undefined;\n        }\n        \n        b.rect = this.getBoxRect(b);\n        this.curbox = b;\n\n        console.log(\"setting hcolor\");\n        b.setColor(hcolor);\n        //b.style[\"background-color\"] = hcolor;\n      })\n      \n      b.addEventListener(\"mouseleave\", (e) => {\n        console.log(\"mouse leave box\");\n        \n        if (b.rect) {\n          b.rect.remove();\n          b.rect = undefined;\n        }\n        \n        if (this.curbox === b) {\n          this.curbox = undefined;\n        }\n\n        b.setColor(color);\n        //b.style[\"background-color\"] = color;\n      })\n      \n      style.textContent = `\n        .${cls}:hover {\n          background-color : orange;\n          fill:orange;stroke-width:2\n        }\n      `\n      //console.log(style.textContent);\n      b.appendChild(style);\n      b.setAttribute(\"class\", cls);\n\n      return b;\n    }\n    \n    let pad = 5;\n    \n    if (this.sarea) {\n      box(cx, cy, [sz, sz], -1, -1, -1);\n    }\n    \n    box(cx-sz*0.75-pad, cy, [sz*0.5, sz], false, 0.5, 'l');\n    box(cx-sz*1.2-pad, cy, [sz*0.25, sz], false, 0.3, 'l');\n    \n    box(cx+sz*0.75+pad, cy, [sz*0.5, sz], false, 0.5, 'r');\n    box(cx+sz*1.2+pad, cy, [sz*0.25, sz], false, 0.7, 'r');\n    \n    box(cx, cy-sz*0.75-pad, [sz, sz*0.5], true, 0.5, 't');\n    box(cx, cy-sz*1.2-pad, [sz, sz*0.25], true, 0.3, 't');\n    \n    box(cx, cy+sz*0.75+pad, [sz, sz*0.5], true, 0.5, 'b');\n    box(cx, cy+sz*1.2+pad, [sz, sz*0.25], true, 0.7, 'b');\n  }\n\n  getActiveBox(x, y) {\n    for (let n of this.boxes) {\n      if (n.hasAttribute && n.hasAttribute(\"is_box\")) {\n        let rect = n.getClientRects()[0];\n\n        //console.log(rect.x, rect.y);\n        if (x >= rect.x && y >= rect.y && x < rect.x + rect.width && y < rect.y + rect.height) {\n          //console.log(\"found rect\");\n          return n;\n        }\n      }\n    }\n  }\n\n  on_mousemove(e) {\n    let wid = 55;\n    let color = \"rgb(200, 200, 200, 0.7)\";\n\n    //console.trace(\"mouse move!\", e.x, e.y, this.sarea);\n\n    /*\n     manually feed events to boxes so as to work right\n     with touch events; note that pushModalLight routes\n     touch to mouse events (if no touch handlers are present).\n     */\n    let n = this.getActiveBox(e.x, e.y);\n\n    if (n !== undefined) {\n      n.setColor(this.hcolor); //\"rgba(250, 250, 250, 0.75)\");\n    }\n    //console.log(\"mouse move\", n);\n\n    if (this.boxes.active !== undefined && this.boxes.active !== n) {\n      this.boxes.active.setColor(this.color);\n      this.boxes.active.dispatchEvent(new MouseEvent(\"mouseleave\", e));\n    }\n\n    if (n !== undefined) {\n      n.dispatchEvent(new MouseEvent(\"mouseenter\", e));\n    }\n\n    this.boxes.active = n;\n    /*\n    let rec = (n) => {\n      if (n.hasAttribute && n.hasAttribute(\"is_box\")) {\n        let rect = n.getClientRects()[0];\n\n        console.log(rect.x, rect.y);\n        if (x >= rect.x && x >= rect.y && x < rect.x+rect.width && y < rect.y+rect.height) {\n          console.log(\"found rect\");\n          n.dispatchEvent(\"mouseenter\", new MouseEvent(\"mouseenter\", e));\n        }\n      }\n      if (n === undefined || n.childNodes === undefined) {\n        return;\n      }\n\n      for (let n2 of n.childNodes) {\n        rec(n2);\n      }\n      if (n.shadow) {\n        for (let n2 of n.shadow.childNodes) {\n          rec(n2);\n        }\n      }\n    };\n\n    rec(this.overdraw);\n    //*/\n    if (this.sarea === undefined) {\n      return;\n    }\n    \n    if (this.cursorbox === undefined) {\n      wid = 25;\n      this.cursorbox = this.overdraw.rect([e.x-wid*0.5, e.y-wid*0.5], [wid, wid], color);\n      this.cursorbox.style[\"pointer-events\"] = \"none\";\n    } else {\n      this.cursorbox.style[\"x\"] = (e.x-wid*0.5) + \"px\";\n      this.cursorbox.style[\"y\"] = (e.y-wid*0.5) + \"px\";\n    }\n  }\n  \n  on_mouseup(e) {\n    console.log(\"e.button\", e.button, e, e.x, e.y, this.getActiveBox(e.x, e.y));\n\n    if (e.button) {\n      this.stopPropagation();\n      this.preventDefault();\n    } else {\n      let box = this.getActiveBox(e.x, e.y);\n\n      if (box !== undefined) {\n        box.onclick(e);\n      }\n    }\n    \n    this.finish();\n  }\n  \n  modalStart(ctx) {\n    super.modalStart(ctx);\n    \n    let screen = this.screen;\n    \n    this.overdraw.clear();\n    \n    if (this.sarea) {\n      let sa = this.sarea;\n      let box = this.overdraw.rect(sa.pos, sa.size, \"rgba(100, 100, 100, 0.5)\");\n      \n      box.style[\"pointer-events\"] = \"none\";\n    }\n    \n    for (let sa of screen.sareas) {\n      this.makeBoxes(sa);\n    }\n  }\n}\n\n//controller.registerTool(AreaDragTool);\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/FrameManager_ops.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 329,
    "kind": "function",
    "name": "toolstack_getter",
    "memberof": "scripts/FrameManager_ops.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager_ops.js~toolstack_getter",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 330,
    "kind": "function",
    "name": "registerToolStackGetter",
    "memberof": "scripts/FrameManager_ops.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager_ops.js~registerToolStackGetter",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": "{registerToolStackGetter}",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "params": [
      {
        "name": "func",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 331,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/FrameManager_ops.js",
    "static": true,
    "longname": "scripts/FrameManager_ops.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 332,
    "kind": "class",
    "name": "ToolBase",
    "memberof": "scripts/FrameManager_ops.js",
    "static": true,
    "longname": "scripts/FrameManager_ops.js~ToolBase",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": "{ToolBase}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/simple_toolsys.js~simple_toolsys.ToolOp"
    ]
  },
  {
    "__docId__": 333,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true
  },
  {
    "__docId__": 334,
    "kind": "member",
    "name": "_finished",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#_finished",
    "access": "private",
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 335,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#screen",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 336,
    "kind": "method",
    "name": "start",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#start",
    "access": "public",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 337,
    "kind": "method",
    "name": "cancel",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#cancel",
    "access": "public",
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 338,
    "kind": "method",
    "name": "finish",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#finish",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 340,
    "kind": "method",
    "name": "popModal",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#popModal",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 341,
    "kind": "member",
    "name": "modaldata",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#modaldata",
    "access": "public",
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 342,
    "kind": "method",
    "name": "modalStart",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#modalStart",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 343,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 344,
    "kind": "member",
    "name": "overdraw",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#overdraw",
    "access": "public",
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 346,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 116,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 347,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 348,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/FrameManager_ops.js~ToolBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~ToolBase#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 123,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 349,
    "kind": "class",
    "name": "AreaResizeTool",
    "memberof": "scripts/FrameManager_ops.js",
    "static": true,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": "{AreaResizeTool}",
    "description": null,
    "lineNumber": 138,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolBase"
    ]
  },
  {
    "__docId__": 350,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 139,
    "undocument": true
  },
  {
    "__docId__": 351,
    "kind": "member",
    "name": "start_mpos",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#start_mpos",
    "access": "public",
    "description": null,
    "lineNumber": 144,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 352,
    "kind": "member",
    "name": "border",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#border",
    "access": "public",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 353,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#screen",
    "access": "public",
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 354,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 149,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string, \"toolpath\": string, \"icon\": *, \"description\": string, \"is_modal\": boolean, \"hotkey\": *, \"undoflag\": *, \"flag\": *, \"inputs\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 355,
    "kind": "method",
    "name": "getBorders",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#getBorders",
    "access": "public",
    "description": null,
    "lineNumber": 162,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 356,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 191,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 357,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 195,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 358,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/FrameManager_ops.js~AreaResizeTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaResizeTool#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 204,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 359,
    "kind": "class",
    "name": "SplitTool",
    "memberof": "scripts/FrameManager_ops.js",
    "static": true,
    "longname": "scripts/FrameManager_ops.js~SplitTool",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": "{SplitTool}",
    "description": null,
    "lineNumber": 285,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolBase"
    ]
  },
  {
    "__docId__": 360,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 286,
    "undocument": true
  },
  {
    "__docId__": 361,
    "kind": "member",
    "name": "done",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#done",
    "access": "public",
    "description": null,
    "lineNumber": 291,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 362,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#screen",
    "access": "public",
    "description": null,
    "lineNumber": 292,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 363,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 293,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 364,
    "kind": "member",
    "name": "sarea",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#sarea",
    "access": "public",
    "description": null,
    "lineNumber": 294,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 365,
    "kind": "member",
    "name": "t",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#t",
    "access": "public",
    "description": null,
    "lineNumber": 295,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 366,
    "kind": "member",
    "name": "start",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#start",
    "access": "public",
    "description": null,
    "lineNumber": 297,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 367,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager_ops.js~SplitTool.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 300,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string, \"toolpath\": string, \"icon\": *, \"description\": string, \"is_modal\": boolean, \"hotkey\": string, \"undoflag\": *, \"flag\": *, \"inputs\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 368,
    "kind": "method",
    "name": "modalStart",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#modalStart",
    "access": "public",
    "description": null,
    "lineNumber": 313,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 369,
    "kind": "member",
    "name": "overdraw",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#overdraw",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 370,
    "kind": "method",
    "name": "cancel",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#cancel",
    "access": "public",
    "description": null,
    "lineNumber": 325,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 371,
    "kind": "method",
    "name": "finish",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#finish",
    "access": "public",
    "description": null,
    "lineNumber": 329,
    "undocument": true,
    "params": [
      {
        "name": "canceled",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 373,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 350,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 377,
    "kind": "method",
    "name": "on_mousedown",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#on_mousedown",
    "access": "public",
    "description": null,
    "lineNumber": 386,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 378,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 389,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 379,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/FrameManager_ops.js~SplitTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~SplitTool#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 398,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 380,
    "kind": "class",
    "name": "AreaDragTool",
    "memberof": "scripts/FrameManager_ops.js",
    "static": true,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool",
    "access": "public",
    "export": true,
    "importPath": "./scripts/FrameManager_ops.js",
    "importStyle": "{AreaDragTool}",
    "description": null,
    "lineNumber": 416,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolBase"
    ]
  },
  {
    "__docId__": 381,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 417,
    "undocument": true
  },
  {
    "__docId__": 382,
    "kind": "member",
    "name": "cursorbox",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#cursorbox",
    "access": "public",
    "description": null,
    "lineNumber": 422,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 383,
    "kind": "member",
    "name": "boxes",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#boxes",
    "access": "public",
    "description": null,
    "lineNumber": 423,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 384,
    "kind": "member",
    "name": "sarea",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#sarea",
    "access": "public",
    "description": null,
    "lineNumber": 426,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 385,
    "kind": "member",
    "name": "start_mpos",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#start_mpos",
    "access": "public",
    "description": null,
    "lineNumber": 427,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 386,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#screen",
    "access": "public",
    "description": null,
    "lineNumber": 428,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 387,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 431,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string, \"toolpath\": string, \"icon\": *, \"description\": string, \"is_modal\": boolean, \"hotkey\": *, \"undoflag\": *, \"flag\": *, \"inputs\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 388,
    "kind": "method",
    "name": "finish",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#finish",
    "access": "public",
    "description": null,
    "lineNumber": 444,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 389,
    "kind": "method",
    "name": "getBoxRect",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#getBoxRect",
    "access": "public",
    "description": null,
    "lineNumber": 450,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 390,
    "kind": "method",
    "name": "doSplit",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#doSplit",
    "access": "public",
    "description": null,
    "lineNumber": 484,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 391,
    "kind": "method",
    "name": "doSplitDrop",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#doSplitDrop",
    "access": "public",
    "description": null,
    "lineNumber": 498,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 392,
    "kind": "method",
    "name": "makeBoxes",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#makeBoxes",
    "access": "public",
    "description": null,
    "lineNumber": 574,
    "undocument": true,
    "params": [
      {
        "name": "sa",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 393,
    "kind": "member",
    "name": "curbox",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#curbox",
    "access": "public",
    "description": null,
    "lineNumber": 641,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 395,
    "kind": "method",
    "name": "getActiveBox",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#getActiveBox",
    "access": "public",
    "description": null,
    "lineNumber": 696,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 396,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 710,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 398,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 779,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 399,
    "kind": "method",
    "name": "modalStart",
    "memberof": "scripts/FrameManager_ops.js~AreaDragTool",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/FrameManager_ops.js~AreaDragTool#modalStart",
    "access": "public",
    "description": null,
    "lineNumber": 796,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 400,
    "kind": "file",
    "name": "scripts/gen_vectormath.js",
    "content": "//make an optimized vector library\n\nvar basic_funcs = {\n  zero: [[], \"0.0;\"],\n  negate: [[], \"-this[X];\"],\n  combine: [[\"b\", \"u\", \"v\"], \"this[X]*u + this[X]*v;\"],\n  interp: [[\"b\", \"t\"], \"this[X] + (b[X] - this[X])*t;\"],\n  add: [[\"b\"], \"this[X] + b[X];\"],\n  addFac: [[\"b\", \"F\"], \"this[X] + b[X]*F;\"],\n  fract: [[], \"Math.fract(this[X]);\"],\n  sub: [[\"b\"], \"this[X] - b[X];\"],\n  mul: [[\"b\"], \"this[X] * b[X];\"],\n  div: [[\"b\"], \"this[X] / b[X];\"],\n  mulScalar: [[\"b\"], \"this[X] * b;\"],\n  divScalar: [[\"b\"], \"this[X] / b;\"],\n  addScalar: [[\"b\"], \"this[X] + b;\"],\n  subScalar: [[\"b\"], \"this[X] - b;\"],\n  ceil: [[], \"Math.ceil(this[X])\"],\n  floor: [[], \"Math.floor(this[X])\"],\n  abs: [[], \"Math.abs(this[X])\"],\n  min: [[], \"Math.min(this[X])\"],\n  max: [[], \"Math.max(this[X])\"],\n  clamp: [[\"MIN\", \"MAX\"], \"min(max(this[X], MAX), MIN)\"],\n};\n\nfunction make_norm_safe_dot(cls) {\n  var _dot = cls.prototype.dot;\n\n  cls.prototype._dot = _dot;\n  cls.prototype.dot = function (b) {\n    var ret = _dot.call(this, b);\n\n    if (ret >= 1.0 - DOT_NORM_SNAP_LIMIT && ret <= 1.0 + DOT_NORM_SNAP_LIMIT)\n      return 1.0;\n    if (ret >= -1.0 - DOT_NORM_SNAP_LIMIT && ret <= -1.0 + DOT_NORM_SNAP_LIMIT)\n      return -1.0;\n\n    return ret;\n  }\n}\n\nfunction genClass(name, size) {\n  var code = \"var \" + name + \" = exports.\" + name + \" = class \" + name + \" extends Array {\\n\"\n  code += \"  constructor(b) {\\n    super(\" + size + \");\\n\"\n  code += \"    this.length = \" + size + \";\\n\\n\";\n  code += \"    if (b !== undefined) this.load(b);\\n\";\n  code += \"    else this.zero();\\n\";\n  code += \"  }\\n\\n\";\n  code += \"  load(b) {\\n\";\n  code += \"    if (b === undefined) return this;\\n\\n\";\n\n  for (var i = 0; i < size; i++) {\n    code += \"    this[\" + i + \"] = b[\" + i + \"];\\n\";\n  }\n\n  code += \"\\n    return this;\\n\"\n  code += \"  }\\n\\n\";\n\n  var f;\n  var vectorDotDistance = \"  vectorDotDistance(b) {\\n\";\n  for (var i = 0; i < size; i++) {\n    vectorDotDistance += \"    var d\" + i + \" = this[\" + i + \"]-b[\" + i + \"];\\n\";\n  }\n\n  vectorDotDistance += \"    return (\"\n  for (var i = 0; i < size; i++) {\n    if (i > 0)\n      vectorDotDistance += \" + \";\n    vectorDotDistance += \"d\" + i + \"*d\" + i;\n  }\n  vectorDotDistance += \");\\n\"\n  vectorDotDistance += \"  };\\n\\n\";\n\n  code += vectorDotDistance;\n\n  var f;\n  var vectorDistance = \"  vectorDistance(b) {\\n\";\n  for (var i = 0; i < size; i++) {\n    vectorDistance += \"    var d\" + i + \" = this[\" + i + \"]-b[\" + i + \"];\\n\";\n  }\n\n  vectorDistance += \"    return sqrt(\"\n  for (var i = 0; i < size; i++) {\n    if (i > 0)\n      vectorDistance += \" + \";\n    vectorDistance += \"d\" + i + \"*d\" + i;\n  }\n  vectorDistance += \");\\n\"\n  vectorDistance += \"  };\\n\\n\";\n\n  code += vectorDistance;\n\n  var vectorLength = \"  vectorLength() {\\n\";\n  vectorLength += \"    var dot = \";\n\n  for (var i = 0; i < size; i++) {\n    if (i > 0) {\n      vectorLength += \" + \";\n    }\n    vectorLength += \"this[\" + i + \"]*this[\" + i + \"]\";\n  }\n\n  vectorLength += \";\\n\\n\";\n  vectorLength += \"    return dot != 0.0 ? Math.sqrt(dot) : 0.0;\\n\";\n  vectorLength += \"  }\\n\\n\"\n\n  code += vectorLength;\n\n  var normalize = \"  normalize() {\\n\";\n  normalize += \"    var dot = \";\n\n  for (var i = 0; i < size; i++) {\n    if (i > 0) {\n      normalize += \" + \";\n    }\n    normalize += \"this[\" + i + \"]*this[\" + i + \"]\";\n  }\n\n  normalize += \";\\n\\n\";\n  normalize += \"    if (dot <= 0.000001) return this;\\n\";\n  normalize += \"    this.mulScalar(1.0/Math.sqrt(dot));\\n\\n\";\n  normalize += \"    return this;\\n\";\n  normalize += \"  }\\n\\n\"\n\n  code += normalize;\n\n  var dot_tmpl = \"\";\n  for (var i=0; i<size; i++) {\n    if (i > 0) {\n      dot_tmpl += \" + \";\n    }\n\n    dot_tmpl += \"VAR1[\" + i + \"]*VAR2[\" + i + \"]\";\n  }\n\n  code += [\n\"  normalizedDot(b) {\",\n\"    var l1 = \" + dot_tmpl.replace(/VAR1/g, \"this\").replace(/VAR2/g, \"this\"),\n\"    var l2 = \" + dot_tmpl.replace(/VAR1/g, \"b\").replace(/VAR2/g, \"b\"),\n\"    \",\n\"    l1 = l1 != 0.0 ? Math.sqrt(l1) : 0.0;\",\n\"    l2 = l2 != 0.0 ? Math.sqrt(l2) : 0.0;\",\n\"    l1 = l1 == 0.0 ? 1.0 : 1.0 / l1;\",\n\"    l2 = l2 == 0.0 ? 1.0 : 1.0 / l2;\",\n\"    \",\n\"    return (\" + dot_tmpl.replace(/VAR1/g, \"this\").replace(/VAR2/g, \"b\") + \")*l1*l2;\",\n\"  }\\n\\n\"\n  ].join(\"\\n\");\n\n  var dot = \"  dot(b) {\\n\"\n  dot += \"    return \";\n  for (var i = 0; i < size; i++) {\n    if (i > 0) {\n      dot += \" + \";\n    }\n    dot += \"this[\" + i + \"]*b[\" + i + \"]\";\n  }\n  dot += \";\\n  }\\n\\n\";\n  code += dot;\n\n  for (var k in basic_funcs) {\n    var func = basic_funcs[k];\n    var args = func[0];\n    var line = func[1];\n    var f;\n\n    var fcode = \"  \" + k + \"(\"\n    for (var i = 0; i < args.length; i++) {\n      if (i > 0)\n        fcode += \", \";\n\n      line = line.replace(args[i], args[i].toLowerCase());\n      fcode += args[i].toLowerCase();\n    }\n    fcode += \") {\\n\";\n\n    for (var i = 0; i < size; i++) {\n      var line2 = line.replace(/X/g, \"\" + i);\n      fcode += \"    this[\" + i + \"] = \" + line2 + \"\\n\";\n    }\n\n    fcode += \"    return this;\\n\"\n    fcode += \"  }\\n\\n\";\n\n    code += fcode;\n  }\n\n  code += \"  rot2d(th) {\\n\";\n  code += [\n\"    var x = this[0];\",\n\"    var y = this[1];\",\n\"\",\n\"    if (axis == 1) {\",\n\"      this[0] = x * cos(A) + y*sin(A);\",\n\"      this[1] = y * cos(A) - x*sin(A);\",\n\"    } else {\",\n\"      this[0] = x * cos(A) - y*sin(A);\",\n\"      this[1] = y * cos(A) + x*sin(A);\",\n\"    }\",\n\"  \",\n\"    return this;\",\n\"  }\"\n  ].join(\"\\n\") + \"\\n\";\n\n  var lines = code.split(\"\\n\");\n  var code2 = \"\"\n  for (var line of lines) {\n    code2 += \"  \" + line + \"\\n\";\n  }\n\n\n  return code2;\n}\n\nvar out = \"//WARNING: AUTO-GENERATED FILE! DO NOT EDIT!\\n\"\nout += \"var _vectormath = undefined; //for debugging purposes only\\n\\n\";\nout += \"define(['util', 'matrixmath'], function(util, matrixmath) {\\n\"\nout += \"  'use strict';\\n\";\n\nout += \"\\n  var exports = _vectormath = {};\\n\\n\";\nout += \"  //forward matrix exports\\n\";\nout += \"  for (var k in matrixmath) exports[k] = matrixmath[k];\\n\\n\";\n\nout += \"  var sqrt=Math.sqrt, PI=Math.PI, sin=Math.sin, cos=Math.cos, asin=Math.asin, acos=Math.acos, atan = Math.atan,  atan2=Math.atan2;\\n\";\nout += \"  var floor=Math.floor, ceil=Math.ceil, min=Math.min, max=Math.max, fract = function(f) { return f - Math.floor(f);};\\n\\n\";\n\nout += genClass(\"Vector2\", 2) + \"  }\\n\";\nout += genClass(\"Vector3\", 3) + \"  }\\n\\n\";\nout += genClass(\"Vector4\", 4) + \"  }\\n\\n\";\n\nout += \"  //add matrix methods to vectors\\n\";\nout += \"  matrixmath.initVector(Vector2, 2);\\n\"\nout += \"  matrixmath.initVector(Vector3, 3);\\n\"\nout += \"  matrixmath.initVector(Vector4, 4);\\n\\n\"\n\nout += \"  return exports;\\n});\\n\";\nconsole.log(out);\n\nvar fs = require('fs');\nfs.writeFileSync(\"scripts/vectormath.js\", out);\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/gen_vectormath.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 401,
    "kind": "variable",
    "name": "basic_funcs",
    "memberof": "scripts/gen_vectormath.js",
    "static": true,
    "longname": "scripts/gen_vectormath.js~basic_funcs",
    "access": "public",
    "export": false,
    "importPath": "./scripts/gen_vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "{\"zero\": *, \"negate\": *, \"combine\": *, \"interp\": *, \"add\": *, \"addFac\": *, \"fract\": *, \"sub\": *, \"mul\": *, \"div\": *, \"mulScalar\": *, \"divScalar\": *, \"addScalar\": *, \"subScalar\": *, \"ceil\": *, \"floor\": *, \"abs\": *, \"min\": *, \"max\": *, \"clamp\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 402,
    "kind": "function",
    "name": "make_norm_safe_dot",
    "memberof": "scripts/gen_vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/gen_vectormath.js~make_norm_safe_dot",
    "access": "public",
    "export": false,
    "importPath": "./scripts/gen_vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 403,
    "kind": "function",
    "name": "genClass",
    "memberof": "scripts/gen_vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/gen_vectormath.js~genClass",
    "access": "public",
    "export": false,
    "importPath": "./scripts/gen_vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 404,
    "kind": "variable",
    "name": "out",
    "memberof": "scripts/gen_vectormath.js",
    "static": true,
    "longname": "scripts/gen_vectormath.js~out",
    "access": "public",
    "export": false,
    "importPath": "./scripts/gen_vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 215,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 405,
    "kind": "variable",
    "name": "fs",
    "memberof": "scripts/gen_vectormath.js",
    "static": true,
    "longname": "scripts/gen_vectormath.js~fs",
    "access": "public",
    "export": false,
    "importPath": "./scripts/gen_vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 239,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 406,
    "kind": "file",
    "name": "scripts/html5_fileapi.js",
    "content": "export function saveFile(data, filename=\"unnamed\", exts=[], mime=\"application/x-octet-stream\") {\r\n  let blob = new Blob([data], {type : mime});\r\n  let url = URL.createObjectURL(blob);\r\n\r\n  let a = document.createElement(\"a\");\r\n  a.setAttribute(\"href\", url);\r\n  a.setAttribute(\"download\", filename);\r\n\r\n  a.click();\r\n}\r\n\r\n//returns a promise\r\nexport function loadFile(filename=\"unnamed\", exts=[]) {\r\n  let input = document.createElement(\"input\");\r\n  input.type = \"file\";\r\n\r\n  exts = exts.join(\",\");\r\n\r\n  input.setAttribute(\"accept\", exts)\r\n  return new Promise((accept, reject) => {\r\n    input.onchange = function(e) {\r\n      if (this.files === undefined || this.files.length !== 1) {\r\n        reject(\"file load error\");\r\n        return;\r\n      }\r\n\r\n      let file = this.files[0];\r\n      let reader = new FileReader();\r\n\r\n      reader.onload = function(e2) {\r\n        accept(e2.target.result);\r\n      };\r\n\r\n      reader.readAsArrayBuffer(file);\r\n    }\r\n    input.click();\r\n  });\r\n}\r\n\r\nwindow._testLoadFile = function(exts=[\"*.*\"]) {\r\n  loadFile(undefined, exts).then((data) => {\r\n    console.log(\"got file data:\", data);\r\n  });\r\n};\r\n\r\nwindow._testSaveFile = function() {\r\n  let buf = _appstate.createFile();\r\n  //console.log(buf);\r\n  saveFile(buf, \"unnamed.w3d\", [\".w3d\"]);\r\n}",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/html5_fileapi.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 407,
    "kind": "function",
    "name": "saveFile",
    "memberof": "scripts/html5_fileapi.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/html5_fileapi.js~saveFile",
    "access": "public",
    "export": true,
    "importPath": "./scripts/html5_fileapi.js",
    "importStyle": "{saveFile}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      },
      {
        "name": "filename",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "unnamed",
        "defaultValue": "unnamed"
      },
      {
        "name": "exts",
        "optional": true,
        "types": [
          "*[]"
        ],
        "defaultRaw": [],
        "defaultValue": "[]"
      },
      {
        "name": "mime",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "application/x-octet-stream",
        "defaultValue": "application/x-octet-stream"
      }
    ],
    "return": null
  },
  {
    "__docId__": 408,
    "kind": "function",
    "name": "loadFile",
    "memberof": "scripts/html5_fileapi.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/html5_fileapi.js~loadFile",
    "access": "public",
    "export": true,
    "importPath": "./scripts/html5_fileapi.js",
    "importStyle": "{loadFile}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "params": [
      {
        "name": "filename",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "unnamed",
        "defaultValue": "unnamed"
      },
      {
        "name": "exts",
        "optional": true,
        "types": [
          "*[]"
        ],
        "defaultRaw": [],
        "defaultValue": "[]"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 409,
    "kind": "function",
    "name": "_testLoadFile",
    "memberof": "scripts/html5_fileapi.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/html5_fileapi.js~_testLoadFile",
    "access": "private",
    "export": false,
    "importPath": "./scripts/html5_fileapi.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "params": [
      {
        "name": "exts",
        "optional": true,
        "types": [
          "string[]"
        ],
        "defaultRaw": [
          "*.*"
        ],
        "defaultValue": "[\"*.*\"]"
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 410,
    "kind": "function",
    "name": "_testSaveFile",
    "memberof": "scripts/html5_fileapi.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/html5_fileapi.js~_testSaveFile",
    "access": "private",
    "export": false,
    "importPath": "./scripts/html5_fileapi.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 411,
    "kind": "file",
    "name": "scripts/icon_enum.js",
    "content": "\"use strict\";\n\nexport let Icons = {\n  HFLIP          : 0,\n  TRANSLATE      : 1,\n  ROTATE         : 2,\n  HELP_PICKER    : 3,\n  UNDO           : 4,\n  REDO           : 5,\n  CIRCLE_SEL     : 6,\n  BACKSPACE      : 7,\n  LEFT_ARROW     : 8,\n  RIGHT_ARROW    : 9,\n  UI_EXPAND      : 10, //triangle\n  UI_COLLAPSE    : 11, //triangle\n  FILTER_SEL_OPS : 12,\n  SCROLL_DOWN    : 13,\n  SCROLL_UP      : 14,\n  NOTE_EXCL      : 15,\n  TINY_X         : 16,\n  FOLDER         : 17,\n  FILE           : 18,\n  SMALL_PLUS     : 19,\n  SMALL_MINUS    : 20,\n  MAKE_SEGMENT   : 21,\n  MAKE_POLYGON   : 22,\n  FACE_MODE      : 23,\n  EDGE_MODE      : 24,\n  VERT_MODE      : 25,\n  CURSOR_ARROW   : 26,\n  TOGGLE_SEL_ALL : 27,\n  DELETE         : 28,\n  RESIZE         : 29,\n  Z_UP           : 30,\n  Z_DOWN         : 31,\n  SPLIT_EDGE     : 32,\n  SHOW_ANIMPATHS : 33,\n  UNCHECKED      : 34,\n  CHECKED        : 35,\n  ENUM_UNCHECKED : 36,\n  ENUM_CHECKED   : 37,\n  APPEND_VERTEX  : 38,\n  LARGE_CHECK    : 39\n};\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/icon_enum.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 412,
    "kind": "variable",
    "name": "Icons",
    "memberof": "scripts/icon_enum.js",
    "static": true,
    "longname": "scripts/icon_enum.js~Icons",
    "access": "public",
    "export": true,
    "importPath": "./scripts/icon_enum.js",
    "importStyle": "{Icons}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "{\"HFLIP\": *, \"TRANSLATE\": number, \"ROTATE\": number, \"HELP_PICKER\": number, \"UNDO\": number, \"REDO\": number, \"CIRCLE_SEL\": number, \"BACKSPACE\": number, \"LEFT_ARROW\": number, \"RIGHT_ARROW\": number, \"UI_EXPAND\": number, \"UI_COLLAPSE\": number, \"FILTER_SEL_OPS\": number, \"SCROLL_DOWN\": number, \"SCROLL_UP\": number, \"NOTE_EXCL\": number, \"TINY_X\": number, \"FOLDER\": number, \"FILE\": number, \"SMALL_PLUS\": number, \"SMALL_MINUS\": number, \"MAKE_SEGMENT\": number, \"MAKE_POLYGON\": number, \"FACE_MODE\": number, \"EDGE_MODE\": number, \"VERT_MODE\": number, \"CURSOR_ARROW\": number, \"TOGGLE_SEL_ALL\": number, \"DELETE\": number, \"RESIZE\": number, \"Z_UP\": number, \"Z_DOWN\": number, \"SPLIT_EDGE\": number, \"SHOW_ANIMPATHS\": number, \"UNCHECKED\": number, \"CHECKED\": number, \"ENUM_UNCHECKED\": number, \"ENUM_CHECKED\": number, \"APPEND_VERTEX\": number, \"LARGE_CHECK\": number}"
      ]
    }
  },
  {
    "__docId__": 413,
    "kind": "file",
    "name": "scripts/image.js",
    "content": "import * as util from './util.js';\n\n\nexport function getImageData(image) {\n  if (typeof image == \"string\") {\n    let src = image;\n    \n    image = new Image();\n    image.src = src;\n  }\n  \n  function render() {\n    let canvas = document.createElement(\"canvas\");\n    let g = canvas.getContext(\"2d\");\n    \n    canvas.width = image.width;\n    canvas.height = image.height;\n    \n    g.drawImage(image, 0, 0);\n    return g.getImageData(0, 0, image.width, image.height);\n  }\n  \n  return new Promise((accept, reject) => {\n    if (!image.complete) {\n      image.onload = () => {\n        console.log(\"image loaded\");\n        accept(render(image));\n      }\n    } else {\n      accept(render(image));\n    }\n  });\n}\n\nexport function loadImageFile() {\n  let this2 = this;\n  \n  return new Promise((accept, reject) => {\n    let input = document.createElement(\"input\");\n    input.type = \"file\";\n    \n    input.addEventListener(\"change\", function(e) {\n      let files = this.files;\n      console.log(\"file!\", e, this.files);\n      \n      console.log(\"got file\", e, files)\n      if (files.length == 0) return;\n      \n      var reader = new FileReader();\n      reader.onload = function(e) {\n        var img = new Image();\n        \n        let dataurl = img.src = e.target.result;\n        \n        window._image_url = e.target.result;\n        \n        img.onload = (e) => {\n          this2.getImageData(img).then((data) => {\n            data.dataurl = dataurl;\n            accept(data);\n          });\n        };\n      };\n      \n      reader.readAsDataURL(files[0]);\n    });\n    \n    input.click();\n  });\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/image.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 414,
    "kind": "function",
    "name": "getImageData",
    "memberof": "scripts/image.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/image.js~getImageData",
    "access": "public",
    "export": true,
    "importPath": "./scripts/image.js",
    "importStyle": "{getImageData}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "image",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 415,
    "kind": "function",
    "name": "loadImageFile",
    "memberof": "scripts/image.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/image.js~loadImageFile",
    "access": "public",
    "export": true,
    "importPath": "./scripts/image.js",
    "importStyle": "{loadImageFile}",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 416,
    "kind": "file",
    "name": "scripts/jobs.js",
    "content": "var _jobs = undefined;\n\ndefine([\n  \"util\"\n], function(util) {\n  'use strict';\n\n  /*\n  * job system design:\n   *\n   * all jobs have tags.\n   * only one job with a given tag can run at a time.\n   *\n  * */\n\n  var exports = _jobs = {};\n\n  var JobFlags = {\n  };\n\n  var JobStatus = exports.JobStatus = class JobStatus {\n    constructor() {\n      this.percent = 0.0;\n    }\n  }\n\n  var Job = exports.Job = class Job {\n    constructor(iter, tag, owner) {\n      this.iter = iter;\n      this.tag = tag;\n      this.owner = owner;\n      this.dead = false;\n      this.status = new JobStatus();\n\n      this.thens = [];\n      this.catcher = undefined;\n    }\n\n    then(cb) {\n      this.thens.push(cb);\n    }\n\n    catch(cb) {\n      this.catcher = cb;\n    }\n\n    stop() {\n      this.dead = true;\n    }\n\n    next() {\n      if (this.dead) {\n        return this.dead;\n      }\n\n      var ret = this.iter.next();\n      if (ret.done) {\n        this.dead = {done: true, value : undefined};\n      }\n\n      return ret;\n    }\n  };\n\n  var JobManager = exports.JobManager = class JobManager {\n    constructor() {\n      this.jobs = [];\n      this.job_tagmap = {};\n      this.thenqueue = [];\n    }\n\n    //only one job with a given tag can run at once\n    //if a job with same tag is already running, it will be\n    //stopped\n    run(jobiter, tag, owner) {\n      var job = new Job(jobiter, tag, owner);\n\n      if (tag in this.job_tagmap) {\n        this.job_tagmap[tag].stop();\n        this.jobs.remove(this.job_tagmap[tag]);\n      }\n\n\n      this.job_tagmap[tag] = job;\n      this.jobs.push(job);\n\n      return job;\n    }\n\n    next() {\n      for (var i=0; i<this.jobs.length; i++) {\n        var job = this.jobs[i];\n        var ret = job.next();\n\n        if (ret.done) {\n          delete this.job_tagmap[job.tag];\n          this.jobs.pop_i(i);\n          this.thenqueue.push(job);\n          i--;\n        }\n      }\n\n      for (var i=0; i<this.thenqueue.length; i++) {\n        for (var then of this.thenqueue[i].thens) {\n          try {\n            then();\n          } catch (error) {\n            util.print_stack(error);\n            console.log(\"Error while executing job promise callback\");\n          }\n        }\n      }\n\n      this.thenqueue.length = 0;\n    }\n  };\n\n  return exports;\n});\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/jobs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 417,
    "kind": "variable",
    "name": "_jobs",
    "memberof": "scripts/jobs.js",
    "static": true,
    "longname": "scripts/jobs.js~_jobs",
    "access": "private",
    "export": false,
    "importPath": "./scripts/jobs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 418,
    "kind": "file",
    "name": "scripts/kdtree.js",
    "content": "var _kdtree = undefined;\n\n//'ni' is shorthand for 'nodeindex', a point into the typed array data structure\n\ndefine([\"util\", \"vectormath\"], function(util, vectormath) {\n  \"use strict\";\n  \n  var exports = _kdtree = {};\n  var Vector3 = vectormath.Vector3;\n  var Matrix4 = vectormath.Matrix4;\n  \n  //maximum points per node before splitting\n  //make sure to raise this after testing\n  var MAXPOINTS = 16\n  var MAXDEPTH = 1024\n  \n  var log_everything = false;\n  \n  /*seems like embedding the points in the nodes, while wasteful of memory,\n    should be more cache efficient than referencing another typed array*/\n  var NXMIN=0, NYMIN=1, NZMIN=2, NXMAX=3, NYMAX=4, NZMAX=5, NSPLITPLANE=6,\n      NSPLITPOS=7, NCHILDA=8, NCHILDB=9, NTOTPOINT=10, TOTN = 11 + MAXPOINTS*4;\n\n  //points are stored (x, y, z, id);\n      \n  var _insert_split_out = [0, 0];\n  var _split_tmps = util.cachering.fromConstructor(Vector3, 1024);\n  var _insert_tmps = util.cachering.fromConstructor(Vector3, 1024);\n  var _split_tmps_2 = util.cachering.fromConstructor(Vector3, 1024);\n  var _foreach_tmp = new Vector3();\n  var _tmp = new Vector3();\n  \n  var KDTree = exports.KDTree = class KDTree {\n    constructor(min, max) {\n      this.min = new Vector3(min);\n      this.max = new Vector3(max);\n      \n      this.last_warn_time = util.time_ms();\n      \n      this._point_cachering = new util.cachering(() => {return {co : new Vector3(), id : undefined}}, 512);\n      this._node_cachering = new util.cachering(() => {return {min : new Vector3(), max : new Vector3(), splitpos : undefined, splitplane : undefined, id : undefined}}, 512);\n      this._search_cachering = util.cachering.fromConstructor(Vector3, 64);\n      \n      this.usednodes = 0;\n      this.data = new Float64Array(TOTN*32);\n      this.maxdepth = MAXDEPTH;\n      this.totpoint = 0;\n      \n      this.root = this.newNode(min, max);\n    }\n    \n    newNode(min, max) {\n      var maxnodes = this.data.length / TOTN;\n      \n      if (this.usednodes >= maxnodes) {\n        let newdata = new Float64Array(this.data.length*2);\n        let data = this.data;\n        let ilen = data.length;\n        \n        for (let i=0; i<ilen; i++) {\n          newdata[i] = data[i];\n        }\n        \n        this.data = newdata;\n      }\n      \n      var ni = this.usednodes*TOTN;\n      var data = this.data;\n      \n      for (let j=ni; j<ni+TOTN; j++) {\n        data[j] = 0;\n      }\n      \n      data[ni+NXMIN] = min[0];\n      data[ni+NYMIN] = min[1];\n      data[ni+NZMIN] = min[2];\n      \n      data[ni+NXMAX] = max[0];\n      data[ni+NYMAX] = max[1];\n      data[ni+NZMAX] = max[2];\n      \n      this.usednodes++;\n      \n      return ni;\n    }\n    \n    insert(x, y, z, id) {\n      if (id === undefined) {\n        id = z;\n        z = 0.0;\n      }\n      \n      let recurse = (ni, depth) => {\n        let data = this.data;\n        \n        if (depth >= this.maxdepth) {\n          if (log_everything || util.time_ms() - this.last_warn_time > 500) {\n            console.log(depth)\n            console.warn(\"Malformed data: 3 to insert point\", depth, x.toFixed(4), y.toFixed(4), z.toFixed(4), \"id=\", id);\n            this.last_warn_time = util.time_ms();\n          }\n          return;\n        }\n        \n        //not a leaf node?\n        if (data[ni+NCHILDA] != 0) {\n          let axis = data[ni+NSPLITPLANE];\n          let split = data[ni+NSPLITPOS];\n          \n          let paxis = axis == 0 ? x : (axis == 1 ? y : z);\n          \n          if (paxis == split) {\n            //handle case of points exactly on boundary\n            //distribute point randomly to children\n            \n            let child = !!(Math.random() > 0.5);\n            //console.log(\"exact!\", child, p[axis], split, axis);\n            \n            recurse(data[ni+NCHILDA+child], depth+1);\n          } else if (paxis < split) {\n            recurse(data[ni+NCHILDA], depth+1);\n          } else {\n            recurse(data[ni+NCHILDB], depth+1);\n          }\n          \n        //a full leaf node?\n        } else if (data[ni+NTOTPOINT] >= MAXPOINTS) {\n          this.split(ni, _insert_split_out);\n\n          this.insert.apply(this, arguments);\n        } else { //add point\n          let i = ni + NTOTPOINT + 1 + data[ni+NTOTPOINT]*4;\n          \n          data[i++] = x;\n          data[i++] = y;\n          data[i++] = z;\n          data[i++] = id;\n          \n          data[ni+NTOTPOINT]++;\n        }\n      }\n      \n      recurse(this.root, 0);\n      this.totpoint++;\n    }\n    \n    forEachNode(cb, thisvar) {\n      let cachering = this._node_cachering;\n      let data = this.data;\n      \n      let recurse = (ni) => {\n        var n = cachering.next();\n        \n        for (var i=0; i<3; i++) {\n          n.min[i] = data[ni+i];\n          n.max[i] = data[ni+3+i];\n        }\n        \n        n.id = ni;\n        n.splitplane = data[ni+NSPLITPLANE];\n        n.splitpos = data[ni+NSPLITPOS];\n        \n        if (thisvar !== undefined) {\n          cb.call(thisvar, n);\n        } else {\n          cb(n);\n        }\n        \n        if (data[ni+NCHILDA] != 0) {\n          recurse(data[ni+NCHILDA]);\n          recurse(data[ni+NCHILDB]);\n        }\n      }\n      \n      recurse(this.root);\n    }\n    \n    iterAllPoints(cb, thisvar) {\n      let cachering = this._point_cachering;\n      \n      let recurse = (ni) => {\n        let data = this.data;\n        \n        if (data[ni+NCHILDA] != 0) {\n          recurse(data[ni+NCHILDA]);\n          recurse(data[ni+NCHILDB]);\n        } else {\n          let totpoint = data[ni+NTOTPOINT];\n          let j = ni + NTOTPOINT + 1;\n          \n          for (let i=0; i<totpoint; i++) {\n            let p = cachering.next();\n            \n            p.co[0] = data[j++];\n            p.co[1] = data[j++];\n            p.co[2] = data[j++];\n            p.id = data[j++];\n            \n            if (thisvar !== undefined) {\n              cb.call(thisvar, p);\n            } else {\n              cb(p);\n            }\n          }\n        }\n      }\n      \n      recurse(this.root);\n    }\n    \n          //this._point_cachering\n    \n    //new_nodes_out is an array \n    split(ni, new_nodes_out) {\n      //find split point\n      let data = this.data;\n      let startk = ni + NTOTPOINT + 1;\n      let totp = data[ni + NTOTPOINT];\n      \n      let bestaxis = undefined;\n      let bestsplit = undefined;\n      let bestfit = undefined;\n      \n      if (totp == 0) {\n        console.warn(\"TRIED TO SPLIT AN EMPTY NODE!\");\n      }\n        \n      //find best split axis\n      for (let axis=0; axis<3; axis++) {\n        let centroid = 0;\n        let amin = 1e17, amax=-1e17;\n        \n        for (let j=0, k=startk; j<totp; j++, k += 4) {\n            centroid += data[k+axis];\n            \n            amin = Math.min(data[k+axis], amin);\n            amax = Math.max(data[k+axis], amax);\n        }\n        \n        if (amax-amin < 0.0001) {\n          continue;\n        }\n        \n        centroid /= totp;\n        let fit = 0;\n        \n        for (let j=0, k=startk; j<totp; j++, k += 4) {\n          fit += data[k+axis] < centroid ? -1 : 1;\n        }\n        fit = Math.abs(fit);\n        \n        var size=0;\n        for (let k=0; k<3; k++) {\n          size += Math.max(data[ni+3+k], data[ni+k]);\n        }\n        \n        let aspect = (data[ni+3+axis] - data[ni+axis]) / size;\n        \n        if (aspect > 0 && aspect < 1)\n          aspect = 1 / aspect;\n        \n        if (fit != totp && aspect > 0.001) {\n          fit += aspect*7.0;\n        }\n        \n        //console.log(\"A2\", aspect);\n      \n        if (bestaxis === undefined || fit < bestfit) {\n          bestfit = fit;\n          bestsplit = centroid;\n          bestaxis = axis;\n        }\n      }\n      \n      if (bestaxis === undefined) {\n        if (util.time_ms() - this.last_warn_time > 500) {\n          console.warn(\"Failed to split node; points were probably all duplicates of each other\");\n          this.last_warn_time = util.time_ms();\n        }\n        \n        return;\n      }\n      \n//      console.log(bestsplit, bestaxis, ni);\n      \n      //split\n      let min1 = _split_tmps.next().zero(), max1 = _split_tmps.next().zero();\n      let min2 = _split_tmps.next().zero(), max2 = _split_tmps.next().zero();\n      \n      for (let i=0; i<3; i++) {\n        min1[i] = data[ni+i];\n        max1[i] = data[ni+NXMAX+i];\n      }\n      \n      min2.load(min1);\n      max2.load(max1);\n      \n      max1[bestaxis] = bestsplit;\n      min2[bestaxis] = bestsplit;\n      \n      let c1 = this.newNode(min1, max1);\n      let c2 = this.newNode(min2, max2);\n      \n      data = this.data;\n      \n      data[ni+NCHILDA] = c1;\n      data[ni+NCHILDB] = c2;\n      data[ni+NSPLITPOS] = bestsplit;\n      data[ni+NSPLITPLANE] = bestaxis;\n      \n      totp = data[ni+NTOTPOINT];\n      startk = ni + NTOTPOINT + 1;\n      \n      data[ni+NTOTPOINT] = 0;\n      \n      if (new_nodes_out !== undefined) {\n        new_nodes_out[0] = c1;\n        new_nodes_out[1] = c2;\n      }\n      \n      for (let k=startk, j=0; j<totp; j++, k += 4) {\n        this.insert(data[k], data[k+1], data[k+2], data[k+3]);\n      }\n    }\n    \n    forEachPoint(x, y, r, callback, thisvar) {\n      var p = _foreach_tmp;\n      \n      p[0] = x;\n      p[1] = y;\n      p[2] = 0;\n      \n      return this.search(p, r, callback, thisvar);\n    }\n    \n    //if callback returns true then the search will stop\n    search(p, r, callback, thisvar) {\n      let stop = false;\n      \n      let data = this.data;\n      let cachering = this._point_cachering;\n      let co = this._search_cachering.next();\n      \n      let recurse = (ni) => {\n        if (stop) {\n          return;\n        }\n        \n        if (data[ni+NCHILDA] != 0) {\n          for (let si=0; si<2; si++) {\n            let ni2 = data[ni+NCHILDA+si];\n            let ok = 0;\n            \n            for (let i=0; i<3; i++) {\n              let a = data[ni2+i], b = data[ni2+i+3];\n              \n              //console.log(a, b, p[i], r);\n              ok += !!(p[i]+2*r >= a && p[i]-2*r <= b);\n            }\n            \n            if (ok == 3) {\n              recurse(ni2);\n            }\n          }\n        } else if (data[ni+NCHILDA] == 0) {\n          let totp = data[ni+NTOTPOINT];\n          let k = ni+NTOTPOINT + 1;\n          \n          for (let j=0; j<totp; j++, k += 4) {\n            co[0] = data[k];\n            co[1] = data[k+1];\n            co[2] = data[k+2];\n            \n            let dx = co[0] - p[0];\n            let dy = co[1] - p[1];\n            let dz = p.length > 2 ? (co[2] - p[2]) : 0;\n              \n            if (dx*dx + dy*dy + dz*dz < r*r) {\n              let dostop;\n              \n              if (thisvar) {\n                dostop = callback.call(thisvar, data[k+3]);\n              } else {\n                dostop = callback(data[k+3]);\n              }\n              \n              if (dostop) {\n                stop = true;\n                break;\n              }\n            }\n          }\n        }\n      }\n      \n      recurse(this.root);\n    }\n\n    draw(g) {\n      let d = this.data;\n      \n      let recurse = (ni) => {\n        g.beginPath();\n        g.rect(d[ni+NXMIN], d[ni+NYMIN], d[ni+NXMAX] - d[ni+NXMIN], d[ni+NYMAX] - d[ni+NYMIN]);\n        g.strokeStyle = \"orange\";\n        g.fillStyle = \"rgba(255, 150, 50, 0.25)\";\n        g.stroke();\n        \n        if (d[ni+NCHILDA] == 0.0) { //leaf node?\n          g.fill();\n\n          let r = 0.25*(this.max[0] - this.min[0]) / Math.sqrt(this.totpoint);\n          let totpoint = d[ni+NTOTPOINT];\n\n          g.beginPath();\n          \n          for (let i=0; i<totpoint*4; i += 4) {\n            let i2 = ni + NTOTPOINT + 1 + i;\n            \n            let x = d[i2], y = d[i2+1], z = d[i2+2], id = d[i2+3];\n            \n            g.moveTo(x, y);\n            g.arc(x, y, r, -Math.PI, Math.PI);\n          }\n          \n          g.fillStyle = \"rgba(100, 150, 250, 0.5)\";\n          g.fill();\n        }\n        \n        if (d[ni+NCHILDA] != 0) {\n          recurse(d[ni+NCHILDA]);\n          recurse(d[ni+NCHILDB]);\n        }\n      }\n      \n      recurse(this.root);\n    }\n    \n    balance() {\n      //return;\n      /*\n      balance tree.  idea is to do one level at a time, insert all points, subdivide all nodes in that\n      level that needs subdivision and only then recurse.\n      \n      we can't do that with this data structure which is optimized for speed of memory access.\n      so we have to build a temporary structure.\n      */\n      \n      class Node extends Array {\n        constructor(min, max) {\n          super();\n          \n          this.min = new Vector3(min);\n          this.max = new Vector3(max);\n          this.bestpos = undefined;\n          this.bestaxis = undefined;\n          this.bestfit = undefined;\n          \n          this.nodes = [undefined, undefined];\n          \n        }\n      }\n      \n      var min = new Vector3();\n      var max = new Vector3();\n      \n      for (var i=0; i<3; i++) {\n        min[i] = this.data[this.root+i];\n        max[i] = this.data[this.root+3+i];\n      }\n      \n      var root = new Node(min, max);\n      \n      this.iterAllPoints((p, id) => {\n        for (var j=0; j<3; j++) {\n          root.push(p.co[j]);\n        }\n        \n        root.push(p.id);\n      });\n      \n      let recurse = (node, depth) => {\n        if (depth >= this.maxdepth) {\n          if (log_everything || util.time_ms() - this.last_warn_time > 500) {\n            console.warn(\"Malformed data: failed to insert point during balancing, depth:\", depth);\n            this.last_warn_time = util.time_ms();\n          }\n          \n          return;\n        }\n        \n        if (node.length/4 < MAXPOINTS) {\n          return;\n        }\n        \n        let bestfit = undefined, bestpos = undefined, bestaxis = undefined;\n        let size = 0;\n        \n        for (let axis=0; axis<3; axis++) {\n          size = Math.max(size, node.max[axis] - node.min[axis]);\n        }\n        \n        for (let axis=0; axis<3; axis++) {\n          let centroid = 0;\n          let amin = 1e17, amax = -1e17;\n          \n          for (let i=0; i<node.length; i += 4) {\n            centroid += node[i+axis];\n            \n            amin = Math.min(amin, node[i+axis]);\n            amax = Math.max(amax, node[i+axis]);\n          }\n          \n          //points lie in axis's plane?\n          if (amax-amin < 0.00001) {\n            continue;\n          }\n          \n          centroid /= node.length/4;\n          \n          let fit = 0;\n          \n          for (let i=0; i<node.length; i += 4) {\n            fit += node[i+axis] < centroid ? -1 : 1;\n          }\n          fit = Math.abs(fit);\n          \n          let aspect = (node.max[axis] - node.min[axis]) / size;\n          \n          if (aspect > 0 && aspect < 1)\n            aspect = 1 / aspect;\n          \n          if (fit != node.length/4 && aspect > 0.001) {\n            fit += aspect*7.0;\n          }\n\n          if (bestfit === undefined || fit < bestfit) {\n            bestfit = fit;\n            bestpos = centroid;\n            bestaxis = axis;\n          }\n        }\n        \n        if (bestfit === undefined) {\n          console.warn(\"data integrity error in balance(), node was fill with duplicate points\");\n          return;\n        }\n        \n        node.bestpos = bestpos;\n        node.bestaxis = bestaxis;\n        node.bestfit = bestfit;\n        \n        //console.log(bestaxis, bestpos, bestfit);\n        \n        min.load(node.min);\n        max.load(node.max);\n        \n        max[bestaxis] = bestpos;\n        let n1 = new Node(min, max);\n        \n        max.load(node.max);\n        min[bestaxis] = bestpos;\n        let n2 = new Node(min, max);\n        \n        for (let i=0; i<node.length; i += 4) {\n          let child = node[i+bestaxis] < bestpos ? n1 : n2;\n          \n          for (let j=0; j<4; j++) {\n            child.push(node[i+j]);\n          }\n        }\n        \n        node.nodes[0] = n1;\n        node.nodes[1] = n2;\n        \n        node.length = 0;\n        \n        recurse(n1, depth+1);\n        recurse(n2, depth+1);\n      }\n      \n      recurse(root, 0);\n      \n      this.data.fill(0, 0, this.data.length);\n      this.usednodes = 0;\n      this.root = this.newNode(root.min, root.max);\n      \n      let recurse2 = (node, ni) => {\n        if (node.nodes[0] !== undefined) {\n          this.data[ni+NSPLITPLANE] = node.bestaxis;\n          this.data[ni+NSPLITPOS] = node.bestpos;\n          \n          let n1 = this.newNode(node.nodes[0].min, node.nodes[0].max);\n          let n2 = this.newNode(node.nodes[1].min, node.nodes[1].max);\n          \n          this.data[ni+NCHILDA] = n1;\n          this.data[ni+NCHILDB] = n2;\n          \n          recurse2(node.nodes[0], n1);\n          recurse2(node.nodes[1], n2);\n        } else {\n          //console.log(\"yay, found points\", ni, node.length/4);\n          let data = this.data;\n          \n          data[ni+NTOTPOINT] = node.length/4;\n          \n          let j = ni + NTOTPOINT + 1;\n          \n          for (let i=0; i<node.length; i += 4) {\n            if (i/4 >= MAXPOINTS) {\n              console.warn(\"ran over MAXPOINTS in balance!\", node.length/4);\n              break;\n            }\n            \n            for (let k=0; k<4; k++) {\n              data[j++] = node[i+k];\n            }\n          }\n        }\n      };\n      \n      recurse2(root, this.root);\n      \n      return this;\n    }\n  }\n  \n  return exports;\n});\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/kdtree.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 419,
    "kind": "variable",
    "name": "_kdtree",
    "memberof": "scripts/kdtree.js",
    "static": true,
    "longname": "scripts/kdtree.js~_kdtree",
    "access": "private",
    "export": false,
    "importPath": "./scripts/kdtree.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 420,
    "kind": "file",
    "name": "scripts/math.js",
    "content": "\"use strict\";\n\nimport * as util from './util.js';\nimport * as vectormath from './vectormath.js';\n\nexport function aabb_overlap_area(pos1, size1, pos2, size2) {\n  let r1=0.0, r2=0.0;\n\n  for (let i=0; i<2; i++) {\n    let a1 = pos1[i], a2 = pos2[i];\n    let b1 = pos1[i] + size1[i];\n    let b2 = pos2[i] + size2[i];\n\n    if (b1 >= a2 && a1 <= b2) {\n      let r = a2 - b1;\n      \n      if (i) {\n        r2 = r;\n      } else {\n        r1 = r;\n      }\n    }\n  }\n\n  return r1*r2;\n}\n\nexport function aabb_isect_2d(pos1, size1, pos2, size2) {\n  var ret=0;\n  for (var i=0; i<2; i++) {\n    var a=pos1[i];\n    var b=pos1[i]+size1[i];\n    var c=pos2[i];\n    var d=pos2[i]+size2[i];\n    if (b>=c&&a<=d)\n      ret+=1;\n  }\n  return ret==2;\n};\n\n\n//XXX refactor to use es6 classes,\n//    or at last the class system in typesystem.js\nfunction init_prototype(cls, proto) {\n  for (var k in proto) {\n    cls.prototype[k] = proto[k];\n  }\n  \n  return cls.prototype;\n}\n\nfunction inherit(cls, parent, proto) {\n  cls.prototype = Object.create(parent.prototype);\n  \n  for (var k in proto) {\n    cls.prototype[k] = proto[k];\n  }\n  \n  return cls.prototype;\n}\n\nvar Vector2 = vectormath.Vector2, Vector3 = vectormath.Vector3;\nvar Vector4 = vectormath.Vector4, Matrix4 = vectormath.Matrix4;\n\nvar set = util.set;\n\n//everything below here was compiled from es6 code  \n//variables starting with $ are function static local vars,\n//like in C.  don't use them outside their owning functions.\n//\n//except for $_mh and $_swapt.  they were used with a C macro\n//preprocessor.\nvar $_mh, $_swapt;\n\n//XXX destroy me\nexport const feps = 2.22e-16;\n\nexport const COLINEAR = 1;\nexport const LINECROSS = 2;\nexport const COLINEAR_ISECT = 3;\n\nvar _cross_vec1=new Vector3();\nvar _cross_vec2=new Vector3();\n\nexport const SQRT2 = Math.sqrt(2.0);\nexport const FEPS_DATA = {\n  F16 : 1.11e-16,\n  F32 : 5.96e-08,\n  F64 : 4.88e-04\n};\n\n/*use 32 bit epsilon by default, since we're often working from\n  32-bit float data.  note that javascript uses 64-bit doubles \n  internally.*/\nexport const FEPS = FEPS_DATA.F32;\nexport const FLOAT_MIN = -1e+21;\nexport const FLOAT_MAX = 1e+22;\nexport const Matrix4UI = Matrix4;\n\n/*\nvar Matrix4UI=exports.Matrix4UI = function(loc, rot, size) {\n  if (rot==undefined) {\n      rot = undefined;\n  }\n  \n  if (size==undefined) {\n      size = undefined;\n  }\n  \n  Object.defineProperty(this, \"loc\", {get: function() {\n    var t=new Vector3();\n    this.decompose(t);\n    return t;\n  }, set: function(loc) {\n    var l=new Vector3(), r=new Vector3(), s=new Vector3();\n    this.decompose(l, r, s);\n    this.calc(loc, r, s);\n  }});\n  \n  Object.defineProperty(this, \"size\", {get: function() {\n    var t=new Vector3();\n    this.decompose(undefined, undefined, t);\n    return t;\n  }, set: function(size) {\n    var l=new Vector3(), r=new Vector3(), s=new Vector3();\n    this.decompose(l, r, s);\n    this.calc(l, r, size);\n  }});\n  \n  Object.defineProperty(this, \"rot\", {get: function() {\n    var t=new Vector3();\n    this.decompose(undefined, t);\n    return t;\n  }, set: function(rot) {\n    var l=new Vector3(), r=new Vector3(), s=new Vector3();\n    this.decompose(l, r, s);\n    this.calc(l, rot, s);\n  }});\n  \n  if (loc instanceof Matrix4) {\n      this.load(loc);\n      return ;\n  }\n  \n  if (rot==undefined)\n    rot = [0, 0, 0];\n  if (size==undefined)\n    size = [1.0, 1.0, 1.0];\n  this.makeIdentity();\n  this.calc(loc, rot, size);\n};\n\nMatrix4UI.prototype = inherit(Matrix4UI, Matrix4, {\n  calc : function(loc, rot, size) {\n    this.rotate(rot[0], rot[1], rot[2]);\n    this.scale(size[0], size[1], size[2]);\n    this.translate(loc[0], loc[1], loc[2]);\n  }\n\n});\n*/\n\nif (FLOAT_MIN!=FLOAT_MIN||FLOAT_MAX!=FLOAT_MAX) {\n    FLOAT_MIN = 1e-05;\n    FLOAT_MAX = 1000000.0;\n    console.log(\"Floating-point 16-bit system detected!\");\n}\n\nvar _static_grp_points4=new Array(4);\nvar _static_grp_points8=new Array(8);\nexport function get_rect_points(p, size) {\n  var cs;\n  if (p.length==2) {\n      cs = _static_grp_points4;\n      cs[0] = p;\n      cs[1] = [p[0]+size[0], p[1]];\n      cs[2] = [p[0]+size[0], p[1]+size[1]];\n      cs[3] = [p[0], p[1]+size[1]];\n  }\n  else \n    if (p.length==3) {\n      cs = _static_grp_points8;\n      cs[0] = p;\n      cs[1] = [p[0]+size[0], p[1], p[2]];\n      cs[2] = [p[0]+size[0], p[1]+size[1], p[2]];\n      cs[3] = [p[0], p[1]+size[0], p[2]];\n      cs[4] = [p[0], p[1], p[2]+size[2]];\n      cs[5] = [p[0]+size[0], p[1], p[2]+size[2]];\n      cs[6] = [p[0]+size[0], p[1]+size[1], p[2]+size[2]];\n      cs[7] = [p[0], p[1]+size[0], p[2]+size[2]];\n  }\n  else {\n    throw \"get_rect_points has no implementation for \"+p.length+\"-dimensional data\";\n  }\n  return cs;\n};\n\nexport function get_rect_lines(p, size) {\n  var ps=get_rect_points(p, size);\n  if (p.length==2) {\n      return [[ps[0], ps[1]], [ps[1], ps[2]], [ps[2], ps[3]], [ps[3], ps[0]]];\n  }\n  else \n    if (p.length==3) {\n      var l1=[[ps[0], ps[1]], [ps[1], ps[2]], [ps[2], ps[3]], [ps[3], ps[0]]];\n      var l2=[[ps[4], ps[5]], [ps[5], ps[6]], [ps[6], ps[7]], [ps[7], ps[4]]];\n      l1.concat(l2);\n      l1.push([ps[0], ps[4]]);\n      l1.push([ps[1], ps[5]]);\n      l1.push([ps[2], ps[6]]);\n      l1.push([ps[3], ps[7]]);\n      return l1;\n  }\n  else {\n    throw \"get_rect_points has no implementation for \"+p.length+\"-dimensional data\";\n  }\n};\n\nvar $vs_simple_tri_aabb_isect=[0, 0, 0];\nexport function simple_tri_aabb_isect(v1, v2, v3, min, max) {\n  $vs_simple_tri_aabb_isect[0] = v1;\n  $vs_simple_tri_aabb_isect[1] = v2;\n  $vs_simple_tri_aabb_isect[2] = v3;\n  for (var i=0; i<3; i++) {\n      var isect=true;\n      for (var j=0; j<3; j++) {\n          if ($vs_simple_tri_aabb_isect[j][i]<min[i]||$vs_simple_tri_aabb_isect[j][i]>=max[i])\n            isect = false;\n      }\n      if (isect)\n        return true;\n  }\n  return false;\n};\n\nexport class MinMax {\n  constructor(totaxis) {\n    if (totaxis==undefined) {\n        totaxis = 1;\n    }\n    this.totaxis = totaxis;\n    if (totaxis!=1) {\n        let cls;\n        \n        switch (totaxis) {\n          case 2:\n            cls = Vector2;\n            break;\n          case 3:\n            cls = Vector3;\n            break;\n          case 4:\n            cls = Vector4;\n            break;\n          default:\n            cls = Array;\n            break;\n        }\n        \n        this._min = new cls(totaxis);\n        this._max = new cls(totaxis);\n        this.min = new cls(totaxis);\n        this.max = new cls(totaxis);\n    }\n    else {\n      this.min = this.max = 0;\n      this._min = FLOAT_MAX;\n      this._max = FLOAT_MIN;\n    }\n    this.reset();\n    this._static_mr_co = new Array(this.totaxis);\n    this._static_mr_cs = new Array(this.totaxis*this.totaxis);\n  }\n  \n  load(mm) {\n    if (this.totaxis==1) {\n        this.min = mm.min;\n        this.max = mm.max;\n        this._min = mm.min;\n        this._max = mm.max;\n    }\n    else {\n      this.min = new Vector3(mm.min);\n      this.max = new Vector3(mm.max);\n      this._min = new Vector3(mm._min);\n      this._max = new Vector3(mm._max);\n    }\n  }\n  \n  reset() {\n    var totaxis=this.totaxis;\n    if (totaxis==1) {\n        this.min = this.max = 0;\n        this._min = FLOAT_MAX;\n        this._max = FLOAT_MIN;\n    }\n    else {\n      for (var i=0; i<totaxis; i++) {\n          this._min[i] = FLOAT_MAX;\n          this._max[i] = FLOAT_MIN;\n          this.min[i] = 0;\n          this.max[i] = 0;\n      }\n    }\n  }\n\n  minmax_rect(p, size) {\n    var totaxis=this.totaxis;\n    var cs=this._static_mr_cs;\n    if (totaxis==2) {\n        cs[0] = p;\n        cs[1] = [p[0]+size[0], p[1]];\n        cs[2] = [p[0]+size[0], p[1]+size[1]];\n        cs[3] = [p[0], p[1]+size[1]];\n    }\n    else \n      if (totaxis = 3) {\n        cs[0] = p;\n        cs[1] = [p[0]+size[0], p[1], p[2]];\n        cs[2] = [p[0]+size[0], p[1]+size[1], p[2]];\n        cs[3] = [p[0], p[1]+size[0], p[2]];\n        cs[4] = [p[0], p[1], p[2]+size[2]];\n        cs[5] = [p[0]+size[0], p[1], p[2]+size[2]];\n        cs[6] = [p[0]+size[0], p[1]+size[1], p[2]+size[2]];\n        cs[7] = [p[0], p[1]+size[0], p[2]+size[2]];\n    }\n    else {\n      throw \"Minmax.minmax_rect has no implementation for \"+totaxis+\"-dimensional data\";\n    }\n    for (var i=0; i<cs.length; i++) {\n        this.minmax(cs[i]);\n    }\n  }\n\n  minmax(p) {\n    var totaxis=this.totaxis;\n    \n    if (totaxis==1) {\n        this._min = this.min = Math.min(this._min, p);\n        this._max = this.max = Math.max(this._max, p);\n    } else if (totaxis == 2) {\n      this._min[0] = this.min[0] = Math.min(this._min[0], p[0]);\n      this._min[1] = this.min[1] = Math.min(this._min[1], p[1]);\n      this._max[0] = this.max[0] = Math.max(this._max[0], p[0]);\n      this._max[1] = this.max[1] = Math.max(this._max[1], p[1]);\n    } else if (totaxis == 3) {\n      this._min[0] = this.min[0] = Math.min(this._min[0], p[0]);\n      this._min[1] = this.min[1] = Math.min(this._min[1], p[1]);\n      this._min[2] = this.min[2] = Math.min(this._min[2], p[2]);\n      this._max[0] = this.max[0] = Math.max(this._max[0], p[0]);\n      this._max[1] = this.max[1] = Math.max(this._max[1], p[1]);\n      this._max[2] = this.max[2] = Math.max(this._max[2], p[2]);\n    } else {\n      for (var i=0; i<totaxis; i++) {\n          this._min[i] = this.min[i] = Math.min(this._min[i], p[i]);\n          this._max[i] = this.max[i] = Math.max(this._max[i], p[i]);\n      }\n    }\n  }\n\n  static fromSTRUCT(reader) {\n    var ret=new MinMax();\n    reader(ret);\n    return ret;\n  }\n};\nMinMax.STRUCT = \"\\n  math.MinMax {\\n    min     : vec3;\\n    max     : vec3;\\n    _min    : vec3;\\n    _max    : vec3;\\n    totaxis : int;\\n  }\\n\";\n\nexport function winding(a, b, c, zero_z, tol) {\n  if (tol == undefined) tol = 0.0;\n  \n  for (var i=0; i<a.length; i++) {\n      _cross_vec1[i] = b[i]-a[i];\n      _cross_vec2[i] = c[i]-a[i];\n  }\n  if (a.length==2 || zero_z) {\n      _cross_vec1[2] = 0.0;\n      _cross_vec2[2] = 0.0;\n  }\n  _cross_vec1.cross(_cross_vec2);\n  return _cross_vec1[2]>tol;\n};\nexport function inrect_2d(p, pos, size) {\n  if (p==undefined||pos==undefined||size==undefined) {\n      console.trace();\n      console.log(\"Bad paramters to inrect_2d()\");\n      console.log(\"p: \", p, \", pos: \", pos, \", size: \", size);\n      return false;\n  }\n  return p[0]>=pos[0]&&p[0]<=pos[0]+size[0]&&p[1]>=pos[1]&&p[1]<=pos[1]+size[1];\n};\nvar $smin_aabb_isect_line_2d=new Vector2();\nvar $ssize_aabb_isect_line_2d=new Vector2();\nvar $sv1_aabb_isect_line_2d=new Vector2();\nvar $ps_aabb_isect_line_2d=[new Vector2(), new Vector2(), new Vector2()];\nvar $l1_aabb_isect_line_2d=[0, 0];\nvar $smax_aabb_isect_line_2d=new Vector2();\nvar $sv2_aabb_isect_line_2d=new Vector2();\nvar $l2_aabb_isect_line_2d=[0, 0];\nexport function aabb_isect_line_2d(v1, v2, min, max) {\n  for (var i=0; i<2; i++) {\n      $smin_aabb_isect_line_2d[i] = Math.min(min[i], v1[i]);\n      $smax_aabb_isect_line_2d[i] = Math.max(max[i], v2[i]);\n  }\n  $smax_aabb_isect_line_2d.sub($smin_aabb_isect_line_2d);\n  $ssize_aabb_isect_line_2d.load(max).sub(min);\n  if (!aabb_isect_2d($smin_aabb_isect_line_2d, $smax_aabb_isect_line_2d, min, $ssize_aabb_isect_line_2d))\n    return false;\n  for (var i=0; i<4; i++) {\n      if (inrect_2d(v1, min, $ssize_aabb_isect_line_2d))\n        return true;\n      if (inrect_2d(v2, min, $ssize_aabb_isect_line_2d))\n        return true;\n  }\n  $ps_aabb_isect_line_2d[0] = min;\n  $ps_aabb_isect_line_2d[1][0] = min[0];\n  $ps_aabb_isect_line_2d[1][1] = max[1];\n  $ps_aabb_isect_line_2d[2] = max;\n  $ps_aabb_isect_line_2d[3][0] = max[0];\n  $ps_aabb_isect_line_2d[3][1] = min[1];\n  $l1_aabb_isect_line_2d[0] = v1;\n  $l1_aabb_isect_line_2d[1] = v2;\n  for (var i=0; i<4; i++) {\n      var a=$ps_aabb_isect_line_2d[i], b=$ps_aabb_isect_line_2d[(i+1)%4];\n      $l2_aabb_isect_line_2d[0] = a;\n      $l2_aabb_isect_line_2d[1] = b;\n      if (line_line_cross($l1_aabb_isect_line_2d, $l2_aabb_isect_line_2d))\n        return true;\n  }\n  return false;\n};\n\n\nexport function expand_rect2d(pos, size, margin) {\n  pos[0]-=Math.floor(margin[0]);\n  pos[1]-=Math.floor(margin[1]);\n  size[0]+=Math.floor(margin[0]*2.0);\n  size[1]+=Math.floor(margin[1]*2.0);\n};\n\nexport function expand_line(l, margin) {\n  var c=new Vector3();\n  c.add(l[0]);\n  c.add(l[1]);\n  c.mulScalar(0.5);\n  l[0].sub(c);\n  l[1].sub(c);\n  var l1=l[0].vectorLength();\n  var l2=l[1].vectorLength();\n  l[0].normalize();\n  l[1].normalize();\n  l[0].mulScalar(margin+l1);\n  l[1].mulScalar(margin+l2);\n  l[0].add(c);\n  l[1].add(c);\n  return l;\n};\n\nexport function colinear(a, b, c) {\n  for (var i=0; i<3; i++) {\n      _cross_vec1[i] = b[i]-a[i];\n      _cross_vec2[i] = c[i]-a[i];\n  }\n  var limit=2.2e-16;\n  if (a.vectorDistance(b)<feps*100&&a.vectorDistance(c)<feps*100) {\n      return true;\n  }\n  if (_cross_vec1.dot(_cross_vec1)<limit||_cross_vec2.dot(_cross_vec2)<limit)\n    return true;\n  _cross_vec1.cross(_cross_vec2);\n  return _cross_vec1.dot(_cross_vec1)<limit;\n};\n\nvar _llc_l1=[new Vector3(), new Vector3()];\nvar _llc_l2=[new Vector3(), new Vector3()];\nvar _llc_l3=[new Vector3(), new Vector3()];\nvar _llc_l4=[new Vector3(), new Vector3()];\n\nvar lli_v1 = new Vector3(), lli_v2 = new Vector3(), lli_v3 = new Vector3(), lli_v4 = new Vector3();\n\nvar _zero_cn = new Vector3();\nvar _tmps_cn = util.cachering.fromConstructor(Vector3, 64);\nvar _rets_cn = util.cachering.fromConstructor(Vector3, 64);\n\n//vec1, vec2 should both be normalized\nexport function corner_normal(vec1, vec2, width) {\n  var ret = _rets_cn.next().zero();\n\n  var vec = _tmps_cn.next().zero();\n  vec.load(vec1).add(vec2).normalize();\n\n  /*\n  ret.load(vec).mulScalar(width);\n  return ret;\n  */\n\n  //handle colinear case\n  if (Math.abs(vec1.normalizedDot(vec2)) > 0.9999) {\n    if (vec1.dot(vec2) > 0.0001) {\n      ret.load(vec1).add(vec2).normalize();\n    } else {\n      ret.load(vec1).normalize();\n    }\n\n    ret.mulScalar(width);\n\n    return ret;\n  } else { //XXX\n    //ret.load(vec).mulScalar(width);\n    //return ret;\n  }\n\n  vec1 = _tmps_cn.next().load(vec1).mulScalar(width);\n  vec2 = _tmps_cn.next().load(vec2).mulScalar(width);\n\n  var p1 = _tmps_cn.next().load(vec1);\n  var p2 = _tmps_cn.next().load(vec2);\n\n  vec1.addFac(vec1, 0.01);\n  vec2.addFac(vec2, 0.01);\n\n  var sc = 1.0;\n\n  p1[0] += vec1[1]*sc;\n  p1[1] += -vec1[0]*sc;\n\n  p2[0] += -vec2[1]*sc;\n  p2[1] += vec2[0]*sc;\n\n  var p = line_line_isect(vec1, p1, vec2, p2, false);\n\n  if (p == undefined || p === COLINEAR_ISECT || p.dot(p) < 0.000001) {\n    ret.load(vec1).add(vec2).normalize().mulScalar(width);\n  } else {\n    ret.load(p);\n\n    if (vec.dot(vec) > 0 && vec.dot(ret) < 0) {\n      ret.load(vec).mulScalar(width);\n    }\n  }\n\n  return ret;\n}\n\n//test_segment is optional, true\nexport function line_line_isect(v1, v2, v3, v4, test_segment) {\n  test_segment = test_segment === undefined ? true : test_segment;\n\n  if (!line_line_cross(v1, v2, v3, v4)) {\n    return undefined;\n  }\n  \n  /*\n  on factor;\n  off period;\n  \n  xa := xa1 + (xa2 - xa1)*t1;\n  xb := xb1 + (xb2 - xb1)*t2;\n  ya := ya1 + (ya2 - ya1)*t1;\n  yb := yb1 + (yb2 - yb1)*t2;\n  \n  f1 := xa - xb;\n  f2 := ya - yb;\n  \n  f := solve({f1, f2}, {t1, t2});\n  ft1 := part(f, 1, 1, 2);\n  ft2 := part(f, 1, 2, 2);\n  \n  */\n  \n  var xa1 = v1[0], xa2 = v2[0], ya1 = v1[1], ya2 = v2[1];\n  var xb1 = v3[0], xb2 = v4[0], yb1 = v3[1], yb2 = v4[1];\n  \n  var div = ((xa1-xa2)*(yb1-yb2)-(xb1-xb2)*(ya1-ya2));\n  if (div < 0.00000001) { //parallel but intersecting lines.\n    return COLINEAR_ISECT;\n  } else { //intersection exists\n    var t1 = (-((ya1-yb2)*xb1-(yb1-yb2)*xa1-(ya1-yb1)*xb2))/div;\n    \n    return lli_v1.load(v1).interp(v2, t1);\n  }\n}\n\nexport function line_line_cross(v1, v2, v3, v4) {\n  var l1 = _llc_l3, l2 = _llc_l4;\n  l1[0].load(v1), l1[1].load(v2), l2[0].load(v3), l2[1].load(v4);\n  \n  /*\n  var limit=feps*1000;\n  if (Math.abs(l1[0].vectorDistance(l2[0])+l1[1].vectorDistance(l2[0])-l1[0].vectorDistance(l1[1]))<limit) {\n      return true;\n  }\n  if (Math.abs(l1[0].vectorDistance(l2[1])+l1[1].vectorDistance(l2[1])-l1[0].vectorDistance(l1[1]))<limit) {\n      return true;\n  }\n  if (Math.abs(l2[0].vectorDistance(l1[0])+l2[1].vectorDistance(l1[0])-l2[0].vectorDistance(l2[1]))<limit) {\n      return true;\n  }\n  if (Math.abs(l2[0].vectorDistance(l1[1])+l2[1].vectorDistance(l1[1])-l2[0].vectorDistance(l2[1]))<limit) {\n      return true;\n  }\n  //*/\n  \n  var a=l1[0];\n  var b=l1[1];\n  var c=l2[0];\n  var d=l2[1];\n  var w1=winding(a, b, c);\n  var w2=winding(c, a, d);\n  var w3=winding(a, b, d);\n  var w4=winding(c, b, d);\n  return (w1==w2)&&(w3==w4)&&(w1!=w3);\n};\n\nvar _asi_v1 = new Vector3();\nvar _asi_v2 = new Vector3();\nvar _asi_v3 = new Vector3();\nvar _asi_v4 = new Vector3();\nvar _asi_v5 = new Vector3();\nvar _asi_v6 = new Vector3();\n\nexport function point_in_aabb_2d(p, min, max) {\n  return p[0] >= min[0] && p[0] <= max[0] && p[1] >= min[1] && p[1] <= max[1];\n}\n\nvar _asi2d_v1 = new Vector2();\nvar _asi2d_v2 = new Vector2();\nvar _asi2d_v3 = new Vector2();\nvar _asi2d_v4 = new Vector2();\nvar _asi2d_v5 = new Vector2();\nvar _asi2d_v6 = new Vector2();\nexport function aabb_sphere_isect_2d(p, r, min, max) {\n  var v1 = _asi2d_v1, v2 = _asi2d_v2, v3 = _asi2d_v3, mvec = _asi2d_v4;\n  var v4 = _asi2d_v5;\n  \n  p = _asi2d_v6.load(p);\n  v1.load(p);\n  v2.load(p);\n  \n  min = _asi_v5.load(min);\n  max = _asi_v6.load(max);\n  \n  mvec.load(max).sub(min).normalize().mulScalar(r+0.0001);\n  \n  v1.sub(mvec);\n  v2.add(mvec);\n  v3.load(p);\n  \n  var ret = point_in_aabb_2d(v1, min, max) || point_in_aabb_2d(v2, min, max)\n         || point_in_aabb_2d(v3, min, max);\n  \n  if (ret)\n      return ret;\n  \n  /*\n  v1.load(min).add(max).mulScalar(0.5);\n  ret = ret || v1.vectorDistance(p) < r;\n  \n  v1.load(min);\n  ret = ret || v1.vectorDistance(p) < r;\n  \n  v1.load(max);\n  ret = ret || v1.vectorDistance(p) < r;\n  \n  v1[0] = min[0], v1[1] = max[1];\n  ret = ret || v1.vectorDistance(p) < r;\n  \n  v1[0] = max[0], v1[1] = min[1];\n  ret = ret || v1.vectorDistance(p) < r;\n  */\n  //*\n  v1.load(min);\n  v2[0] = min[0]; v2[1] = max[1];\n  ret = ret || dist_to_line_2d(p, v1, v2) < r;\n  \n  v1.load(max);\n  v2[0] = max[0]; v2[1] = max[1];\n  ret = ret || dist_to_line_2d(p, v1, v2) < r;\n\n  v1.load(max);\n  v2[0] = max[0]; v2[1] = min[1];\n  ret = ret || dist_to_line_2d(p, v1, v2) < r;\n\n  v1.load(max);\n  v2[0] = min[0]; v2[1] = min[1];\n  ret = ret || dist_to_line_2d(p, v1, v2) < r;\n  //*/\n  return ret;\n};\n\nexport function point_in_aabb(p, min, max) {\n  return p[0] >= min[0] && p[0] <= max[0] && p[1] >= min[1] && p[1] <= max[1]\n         && p[2] >= min[2] && p[2] <= max[2];\n}\nexport function aabb_sphere_isect(p, r, min, max) {\n  var v1 = _asi_v1, v2 = _asi_v2, v3 = _asi_v3, mvec = _asi_v4;\n  min = _asi_v5.load(min);\n  max = _asi_v6.load(max);\n  \n  if (min.length == 2) {\n    min[2] = max[2] = 0.0;\n  }\n  \n  mvec.load(max).sub(min).normalize().mulScalar(r+0.0001);\n  v1.sub(mvec);\n  v2.add(mvec);\n  v3.load(p);\n  \n  //prevent NaN on 2d vecs\n  if (p.length == 2) {\n      mvec[2] = v1[2] = v2[2] = v3[2] = 0.0;\n  }\n  \n  return point_in_aabb(v1, min, max) || point_in_aabb(v2, min, max) ||\n         point_in_aabb(v3, min, max);\n};\n\nexport function point_in_tri(p, v1, v2, v3) {\n  var w1=winding(p, v1, v2);\n  var w2=winding(p, v2, v3);\n  var w3=winding(p, v3, v1);\n  return w1==w2&&w2==w3;\n};\n\nexport function convex_quad(v1, v2, v3, v4) {\n  return line_line_cross([v1, v3], [v2, v4]);\n};\n\nvar $e1_normal_tri=new Vector3();\nvar $e3_normal_tri=new Vector3();\nvar $e2_normal_tri=new Vector3();\nexport function normal_tri(v1, v2, v3) {\n  $e1_normal_tri[0] = v2[0]-v1[0];\n  $e1_normal_tri[1] = v2[1]-v1[1];\n  $e1_normal_tri[2] = v2[2]-v1[2];\n  $e2_normal_tri[0] = v3[0]-v1[0];\n  $e2_normal_tri[1] = v3[1]-v1[1];\n  $e2_normal_tri[2] = v3[2]-v1[2];\n  $e3_normal_tri[0] = $e1_normal_tri[1]*$e2_normal_tri[2]-$e1_normal_tri[2]*$e2_normal_tri[1];\n  $e3_normal_tri[1] = $e1_normal_tri[2]*$e2_normal_tri[0]-$e1_normal_tri[0]*$e2_normal_tri[2];\n  $e3_normal_tri[2] = $e1_normal_tri[0]*$e2_normal_tri[1]-$e1_normal_tri[1]*$e2_normal_tri[0];\n  \n  var _len=Math.sqrt(($e3_normal_tri[0]*$e3_normal_tri[0]+$e3_normal_tri[1]*$e3_normal_tri[1]+$e3_normal_tri[2]*$e3_normal_tri[2]));\n  if (_len>1e-05)\n    _len = 1.0/_len;\n  $e3_normal_tri[0]*=_len;\n  $e3_normal_tri[1]*=_len;\n  $e3_normal_tri[2]*=_len;\n  return $e3_normal_tri;\n};\n\nvar $n2_normal_quad=new Vector3();\nexport function normal_quad(v1, v2, v3, v4) {\n  var n=normal_tri(v1, v2, v3);\n  $n2_normal_quad[0] = n[0];\n  $n2_normal_quad[1] = n[1];\n  $n2_normal_quad[2] = n[2];\n  n = normal_tri(v1, v3, v4);\n  $n2_normal_quad[0] = $n2_normal_quad[0]+n[0];\n  $n2_normal_quad[1] = $n2_normal_quad[1]+n[1];\n  $n2_normal_quad[2] = $n2_normal_quad[2]+n[2];\n  var _len=Math.sqrt(($n2_normal_quad[0]*$n2_normal_quad[0]+$n2_normal_quad[1]*$n2_normal_quad[1]+$n2_normal_quad[2]*$n2_normal_quad[2]));\n  if (_len>1e-05)\n    _len = 1.0/_len;\n  $n2_normal_quad[0]*=_len;\n  $n2_normal_quad[1]*=_len;\n  $n2_normal_quad[2]*=_len;\n  return $n2_normal_quad;\n};\n\nvar _li_vi=new Vector3();\n\n//calc_t is optional, false\nexport function line_isect(v1, v2, v3, v4, calc_t) {\n  if (calc_t==undefined) {\n      calc_t = false;\n  }\n  var div=(v2[0]-v1[0])*(v4[1]-v3[1])-(v2[1]-v1[1])*(v4[0]-v3[0]);\n  if (div==0.0)\n    return [new Vector3(), COLINEAR, 0.0];\n  var vi=_li_vi;\n  vi[0] = 0;\n  vi[1] = 0;\n  vi[2] = 0;\n  vi[0] = ((v3[0]-v4[0])*(v1[0]*v2[1]-v1[1]*v2[0])-(v1[0]-v2[0])*(v3[0]*v4[1]-v3[1]*v4[0]))/div;\n  vi[1] = ((v3[1]-v4[1])*(v1[0]*v2[1]-v1[1]*v2[0])-(v1[1]-v2[1])*(v3[0]*v4[1]-v3[1]*v4[0]))/div;\n  if (calc_t||v1.length==3) {\n      var n1=new Vector2(v2).sub(v1);\n      var n2=new Vector2(vi).sub(v1);\n      var t=n2.vectorLength()/n1.vectorLength();\n      n1.normalize();\n      n2.normalize();\n      if (n1.dot(n2)<0.0) {\n          t = -t;\n      }\n      if (v1.length==3) {\n          vi[2] = v1[2]+(v2[2]-v1[2])*t;\n      }\n      return [vi, LINECROSS, t];\n  }\n  return [vi, LINECROSS];\n};\n\nvar dt2l_v1 = new Vector2();\nvar dt2l_v2 = new Vector2();\nvar dt2l_v3 = new Vector2();\nvar dt2l_v4 = new Vector2();\nvar dt2l_v5 = new Vector2();\n\nexport function dist_to_line_2d(p, v1, v2, clip, closest_co_out=undefined, t_out=undefined) {\n  if (clip == undefined) {\n      clip = true;\n  }\n  \n  v1 = dt2l_v4.load(v1);\n  v2 = dt2l_v5.load(v2);\n  \n  var n = dt2l_v1;\n  var vec = dt2l_v3;\n  \n  n.load(v2).sub(v1).normalize();\n  vec.load(p).sub(v1);\n  \n  var t = vec.dot(n);\n  if (clip) {\n    t = Math.min(Math.max(t, 0.0), v1.vectorDistance(v2));\n  }\n  \n  n.mulScalar(t).add(v1);\n\n  if (closest_co_out) {\n    closest_co_out[0] = n[0];\n    closest_co_out[1] = n[1];\n  }\n\n  if (t_out !== undefined) {\n    t_out = t;\n  }\n\n  return n.vectorDistance(p);\n}\n\nvar dt3l_v1 = new Vector3();\nvar dt3l_v2 = new Vector3();\nvar dt3l_v3 = new Vector3();\nvar dt3l_v4 = new Vector3();\nvar dt3l_v5 = new Vector3();\n\nexport function dist_to_line(p, v1, v2, clip) {\n  if (clip == undefined) {\n      clip = true;\n  }\n  \n  v1 = dt3l_v4.load(v1);\n  v2 = dt3l_v5.load(v2);\n  \n  var n = dt3l_v1;\n  var vec = dt3l_v3;\n  \n  n.load(v2).sub(v1).normalize();\n  vec.load(p).sub(v1);\n  \n  var t = vec.dot(n);\n  if (clip) {\n    t = Math.min(Math.max(t, 0.0), v1.vectorDistance(v2));\n  }\n  \n  n.mulScalar(t).add(v1);\n  \n  return n.vectorDistance(p);\n}\n\n//p cam be 2d, 3d, or 4d point, v1/v2 however must be full homogenous coordinates\nvar _cplw_vs4 = util.cachering.fromConstructor(Vector4, 64);\nvar _cplw_vs3 = util.cachering.fromConstructor(Vector3, 64);\nvar _cplw_vs2 = util.cachering.fromConstructor(Vector2, 64);\n\nfunction wclip(x1, x2, w1, w2, near) {\n  var r1 = near*w1 - x1;\n  var r2 = (w1-w2)*near - (x1-x2);\n\n  if (r2 == 0.0) return 0.0;\n\n  return r1 / r2;\n}\n\nfunction clip(a, b, znear) {\n  if (a-b == 0.0) return 0.0;\n\n  return (a - znear) / (a - b);\n}\n\n/*clips v1 and v2 to lie within homogenous projection range\n  v1 and v2 are assumed to be projected, pre-division Vector4's\n  returns a positive number (how much the line was scaled) if either _v1 or _v2 are\n  in front of the near clipping plane otherwise, returns 0\n */\nexport function clip_line_w(_v1, _v2, znear, zfar) {\n  var v1 = _cplw_vs4.next().load(_v1);\n  var v2 = _cplw_vs4.next().load(_v2);\n\n  //are we fully behind the view plane?\n  if ((v1[2] < 1.0 && v2[2] < 1.0))\n    return false;\n\n  function doclip1(v1, v2, axis) {\n    if (v1[axis]/v1[3] < -1) {\n      var t = wclip(v1[axis], v2[axis], v1[3], v2[3], -1);\n      v1.interp(v2, t);\n    } else if (v1[axis]/v1[3] > 1) {\n      var t = wclip(v1[axis], v2[axis], v1[3], v2[3], 1);\n      v1.interp(v2, t);\n    }\n  }\n\n  function doclip(v1, v2, axis) {\n    doclip1(v1, v2, axis);\n    doclip1(v2, v1, axis);\n  }\n\n  function dozclip(v1, v2) {\n    if (v1[2] < 1) {\n      var t = clip(v1[2], v2[2], 1);\n      v1.interp(v2, t);\n    } else if (v2[2] < 1) {\n      var t = clip(v2[2], v1[2], 1);\n      v2.interp(v1, t);\n    }\n  }\n\n  dozclip(v1, v2, 1);\n  doclip(v1, v2, 0);\n  doclip(v1, v2, 1);\n\n  for (var i=0; i<4; i++) {\n    _v1[i] = v1[i];\n    _v2[i] = v2[i];\n  }\n\n  return !(v1[0]/v1[3] == v2[0]/v2[3] || v1[1]/v2[3] == v2[1]/v2[3]);\n};\n\n//clip is optional, true.  clip point to lie within line segment v1->v2\nvar _closest_point_on_line_cache = util.cachering.fromConstructor(Vector3, 64);\nvar _closest_point_rets = new util.cachering(function() {\n  return [0, 0];\n}, 64);\n\nvar _closest_tmps = [new Vector3(), new Vector3(), new Vector3()];\nexport function closest_point_on_line(p, v1, v2, clip) {\n  if (clip == undefined)\n    clip = true;\n  var l1 = _closest_tmps[0], l2 = _closest_tmps[1];\n  \n  l1.load(v2).sub(v1).normalize();\n  l2.load(p).sub(v1);\n  \n  var t = l2.dot(l1);\n  if (clip) {\n    t = t*(t<0.0) + t*(t>1.0) + (t>1.0);\n  }\n  \n  var p = _closest_point_on_line_cache.next();\n  p.load(l1).mulScalar(t).add(v1);\n  var ret = _closest_point_rets.next();\n  \n  ret[0] = p;\n  ret[1] = t;\n  \n  return ret;\n};\n\n/*given input line (a,d) and tangent t,\n  returns a circle that goes through both\n  a and d, whose normalized tangent at a is the same\n  as normalized t.\n  \n  note that t need not be normalized, this function\n  does that itself*/\nvar _circ_from_line_tan_vs = util.cachering.fromConstructor(Vector3, 32);\nvar _circ_from_line_tan_ret = new util.cachering(function() {\n  return [new Vector3(), 0];\n});\nexport function circ_from_line_tan(a, b, t) {\n  var p1 = _circ_from_line_tan_vs.next();\n  var t2 = _circ_from_line_tan_vs.next();\n  var n1 = _circ_from_line_tan_vs.next();\n  \n  p1.load(a).sub(b);\n  t2.load(t).normalize();\n  n1.load(p1).normalize().cross(t2).cross(t2).normalize();\n  \n  var ax = p1[0], ay = p1[1], az=p1[2], nx = n1[0], ny=n1[1], nz=n1[2];\n  var r = -(ax*ax + ay*ay + az*az) / (2*(ax*nx + ay*ny +az*nz));\n  \n  var ret = _circ_from_line_tan_ret.next();\n  ret[0].load(n1).mulScalar(r).add(a)\n  ret[1] = r;\n  \n  return ret;\n}\n\nvar _gtc_e1=new Vector3();\nvar _gtc_e2=new Vector3();\nvar _gtc_e3=new Vector3();\nvar _gtc_p1=new Vector3();\nvar _gtc_p2=new Vector3();\nvar _gtc_v1=new Vector3();\nvar _gtc_v2=new Vector3();\nvar _gtc_p12=new Vector3();\nvar _gtc_p22=new Vector3();\nvar _get_tri_circ_ret = new util.cachering(function() { return [0, 0]});\n\nexport function get_tri_circ(a, b, c) {\n  var v1=_gtc_v1;\n  var v2=_gtc_v2;\n  var e1=_gtc_e1;\n  var e2=_gtc_e2;\n  var e3=_gtc_e3;\n  var p1=_gtc_p1;\n  var p2=_gtc_p2;\n  \n  for (var i=0; i<3; i++) {\n      e1[i] = b[i]-a[i];\n      e2[i] = c[i]-b[i];\n      e3[i] = a[i]-c[i];\n  }\n  \n  for (var i=0; i<3; i++) {\n      p1[i] = (a[i]+b[i])*0.5;\n      p2[i] = (c[i]+b[i])*0.5;\n  }\n  \n  e1.normalize();\n  \n  v1[0] = -e1[1];\n  v1[1] = e1[0];\n  v1[2] = e1[2];\n\n  v2[0] = -e2[1];\n  v2[1] = e2[0];\n  v2[2] = e2[2];\n\n  v1.normalize();\n  v2.normalize();\n\n  var cent;\n  var type;\n  for (var i=0; i<3; i++) {\n      _gtc_p12[i] = p1[i]+v1[i];\n      _gtc_p22[i] = p2[i]+v2[i];\n  }\n\n  var ret=line_isect(p1, _gtc_p12, p2, _gtc_p22);\n  cent = ret[0];\n  type = ret[1];\n\n  e1.load(a);\n  e2.load(b);\n  e3.load(c);\n\n  var r=e1.sub(cent).vectorLength();\n  if (r<feps)\n    r = e2.sub(cent).vectorLength();\n  if (r<feps)\n    r = e3.sub(cent).vectorLength();\n  \n  var ret = _get_tri_circ_ret.next();\n  ret[0] = cent;\n  ret[1] = r;\n  \n  return ret;\n};\n\nexport function gen_circle(m, origin, r, stfeps) {\n  var pi=Math.PI;\n  var f=-pi/2;\n  var df=(pi*2)/stfeps;\n  var verts=new Array();\n  for (var i=0; i<stfeps; i++) {\n      var x=origin[0]+r*Math.sin(f);\n      var y=origin[1]+r*Math.cos(f);\n      var v=m.make_vert(new Vector3([x, y, origin[2]]));\n      verts.push(v);\n      f+=df;\n  }\n  for (var i=0; i<verts.length; i++) {\n      var v1=verts[i];\n      var v2=verts[(i+1)%verts.length];\n      m.make_edge(v1, v2);\n  }\n  return verts;\n};\n\nvar cos = Math.cos;\nvar sin = Math.sin;\n//axis is optional, 0\nexport function rot2d(v1, A, axis) {\n  var x = v1[0];\n  var y = v1[1];\n  \n  if (axis == 1) {\n    v1[0] = x * cos(A) + y*sin(A);\n    v1[2] = y * cos(A) - x*sin(A);\n  } else {\n    v1[0] = x * cos(A) - y*sin(A);\n    v1[1] = y * cos(A) + x*sin(A);\n  }\n}\n\nexport function makeCircleMesh(gl, radius, stfeps) {\n  var mesh=new Mesh();\n  var verts1=gen_circle(mesh, new Vector3(), radius, stfeps);\n  var verts2=gen_circle(mesh, new Vector3(), radius/1.75, stfeps);\n  mesh.make_face_complex([verts1, verts2]);\n  return mesh;\n};\nexport function minmax_verts(verts) {\n  var min=new Vector3([1000000000000.0, 1000000000000.0, 1000000000000.0]);\n  var max=new Vector3([-1000000000000.0, -1000000000000.0, -1000000000000.0]);\n  var __iter_v=__get_iter(verts);\n  var v;\n  while (1) {\n    var __ival_v=__iter_v.next();\n    if (__ival_v.done) {\n        break;\n    }\n    v = __ival_v.value;\n    for (var i=0; i<3; i++) {\n        min[i] = Math.min(min[i], v.co[i]);\n        max[i] = Math.max(max[i], v.co[i]);\n    }\n  }\n  return [min, max];\n};\n\nexport function unproject(vec, ipers, iview) {\n  var newvec=new Vector3(vec);\n  newvec.multVecMatrix(ipers);\n  newvec.multVecMatrix(iview);\n  return newvec;\n};\n\nexport function project(vec, pers, view) {\n  var newvec=new Vector3(vec);\n  newvec.multVecMatrix(pers);\n  newvec.multVecMatrix(view);\n  return newvec;\n};\n\nvar _sh_minv=new Vector3();\nvar _sh_maxv=new Vector3();\nvar _sh_start=[];\nvar _sh_end=[];\n\nvar static_cent_gbw = new Vector3();\nexport function get_boundary_winding(points) {\n  var cent=static_cent_gbw.zero();\n  if (points.length==0)\n    return false;\n  for (var i=0; i<points.length; i++) {\n      cent.add(points[i]);\n  }\n  cent.divideScalar(points.length);\n  var w=0, totw=0;\n  for (var i=0; i<points.length; i++) {\n      var v1=points[i];\n      var v2=points[(i+1)%points.length];\n      if (!colinear(v1, v2, cent)) {\n          w+=winding(v1, v2, cent);\n          totw+=1;\n      }\n  }\n  if (totw>0)\n    w/=totw;\n  return Math.round(w)==1;\n};\n\nexport class PlaneOps {\n  constructor(normal) {\n    var no=normal;\n    this.axis = [0, 0, 0];\n    this.reset_axis(normal);\n  }\n\n  reset_axis(no) {\n    var ax, ay, az;\n    var nx=Math.abs(no[0]), ny=Math.abs(no[1]), nz=Math.abs(no[2]);\n    if (nz>nx&&nz>ny) {\n        ax = 0;\n        ay = 1;\n        az = 2;\n    }\n    else \n      if (nx>ny&&nx>nz) {\n        ax = 2;\n        ay = 1;\n        az = 0;\n    }\n    else {\n      ax = 0;\n      ay = 2;\n      az = 1;\n    }\n    this.axis = [ax, ay, az];\n  }\n\n  convex_quad(v1, v2, v3, v4) {\n    var ax=this.axis;\n    v1 = new Vector3([v1[ax[0]], v1[ax[1]], v1[ax[2]]]);\n    v2 = new Vector3([v2[ax[0]], v2[ax[1]], v2[ax[2]]]);\n    v3 = new Vector3([v3[ax[0]], v3[ax[1]], v3[ax[2]]]);\n    v4 = new Vector3([v4[ax[0]], v4[ax[1]], v4[ax[2]]]);\n    return convex_quad(v1, v2, v3, v4);\n  }\n\n  line_isect(v1, v2, v3, v4) {\n    var ax=this.axis;\n    var orig1=v1, orig2=v2;\n    v1 = new Vector3([v1[ax[0]], v1[ax[1]], v1[ax[2]]]);\n    v2 = new Vector3([v2[ax[0]], v2[ax[1]], v2[ax[2]]]);\n    v3 = new Vector3([v3[ax[0]], v3[ax[1]], v3[ax[2]]]);\n    v4 = new Vector3([v4[ax[0]], v4[ax[1]], v4[ax[2]]]);\n    var ret=line_isect(v1, v2, v3, v4, true);\n    var vi=ret[0];\n    if (ret[1]==LINECROSS) {\n        ret[0].load(orig2).sub(orig1).mulScalar(ret[2]).add(orig1);\n    }\n    return ret;\n  }\n\n  line_line_cross(l1, l2) {\n    var ax=this.axis;\n    var v1=l1[0], v2=l1[1], v3=l2[0], v4=l2[1];\n    v1 = new Vector3([v1[ax[0]], v1[ax[1]], 0.0]);\n    v2 = new Vector3([v2[ax[0]], v2[ax[1]], 0.0]);\n    v3 = new Vector3([v3[ax[0]], v3[ax[1]], 0.0]);\n    v4 = new Vector3([v4[ax[0]], v4[ax[1]], 0.0]);\n    return line_line_cross([v1, v2], [v3, v4]);\n  }\n\n  winding(v1, v2, v3) {\n    var ax=this.axis;\n    if (v1==undefined)\n      console.trace();\n    v1 = new Vector3([v1[ax[0]], v1[ax[1]], 0.0]);\n    v2 = new Vector3([v2[ax[0]], v2[ax[1]], 0.0]);\n    v3 = new Vector3([v3[ax[0]], v3[ax[1]], 0.0]);\n    return winding(v1, v2, v3);\n  }\n\n  colinear(v1, v2, v3) {\n    var ax=this.axis;\n    v1 = new Vector3([v1[ax[0]], v1[ax[1]], 0.0]);\n    v2 = new Vector3([v2[ax[0]], v2[ax[1]], 0.0]);\n    v3 = new Vector3([v3[ax[0]], v3[ax[1]], 0.0]);\n    return colinear(v1, v2, v3);\n  }\n\n  get_boundary_winding(points) {\n    var ax=this.axis;\n    var cent=new Vector3();\n    if (points.length==0)\n      return false;\n    for (var i=0; i<points.length; i++) {\n        cent.add(points[i]);\n    }\n    cent.divideScalar(points.length);\n    var w=0, totw=0;\n    for (var i=0; i<points.length; i++) {\n        var v1=points[i];\n        var v2=points[(i+1)%points.length];\n        if (!this.colinear(v1, v2, cent)) {\n            w+=this.winding(v1, v2, cent);\n            totw+=1;\n        }\n    }\n    if (totw>0)\n      w/=totw;\n    return Math.round(w)==1;\n  }\n}\n\n/*\non factor;\n\npx := rox + rnx*t;\npy := roy + rny*t;\npz := roz + rnz*t;\n\nf1 := (px-pox)*pnx + (py-poy)*pny + (pz-poz)*pnz;\nff := solve(f1, t);\non fort;\npart(ff, 1, 2);\noff fort;\n\n* */\nvar _isrp_ret=new Vector3();\nexport function isect_ray_plane(planeorigin, planenormal, rayorigin, raynormal) {\n  let po = planeorigin, pn = planenormal, ro = rayorigin, rn = raynormal;\n  \n  let div = (pn[1]*rn[1]+pn[2]*rn[2]+pn[0]*rn[0]);\n\n  if (Math.abs(div) < 0.00001) {\n    return undefined;\n  }\n\n  let t = ((po[1]-ro[1])*pn[1]+(po[2]-ro[2])*pn[2]+(po[0]-ro[0])*pn[0])/div;\n  _isrp_ret.load(ro).addFac(rn, t);\n\n  return _isrp_ret;\n}\n\nexport function _old_isect_ray_plane(planeorigin, planenormal, rayorigin, raynormal) {\n  var p=planeorigin, n=planenormal;\n  var r=rayorigin, v=raynormal;\n\n  var d=p.vectorLength();\n  var t=-(r.dot(n)-p.dot(n))/v.dot(n);\n  _isrp_ret.load(v);\n  _isrp_ret.mulScalar(t);\n  _isrp_ret.add(r);\n  return _isrp_ret;\n};\n\nexport function mesh_find_tangent(mesh, viewvec, offvec, projmat, verts) {\n  if (verts==undefined)\n    verts = mesh.verts.selected;\n  var vset=new set();\n  var eset=new set();\n  var __iter_v=__get_iter(verts);\n  var v;\n  while (1) {\n    var __ival_v=__iter_v.next();\n    if (__ival_v.done) {\n        break;\n    }\n    v = __ival_v.value;\n    vset.add(v);\n  }\n  var __iter_v=__get_iter(vset);\n  var v;\n  while (1) {\n    var __ival_v=__iter_v.next();\n    if (__ival_v.done) {\n        break;\n    }\n    v = __ival_v.value;\n    var __iter_e=__get_iter(v.edges);\n    var e;\n    while (1) {\n      var __ival_e=__iter_e.next();\n      if (__ival_e.done) {\n          break;\n      }\n      e = __ival_e.value;\n      if (vset.has(e.other_vert(v))) {\n          eset.add(e);\n      }\n    }\n  }\n  if (eset.length==0) {\n      return new Vector3(offvec);\n  }\n  var tanav=new Vector3();\n  var evec=new Vector3();\n  var tan=new Vector3();\n  var co2=new Vector3();\n  var __iter_e=__get_iter(eset);\n  var e;\n  while (1) {\n    var __ival_e=__iter_e.next();\n    if (__ival_e.done) {\n        break;\n    }\n    e = __ival_e.value;\n    evec.load(e.v1.co).multVecMatrix(projmat);\n    co2.load(e.v2.co).multVecMatrix(projmat);\n    evec.sub(co2);\n    evec.normalize();\n    tan[0] = evec[1];\n    tan[1] = -evec[0];\n    tan[2] = 0.0;\n    if (tan.dot(offvec)<0.0)\n      tan.mulScalar(-1.0);\n    tanav.add(tan);\n  }\n  tanav.normalize();\n  return tanav;\n};\n\nexport class Mat4Stack {\n  constructor() {\n    this.stack = [];\n    this.matrix = new Matrix4();\n    this.matrix.makeIdentity();\n    this.update_func = undefined;\n  }\n\n  set_internal_matrix(mat, update_func) {\n    this.update_func = update_func;\n    this.matrix = mat;\n  }\n\n  reset(mat) {\n    this.matrix.load(mat);\n    this.stack = [];\n    if (this.update_func!=undefined)\n      this.update_func();\n  }\n\n  load(mat) {\n    this.matrix.load(mat);\n    if (this.update_func!=undefined)\n      this.update_func();\n  }\n\n  multiply(mat) {\n    this.matrix.multiply(mat);\n    if (this.update_func!=undefined)\n      this.update_func();\n  }\n\n  identity() {\n    this.matrix.loadIdentity();\n    if (this.update_func!=undefined)\n      this.update_func();\n  }\n\n  push(mat2) {\n    this.stack.push(new Matrix4(this.matrix));\n    if (mat2!=undefined) {\n        this.matrix.load(mat2);\n        if (this.update_func!=undefined)\n          this.update_func();\n    }\n  }\n\n  pop() {\n    var mat=this.stack.pop(this.stack.length-1);\n    this.matrix.load(mat);\n    if (this.update_func!=undefined)\n      this.update_func();\n    return mat;\n  }\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/math.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 421,
    "kind": "function",
    "name": "aabb_overlap_area",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~aabb_overlap_area",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{aabb_overlap_area}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [
      {
        "name": "pos1",
        "types": [
          "*"
        ]
      },
      {
        "name": "size1",
        "types": [
          "*"
        ]
      },
      {
        "name": "pos2",
        "types": [
          "*"
        ]
      },
      {
        "name": "size2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 422,
    "kind": "function",
    "name": "aabb_isect_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~aabb_isect_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{aabb_isect_2d}",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "params": [
      {
        "name": "pos1",
        "types": [
          "*"
        ]
      },
      {
        "name": "size1",
        "types": [
          "*"
        ]
      },
      {
        "name": "pos2",
        "types": [
          "*"
        ]
      },
      {
        "name": "size2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 423,
    "kind": "function",
    "name": "init_prototype",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~init_prototype",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "proto",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 424,
    "kind": "function",
    "name": "inherit",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~inherit",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "proto",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 425,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 426,
    "kind": "variable",
    "name": "Vector4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~Vector4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 427,
    "kind": "variable",
    "name": "set",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~set",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 428,
    "kind": "variable",
    "name": "feps",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~feps",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{feps}",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 429,
    "kind": "variable",
    "name": "COLINEAR",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~COLINEAR",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{COLINEAR}",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 430,
    "kind": "variable",
    "name": "LINECROSS",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~LINECROSS",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{LINECROSS}",
    "description": null,
    "lineNumber": 79,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 431,
    "kind": "variable",
    "name": "COLINEAR_ISECT",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~COLINEAR_ISECT",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{COLINEAR_ISECT}",
    "description": null,
    "lineNumber": 80,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 432,
    "kind": "variable",
    "name": "_cross_vec1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_cross_vec1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 433,
    "kind": "variable",
    "name": "_cross_vec2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_cross_vec2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 434,
    "kind": "variable",
    "name": "SQRT2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~SQRT2",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{SQRT2}",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 435,
    "kind": "variable",
    "name": "FEPS_DATA",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~FEPS_DATA",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{FEPS_DATA}",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "type": {
      "types": [
        "{\"F16\": number, \"F32\": number, \"F64\": number}"
      ]
    }
  },
  {
    "__docId__": 436,
    "kind": "variable",
    "name": "FEPS",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~FEPS",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{FEPS}",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 437,
    "kind": "variable",
    "name": "FLOAT_MIN",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~FLOAT_MIN",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{FLOAT_MIN}",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 438,
    "kind": "variable",
    "name": "FLOAT_MAX",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~FLOAT_MAX",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{FLOAT_MAX}",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 439,
    "kind": "variable",
    "name": "Matrix4UI",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~Matrix4UI",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{Matrix4UI}",
    "description": null,
    "lineNumber": 98,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 440,
    "kind": "variable",
    "name": "_static_grp_points4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_static_grp_points4",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 441,
    "kind": "variable",
    "name": "_static_grp_points8",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_static_grp_points8",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 170,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 442,
    "kind": "function",
    "name": "get_rect_points",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~get_rect_points",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{get_rect_points}",
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 443,
    "kind": "function",
    "name": "get_rect_lines",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~get_rect_lines",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{get_rect_lines}",
    "description": null,
    "lineNumber": 198,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 444,
    "kind": "variable",
    "name": "$vs_simple_tri_aabb_isect",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$vs_simple_tri_aabb_isect",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 219,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 445,
    "kind": "function",
    "name": "simple_tri_aabb_isect",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~simple_tri_aabb_isect",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{simple_tri_aabb_isect}",
    "description": null,
    "lineNumber": 220,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 446,
    "kind": "class",
    "name": "MinMax",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~MinMax",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{MinMax}",
    "description": null,
    "lineNumber": 236,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 447,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~MinMax#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 237,
    "undocument": true
  },
  {
    "__docId__": 448,
    "kind": "member",
    "name": "totaxis",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#totaxis",
    "access": "public",
    "description": null,
    "lineNumber": 241,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 449,
    "kind": "member",
    "name": "_min",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#_min",
    "access": "private",
    "description": null,
    "lineNumber": 260,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 450,
    "kind": "member",
    "name": "_max",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#_max",
    "access": "private",
    "description": null,
    "lineNumber": 261,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 451,
    "kind": "member",
    "name": "min",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#min",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 452,
    "kind": "member",
    "name": "max",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#max",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 456,
    "kind": "member",
    "name": "_static_mr_co",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#_static_mr_co",
    "access": "private",
    "description": null,
    "lineNumber": 271,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 457,
    "kind": "member",
    "name": "_static_mr_cs",
    "memberof": "scripts/math.js~MinMax",
    "static": false,
    "longname": "scripts/math.js~MinMax#_static_mr_cs",
    "access": "private",
    "description": null,
    "lineNumber": 272,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 458,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~MinMax#load",
    "access": "public",
    "description": null,
    "lineNumber": 275,
    "undocument": true,
    "params": [
      {
        "name": "mm",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 467,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~MinMax#reset",
    "access": "public",
    "description": null,
    "lineNumber": 290,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 471,
    "kind": "method",
    "name": "minmax_rect",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~MinMax#minmax_rect",
    "access": "public",
    "description": null,
    "lineNumber": 307,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 472,
    "kind": "method",
    "name": "minmax",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~MinMax#minmax",
    "access": "public",
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 475,
    "kind": "method",
    "name": "fromSTRUCT",
    "memberof": "scripts/math.js~MinMax",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~MinMax.fromSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 361,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 476,
    "kind": "function",
    "name": "winding",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~winding",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{winding}",
    "description": null,
    "lineNumber": 369,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      },
      {
        "name": "zero_z",
        "types": [
          "*"
        ]
      },
      {
        "name": "tol",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 477,
    "kind": "function",
    "name": "inrect_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~inrect_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{inrect_2d}",
    "description": null,
    "lineNumber": 383,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "pos",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 478,
    "kind": "variable",
    "name": "$smin_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$smin_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 392,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 479,
    "kind": "variable",
    "name": "$ssize_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$ssize_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 393,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 480,
    "kind": "variable",
    "name": "$sv1_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$sv1_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 394,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 481,
    "kind": "variable",
    "name": "$ps_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$ps_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 395,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 482,
    "kind": "variable",
    "name": "$l1_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$l1_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 396,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 483,
    "kind": "variable",
    "name": "$smax_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$smax_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 397,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 484,
    "kind": "variable",
    "name": "$sv2_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$sv2_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 398,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 485,
    "kind": "variable",
    "name": "$l2_aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$l2_aabb_isect_line_2d",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 399,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 486,
    "kind": "function",
    "name": "aabb_isect_line_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~aabb_isect_line_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{aabb_isect_line_2d}",
    "description": null,
    "lineNumber": 400,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 487,
    "kind": "function",
    "name": "expand_rect2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~expand_rect2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{expand_rect2d}",
    "description": null,
    "lineNumber": 434,
    "undocument": true,
    "params": [
      {
        "name": "pos",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "margin",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 488,
    "kind": "function",
    "name": "expand_line",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~expand_line",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{expand_line}",
    "description": null,
    "lineNumber": 441,
    "undocument": true,
    "params": [
      {
        "name": "l",
        "types": [
          "*"
        ]
      },
      {
        "name": "margin",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 489,
    "kind": "function",
    "name": "colinear",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~colinear",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{colinear}",
    "description": null,
    "lineNumber": 459,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 490,
    "kind": "variable",
    "name": "_llc_l1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_llc_l1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 474,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 491,
    "kind": "variable",
    "name": "_llc_l2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_llc_l2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 475,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 492,
    "kind": "variable",
    "name": "_llc_l3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_llc_l3",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 476,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 493,
    "kind": "variable",
    "name": "_llc_l4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_llc_l4",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 477,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 494,
    "kind": "variable",
    "name": "lli_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~lli_v1",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 479,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 495,
    "kind": "variable",
    "name": "_zero_cn",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_zero_cn",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 481,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 496,
    "kind": "variable",
    "name": "_tmps_cn",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_tmps_cn",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 482,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 497,
    "kind": "variable",
    "name": "_rets_cn",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_rets_cn",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 483,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 498,
    "kind": "function",
    "name": "corner_normal",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~corner_normal",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{corner_normal}",
    "description": null,
    "lineNumber": 486,
    "undocument": true,
    "params": [
      {
        "name": "vec1",
        "types": [
          "*"
        ]
      },
      {
        "name": "vec2",
        "types": [
          "*"
        ]
      },
      {
        "name": "width",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 499,
    "kind": "function",
    "name": "line_line_isect",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~line_line_isect",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{line_line_isect}",
    "description": null,
    "lineNumber": 546,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      },
      {
        "name": "test_segment",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 500,
    "kind": "function",
    "name": "line_line_cross",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~line_line_cross",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{line_line_cross}",
    "description": null,
    "lineNumber": 584,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 501,
    "kind": "variable",
    "name": "_asi_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 615,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 502,
    "kind": "variable",
    "name": "_asi_v2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 616,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 503,
    "kind": "variable",
    "name": "_asi_v3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v3",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 617,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 504,
    "kind": "variable",
    "name": "_asi_v4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v4",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 618,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 505,
    "kind": "variable",
    "name": "_asi_v5",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v5",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 619,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 506,
    "kind": "variable",
    "name": "_asi_v6",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi_v6",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 620,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 507,
    "kind": "function",
    "name": "point_in_aabb_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~point_in_aabb_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{point_in_aabb_2d}",
    "description": null,
    "lineNumber": 622,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 508,
    "kind": "variable",
    "name": "_asi2d_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 626,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 509,
    "kind": "variable",
    "name": "_asi2d_v2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 627,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 510,
    "kind": "variable",
    "name": "_asi2d_v3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v3",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 628,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 511,
    "kind": "variable",
    "name": "_asi2d_v4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v4",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 629,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 512,
    "kind": "variable",
    "name": "_asi2d_v5",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v5",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 630,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 513,
    "kind": "variable",
    "name": "_asi2d_v6",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_asi2d_v6",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 631,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 514,
    "kind": "function",
    "name": "aabb_sphere_isect_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~aabb_sphere_isect_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{aabb_sphere_isect_2d}",
    "description": null,
    "lineNumber": 632,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 515,
    "kind": "function",
    "name": "point_in_aabb",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~point_in_aabb",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{point_in_aabb}",
    "description": null,
    "lineNumber": 691,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 516,
    "kind": "function",
    "name": "aabb_sphere_isect",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~aabb_sphere_isect",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{aabb_sphere_isect}",
    "description": null,
    "lineNumber": 695,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 517,
    "kind": "function",
    "name": "point_in_tri",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~point_in_tri",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{point_in_tri}",
    "description": null,
    "lineNumber": 718,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 518,
    "kind": "function",
    "name": "convex_quad",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~convex_quad",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{convex_quad}",
    "description": null,
    "lineNumber": 725,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 519,
    "kind": "variable",
    "name": "$e1_normal_tri",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$e1_normal_tri",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 729,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 520,
    "kind": "variable",
    "name": "$e3_normal_tri",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$e3_normal_tri",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 730,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 521,
    "kind": "variable",
    "name": "$e2_normal_tri",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$e2_normal_tri",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 731,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 522,
    "kind": "function",
    "name": "normal_tri",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~normal_tri",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{normal_tri}",
    "description": null,
    "lineNumber": 732,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 523,
    "kind": "variable",
    "name": "$n2_normal_quad",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~$n2_normal_quad",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 752,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 524,
    "kind": "function",
    "name": "normal_quad",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~normal_quad",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{normal_quad}",
    "description": null,
    "lineNumber": 753,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 525,
    "kind": "variable",
    "name": "_li_vi",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_li_vi",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 771,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 526,
    "kind": "function",
    "name": "line_isect",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~line_isect",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{line_isect}",
    "description": null,
    "lineNumber": 774,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      },
      {
        "name": "calc_t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 527,
    "kind": "variable",
    "name": "dt2l_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt2l_v1",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 804,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 528,
    "kind": "variable",
    "name": "dt2l_v2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt2l_v2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 805,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 529,
    "kind": "variable",
    "name": "dt2l_v3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt2l_v3",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 806,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 530,
    "kind": "variable",
    "name": "dt2l_v4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt2l_v4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 807,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 531,
    "kind": "variable",
    "name": "dt2l_v5",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt2l_v5",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 808,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector2"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 532,
    "kind": "function",
    "name": "dist_to_line_2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~dist_to_line_2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{dist_to_line_2d}",
    "description": null,
    "lineNumber": 810,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "clip",
        "types": [
          "*"
        ]
      },
      {
        "name": "closest_co_out",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "t_out",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 533,
    "kind": "variable",
    "name": "dt3l_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt3l_v1",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 843,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 534,
    "kind": "variable",
    "name": "dt3l_v2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt3l_v2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 844,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 535,
    "kind": "variable",
    "name": "dt3l_v3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt3l_v3",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 845,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 536,
    "kind": "variable",
    "name": "dt3l_v4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt3l_v4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 846,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 537,
    "kind": "variable",
    "name": "dt3l_v5",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~dt3l_v5",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 847,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 538,
    "kind": "function",
    "name": "dist_to_line",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~dist_to_line",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{dist_to_line}",
    "description": null,
    "lineNumber": 849,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "clip",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 539,
    "kind": "variable",
    "name": "_cplw_vs4",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_cplw_vs4",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 874,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 540,
    "kind": "variable",
    "name": "_cplw_vs3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_cplw_vs3",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 875,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 541,
    "kind": "variable",
    "name": "_cplw_vs2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_cplw_vs2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 876,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 542,
    "kind": "function",
    "name": "wclip",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~wclip",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 878,
    "undocument": true,
    "params": [
      {
        "name": "x1",
        "types": [
          "*"
        ]
      },
      {
        "name": "x2",
        "types": [
          "*"
        ]
      },
      {
        "name": "w1",
        "types": [
          "*"
        ]
      },
      {
        "name": "w2",
        "types": [
          "*"
        ]
      },
      {
        "name": "near",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 543,
    "kind": "function",
    "name": "clip",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~clip",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 887,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "znear",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 544,
    "kind": "function",
    "name": "clip_line_w",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~clip_line_w",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{clip_line_w}",
    "description": null,
    "lineNumber": 898,
    "undocument": true,
    "params": [
      {
        "name": "_v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "_v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "znear",
        "types": [
          "*"
        ]
      },
      {
        "name": "zfar",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 545,
    "kind": "variable",
    "name": "_closest_point_on_line_cache",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_closest_point_on_line_cache",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 944,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 546,
    "kind": "variable",
    "name": "_closest_point_rets",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_closest_point_rets",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 945,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 547,
    "kind": "variable",
    "name": "_closest_tmps",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_closest_tmps",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 949,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 548,
    "kind": "function",
    "name": "closest_point_on_line",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~closest_point_on_line",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{closest_point_on_line}",
    "description": null,
    "lineNumber": 950,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "clip",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 549,
    "kind": "variable",
    "name": "_circ_from_line_tan_vs",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_circ_from_line_tan_vs",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 980,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 550,
    "kind": "variable",
    "name": "_circ_from_line_tan_ret",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_circ_from_line_tan_ret",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 981,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 551,
    "kind": "function",
    "name": "circ_from_line_tan",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~circ_from_line_tan",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{circ_from_line_tan}",
    "description": null,
    "lineNumber": 984,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 552,
    "kind": "variable",
    "name": "_gtc_e1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_e1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1003,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 553,
    "kind": "variable",
    "name": "_gtc_e2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_e2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1004,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 554,
    "kind": "variable",
    "name": "_gtc_e3",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_e3",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1005,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 555,
    "kind": "variable",
    "name": "_gtc_p1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_p1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1006,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 556,
    "kind": "variable",
    "name": "_gtc_p2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_p2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1007,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 557,
    "kind": "variable",
    "name": "_gtc_v1",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_v1",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1008,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 558,
    "kind": "variable",
    "name": "_gtc_v2",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_v2",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1009,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 559,
    "kind": "variable",
    "name": "_gtc_p12",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_p12",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1010,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 560,
    "kind": "variable",
    "name": "_gtc_p22",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_gtc_p22",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1011,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 561,
    "kind": "variable",
    "name": "_get_tri_circ_ret",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_get_tri_circ_ret",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1012,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 562,
    "kind": "function",
    "name": "get_tri_circ",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~get_tri_circ",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{get_tri_circ}",
    "description": null,
    "lineNumber": 1014,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 563,
    "kind": "function",
    "name": "gen_circle",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~gen_circle",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{gen_circle}",
    "description": null,
    "lineNumber": 1075,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      },
      {
        "name": "origin",
        "types": [
          "*"
        ]
      },
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "stfeps",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 564,
    "kind": "variable",
    "name": "cos",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~cos",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1095,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 565,
    "kind": "variable",
    "name": "sin",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~sin",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1096,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 566,
    "kind": "function",
    "name": "rot2d",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~rot2d",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{rot2d}",
    "description": null,
    "lineNumber": 1098,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "A",
        "types": [
          "*"
        ]
      },
      {
        "name": "axis",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 567,
    "kind": "function",
    "name": "makeCircleMesh",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~makeCircleMesh",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{makeCircleMesh}",
    "description": null,
    "lineNumber": 1111,
    "undocument": true,
    "params": [
      {
        "name": "gl",
        "types": [
          "*"
        ]
      },
      {
        "name": "radius",
        "types": [
          "*"
        ]
      },
      {
        "name": "stfeps",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 568,
    "kind": "function",
    "name": "minmax_verts",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~minmax_verts",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{minmax_verts}",
    "description": null,
    "lineNumber": 1118,
    "undocument": true,
    "params": [
      {
        "name": "verts",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 569,
    "kind": "function",
    "name": "unproject",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~unproject",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{unproject}",
    "description": null,
    "lineNumber": 1137,
    "undocument": true,
    "params": [
      {
        "name": "vec",
        "types": [
          "*"
        ]
      },
      {
        "name": "ipers",
        "types": [
          "*"
        ]
      },
      {
        "name": "iview",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 570,
    "kind": "function",
    "name": "project",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~project",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{project}",
    "description": null,
    "lineNumber": 1144,
    "undocument": true,
    "params": [
      {
        "name": "vec",
        "types": [
          "*"
        ]
      },
      {
        "name": "pers",
        "types": [
          "*"
        ]
      },
      {
        "name": "view",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 571,
    "kind": "variable",
    "name": "_sh_minv",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_sh_minv",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1151,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 572,
    "kind": "variable",
    "name": "_sh_maxv",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_sh_maxv",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1152,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 573,
    "kind": "variable",
    "name": "_sh_start",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_sh_start",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1153,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 574,
    "kind": "variable",
    "name": "_sh_end",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_sh_end",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1154,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 575,
    "kind": "variable",
    "name": "static_cent_gbw",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~static_cent_gbw",
    "access": "public",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1156,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 576,
    "kind": "function",
    "name": "get_boundary_winding",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~get_boundary_winding",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{get_boundary_winding}",
    "description": null,
    "lineNumber": 1157,
    "undocument": true,
    "params": [
      {
        "name": "points",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 577,
    "kind": "class",
    "name": "PlaneOps",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~PlaneOps",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{PlaneOps}",
    "description": null,
    "lineNumber": 1179,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 578,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1180,
    "undocument": true
  },
  {
    "__docId__": 579,
    "kind": "member",
    "name": "axis",
    "memberof": "scripts/math.js~PlaneOps",
    "static": false,
    "longname": "scripts/math.js~PlaneOps#axis",
    "access": "public",
    "description": null,
    "lineNumber": 1182,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 580,
    "kind": "method",
    "name": "reset_axis",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#reset_axis",
    "access": "public",
    "description": null,
    "lineNumber": 1186,
    "undocument": true,
    "params": [
      {
        "name": "no",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 582,
    "kind": "method",
    "name": "convex_quad",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#convex_quad",
    "access": "public",
    "description": null,
    "lineNumber": 1208,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 583,
    "kind": "method",
    "name": "line_isect",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#line_isect",
    "access": "public",
    "description": null,
    "lineNumber": 1217,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 584,
    "kind": "method",
    "name": "line_line_cross",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#line_line_cross",
    "access": "public",
    "description": null,
    "lineNumber": 1232,
    "undocument": true,
    "params": [
      {
        "name": "l1",
        "types": [
          "*"
        ]
      },
      {
        "name": "l2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 585,
    "kind": "method",
    "name": "winding",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#winding",
    "access": "public",
    "description": null,
    "lineNumber": 1242,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 586,
    "kind": "method",
    "name": "colinear",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#colinear",
    "access": "public",
    "description": null,
    "lineNumber": 1252,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 587,
    "kind": "method",
    "name": "get_boundary_winding",
    "memberof": "scripts/math.js~PlaneOps",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~PlaneOps#get_boundary_winding",
    "access": "public",
    "description": null,
    "lineNumber": 1260,
    "undocument": true,
    "params": [
      {
        "name": "points",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 588,
    "kind": "variable",
    "name": "_isrp_ret",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~_isrp_ret",
    "access": "private",
    "export": false,
    "importPath": "./scripts/math.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1298,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector3"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 589,
    "kind": "function",
    "name": "isect_ray_plane",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~isect_ray_plane",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{isect_ray_plane}",
    "description": null,
    "lineNumber": 1299,
    "undocument": true,
    "params": [
      {
        "name": "planeorigin",
        "types": [
          "*"
        ]
      },
      {
        "name": "planenormal",
        "types": [
          "*"
        ]
      },
      {
        "name": "rayorigin",
        "types": [
          "*"
        ]
      },
      {
        "name": "raynormal",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 590,
    "kind": "function",
    "name": "_old_isect_ray_plane",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~_old_isect_ray_plane",
    "access": "private",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{_old_isect_ray_plane}",
    "description": null,
    "lineNumber": 1314,
    "undocument": true,
    "params": [
      {
        "name": "planeorigin",
        "types": [
          "*"
        ]
      },
      {
        "name": "planenormal",
        "types": [
          "*"
        ]
      },
      {
        "name": "rayorigin",
        "types": [
          "*"
        ]
      },
      {
        "name": "raynormal",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 591,
    "kind": "function",
    "name": "mesh_find_tangent",
    "memberof": "scripts/math.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/math.js~mesh_find_tangent",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{mesh_find_tangent}",
    "description": null,
    "lineNumber": 1326,
    "undocument": true,
    "params": [
      {
        "name": "mesh",
        "types": [
          "*"
        ]
      },
      {
        "name": "viewvec",
        "types": [
          "*"
        ]
      },
      {
        "name": "offvec",
        "types": [
          "*"
        ]
      },
      {
        "name": "projmat",
        "types": [
          "*"
        ]
      },
      {
        "name": "verts",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 592,
    "kind": "class",
    "name": "Mat4Stack",
    "memberof": "scripts/math.js",
    "static": true,
    "longname": "scripts/math.js~Mat4Stack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/math.js",
    "importStyle": "{Mat4Stack}",
    "description": null,
    "lineNumber": 1392,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 593,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1393,
    "undocument": true
  },
  {
    "__docId__": 594,
    "kind": "member",
    "name": "stack",
    "memberof": "scripts/math.js~Mat4Stack",
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#stack",
    "access": "public",
    "description": null,
    "lineNumber": 1394,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 595,
    "kind": "member",
    "name": "matrix",
    "memberof": "scripts/math.js~Mat4Stack",
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#matrix",
    "access": "public",
    "description": null,
    "lineNumber": 1395,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 596,
    "kind": "member",
    "name": "update_func",
    "memberof": "scripts/math.js~Mat4Stack",
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#update_func",
    "access": "public",
    "description": null,
    "lineNumber": 1397,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 597,
    "kind": "method",
    "name": "set_internal_matrix",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#set_internal_matrix",
    "access": "public",
    "description": null,
    "lineNumber": 1400,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      },
      {
        "name": "update_func",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 600,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#reset",
    "access": "public",
    "description": null,
    "lineNumber": 1405,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 602,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#load",
    "access": "public",
    "description": null,
    "lineNumber": 1412,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 603,
    "kind": "method",
    "name": "multiply",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#multiply",
    "access": "public",
    "description": null,
    "lineNumber": 1418,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 604,
    "kind": "method",
    "name": "identity",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#identity",
    "access": "public",
    "description": null,
    "lineNumber": 1424,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 605,
    "kind": "method",
    "name": "push",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#push",
    "access": "public",
    "description": null,
    "lineNumber": 1430,
    "undocument": true,
    "params": [
      {
        "name": "mat2",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 606,
    "kind": "method",
    "name": "pop",
    "memberof": "scripts/math.js~Mat4Stack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/math.js~Mat4Stack#pop",
    "access": "public",
    "description": null,
    "lineNumber": 1439,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 607,
    "kind": "file",
    "name": "scripts/parseutil.js",
    "content": "export class token {\n  constructor(type, val, lexpos, lexlen, lineno, lexer, parser) {\n    this.type = type;\n    this.value = val;\n    this.lexpos = lexpos;\n    this.lexlen = lexlen;\n    this.lineno = lineno;\n    this.lexer = lexer;\n    this.parser = parser;\n  }\n\n  toString() {\n    if (this.value != undefined)\n      return \"token(type=\" + this.type + \", value='\" + this.value + \"')\"\n    else\n      return \"token(type=\" + this.type + \")\"\n  }\n}\n\n//func is optional. it takes a function\n//with one parameter, token, and either\n//a) returns the token, or b) returns\n//undefined, in which case the token\n//should be ignored by the lexer\nexport class tokdef {\n  constructor(name, regexpr, func) {\n    this.name = name;\n    this.re = regexpr\n    this.func = func\n  }\n}\n\nexport class PUTLParseError extends Error {\n}\n\n//errfunc is optional.  it requires\n//a function that takes one param, lexer,\n//and returns true if the lexer\n//should propegate an error when an error\n//has happened\nexport class lexer {\n  constructor(tokdef, errfunc) {\n    this.tokdef = tokdef;\n    this.tokens = new Array();\n    this.lexpos = 0;\n    this.lexdata = \"\";\n    this.lineno = 0;\n    this.errfunc = errfunc;\n    this.tokints = {}\n\n    for (var i=0; i<tokdef.length; i++) {\n      this.tokints[tokdef[i].name] = i;\n    }\n\n    this.statestack = [[\"__main__\", 0]];\n    this.states = {\"__main__\" : [tokdef, errfunc]};\n    this.statedata = 0; //public variable\n  }\n\n//errfunc is optional, defines state-specific error function\n  add_state(name, tokdef, errfunc) {\n    if (errfunc == undefined) {\n      errfunc = function(lexer) { return true; };\n    }\n\n    this.states[name] = [tokdef, errfunc];\n  }\n\n  tok_int(name) {\n\n  }\n\n  //statedata is optional.\n  //it stores state-specific data in lexer.statedata.\n  push_state(state, statedata) {\n    this.statestack.push([state, statedata])\n\n    state = this.states[state];\n    this.statedata = statedata;\n\n    this.tokdef = state[0];\n    this.errfunc = state[1];\n  }\n\n  pop_state() {\n    var item = this.statestack[this.statestack.length-1];\n    var state = this.states[item[0]];\n\n    this.tokdef = state[0];\n    this.errfunc = state[1];\n    this.statedata = item[1];\n  }\n\n  input(str) {\n    //go back to main state\n    while (this.statestack.length > 1) {\n      this.pop_state();\n    }\n\n    this.lexdata = str;\n    this.lexpos = 0;\n    this.lineno = 0;\n    this.tokens = new Array();\n\n    this.peeked_tokens = [];\n  }\n\n  error() {\n    if (this.errfunc != undefined && !this.errfunc(this))\n      return;\n\n    console.log(\"Syntax error near line \" + this.lineno);\n    var next = Math.min(this.lexpos+8, this.lexdata.length);\n    console.log(\"  \" + this.lexdata.slice(this.lexpos, next));\n\n    throw new PUTLParseError(\"Parse error\");\n  }\n\n  peek() {\n    var tok = this.next(true);\n\n    if (tok == undefined)\n      return undefined;\n\n    this.peeked_tokens.push(tok);\n    return tok;\n  }\n\n\n  peek_i(i) {\n    while (this.peeked_tokens.length <= i) {\n      var t = this.peek();\n      if (t == undefined)\n        return undefined;\n    }\n\n    return this.peeked_tokens[i];\n  }\n\n  at_end() {\n    return this.lexpos >= this.lexdata.length && this.peeked_tokens.length == 0;\n  }\n\n  next(ignore_peek) {\n    if (ignore_peek != true && this.peeked_tokens.length > 0) {\n      var tok = this.peeked_tokens[0];\n      this.peeked_tokens.shift();\n\n      return tok;\n    }\n\n    if (this.lexpos >= this.lexdata.length)\n      return undefined;\n\n    var ts = this.tokdef;\n    var tlen = ts.length;\n\n    var lexdata = this.lexdata.slice(this.lexpos, this.lexdata.length);\n\n    var results = []\n\n    for (var i=0; i<tlen; i++) {\n      var t = ts[i];\n\n      if (t.re == undefined)\n        continue;\n\n      var res = t.re.exec(lexdata);\n\n      if (res != null && res != undefined && res.index == 0) {\n        results.push([t, res]);\n      }\n    }\n\n    var max_res = 0;\n    var theres = undefined;\n    for (var i=0; i<results.length; i++) {\n      var res = results[i];\n\n      if (res[1][0].length > max_res) {\n        theres = res;\n        max_res = res[1][0].length;\n      }\n    }\n\n    if (theres == undefined) {\n      this.error();\n      return;\n    }\n\n    var def = theres[0];\n\n    var lexlen = max_res;\n    var tok = new token(def.name, theres[1][0], this.lexpos, lexlen, this.lineno, this, undefined);\n    this.lexpos += max_res;\n\n    if (def.func) {\n      tok = def.func(tok)\n      if (tok == undefined) {\n        return this.next();\n      }\n    }\n\n    return tok;\n  }\n}\n\nexport class parser {\n  constructor(lexer, errfunc) {\n    this.lexer = lexer;\n    this.errfunc = errfunc;\n    this.start = undefined;\n  }\n\n  parse(data, err_on_unconsumed) {\n    if (err_on_unconsumed == undefined)\n      err_on_unconsumed = true;\n\n    if (data != undefined)\n      this.lexer.input(data);\n\n    var ret = this.start(this);\n    if (err_on_unconsumed && !this.lexer.at_end() && this.lexer.next() != undefined) {\n      //console.log(this.lexer.lexdata.slice(this.lexer.lexpos-1, this.lexer.lexdata.length));\n      this.error(undefined, \"parser did not consume entire input\");\n    }\n\n    return ret;\n  }\n\n  input(data) {\n    this.lexer.input(data);\n  }\n\n  error(tok, msg) {\n    if (msg == undefined)\n      msg = \"\"\n\n    if (tok == undefined)\n      var estr = \"Parse error at end of input: \" + msg\n    else\n      estr = \"Parse error at line \" + (tok.lineno+1) + \": \" + msg;\n\n    var buf = \"1| \"\n    var ld = this.lexer.lexdata;\n    var l = 1;\n    for (var i=0; i<ld.length; i++) {\n      var c = ld[i];\n      if (c == '\\n') {\n        l++;\n        buf += \"\\n\" + l + \"| \"\n      } else {\n        buf += c;\n      }\n    }\n\n    console.log(\"------------------\")\n    console.log(buf);\n    console.log(\"==================\")\n    console.log(estr);\n\n    if (this.errfunc && !this.errfunc(tok)) {\n      return;\n    }\n\n    throw new PUTLParseError(estr);\n  }\n\n  peek() {\n    var tok = this.lexer.peek();\n    if (tok != undefined)\n      tok.parser = this;\n\n    return tok;\n  }\n\n  peek_i(i) {\n    var tok = this.lexer.peek_i(i);\n    if (tok != undefined)\n      tok.parser = this;\n\n    return tok;\n  }\n\n  peeknext() {\n    return this.peek_i(0);\n  }\n\n  next() {\n    var tok = this.lexer.next();\n    if (tok != undefined)\n      tok.parser = this;\n\n    return tok;\n  }\n\n  optional(type) {\n    var tok = this.peek_i(0);\n\n    if (tok == undefined) return false;\n\n    if (tok.type == type) {\n      this.next();\n      return true;\n    }\n\n    return false;\n  }\n\n  at_end() {\n    return this.lexer.at_end();\n  }\n\n  expect(type, msg) {\n    var tok = this.next();\n\n    if (msg == undefined)\n      msg = type\n\n    if (tok == undefined || tok.type != type) {\n      this.error(tok, \"Expected \" + msg + \", not \" + tok.type);\n    }\n\n    return tok.value;\n  }\n}\n\nfunction test_parser() {\n  var basic_types = new set([\n    \"int\",\n    \"float\",\n    \"double\",\n    \"vec2\",\n    \"vec3\",\n    \"vec4\",\n    \"mat4\",\n    \"string\"]);\n\n  var reserved_tokens = new set([\n    \"int\",\n    \"float\",\n    \"double\",\n    \"vec2\",\n    \"vec3\",\n    \"vec4\",\n    \"mat4\",\n    \"string\",\n    \"static_string\",\n    \"array\"]);\n\n  function tk(name, re, func) {\n    return new tokdef(name, re, func);\n  }\n  var tokens = [\n    tk(\"ID\", /[a-zA-Z]+[a-zA-Z0-9_]*/, function(t) {\n      if (reserved_tokens.has(t.value)) {\n        t.type = t.value.toUpperCase();\n      }\n\n      return t;\n    }),\n    tk(\"OPEN\", /\\{/),\n    tk(\"CLOSE\", /}/),\n    tk(\"COLON\", /:/),\n    tk(\"JSCRIPT\", /\\|/, function(t) {\n      var js = \"\"\n      var lexer = t.lexer;\n      while (lexer.lexpos < lexer.lexdata.length) {\n        var c = lexer.lexdata[lexer.lexpos];\n        if (c == \"\\n\")\n          break;\n\n        js += c;\n        lexer.lexpos++;\n      }\n\n      if (js.endsWith(\";\")) {\n        js = js.slice(0, js.length-1);\n        lexer.lexpos--;\n      }\n\n      t.value = js;\n      return t;\n    }),\n\n    tk(\"LPARAM\", /\\(/),\n    tk(\"RPARAM\", /\\)/),\n    tk(\"COMMA\", /,/),\n    tk(\"NUM\", /[0-9]/),\n    tk(\"SEMI\", /;/),\n    tk(\"NEWLINE\", /\\n/, function(t) {\n      t.lexer.lineno += 1;\n    }),\n    tk(\"SPACE\", / |\\t/, function(t) {\n      //throw out non-newline whitespace tokens\n    })\n  ];\n\n  for (var rt in reserved_tokens) {\n    tokens.push(tk(rt.toUpperCase()));\n  }\n\n  /*var a =\n  Loop {\n    eid : int;\n    flag : int;\n    index : int;\n    type : int;\n\n    co : vec3;\n    no : vec3;\n    loop : int | eid(loop);\n    edges : array(e, int) | e.eid;\n\n    loops : array(Loop);\n  }\n  \"\"\";\n  */\n\n  function errfunc(lexer) {\n    return true; //throw error\n  }\n\n  var lex = new lexer(tokens, errfunc)\n  console.log(\"Testing lexical scanner...\")\n\n  lex.input(a);\n\n  var tok;\n  while (tok = lex.next()) {\n    console.log(tok.toString())\n  }\n\n  var parser = new parser(lex);\n  parser.input(a);\n\n  function p_Array(p) {\n    p.expect(\"ARRAY\");\n    p.expect(\"LPARAM\");\n\n    var arraytype = p_Type(p);\n    var itername = \"\";\n\n    if (p.optional(\"COMMA\")) {\n      itername = arraytype;\n      arraytype = p_Type(p);\n    }\n\n\n    p.expect(\"RPARAM\");\n\n    return {type : \"array\", data : {type : arraytype, iname : itername}};\n  }\n\n  function p_Type(p) {\n    var tok = p.peek()\n\n    if (tok.type == \"ID\") {\n      p.next();\n      return {type : \"struct\", data : \"\\\"\" + tok.value + \"\\\"\"};\n    } else if (basic_types.has(tok.type.toLowerCase())) {\n      p.next();\n      return {type : tok.type.toLowerCase()};\n    } else if (tok.type == \"ARRAY\") {\n      return p_Array(p);\n    } else {\n      p.error(tok, \"invalid type \" + tok.type); //(tok.value == \"\" ? tok.type : tok.value));\n    }\n  }\n\n  function p_Field(p) {\n    var field = {}\n\n    console.log(\"-----\", p.peek().type);\n\n    field.name = p.expect(\"ID\", \"struct field name\");\n    p.expect(\"COLON\");\n\n    field.type = p_Type(p);\n    field.set = undefined;\n    field.get = undefined;\n\n    var tok = p.peek();\n    if (tok.type == \"JSCRIPT\") {\n      field.get =  tok.value;\n      p.next()\n    }\n\n    tok = p.peek();\n    if (tok.type == \"JSCRIPT\") {\n      field.set = tok.value;\n      p.next();\n    }\n\n    p.expect(\"SEMI\");\n\n    return field;\n  }\n\n  function p_Struct(p) {\n    var st = {}\n    st.name = p.expect(\"ID\", \"struct name\")\n    st.fields = [];\n\n    p.expect(\"OPEN\");\n\n    while (1) {\n      if (p.at_end()) {\n        p.error(undefined);\n      } else if (p.optional(\"CLOSE\")) {\n        break;\n      } else {\n        st.fields.push(p_Field(p));\n      }\n    }\n\n    return st;\n  }\n\n  var ret = p_Struct(parser);\n\n  console.log(JSON.stringify(ret));\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/parseutil.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 608,
    "kind": "class",
    "name": "token",
    "memberof": "scripts/parseutil.js",
    "static": true,
    "longname": "scripts/parseutil.js~token",
    "access": "public",
    "export": true,
    "importPath": "./scripts/parseutil.js",
    "importStyle": "{token}",
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 609,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/parseutil.js~token",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~token#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 2,
    "undocument": true
  },
  {
    "__docId__": 610,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#type",
    "access": "public",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 611,
    "kind": "member",
    "name": "value",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#value",
    "access": "public",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 612,
    "kind": "member",
    "name": "lexpos",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#lexpos",
    "access": "public",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 613,
    "kind": "member",
    "name": "lexlen",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#lexlen",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 614,
    "kind": "member",
    "name": "lineno",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#lineno",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 615,
    "kind": "member",
    "name": "lexer",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#lexer",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 616,
    "kind": "member",
    "name": "parser",
    "memberof": "scripts/parseutil.js~token",
    "static": false,
    "longname": "scripts/parseutil.js~token#parser",
    "access": "public",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 617,
    "kind": "method",
    "name": "toString",
    "memberof": "scripts/parseutil.js~token",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~token#toString",
    "access": "public",
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 618,
    "kind": "class",
    "name": "tokdef",
    "memberof": "scripts/parseutil.js",
    "static": true,
    "longname": "scripts/parseutil.js~tokdef",
    "access": "public",
    "export": true,
    "importPath": "./scripts/parseutil.js",
    "importStyle": "{tokdef}",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 619,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/parseutil.js~tokdef",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~tokdef#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 26,
    "undocument": true
  },
  {
    "__docId__": 620,
    "kind": "member",
    "name": "name",
    "memberof": "scripts/parseutil.js~tokdef",
    "static": false,
    "longname": "scripts/parseutil.js~tokdef#name",
    "access": "public",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 621,
    "kind": "member",
    "name": "re",
    "memberof": "scripts/parseutil.js~tokdef",
    "static": false,
    "longname": "scripts/parseutil.js~tokdef#re",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 622,
    "kind": "member",
    "name": "func",
    "memberof": "scripts/parseutil.js~tokdef",
    "static": false,
    "longname": "scripts/parseutil.js~tokdef#func",
    "access": "public",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 623,
    "kind": "class",
    "name": "PUTLParseError",
    "memberof": "scripts/parseutil.js",
    "static": true,
    "longname": "scripts/parseutil.js~PUTLParseError",
    "access": "public",
    "export": true,
    "importPath": "./scripts/parseutil.js",
    "importStyle": "{PUTLParseError}",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "interface": false,
    "extends": [
      "Error"
    ]
  },
  {
    "__docId__": 624,
    "kind": "class",
    "name": "lexer",
    "memberof": "scripts/parseutil.js",
    "static": true,
    "longname": "scripts/parseutil.js~lexer",
    "access": "public",
    "export": true,
    "importPath": "./scripts/parseutil.js",
    "importStyle": "{lexer}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 625,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true
  },
  {
    "__docId__": 626,
    "kind": "member",
    "name": "tokdef",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#tokdef",
    "access": "public",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 627,
    "kind": "member",
    "name": "tokens",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#tokens",
    "access": "public",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 628,
    "kind": "member",
    "name": "lexpos",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#lexpos",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 629,
    "kind": "member",
    "name": "lexdata",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#lexdata",
    "access": "public",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 630,
    "kind": "member",
    "name": "lineno",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#lineno",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 631,
    "kind": "member",
    "name": "errfunc",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#errfunc",
    "access": "public",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 632,
    "kind": "member",
    "name": "tokints",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#tokints",
    "access": "public",
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 633,
    "kind": "member",
    "name": "statestack",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#statestack",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 634,
    "kind": "member",
    "name": "states",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#states",
    "access": "public",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "{\"__main__\": *}"
      ]
    }
  },
  {
    "__docId__": 635,
    "kind": "member",
    "name": "statedata",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#statedata",
    "access": "public",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 636,
    "kind": "method",
    "name": "add_state",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#add_state",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "tokdef",
        "types": [
          "*"
        ]
      },
      {
        "name": "errfunc",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 637,
    "kind": "method",
    "name": "tok_int",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#tok_int",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 638,
    "kind": "method",
    "name": "push_state",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#push_state",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "params": [
      {
        "name": "state",
        "types": [
          "*"
        ]
      },
      {
        "name": "statedata",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 642,
    "kind": "method",
    "name": "pop_state",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#pop_state",
    "access": "public",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 646,
    "kind": "method",
    "name": "input",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#input",
    "access": "public",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "params": [
      {
        "name": "str",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 651,
    "kind": "member",
    "name": "peeked_tokens",
    "memberof": "scripts/parseutil.js~lexer",
    "static": false,
    "longname": "scripts/parseutil.js~lexer#peeked_tokens",
    "access": "public",
    "description": null,
    "lineNumber": 105,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 652,
    "kind": "method",
    "name": "error",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#error",
    "access": "public",
    "description": null,
    "lineNumber": 108,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 653,
    "kind": "method",
    "name": "peek",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#peek",
    "access": "public",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 654,
    "kind": "method",
    "name": "peek_i",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#peek_i",
    "access": "public",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "params": [
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 655,
    "kind": "method",
    "name": "at_end",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#at_end",
    "access": "public",
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 656,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/parseutil.js~lexer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~lexer#next",
    "access": "public",
    "description": null,
    "lineNumber": 144,
    "undocument": true,
    "params": [
      {
        "name": "ignore_peek",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 658,
    "kind": "class",
    "name": "parser",
    "memberof": "scripts/parseutil.js",
    "static": true,
    "longname": "scripts/parseutil.js~parser",
    "access": "public",
    "export": true,
    "importPath": "./scripts/parseutil.js",
    "importStyle": "{parser}",
    "description": null,
    "lineNumber": 208,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 659,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 209,
    "undocument": true
  },
  {
    "__docId__": 660,
    "kind": "member",
    "name": "lexer",
    "memberof": "scripts/parseutil.js~parser",
    "static": false,
    "longname": "scripts/parseutil.js~parser#lexer",
    "access": "public",
    "description": null,
    "lineNumber": 210,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 661,
    "kind": "member",
    "name": "errfunc",
    "memberof": "scripts/parseutil.js~parser",
    "static": false,
    "longname": "scripts/parseutil.js~parser#errfunc",
    "access": "public",
    "description": null,
    "lineNumber": 211,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 662,
    "kind": "member",
    "name": "start",
    "memberof": "scripts/parseutil.js~parser",
    "static": false,
    "longname": "scripts/parseutil.js~parser#start",
    "access": "public",
    "description": null,
    "lineNumber": 212,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 663,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#parse",
    "access": "public",
    "description": null,
    "lineNumber": 215,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      },
      {
        "name": "err_on_unconsumed",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 664,
    "kind": "method",
    "name": "input",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#input",
    "access": "public",
    "description": null,
    "lineNumber": 231,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 665,
    "kind": "method",
    "name": "error",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#error",
    "access": "public",
    "description": null,
    "lineNumber": 235,
    "undocument": true,
    "params": [
      {
        "name": "tok",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 666,
    "kind": "method",
    "name": "peek",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#peek",
    "access": "public",
    "description": null,
    "lineNumber": 269,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 667,
    "kind": "method",
    "name": "peek_i",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#peek_i",
    "access": "public",
    "description": null,
    "lineNumber": 277,
    "undocument": true,
    "params": [
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 668,
    "kind": "method",
    "name": "peeknext",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#peeknext",
    "access": "public",
    "description": null,
    "lineNumber": 285,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 669,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#next",
    "access": "public",
    "description": null,
    "lineNumber": 289,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 670,
    "kind": "method",
    "name": "optional",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#optional",
    "access": "public",
    "description": null,
    "lineNumber": 297,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 671,
    "kind": "method",
    "name": "at_end",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#at_end",
    "access": "public",
    "description": null,
    "lineNumber": 310,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 672,
    "kind": "method",
    "name": "expect",
    "memberof": "scripts/parseutil.js~parser",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/parseutil.js~parser#expect",
    "access": "public",
    "description": null,
    "lineNumber": 314,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 673,
    "kind": "function",
    "name": "test_parser",
    "memberof": "scripts/parseutil.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/parseutil.js~test_parser",
    "access": "public",
    "export": false,
    "importPath": "./scripts/parseutil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 328,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 674,
    "kind": "file",
    "name": "scripts/polyfill.js",
    "content": "if (Array.prototype.set === undefined) {\n    Array.prototype.set = function set(array, src, dst, count) {\n        src = src === undefined ? 0 : src;\n        dst = dst === undefined ? 0 : dst;\n        count = count === undefined ? array.length :  count;\n        \n        if (count < 0) {\n            throw new RangeError(\"Count must be >= zero\");\n        }\n        \n        let len = Math.min(this.length-dst, array.length-src);\n        len = Math.min(len, count);\n        \n        for (let i=0; i<len; i++) {\n            this[dst+i] = array[src+i];\n        }\n        \n        return this;\n    }\n\n    if (Float64Array.prototype.set === undefined) {\n      Float64Array.prototype.set = Array.prototype.set;\n      Float32Array.prototype.set = Array.prototype.set;\n      Uint8Array.prototype.set = Array.prototype.set;\n      Uint8ClampedArray.prototype.set = Array.prototype.set;\n      Int32Array.prototype.set = Array.prototype.set;\n      Int16Array.prototype.set = Array.prototype.set;\n      Int8Array.prototype.set = Array.prototype.set;\n    }\n}\n\nif (Array.prototype.reject === undefined) {\n    Array.prototype.reject = function reject(func) {\n        return this.filter((item) => !func(item));\n    }\n}\n\nif (window.Symbol == undefined) { //eek!\n  window.Symbol = {\n    iterator : \"$__iterator__$\",\n    keystr   : \"$__keystr__$\"\n  }\n} else {\n  Symbol.keystr = Symbol(\"keystr\");\n}\n\nwindow.list = function list(iter) {\n  var ret = [];\n  \n  if (typeof iter == \"string\") {\n    iter = new String();\n  }\n  \n  if (Symbol.iterator in iter) {\n    for (var item of iter) {\n      ret.push(item);\n    }\n  } else {\n    iter.forEach(function(item) {\n      ret.push(item);\n    }, this);\n  }\n  \n  return ret;\n}\n\nfunction ArrayIter(array) {\n  this.array = array;\n  this.i = 0;\n  this.ret = {done : false, value : undefined};\n}\n\nArrayIter.prototype[Symbol.iterator] = function() {\n  return this;\n}\n\nArrayIter.prototype.next = function() {\n  var ret = this.ret;\n  \n  if (this.i >= this.array.length) {\n    ret.done = true;\n    ret.value = undefined;\n    return ret;\n  }\n  \n  ret.value = this.array[this.i++];\n  return ret;\n}\n\n//XXX surely browser vendors have fixed this by now. . .\n/*Override array iterator to not allocate too much*/\n\n//Array.prototype[Symbol.iterator] = function() {\n//  return new ArrayIter(this);\n//}\n\nif (Math.fract == undefined) {\n  Math.fract = function fract(f) {\n    var sn = (f>=0)*2.0-1.0;\n    f = f*sn - Math.floor(f*sn);\n    \n    sn = sn<0.0;\n    \n    return f*(1-sn) + (1.0-f)*sn;\n  };\n}\n\nif (Math.tent == undefined) {\n  Math.tent = function tent(f) {\n    return 1.0 - Math.abs(Math.fract(f)-0.5)*2.0;\n  };\n}\n\nif (Math.sign == undefined) {\n  Math.sign = function sign(f) {\n    return (f>0.0)*2.0-1.0;\n  };\n}\n\nif (Array.prototype.pop_i == undefined) {\n  Array.prototype.pop_i = function(idx) {\n    if (idx < 0 || idx >= this.length) {\n      throw new Error(\"Index out of range\");\n    }\n    \n    while (idx < this.length) {\n      this[idx] = this[idx+1];\n      idx++;\n    }\n    \n    this.length -= 1;\n  }\n}\n\nif (Array.prototype.remove == undefined) {\n  Array.prototype.remove = function(item, suppress_error) {\n    var i = this.indexOf(item);\n    \n    if (i < 0) {\n      if (suppress_error)\n        console.trace(\"Warning: item not in array\", item);\n      else\n        throw new Error(\"Error: item not in array \" + item);\n      \n      return;\n    }\n    \n    this.pop_i(i);\n  }\n}\n\nif (String.prototype.contains == undefined) {\n  String.prototype.contains = function(substr) {\n    return String.search(substr) != null;\n  }\n}\n\nString.prototype[Symbol.keystr] = function() {\n  return this;\n}\n\nNumber.prototype[Symbol.keystr] = Boolean.prototype[Symbol.keystr] = function() {\n  return \"\"+this;\n}\n\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/polyfill.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 675,
    "kind": "function",
    "name": "list",
    "memberof": "scripts/polyfill.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/polyfill.js~list",
    "access": "public",
    "export": false,
    "importPath": "./scripts/polyfill.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "params": [
      {
        "name": "iter",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 676,
    "kind": "function",
    "name": "ArrayIter",
    "memberof": "scripts/polyfill.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/polyfill.js~ArrayIter",
    "access": "public",
    "export": false,
    "importPath": "./scripts/polyfill.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [
      {
        "name": "array",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 677,
    "kind": "function",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/polyfill.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/polyfill.js~[Symbol.iterator]",
    "access": "public",
    "export": false,
    "importPath": "./scripts/polyfill.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 678,
    "kind": "function",
    "name": "next",
    "memberof": "scripts/polyfill.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/polyfill.js~next",
    "access": "public",
    "export": false,
    "importPath": "./scripts/polyfill.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 679,
    "kind": "function",
    "name": "[Symbol.keystr]",
    "memberof": "scripts/polyfill.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/polyfill.js~[Symbol.keystr]",
    "access": "public",
    "export": false,
    "importPath": "./scripts/polyfill.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 158,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 680,
    "kind": "file",
    "name": "scripts/screen.js",
    "content": "",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/screen.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 681,
    "kind": "file",
    "name": "scripts/ScreenArea.js",
    "content": "let _ScreenArea = undefined;\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as ui from './ui.js';\r\nimport * as ui_noteframe from './ui_noteframe.js';\r\n//import * as nstructjs from './struct.js';\r\nimport {haveModal} from './simple_events.js';\r\n\r\nimport './struct.js';\r\n\r\nlet Vector2 = vectormath.Vector2;\r\nlet Screen = undefined;\r\n\r\nexport function setScreenClass(cls) {\r\n  Screen = cls;\r\n}\r\n\r\nexport function getAreaIntName(name) {\r\n  let hash = 0;\r\n  \r\n  for (let i=0; i<name.length; i++) {\r\n    let c = name.charCodeAt(i);\r\n    \r\n    if (i % 2 == 0) {\r\n      hash += c<<8;\r\n      hash *= 13;\r\n      hash = hash & ((1<<15)-1);\r\n    } else {\r\n      hash += c;\r\n    }\r\n  }\r\n  \r\n  return hash;\r\n}\r\n//XXX get rid of me\r\nwindow.getAreaIntName = getAreaIntName;\r\n\r\n//XXX get rid of me\r\nexport var AreaTypes = {\r\n  TEST_CANVAS_EDITOR : 0\r\n};\r\n\r\nexport function setAreaTypes(def) {\r\n  for (let k in AreaTypes) {\r\n    delete AreaTypes[k];\r\n  }\r\n  \r\n  for (let k in def) {\r\n    AreaTypes[k] = def[k];\r\n  }\r\n}\r\n\r\nexport let areaclasses = {};\r\nlet area_idgen = 0;\r\n\r\nlet laststack = [];\r\nlet last_area = undefined;\r\n\r\nexport const BorderMask = {\r\n  LEFT    : 1,\r\n  BOTTOM  : 2,\r\n  RIGHT   : 4,\r\n  TOP     : 8,\r\n  ALL     : 1|2|4|8\r\n};\r\n\r\nexport const BorderSides = {\r\n  LEFT   : 0,\r\n  BOTTOM : 1,\r\n  RIGHT  : 2,\r\n  TOP    : 3\r\n};\r\n\r\n/**\r\n * Base class for all editors\r\n **/\r\nexport class Area extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    /**\r\n     * -----b4----\r\n     *\r\n     * b1       b3\r\n     *\r\n     * -----b2----\r\n     *\r\n     * */\r\n    //set bits in mask to keep\r\n    //borders from moving\r\n    this.borderLock = 0;\r\n    this.inactive = true;\r\n    \r\n    this.owning_sarea = undefined;\r\n    this._area_id = area_idgen++;\r\n    \r\n    this.pos = undefined; //set by screenarea parent\r\n    this.size = undefined; //set by screenarea parent\r\n  }\r\n\r\n  /**\r\n   * Return a list of keymaps used by this editor\r\n   * @returns {Array<KeyMap>}\r\n   */\r\n  getKeyMaps() {\r\n    return [this.keymap];\r\n  }\r\n\r\n  buildDataPath() {\r\n    let p = this;\r\n    \r\n    let sarea = this.owning_sarea;\r\n    \r\n    if (sarea === undefined || sarea.screen === undefined) {\r\n      console.warn(\"Area.buildDataPath(): Failed to build data path\");\r\n      return \"\";\r\n    }\r\n    \r\n    let screen = sarea.screen;\r\n    \r\n    let idx1 = screen.sareas.indexOf(sarea);\r\n    let idx2 = sarea.editors.indexOf(this);\r\n    \r\n    if (idx1 < 0 || idx2 < 0) {\r\n      throw new Error(\"malformed area data\");\r\n    }\r\n    \r\n    let ret = `screen.sareas[${idx1}].editors[${idx2}]`;\r\n    return ret;\r\n  }\r\n  \r\n  saveData() {\r\n    return {\r\n      _area_id : this._area_id,\r\n      areaName : this.areaName\r\n    };\r\n  }\r\n  \r\n  loadData(obj) {\r\n    let id = obj._area_id;\r\n    \r\n    if (id !== undefined && id !== null) {\r\n      this._area_id = id;\r\n    }\r\n  }\r\n  \r\n  draw() {\r\n  }\r\n  \r\n  copy() {\r\n    throw new Error(\"implement me! Area.copy()\");\r\n  }\r\n  \r\n  on_resize(size, oldsize) {\r\n    super.on_resize(size, oldsize);\r\n  }\r\n\r\n  on_area_focus() {\r\n\r\n  }\r\n\r\n  on_area_blur() {\r\n\r\n  }\r\n\r\n  /** called when editors are swapped with another editor type*/\r\n  on_area_active() {\r\n  }\r\n\r\n  /** called when editors are swapped with another editor type*/\r\n  on_area_inactive() {\r\n  }\r\n\r\n  /*client code can implement these next three methods\r\n  * either through subclassing or by override Area.prototype.xxx\r\n  *\r\n  * their purpose is to keep track of which area is the \"active\" one for its type, as well as which\r\n  * area is \"currently active.\"  This is needed so UI controls can know what their parent area is,\r\n  * e.g. a slider with path \"view2d.zoomfac\" needs to know where to find view2d*/\r\n  getActiveArea() {\r\n    //very simple default implementation\r\n    return last_area;\r\n  }\r\n\r\n  push_ctx_active() {\r\n    laststack.push(last_area);\r\n    last_area = this;\r\n  }\r\n\r\n  pop_ctx_active() {\r\n    let ret = laststack.pop();\r\n\r\n    if (ret !== undefined) {\r\n      last_area = ret;\r\n    }\r\n  }\r\n  \r\n  static register(cls) {\r\n    let def = cls.define();\r\n    \r\n    if (!def.areaname) {\r\n      throw new Error(\"Missing areaname key in define()\");\r\n    }\r\n    \r\n    areaclasses[def.areaname] = cls;\r\n    \r\n    ui_base.UIBase.register(cls);\r\n  }\r\n  \r\n  getScreen() {\r\n    //XXX\r\n    //return _appstate.screen;\r\n    throw new Error(\"replace me in Area.prototype\");\r\n  }\r\n  \r\n  toJSON() {\r\n    return Object.assign(super.toJSON(), {\r\n      areaname : this.constructor.define().areaname,\r\n      _area_id : this._area_id\r\n    });\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    super.loadJSON(obj);\r\n    this._area_id = obj._area_id;\r\n    \r\n    return this;\r\n  }\r\n\r\n  getBarHeight() {\r\n    return this.header.getClientRects()[0].height;\r\n  }\r\n\r\n  makeAreaSwitcher(container) {\r\n    let areas = {};\r\n    let icons = {};\r\n    let i = 0;\r\n\r\n    for (let k in areaclasses) {\r\n      let cls = areaclasses[k];\r\n      let def = cls.define();\r\n\r\n      if (def.hidden)\r\n        continue;\r\n\r\n      let uiname = def.uiname;\r\n\r\n      if (uiname === undefined) {\r\n        uiname = k.replace(\"_\", \" \").toLowerCase();\r\n        uiname = uiname[0].toUpperCase() + uiname.slice(1, uiname.length);\r\n      }\r\n\r\n      areas[uiname] = k;\r\n      icons[uiname] = def.icon !== undefined ? def.icon : -1;\r\n    }\r\n\r\n\r\n    return container.listenum(undefined, this.constructor.define().uiname, areas, undefined, (id) => {\r\n      let cls = areaclasses[id];\r\n      this.owning_sarea.switch_editor(cls);\r\n    }, icons);\r\n\r\n    //return areas;\r\n  }\r\n\r\n  makeHeader(container, add_note_area=true) {\r\n    let row = this.header = container.row();\r\n\r\n    row.remove();\r\n    container._prepend(row);\r\n\r\n    row.background = ui_base.getDefault(\"AreaHeaderBG\");\r\n\r\n    let rh = ~~(16*this.getDPI());\r\n\r\n    //container.setSize(undefined, rh);\r\n    //row.setSize(undefined, rh);\r\n    //row.setSize(undefined, rh);\r\n\r\n    container.noMarginsOrPadding();\r\n    row.noMarginsOrPadding();\r\n\r\n    row.style[\"width\"] = \"100%\";\r\n    row.style[\"margin\"] = \"0px\";\r\n    row.style[\"padding\"] = \"0px\";\r\n\r\n    let mdown = false;\r\n    let mpos = new Vector2();\r\n    \r\n    let mpre = (e, pageX, pageY) => {\r\n      pageX = pageX === undefined ? e.pageX : pageX;\r\n      pageY = pageY === undefined ? e.pageY : pageY;\r\n\r\n      let node = this.getScreen().pickElement(pageX, pageY);\r\n     // console.log(node.tagName, node === row)\r\n      \r\n      if (node !== row) {\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    }\r\n    \r\n    row.addEventListener(\"mouseout\", (e) => {\r\n      //console.log(\"mouse leave\");\r\n      mdown = false;\r\n    });\r\n    row.addEventListener(\"mouseleave\", (e) => {\r\n      //console.log(\"mouse out\");\r\n      mdown = false;\r\n    });\r\n    \r\n    row.addEventListener(\"mousedown\", (e) => {\r\n      if (!mpre(e)) return;\r\n      \r\n      mpos[0] = e.pageX;\r\n      mpos[1] = e.pageY;\r\n      mdown = true;\r\n    }, false);\r\n\r\n    let do_mousemove = (e, pageX, pageY) => {\r\n      if (!mdown || !mpre(e, pageX, pageY)) return;\r\n\r\n      //console.log(mdown);\r\n      let dx = pageX - mpos[0];\r\n      let dy = pageY - mpos[1];\r\n\r\n      let dis = dx*dx + dy*dy;\r\n      let limit = 7;\r\n\r\n      if (dis > limit*limit) {\r\n        let sarea = this.owning_sarea;\r\n        if (sarea === undefined) {\r\n          console.warn(\"Error: missing sarea ref\");\r\n          return;\r\n        }\r\n\r\n        let screen = sarea.screen;\r\n        if (screen === undefined) {\r\n          console.log(\"Error: missing screen ref\");\r\n          return;\r\n        }\r\n\r\n        mdown = false;\r\n        console.log(\"area drag tool!\");\r\n        screen.areaDragTool(this.owning_sarea);\r\n      }\r\n    };\r\n\r\n    row.addEventListener(\"mousemove\", (e) => {\r\n      return do_mousemove(e, e.pageX, e.pageY);\r\n    }, false);\r\n\r\n    row.addEventListener(\"mouseup\", (e) => {\r\n      if (!mpre(e)) return;\r\n\r\n      mdown = false;\r\n    }, false);\r\n\r\n    row.addEventListener(\"touchstart\", (e) => {\r\n      console.log(\"touchstart\", e);\r\n\r\n      if (!mpre(e, e.touches[0].pageX, e.touches[0].pageY)) return;\r\n      \r\n      if (e.touches.length == 0)\r\n        return;\r\n      \r\n      mpos[0] = e.touches[0].pageX;\r\n      mpos[1] = e.touches[0].pageY;\r\n      mdown = true;\r\n    }, false);\r\n    \r\n    row.addEventListener(\"touchmove\", (e) => {\r\n      return do_mousemove(e, e.touches[0].pageX, e.touches[0].pageY);\r\n    }, false);\r\n\r\n    let touchend = (e) => {\r\n      let node = this.getScreen().pickElement(e.pageX, e.pageY);\r\n      if (node !== row) {\r\n        return;\r\n      }\r\n      if (e.touches.length == 0)\r\n        return;\r\n      \r\n      mdown = false;\r\n    };\r\n    \r\n    row.addEventListener(\"touchcancel\", (e) => {\r\n      touchend(e);        \r\n    }, false);\r\n    row.addEventListener(\"touchend\", (e) => {\r\n      touchend(e);        \r\n    }, false);\r\n\r\n    this.switcher = this.makeAreaSwitcher(row);\r\n\r\n    if (add_note_area) {\r\n      let notef = document.createElement(\"noteframe-x\");\r\n      notef.ctx = this.ctx;\r\n      row._add(notef);\r\n    }\r\n\r\n    this.header = row;\r\n    \r\n    return row;\r\n  }\r\n  \r\n  setCSS() {\r\n    this.style[\"overflow\"] = \"hidden\";\r\n    \r\n    if (this.size !== undefined) {\r\n      this.style[\"position\"] = \"absolute\";\r\n      //this.style[\"left\"] = this.pos[0] + \"px\";\r\n      //this.style[\"top\"] = this.pos[1] + \"px\";\r\n      this.style[\"width\"] = ~~this.size[0] + \"px\";\r\n      this.style[\"height\"] = ~~this.size[1] + \"px\";\r\n    }\r\n  }\r\n  \r\n  update() {\r\n    //don't update non-active editors\r\n    if (this.owning_sarea === undefined || this !== this.owning_sarea.area) {\r\n      return;\r\n    }\r\n\r\n    super.update();\r\n    \r\n    //see FrameManager.js, we use a single update\r\n    //function for everything now\r\n    //this._forEachChildWidget((n) => {\r\n    //  n.update();\r\n    //});\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname  : undefined, // e.g. \"areadata-x\",\r\n    areaname : undefined, //api name for area type\r\n    uiname   : undefined,\r\n    icon : undefined //icon representing area in MakeHeader's area switching menu. Integer.\r\n  };}\r\n  \r\n  //subclassing loadSTRUCTs should either call this, or invoke super.loadSTRUCT()\r\n  afterSTRUCT() {\r\n    this.doOnce(() => {\r\n      try {\r\n        console.log(\"load ui data\");\r\n        ui_base.loadUIData(this, this.saved_uidata);\r\n        this.saved_uidata = undefined;\r\n      } catch (error) {\r\n        console.log(\"failed to load ui data\");\r\n        util.print_stack(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  static newSTRUCT(reader) {\r\n    return document.createElement(this.define().tagname);\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n  }\r\n  \r\n  _getSavedUIData() {\r\n    return ui_base.saveUIData(this, \"area\");\r\n  }\r\n}\r\n\r\nArea.STRUCT = `\r\npathux.Area { \r\n  saved_uidata : string | obj._getSavedUIData();\r\n}\r\n`\r\n\r\nnstructjs.manager.add_class(Area);  \r\n//ui_base.UIBase.register(Area);\r\n\r\nlet sarea_idgen = 0;\r\n\r\nexport class ScreenArea extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n    \r\n    this._borders = [];\r\n    \r\n    this._sarea_id = sarea_idgen++;\r\n    \r\n    this.pos = new Vector2();\r\n    this.size = new Vector2();\r\n\r\n    this.floating = false;\r\n\r\n    this.area = undefined;\r\n    this.editors = [];\r\n    this.editormap = {};\r\n\r\n    this.addEventListener(\"mouseover\", (e) => {\r\n      if (haveModal()) {\r\n        return;\r\n      }\r\n\r\n      //console.log(\"screen area mouseover\");\r\n      let screen = this.getScreen();\r\n      if (screen.sareas.active !== this && screen.sareas.active) {\r\n        screen.sareas.active.area.on_area_blur();\r\n      }\r\n\r\n      if (screen.sareas.active !== this) {\r\n        this.area.on_area_focus();\r\n      }\r\n\r\n      screen.sareas.active = this;\r\n    });\r\n\r\n    //this.addEventListener(\"mouseleave\", (e) => {\r\n      //console.log(\"screen area mouseleave\");\r\n    //});\r\n  }\r\n  \r\n  /*\r\n  saveData() {\r\n    return {\r\n      _sarea_id : this._sarea_id,\r\n      pos       : this.pos,\r\n      size      : this.size,\r\n    };\r\n  }\r\n  loadData(obj) {\r\n    super.loadData(obj);\r\n\r\n    let id = obj._sarea_id;\r\n    \r\n    let type = obj.areatype;\r\n    \r\n    if (id !== undefined && id !== null) {\r\n      this._sarea_id = id;\r\n    }\r\n    \r\n    for (let area of this.editors) {\r\n      if (area.areaType == type) {\r\n        console.log(\"             found saved area type\");\r\n        \r\n        this.switch_editor(area.constructor);\r\n      }\r\n    }\r\n    \r\n    this.pos.load(obj.pos);\r\n    this.size.load(obj.size);\r\n  }//*/\r\n\r\n  get borderLock() {\r\n    return this.area !== undefined ? this.area.borderLock : 0;\r\n  }\r\n\r\n  draw() {\r\n    this.area.draw();\r\n  }\r\n  \r\n  toJSON() {\r\n    let ret = {\r\n      editors : this.editors,\r\n      _sarea_id : this._sarea_id,\r\n      area : this.area.constructor.define().areaname,\r\n      pos : this.pos,\r\n      size : this.size\r\n    };\r\n    \r\n    return Object.assign(super.toJSON(), ret);\r\n  }\r\n\r\n  on_keydown(e) {\r\n    if (this.area.on_keydown) {\r\n      this.area.push_ctx_active();\r\n      this.area.on_keydown(e);\r\n      this.area.pop_ctx_active();\r\n    }\r\n  }\r\n\r\n  loadJSON(obj) {\r\n    if (obj === undefined) {\r\n      console.warn(\"undefined in loadJSON\");\r\n      return;\r\n    }\r\n\r\n    super.loadJSON(obj);\r\n    \r\n    this.pos.load(obj.pos);\r\n    this.size.load(obj.size);\r\n    \r\n    for (let editor of obj.editors) {\r\n      let areaname = editor.areaname;\r\n      \r\n      //console.log(editor);\r\n      \r\n      let tagname = areaclasses[areaname].define().tagname;\r\n      let area = document.createElement(tagname);\r\n      \r\n      area.owning_sarea = this;\r\n      this.editormap[areaname] = area;\r\n      this.editors.push(this.editormap[areaname]);\r\n\r\n      area.pos = new Vector2(obj.pos);\r\n      area.size = new Vector2(obj.size);\r\n      area.ctx = this.ctx;\r\n      \r\n      area.inactive = true;\r\n      area.loadJSON(editor);\r\n      area.owning_sarea = undefined;\r\n      \r\n      if (areaname === obj.area) {\r\n        this.area = area;\r\n      }\r\n    }\r\n    \r\n    if (this.area !== undefined) {\r\n      this.area.ctx = this.ctx;\r\n      this.area.style[\"width\"] = \"100%\";\r\n      this.area.style[\"height\"] = \"100%\";\r\n      this.area.owning_sarea = this;\r\n      \r\n      this.area.pos = this.pos;\r\n      this.area.size = this.size;\r\n      \r\n      this.area.inactive = false;\r\n      this.shadow.appendChild(this.area);\r\n      this.area.on_area_active();\r\n      this.area.onadd();\r\n    }\r\n    \r\n    this.setCSS();\r\n  }\r\n  \r\n  _ondestroy() {\r\n    super._ondestroy();\r\n    \r\n    for (let editor of this.editors) {\r\n      if (editor === this.area) continue;\r\n      \r\n      editor._ondestroy();\r\n    }\r\n  }\r\n  \r\n  getScreen() {\r\n    if (this.screen !== undefined) {\r\n      return this.screen;\r\n    }\r\n\r\n    //try to walk up graph, if possible\r\n    let p = this.parentNode;\r\n    let _i = 0;\r\n\r\n    while (p && !(p instanceof Screen) && p !== p.parentNode) {\r\n      p = this.parentNode;\r\n\r\n      if (_i++ > 1000) {\r\n        console.warn(\"infinite loop detected in ScreenArea.prototype.getScreen()\");\r\n        return undefined;\r\n      }\r\n    }\r\n    \r\n    return p instanceof Screen ? p : undefined;\r\n  }\r\n  \r\n  copy(screen) {\r\n    let ret = document.createElement(\"screenarea-x\");\r\n    \r\n    ret.screen = screen;\r\n    ret.ctx = this.ctx;\r\n    \r\n    ret.pos[0] = this.pos[0];\r\n    ret.pos[1] = this.pos[1];\r\n    \r\n    ret.size[0] = this.size[0];\r\n    ret.size[1] = this.size[1];\r\n    \r\n    for (let area of this.editors) {\r\n      let cpy = area.copy();\r\n      \r\n      cpy.ctx = this.ctx;\r\n      ret.editors.push(cpy);\r\n\r\n      if (area === this.area) {\r\n        ret.area = cpy;\r\n      }\r\n    }\r\n    \r\n    //console.trace(\"RET.AREA\", this.area, ret.area);\r\n\r\n    ret.ctx = this.ctx;\r\n\r\n    if (ret.area !== undefined) {\r\n      ret.area.ctx = this.ctx;\r\n\r\n      ret.area.pos = ret.pos;\r\n      ret.area.size = ret.size;\r\n      ret.area.owning_sarea = ret;\r\n      \r\n      ret.shadow.appendChild(ret.area);\r\n      //ret.area.onadd();\r\n      \r\n      if (ret.area._init_done) {\r\n        ret.area.push_ctx_active();\r\n        ret.area.on_area_active();\r\n        ret.area.pop_ctx_active();\r\n      } else {\r\n        ret.doOnce(() => {\r\n          ret._init();\r\n          ret.area._init();\r\n          ret.area.push_ctx_active();\r\n          ret.area.on_area_active();\r\n          ret.area.pop_ctx_active();\r\n        });\r\n      }\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  loadFromVerts() {\r\n    let bs = this._borders;\r\n    let min = [1e17, 1e17], max = [-1e17, -1e17];\r\n    \r\n    for (let b of bs) {\r\n      for (let i=0; i<2; i++) {\r\n        min[i] = Math.min(min[i], b.v1[i]);\r\n        min[i] = Math.min(min[i], b.v2[i]);\r\n        \r\n        max[i] = Math.max(max[i], b.v1[i]);\r\n        max[i] = Math.max(max[i], b.v2[i]);\r\n      }\r\n    }\r\n    \r\n    this.pos[0] = Math.floor(min[0]);\r\n    this.pos[1] = Math.floor(min[1]);\r\n    \r\n    this.size[0] = Math.ceil(max[0] - min[0]);\r\n    this.size[1] = Math.ceil(max[1] - min[1]);\r\n    \r\n    this.setCSS();\r\n  }\r\n  \r\n  on_resize(size, oldsize) {\r\n    super.on_resize(size, oldsize);\r\n    \r\n    if (this.area !== undefined) {\r\n      this.area.on_resize(size, oldsize);\r\n    }      \r\n  }\r\n  \r\n  makeBorders(screen) {\r\n    this._borders.length = 0;\r\n    \r\n    let p = this.pos, s = this.size;\r\n    \r\n    let vs = [\r\n      new Vector2([p[0],      p[1]]),\r\n      new Vector2([p[0],      p[1]+s[1]]),\r\n      new Vector2([p[0]+s[0], p[1]+s[1]]),\r\n      new Vector2([p[0]+s[0], p[1]])\r\n    ];\r\n\r\n    for (let i=0; i<vs.length; i++) {\r\n      let v1 = vs[i], v2 = vs[(i + 1) % vs.length];\r\n\r\n      let b = screen.getScreenBorder(this, v1, v2, i);\r\n\r\n      for (let j=0; j<2; j++) {\r\n        let v = j ? b.v2 : b.v1;\r\n\r\n        if (v.sareas.indexOf(this) < 0) {\r\n          v.sareas.push(this);\r\n        }\r\n      }\r\n\r\n      if (b.sareas.indexOf(this) < 0) {\r\n        b.sareas.push(this);\r\n      }\r\n      \r\n      this._borders.push(b);\r\n\r\n      b.movable = screen.isBorderMovable(this, b);\r\n    }\r\n    \r\n    return this;\r\n  }\r\n  \r\n  setCSS() {\r\n    this.style[\"position\"] = \"absolute\";\r\n    this.style[\"overflow\"] = \"hidden\";\r\n    \r\n    this.style[\"left\"] = ~~this.pos[0] + \"px\";\r\n    this.style[\"top\"] = ~~this.pos[1] + \"px\";\r\n    \r\n    this.style[\"width\"] = ~~this.size[0] + \"px\";\r\n    this.style[\"height\"] = ~~this.size[1] + \"px\";\r\n    \r\n    \r\n    if (this.area !== undefined) {\r\n      this.area.setCSS();\r\n      //this.style[\"overflow\"] = this.area.style[\"overflow\"];\r\n      \r\n      //this.area.style[\"width\"] = this.size[0] + \"px\";\r\n      //this.area.style[\"height\"] = this.size[1] + \"px\";\r\n    }\r\n      \r\n    /*\r\n    if (this.area) {\r\n      let area = this.area;\r\n      area.style[\"position\"] = \"absolute\";\r\n      \r\n      area.style[\"width\"] = this.size[0] + \"px\";\r\n      area.style[\"height\"] = this.size[1] + \"px\";\r\n    }\r\n    //*/\r\n  }\r\n  \r\n  appendChild(child) {\r\n    if (child instanceof Area) {\r\n      child.ctx = this.ctx;\r\n      child.pos = this.pos;\r\n      child.size = this.size;\r\n      \r\n      if (this.editors.indexOf(child) < 0) {\r\n        this.editors.push(child);\r\n      }\r\n      \r\n      child.owning_sarea = undefined;\r\n    }\r\n    \r\n    super.appendChild(child);\r\n    \r\n    if (child instanceof ui_base.UIBase) {\r\n      child.onadd();\r\n    }\r\n  }\r\n  \r\n  switch_editor(cls) {\r\n    let def = cls.define();\r\n    let name = def.areaname;\r\n    \r\n    //areaclasses[name]\r\n    if (!(name in this.editormap)) {\r\n      this.editormap[name] = document.createElement(def.tagname);\r\n      this.editormap[name].ctx = this.ctx;\r\n      this.editormap[name].owning_sarea = this;\r\n      this.editormap[name].inactive = false;\r\n      \r\n      this.editors.push(this.editormap[name]);\r\n    }\r\n    \r\n    //var finish = () => {\r\n      if (this.area !== undefined) {\r\n        //break direct pos/size references for old active area\r\n        this.area.pos = new Vector2(this.area.pos);\r\n        this.area.size = new Vector2(this.area.size);\r\n        \r\n        this.area.owning_sarea = undefined;\r\n        this.area.inactive = true;\r\n        this.area.push_ctx_active();\r\n        this.area._init(); //check that init was called\r\n        this.area.on_area_inactive();\r\n        this.area.pop_ctx_active();\r\n        \r\n        this.area.remove();\r\n      }\r\n      \r\n      this.area = this.editormap[name];\r\n\r\n      this.area.inactive = false;\r\n      \r\n      //. . .and set references to pos/size\r\n      this.area.pos = this.pos;\r\n      this.area.size = this.size;\r\n      this.area.owning_sarea = this;\r\n      this.area.ctx = this.ctx;\r\n\r\n      if (this.area._useDataPathToolOp === undefined) {\r\n        this.area._useDataPathToolOp = this._useDataPathToolOp;\r\n      }\r\n\r\n      this.shadow.appendChild(this.area);\r\n\r\n      this.area.style[\"width\"] = \"100%\";\r\n      this.area.style[\"height\"] = \"100%\";\r\n\r\n      //propegate new size\r\n      this.area.push_ctx_active();\r\n      this.area._init(); //check that init was called\r\n      this.area.on_resize(this.size, this.size);\r\n      this.area.pop_ctx_active();\r\n\r\n      this.area.push_ctx_active();\r\n      this.area.on_area_active();\r\n      this.area.pop_ctx_active();\r\n\r\n      this.regenTabOrder();\r\n    //}\r\n  }\r\n  \r\n  update() {\r\n    super.update();\r\n\r\n    //flag client controller implementation that\r\n    //this area is active for its type\r\n    if (this.area !== undefined) {\r\n      this.area.owning_sarea = this;\r\n      this.area.size = this.size;\r\n      this.area.pos = this.pos;\r\n      this.area.push_ctx_active();\r\n    }\r\n\r\n    this._forEachChildWidget((n) => {\r\n      n.update();\r\n    });\r\n\r\n    if (this.area !== undefined) {\r\n      this.area.pop_ctx_active();\r\n    }\r\n  }\r\n\r\n  static newSTRUCT() {\r\n    return document.createElement(\"screenarea-x\");\r\n  }\r\n\r\n  afterSTRUCT() {\r\n    for (let area of this.editors) {\r\n      area.pos = this.pos;\r\n      area.size = this.size;\r\n      area.owning_sarea = this;\r\n\r\n      area.push_ctx_active();\r\n      area._ctx = this.ctx;\r\n      area.afterSTRUCT();\r\n      area.pop_ctx_active();\r\n    }\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.pos = new Vector2(this.pos);\r\n    this.size = new Vector2(this.size);\r\n    \r\n    //find active editor\r\n    \r\n    for (let area of this.editors) {\r\n      \r\n      /*\r\n      if (area.constructor === undefined || area.constructor.define === undefined) {\r\n        console.warn(\"Missing class for area\", area, \"maybe buggy loadSTRUCT()?\");\r\n        continue;\r\n      }\r\n      //*/\r\n      \r\n      let areaname = area.constructor.define().areaname;\r\n\r\n      area.inactive = true;\r\n      area.owning_sarea = undefined;\r\n      this.editormap[areaname] = area;\r\n      \r\n      if (areaname == this.area) {\r\n        this.area = area;\r\n      }\r\n    }\r\n    \r\n    if (typeof this.area != \"object\") {\r\n      console.warn(\"Failed to find active area!\", this.area);\r\n      this.area = this.editors[0];\r\n    } \r\n\r\n    if (this.area !== undefined) {\r\n      this.area.style[\"width\"] = \"100%\";\r\n      this.area.style[\"height\"] = \"100%\";\r\n      this.area.owning_sarea = this;\r\n\r\n      this.area.pos = this.pos;\r\n      this.area.size = this.size;\r\n\r\n      this.area.inactive = false;\r\n      this.shadow.appendChild(this.area);\r\n\r\n      this.doOnce(() => {\r\n        this.area.ctx = this.ctx;\r\n        this.area._init(); //ensure init has been called already\r\n        this.area.on_area_active();\r\n        this.area.onadd();\r\n      });        \r\n    }\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"screenarea-x\"\r\n  };}\r\n}\r\n\r\nScreenArea.STRUCT = `\r\npathux.ScreenArea { \r\n  pos      : array(float);\r\n  size     : array(float);\r\n  type     : string;\r\n  floating : int; \r\n  editors  : array(abstract(pathux.Area));\r\n  area     : string | obj.area.constructor.define().areaname;\r\n}\r\n`;\r\n\r\nnstructjs.manager.add_class(ScreenArea);  \r\nui_base.UIBase.register(ScreenArea);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ScreenArea.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 682,
    "kind": "variable",
    "name": "_ScreenArea",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~_ScreenArea",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 683,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 684,
    "kind": "variable",
    "name": "Screen",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~Screen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 685,
    "kind": "function",
    "name": "setScreenClass",
    "memberof": "scripts/ScreenArea.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~setScreenClass",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{setScreenClass}",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 686,
    "kind": "function",
    "name": "getAreaIntName",
    "memberof": "scripts/ScreenArea.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~getAreaIntName",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{getAreaIntName}",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 687,
    "kind": "variable",
    "name": "AreaTypes",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~AreaTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{AreaTypes}",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "{\"TEST_CANVAS_EDITOR\": *}"
      ]
    }
  },
  {
    "__docId__": 688,
    "kind": "function",
    "name": "setAreaTypes",
    "memberof": "scripts/ScreenArea.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~setAreaTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{setAreaTypes}",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "params": [
      {
        "name": "def",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 689,
    "kind": "variable",
    "name": "areaclasses",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~areaclasses",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{areaclasses}",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 690,
    "kind": "variable",
    "name": "area_idgen",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~area_idgen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 691,
    "kind": "variable",
    "name": "laststack",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~laststack",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 692,
    "kind": "variable",
    "name": "last_area",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~last_area",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 693,
    "kind": "variable",
    "name": "BorderMask",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~BorderMask",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{BorderMask}",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "{\"LEFT\": number, \"BOTTOM\": number, \"RIGHT\": number, \"TOP\": number, \"ALL\": *}"
      ]
    }
  },
  {
    "__docId__": 694,
    "kind": "variable",
    "name": "BorderSides",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~BorderSides",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{BorderSides}",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "{\"LEFT\": *, \"BOTTOM\": number, \"RIGHT\": number, \"TOP\": number}"
      ]
    }
  },
  {
    "__docId__": 695,
    "kind": "class",
    "name": "Area",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~Area",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{Area}",
    "description": "Base class for all editors",
    "lineNumber": 79,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 696,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 80,
    "undocument": true
  },
  {
    "__docId__": 697,
    "kind": "member",
    "name": "borderLock",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#borderLock",
    "access": "public",
    "description": "-----b4----\n\nb1       b3\n\n-----b2----",
    "lineNumber": 93,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 698,
    "kind": "member",
    "name": "inactive",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#inactive",
    "access": "public",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 699,
    "kind": "member",
    "name": "owning_sarea",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#owning_sarea",
    "access": "public",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 700,
    "kind": "member",
    "name": "_area_id",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#_area_id",
    "access": "private",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 701,
    "kind": "member",
    "name": "pos",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#pos",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 702,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#size",
    "access": "public",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 703,
    "kind": "method",
    "name": "getKeyMaps",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#getKeyMaps",
    "access": "public",
    "description": "Return a list of keymaps used by this editor",
    "lineNumber": 107,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array<KeyMap>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array<KeyMap>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 704,
    "kind": "method",
    "name": "buildDataPath",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#buildDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 705,
    "kind": "method",
    "name": "saveData",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#saveData",
    "access": "public",
    "description": null,
    "lineNumber": 134,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"_area_id\": *, \"areaName\": *}"
      ]
    }
  },
  {
    "__docId__": 706,
    "kind": "method",
    "name": "loadData",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#loadData",
    "access": "public",
    "description": null,
    "lineNumber": 141,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 708,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#draw",
    "access": "public",
    "description": null,
    "lineNumber": 149,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 709,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#copy",
    "access": "public",
    "description": null,
    "lineNumber": 152,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 710,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 156,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "oldsize",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 711,
    "kind": "method",
    "name": "on_area_focus",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#on_area_focus",
    "access": "public",
    "description": null,
    "lineNumber": 160,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 712,
    "kind": "method",
    "name": "on_area_blur",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#on_area_blur",
    "access": "public",
    "description": null,
    "lineNumber": 164,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 713,
    "kind": "method",
    "name": "on_area_active",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#on_area_active",
    "access": "public",
    "description": "called when editors are swapped with another editor type",
    "lineNumber": 169,
    "params": [],
    "return": null
  },
  {
    "__docId__": 714,
    "kind": "method",
    "name": "on_area_inactive",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#on_area_inactive",
    "access": "public",
    "description": "called when editors are swapped with another editor type",
    "lineNumber": 173,
    "params": [],
    "return": null
  },
  {
    "__docId__": 715,
    "kind": "method",
    "name": "getActiveArea",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#getActiveArea",
    "access": "public",
    "description": null,
    "lineNumber": 182,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 716,
    "kind": "method",
    "name": "push_ctx_active",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#push_ctx_active",
    "access": "public",
    "description": null,
    "lineNumber": 187,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 717,
    "kind": "method",
    "name": "pop_ctx_active",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#pop_ctx_active",
    "access": "public",
    "description": null,
    "lineNumber": 192,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 718,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~Area.register",
    "access": "public",
    "description": null,
    "lineNumber": 200,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 719,
    "kind": "method",
    "name": "getScreen",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#getScreen",
    "access": "public",
    "description": null,
    "lineNumber": 212,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 720,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 218,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 721,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 225,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 723,
    "kind": "method",
    "name": "getBarHeight",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#getBarHeight",
    "access": "public",
    "description": null,
    "lineNumber": 232,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 724,
    "kind": "method",
    "name": "makeAreaSwitcher",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#makeAreaSwitcher",
    "access": "public",
    "description": null,
    "lineNumber": 236,
    "undocument": true,
    "params": [
      {
        "name": "container",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 725,
    "kind": "method",
    "name": "makeHeader",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#makeHeader",
    "access": "public",
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "params": [
      {
        "name": "container",
        "types": [
          "*"
        ]
      },
      {
        "name": "add_note_area",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 726,
    "kind": "member",
    "name": "switcher",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#switcher",
    "access": "public",
    "description": null,
    "lineNumber": 397,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 727,
    "kind": "member",
    "name": "header",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#header",
    "access": "public",
    "description": null,
    "lineNumber": 405,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 728,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 410,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 729,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#update",
    "access": "public",
    "description": null,
    "lineNumber": 422,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 730,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~Area.define",
    "access": "public",
    "description": null,
    "lineNumber": 437,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": *, \"areaname\": *, \"uiname\": *, \"icon\": *}"
      ]
    }
  },
  {
    "__docId__": 731,
    "kind": "method",
    "name": "afterSTRUCT",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#afterSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 445,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 732,
    "kind": "member",
    "name": "saved_uidata",
    "memberof": "scripts/ScreenArea.js~Area",
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#saved_uidata",
    "access": "public",
    "description": null,
    "lineNumber": 450,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 733,
    "kind": "method",
    "name": "newSTRUCT",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~Area.newSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 458,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 734,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 462,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 735,
    "kind": "method",
    "name": "_getSavedUIData",
    "memberof": "scripts/ScreenArea.js~Area",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~Area#_getSavedUIData",
    "access": "private",
    "description": null,
    "lineNumber": 466,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 736,
    "kind": "variable",
    "name": "sarea_idgen",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~sarea_idgen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 480,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 737,
    "kind": "class",
    "name": "ScreenArea",
    "memberof": "scripts/ScreenArea.js",
    "static": true,
    "longname": "scripts/ScreenArea.js~ScreenArea",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenArea.js",
    "importStyle": "{ScreenArea}",
    "description": null,
    "lineNumber": 482,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 738,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 483,
    "undocument": true
  },
  {
    "__docId__": 739,
    "kind": "member",
    "name": "_borders",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#_borders",
    "access": "private",
    "description": null,
    "lineNumber": 486,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 740,
    "kind": "member",
    "name": "_sarea_id",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#_sarea_id",
    "access": "private",
    "description": null,
    "lineNumber": 488,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 741,
    "kind": "member",
    "name": "pos",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#pos",
    "access": "public",
    "description": null,
    "lineNumber": 490,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 742,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#size",
    "access": "public",
    "description": null,
    "lineNumber": 491,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 743,
    "kind": "member",
    "name": "floating",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#floating",
    "access": "public",
    "description": null,
    "lineNumber": 493,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 744,
    "kind": "member",
    "name": "area",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#area",
    "access": "public",
    "description": null,
    "lineNumber": 495,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 745,
    "kind": "member",
    "name": "editors",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#editors",
    "access": "public",
    "description": null,
    "lineNumber": 496,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 746,
    "kind": "member",
    "name": "editormap",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#editormap",
    "access": "public",
    "description": null,
    "lineNumber": 497,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 747,
    "kind": "get",
    "name": "borderLock",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#borderLock",
    "access": "public",
    "description": null,
    "lineNumber": 553,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 748,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#draw",
    "access": "public",
    "description": null,
    "lineNumber": 557,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 749,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 561,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 750,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 573,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 751,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 581,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 753,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 635,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 754,
    "kind": "method",
    "name": "getScreen",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#getScreen",
    "access": "public",
    "description": null,
    "lineNumber": 645,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 755,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#copy",
    "access": "public",
    "description": null,
    "lineNumber": 666,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 756,
    "kind": "method",
    "name": "loadFromVerts",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#loadFromVerts",
    "access": "public",
    "description": null,
    "lineNumber": 721,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 757,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 744,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "oldsize",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 758,
    "kind": "method",
    "name": "makeBorders",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#makeBorders",
    "access": "public",
    "description": null,
    "lineNumber": 752,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 759,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 789,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 760,
    "kind": "method",
    "name": "appendChild",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#appendChild",
    "access": "public",
    "description": null,
    "lineNumber": 819,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 761,
    "kind": "method",
    "name": "switch_editor",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#switch_editor",
    "access": "public",
    "description": null,
    "lineNumber": 839,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 763,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#update",
    "access": "public",
    "description": null,
    "lineNumber": 902,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 764,
    "kind": "method",
    "name": "newSTRUCT",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~ScreenArea.newSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 923,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 765,
    "kind": "method",
    "name": "afterSTRUCT",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#afterSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 927,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 766,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenArea.js~ScreenArea#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 940,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 771,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ScreenArea.js~ScreenArea",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenArea.js~ScreenArea.define",
    "access": "public",
    "description": null,
    "lineNumber": 993,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 772,
    "kind": "file",
    "name": "scripts/ScreenOverdraw.js",
    "content": "\"use strict\";\r\nlet SVG_URL = 'http://www.w3.org/2000/svg';\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as ui from './ui.js';\r\nimport * as events from './events.js';\r\nimport * as math from './math.js';\r\n\r\nlet Vector2 = vectormath.Vector2;\r\n\r\nexport class Overdraw extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.visibleToPick = false;\r\n\r\n    this.screen = undefined;\r\n    this.shapes = [];\r\n    this.otherChildren = []; //non-svg elements\r\n    this.font = undefined;\r\n\r\n    let style = document.createElement(\"style\")\r\n    style.textContent = `\r\n      .overdrawx {\r\n        pointer-events : none;\r\n      }\r\n    `;\r\n    \r\n    this.shadow.appendChild(style);\r\n    \r\n    this.zindex_base = 100;\r\n  }\r\n\r\n  startNode(node, screen) {\r\n    this.screen = screen;\r\n    this.ctx = screen.ctx;\r\n\r\n    if (!this.parentNode) {\r\n      node.appendChild(this);\r\n    }\r\n\r\n    this.style[\"display\"] = \"float\";\r\n    this.style[\"z-index\"] = this.zindex_base;\r\n\r\n    this.style[\"position\"] = \"absolute\";\r\n    this.style[\"left\"] = \"0px\";\r\n    this.style[\"top\"] = \"0px\";\r\n\r\n    this.style[\"width\"] = \"100%\" //screen.size[0] + \"px\";\r\n    this.style[\"height\"] = \"100%\" //screen.size[1] + \"px\";\r\n\r\n    this.style[\"pointer-events\"] = \"none\";\r\n\r\n    this.svg = document.createElementNS(SVG_URL, \"svg\");\r\n    this.svg.style[\"width\"] = \"100%\";\r\n    this.svg.style[\"height\"] = \"100%\";\r\n\r\n    this.svg.style[\"pointer-events\"] = \"none\";\r\n\r\n    this.shadow.appendChild(this.svg);\r\n    //this.style[\"background-color\"] = \"green\";\r\n  }\r\n\r\n  start(screen) {\r\n    this.screen = screen;\r\n    this.ctx = screen.ctx;\r\n    \r\n    screen.parentNode.appendChild(this);\r\n    \r\n    this.style[\"display\"] = \"float\";\r\n    this.style[\"z-index\"] = this.zindex_base;\r\n    \r\n    this.style[\"position\"] = \"absolute\";\r\n    this.style[\"left\"] = \"0px\";\r\n    this.style[\"top\"] = \"0px\";\r\n    \r\n    this.style[\"width\"] = \"100%\" //screen.size[0] + \"px\";\r\n    this.style[\"height\"] = \"100%\" //screen.size[1] + \"px\";\r\n    \r\n    this.style[\"pointer-events\"] = \"none\";\r\n    \r\n    this.svg = document.createElementNS(SVG_URL, \"svg\");\r\n    this.svg.style[\"width\"] = \"100%\";\r\n    this.svg.style[\"height\"] = \"100%\";\r\n    \r\n    this.shadow.appendChild(this.svg);\r\n    \r\n    //this.style[\"background-color\"] = \"green\";\r\n  }\r\n  \r\n  clear() {\r\n    for (let child of list(this.svg.childNodes)) {\r\n      child.remove();\r\n    }\r\n    \r\n    for (let child of this.otherChildren) {\r\n      child.remove();\r\n    }\r\n    \r\n    this.otherChildren.length = 0;\r\n  }\r\n\r\n  drawTextBubbles(texts, cos, colors) {\r\n    let boxes = [];\r\n    let elems = [];\r\n\r\n    let cent = new Vector2();\r\n\r\n    for (let i=0; i<texts.length; i++) {\r\n      let co = cos[i];\r\n      let text = texts[i];\r\n      let color;\r\n\r\n      if (colors !== undefined) {\r\n        color = colors[i];\r\n      }\r\n\r\n      cent.add(co);\r\n      let box = this.text(texts[i], co[0], co[1], {color : color});\r\n\r\n      boxes.push(box);\r\n      let font = box.style[\"font\"];\r\n      let pat = /[0-9]+px/;\r\n      let size = font.match(pat)[0];\r\n\r\n      //console.log(\"size\", size);\r\n\r\n      if (size === undefined) {\r\n        size = this.getDefault(\"DefaultText\").size;\r\n      } else {\r\n        size = ui_base.parsepx(size);\r\n      }\r\n\r\n      //console.log(size);\r\n      let tsize = ui_base.measureTextBlock(this, text, undefined, undefined, size, font);\r\n\r\n      box.minsize = [\r\n        ~~tsize.width,\r\n        ~~tsize.height\r\n      ];\r\n\r\n      let pad = ui_base.parsepx(box.style[\"padding\"]);\r\n\r\n      box.minsize[0] += pad*2;\r\n      box.minsize[1] += pad*2;\r\n\r\n      let x = ui_base.parsepx(box.style[\"left\"]);\r\n      let y = ui_base.parsepx(box.style[\"top\"]);\r\n\r\n      box.grads = new Array(4);\r\n      box.params = [x, y, box.minsize[0], box.minsize[1]];\r\n      box.startpos = new Vector2([x, y]);\r\n\r\n      box.setCSS = function() {\r\n        this.style[\"padding\"] = \"0px\";\r\n        this.style[\"margin\"] = \"0px\";\r\n        this.style[\"left\"] = ~~this.params[0] + \"px\";\r\n        this.style[\"top\"] = ~~this.params[1] + \"px\";\r\n        this.style[\"width\"] = ~~this.params[2] + \"px\";\r\n        this.style[\"height\"] = ~~this.params[3] + \"px\";\r\n      };\r\n\r\n      box.setCSS();\r\n      //console.log(box.params);\r\n      elems.push(box);\r\n    }\r\n\r\n    if (boxes.length === 0) {\r\n      return;\r\n    }\r\n\r\n    cent.mulScalar(1.0 / boxes.length);\r\n\r\n    function error() {\r\n      let p1 = [0, 0], p2 = [0, 0];\r\n      let s1 = [0, 0], s2 = [0, 0];\r\n\r\n      let ret = 0.0;\r\n\r\n      for (let box1 of boxes) {\r\n        for (let box2 of boxes) {\r\n          if (box2 === box1) {\r\n            continue;\r\n          }\r\n\r\n          s1[0] = box1.params[2];\r\n          s1[1] = box1.params[3];\r\n          s2[0] = box2.params[2];\r\n          s2[1] = box2.params[3];\r\n\r\n          let overlap = math.aabb_overlap_area(box1.params, s1, box2.params, s2);\r\n          ret += overlap;\r\n        }\r\n\r\n        ret += box1.startpos.vectorDistance(box1.params)*0.25;\r\n      }\r\n\r\n      return ret;\r\n    }\r\n\r\n    function solve() {\r\n      //console.log(\"ERROR\", error());\r\n      let r1 = error();\r\n      if (r1 === 0.0) {\r\n        return;\r\n      }\r\n\r\n      let df = 0.0001;\r\n      let totgs = 0.0;\r\n\r\n      for (let box of boxes) {\r\n        for (let i=0; i<box.params.length; i++) {\r\n          let orig = box.params[i];\r\n          box.params[i] += df;\r\n          let r2 = error();\r\n          box.params[i] = orig;\r\n\r\n          box.grads[i] = (r2 - r1) / df;\r\n          totgs += box.grads[i]**2;\r\n        }\r\n      }\r\n\r\n      if (totgs === 0.0) {\r\n        return;\r\n      }\r\n\r\n      r1 /= totgs;\r\n      let k = 0.4;\r\n\r\n      for (let box of boxes) {\r\n        for (let i = 0; i < box.params.length; i++) {\r\n          box.params[i] += -r1*box.grads[i]*k;\r\n        }\r\n\r\n        box.params[2] = Math.max(box.params[2], box.minsize[0]);\r\n        box.params[3] = Math.max(box.params[3], box.minsize[1]);\r\n\r\n        box.setCSS();\r\n      }\r\n    }\r\n\r\n    for (let i=0; i<15; i++) {\r\n      solve();\r\n    }\r\n\r\n    for (let box of boxes) {\r\n      elems.push(this.line(box.startpos, box.params));\r\n    }\r\n\r\n    return elems;\r\n  }\r\n\r\n  text(text, x, y, args={}) {\r\n    args = Object.assign({}, args);\r\n\r\n    if (args.font === undefined) {\r\n      if (this.font !== undefined)\r\n        args.font = this.font;\r\n      else\r\n        args.font = this.getDefault(\"DefaultText\").genCSS();\r\n    }\r\n\r\n    if (!args[\"background-color\"]) {\r\n      args[\"background-color\"] = \"rgba(75, 75, 75, 0.75)\";\r\n    }\r\n\r\n    args.color = args.color ? args.color : \"white\";\r\n    if (typeof args.color === \"object\") {\r\n      args.color = ui_base.color2css(args.color);\r\n    }\r\n\r\n    args[\"padding\"] = args[\"padding\"] === undefined ? \"5px\" : args[\"padding\"];\r\n    args[\"border-color\"] = args[\"border-color\"] ? args[\"border-color\"] : \"grey\";\r\n    args[\"border-radius\"] = args[\"border-radius\"] ? args[\"border-radius\"] : \"25px\";\r\n    args[\"border-width\"] = args[\"border-width\"] !== undefined ? args[\"border-width\"] : \"2px\";\r\n\r\n    if (typeof args[\"border-width\"] === \"number\") {\r\n      args[\"border-width\"] = \"\" + args[\"border-width\"] + \"px\";\r\n    }\r\n    if (typeof args[\"border-radius\"] === \"number\") {\r\n      args[\"border-radius\"] = \"\" + args[\"border-radius\"] + \"px\";\r\n    }\r\n\r\n      //not sure I need SVG for this. . .\r\n    let box = document.createElement(\"div\")\r\n\r\n    box.setAttribute(\"class\", \"overdrawx\");\r\n\r\n    box.style[\"position\"] = \"absolute\";\r\n    box.style[\"width\"] = \"min-contents\";\r\n    box.style[\"height\"] = \"min-contents\";\r\n    box.style[\"border-width\"] = args[\"border-width\"]\r\n    box.style[\"border-radius\"] = \"25px\";\r\n    box.style[\"pointer-events\"] = \"none\";\r\n    box.style[\"z-index\"] = this.zindex_base + 1;\r\n    box.style[\"background-color\"] = args[\"background-color\"];\r\n    box.style[\"padding\"] = args[\"padding\"];\r\n\r\n    box.style[\"left\"] = x + \"px\";\r\n    box.style[\"top\"] = y + \"px\";\r\n\r\n    box.style[\"display\"] = \"flex\";\r\n    box.style[\"justify-content\"] = \"center\";\r\n    box.style[\"align-items\"] = \"center\";\r\n\r\n    box.innerText = text;\r\n    box.style[\"font\"] = args.font;\r\n    box.style[\"color\"] = args.color;\r\n\r\n    this.otherChildren.push(box);\r\n    this.shadow.appendChild(box);\r\n\r\n    return box;\r\n  }\r\n\r\n  circle(p, r, stroke=\"black\", fill=\"none\") {\r\n    let circle = document.createElementNS(SVG_URL, \"circle\");\r\n    circle.setAttribute(\"cx\", p[0]);\r\n    circle.setAttribute(\"cy\", p[1]);\r\n    circle.setAttribute(\"r\", r);\r\n\r\n    if (fill) {\r\n      circle.setAttribute(\"style\", `stroke:${stroke};stroke-width:2;fill:${fill}`);\r\n    } else {\r\n      circle.setAttribute(\"style\", `stroke:${stroke};stroke-width:2`);\r\n    }\r\n\r\n    this.svg.appendChild(circle);\r\n\r\n    return circle;\r\n  }\r\n\r\n  line(v1, v2, color=\"black\") {\r\n    let line = document.createElementNS(SVG_URL, \"line\");\r\n    line.setAttribute(\"x1\", v1[0]);\r\n    line.setAttribute(\"y1\", v1[1]);\r\n    line.setAttribute(\"x2\", v2[0]);\r\n    line.setAttribute(\"y2\", v2[1]);\r\n    line.setAttribute(\"style\", `stroke:${color};stroke-width:2`);\r\n    \r\n    this.svg.appendChild(line);\r\n    return line;\r\n  }\r\n  \r\n  rect(p, size, color=\"black\") {\r\n    let line = document.createElementNS(SVG_URL, \"rect\");\r\n    line.setAttribute(\"x\", p[0]);\r\n    line.setAttribute(\"y\", p[1]);\r\n    line.setAttribute(\"width\", size[0]);\r\n    line.setAttribute(\"height\", size[1]);\r\n    line.setAttribute(\"style\", `fill:${color};stroke-width:2`);\r\n\r\n    line.setColor = (color) => {\r\n      line.setAttribute(\"style\", `fill:${color};stroke-width:2`);\r\n    };\r\n\r\n    this.svg.appendChild(line);\r\n    return line;\r\n  }\r\n  \r\n  end() {\r\n    this.clear();\r\n    this.remove();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"overdraw-x\"\r\n  };}\r\n}\r\n\r\nui_base.UIBase.register(Overdraw);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ScreenOverdraw.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 773,
    "kind": "variable",
    "name": "SVG_URL",
    "memberof": "scripts/ScreenOverdraw.js",
    "static": true,
    "longname": "scripts/ScreenOverdraw.js~SVG_URL",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenOverdraw.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 774,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ScreenOverdraw.js",
    "static": true,
    "longname": "scripts/ScreenOverdraw.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ScreenOverdraw.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 775,
    "kind": "class",
    "name": "Overdraw",
    "memberof": "scripts/ScreenOverdraw.js",
    "static": true,
    "longname": "scripts/ScreenOverdraw.js~Overdraw",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ScreenOverdraw.js",
    "importStyle": "{Overdraw}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 776,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 14,
    "undocument": true
  },
  {
    "__docId__": 777,
    "kind": "member",
    "name": "visibleToPick",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#visibleToPick",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 778,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#screen",
    "access": "public",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 779,
    "kind": "member",
    "name": "shapes",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#shapes",
    "access": "public",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 780,
    "kind": "member",
    "name": "otherChildren",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#otherChildren",
    "access": "public",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 781,
    "kind": "member",
    "name": "font",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#font",
    "access": "public",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 782,
    "kind": "member",
    "name": "zindex_base",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#zindex_base",
    "access": "public",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 783,
    "kind": "method",
    "name": "startNode",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#startNode",
    "access": "public",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "params": [
      {
        "name": "node",
        "types": [
          "*"
        ]
      },
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 785,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 786,
    "kind": "member",
    "name": "svg",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#svg",
    "access": "public",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 787,
    "kind": "method",
    "name": "start",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#start",
    "access": "public",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 791,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#clear",
    "access": "public",
    "description": null,
    "lineNumber": 93,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 792,
    "kind": "method",
    "name": "drawTextBubbles",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#drawTextBubbles",
    "access": "public",
    "description": null,
    "lineNumber": 105,
    "undocument": true,
    "params": [
      {
        "name": "texts",
        "types": [
          "*"
        ]
      },
      {
        "name": "cos",
        "types": [
          "*"
        ]
      },
      {
        "name": "colors",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 793,
    "kind": "method",
    "name": "text",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#text",
    "access": "public",
    "description": null,
    "lineNumber": 255,
    "undocument": true,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "args",
        "optional": true,
        "types": [
          "{}"
        ],
        "defaultRaw": {},
        "defaultValue": "{}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 794,
    "kind": "method",
    "name": "circle",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#circle",
    "access": "public",
    "description": null,
    "lineNumber": 318,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "stroke",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "black",
        "defaultValue": "black"
      },
      {
        "name": "fill",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "none",
        "defaultValue": "none"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 795,
    "kind": "method",
    "name": "line",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#line",
    "access": "public",
    "description": null,
    "lineNumber": 335,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "black",
        "defaultValue": "black"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 796,
    "kind": "method",
    "name": "rect",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#rect",
    "access": "public",
    "description": null,
    "lineNumber": 347,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "black",
        "defaultValue": "black"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 797,
    "kind": "method",
    "name": "end",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ScreenOverdraw.js~Overdraw#end",
    "access": "public",
    "description": null,
    "lineNumber": 363,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 798,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ScreenOverdraw.js~Overdraw",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ScreenOverdraw.js~Overdraw.define",
    "access": "public",
    "description": null,
    "lineNumber": 368,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 799,
    "kind": "file",
    "name": "scripts/simple_controller.js",
    "content": "import * as toolprop from './toolprop.js';\r\nimport * as parseutil from './parseutil.js';\r\nimport {print_stack} from './util.js';\r\nimport {ToolOp, UndoFlags, ToolFlags} from \"./simple_toolsys.js\";\r\nimport {Vec2Property, Vec3Property, Vec4Property, PropTypes, PropFlags} from './toolprop.js';\r\nimport * as toolprop_abstract from './toolprop_abstract.js';\r\n\r\nlet PUTLParseError = parseutil.PUTLParseError;\r\n\r\nlet tk = (name, re, func) => new parseutil.tokdef(name, re, func);\r\nlet tokens = [\r\n  tk(\"ID\", /[a-zA-Z_$]+[a-zA-Z_$0-9]*/),\r\n  tk(\"NUM\", /-?[0-9]+/, (t) => {\r\n    t.value = parseInt(t.value);\r\n    return t;\r\n  }),\r\n  tk(\"STRLIT\", /'.*'/, (t) => {\r\n    t.value = t.value.slice(1, t.value.length - 1);\r\n    return t;\r\n  }),\r\n  tk(\"STRLIT\", /\".*\"/, (t) => {\r\n    t.value = t.value.slice(1, t.value.length - 1);\r\n    return t;\r\n  }),\r\n  tk(\"DOT\", /\\./),\r\n  tk(\"EQUALS\", /(\\=)|(\\=\\=)/),\r\n  tk(\"LSBRACKET\", /\\[/),\r\n  tk(\"RSBRACKET\", /\\]/),\r\n  tk(\"AND\", /\\&/),\r\n  tk(\"WS\", /[ \\t\\n\\r]+/, (t) => undefined) //drok token\r\n];\r\n\r\nlet lexer = new parseutil.lexer(tokens, (t) => {\r\n  console.warn(\"Parse error\", t);\r\n  throw new DataPathError();\r\n});\r\n\r\nexport let pathParser = new parseutil.parser(lexer);\r\n\r\nimport {\r\n  ModelInterface, ToolOpIface,\r\n  DataFlags, DataPathError, setImplementationClass,\r\n  isVecProperty, ListIface\r\n} from './controller.js';\r\nimport {initToolPaths, parseToolPath} from './toolpath.js';\r\n\r\nexport {DataPathError, DataFlags} from './controller.js';\r\n\r\nimport {ToolClasses} from './simple_toolsys.js';\r\nimport {ToolProperty, IntProperty} from \"./toolprop.js\";\r\n\r\nlet tool_classes = ToolClasses;\r\n\r\nlet tool_idgen = 1;\r\nSymbol.ToolID = Symbol(\"toolid\");\r\n\r\nfunction toolkey(cls) {\r\n  if (!(Symbol.ToolID in cls)) {\r\n    cls[Symbol.ToolID] = tool_idgen++;\r\n  }\r\n\r\n  return cls[Symbol.ToolID];\r\n}\r\n\r\nexport const DataTypes = {\r\n  STRUCT: 0,\r\n  DYNAMIC_STRUCT: 1,\r\n  PROP: 2,\r\n  ARRAY: 3\r\n};\r\n\r\nexport class DataPath {\r\n  constructor(path, apiname, prop, type = DataTypes.PROP) {\r\n    this.type = type;\r\n    this.data = prop;\r\n    this.apiname = apiname;\r\n    this.path = path;\r\n    this.flag = 0;\r\n    this.struct = undefined;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new DataPath();\r\n\r\n    ret.flag = this.flag;\r\n    ret.type = this.type;\r\n    ret.data = this.data;\r\n    ret.apiname = this.apiname;\r\n    ret.path = this.path;\r\n    ret.struct = this.struct;\r\n\r\n    return ret;\r\n  }\r\n\r\n  setProp(prop) {\r\n    this.data = prop;\r\n  }\r\n\r\n  read_only() {\r\n    this.flag |= DataFlags.READ_ONLY;\r\n    return this;\r\n  }\r\n\r\n  //XXX this doesn't appear to be implemented\r\n  //\r\n  //get/set will be called\r\n  //like other callbacks,\r\n  //e.g. the real object owning the property\r\n  //will be stored in this.dataref\r\n  customGetSet(get, set) {\r\n    this.data.flag |= PropFlags.USE_CUSTOM_GETSET;\r\n\r\n    this.data._getValue = this.data.getValue;\r\n    this.data._setValue = this.data.setValue;\r\n\r\n    if (get)\r\n      this.data.getValue = get;\r\n\r\n    if (set)\r\n      this.data.setValue = set;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**db will be executed with underlying data object\r\n   that contains this path in 'this.dataref'\r\n\r\n   main event is 'change'\r\n   */\r\n  on(type, cb) {\r\n    if (this.type == DataTypes.PROP) {\r\n      this.data.on(type, cb);\r\n    } else {\r\n      throw new Error(\"invalid call to DataPath.on\");\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  off(type, cb) {\r\n    if (this.type == DataTypes.PROP) {\r\n      this.data.off(type, cb);\r\n    }\r\n  }\r\n\r\n  range(min, max) {\r\n    this.data.setRange(min, max);\r\n    return this;\r\n  }\r\n\r\n  decimalPlaces(n) {\r\n    this.data.setDecimalPlaces(n);\r\n    return this;\r\n  }\r\n\r\n  radix(r) {\r\n    this.data.setRadix(r);\r\n    return this;\r\n  }\r\n\r\n  step(s) {\r\n    this.data.setStep(s);\r\n    return this;\r\n  }\r\n\r\n  icon(i) {\r\n    this.data.setIcon(i);\r\n    return this;\r\n  }\r\n\r\n  icons(icons) { //for enum/flag properties\r\n    this.data.addIcons(icons);\r\n    return this;\r\n  }\r\n\r\n  descriptions(description_map) { //for enum/flag properties\r\n    this.data.addDescriptions(description_map);\r\n  }\r\n\r\n  description(d) {\r\n    this.data.description = d;\r\n    return this;\r\n  }\r\n}\r\n\r\n/*this is a bitmask of standard filters\r\n* for the data list interface*/\r\nexport const StandardListFilters = {\r\n  SELECTED: 1,\r\n  EDITABLE: 2,\r\n  VISIBLE: 4,\r\n  ACTIVE: 8\r\n};\r\n\r\nexport class DataList extends ListIface {\r\n  /**\r\n   Okay, this is a simple interface for the controller to access lists,\r\n   whether it's {} object maps, [] arrays, util.set's, or whatever.\r\n\r\n   In fairmotion I used a lambda-type filter system, but that was problematic as it\r\n   didn't support any sort of abstraction or composition, so the lamba strings ended up\r\n   like this:\r\n   \"($.flag & SELECT) && !($.flag & HIDE) && !($.flag & GHOST) && (ctx.spline.layers.active.id in $.layers)\r\n\r\n   Hopefully this new bitmask system will work better.\r\n\r\n   * Callbacks is an array of name functions, like so:\r\n   - function getStruct(api, list, key) //return DataStruct type of object in key, key is optional if omitted return base type of all objects?\r\n   - function get(api, list, key)\r\n   - function set(api, list, key, val) //this one has default behavior: list[key] = val\r\n   - function getLength(api, list)\r\n   - function getActive(api, list)\r\n   - function setActive(api, list, key)\r\n   - function getIter(api, list)\r\n   - function filter(api, list, filter : StandardListFilters bitmask) returns an iterable\r\n   - function getKey(api, list, object) returns object's key in this list, either a string or a number\r\n   * */\r\n\r\n  copy() {\r\n    let ret = new DataList([this.cb.get]);\r\n\r\n    for (let k in this.cb) {\r\n      ret.cb[k] = this.cb[k];\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  constructor(callbacks) {\r\n    super();\r\n\r\n    if (callbacks === undefined) {\r\n      throw new DataPathError(\"missing callbacks argument to DataList\");\r\n    }\r\n\r\n    this.cb = {};\r\n    for (let cb of callbacks) {\r\n      this.cb[cb.name] = cb;\r\n    }\r\n\r\n    let check = (key) => {\r\n      if (!(key in this.cbs)) {\r\n        throw new DataPathError(`Missing ${key} callback in DataList`);\r\n      }\r\n    }\r\n  }\r\n\r\n  get(api, list, key) {\r\n    return this.cb.get(api, list, key);\r\n  }\r\n\r\n  getLength(api, list) {\r\n    this._check(\"getLength\");\r\n    return this.cb.getLength(api, list);\r\n  }\r\n\r\n  _check(cb) {\r\n    if (!(cb in this.cb)) {\r\n      throw new DataPathError(cb + \" not supported by this list\");\r\n    }\r\n  }\r\n\r\n  set(api, list, key, val) {\r\n    if (this.cb.set === undefined) {\r\n      list[key] = val;\r\n    } else {\r\n      this.cb.set(api, list, key, val);\r\n    }\r\n  }\r\n\r\n  getIter(api, list) {\r\n    this._check(\"getIter\");\r\n    return this.cb.getIter(api, list);\r\n  }\r\n\r\n  filter(api, list, bitmask) {\r\n    this._check(\"filter\");\r\n    return this.cb.filter(api, list, bitmask);\r\n  }\r\n\r\n  getActive(api, list) {\r\n    this._check(\"getActive\");\r\n    return this.cb.getActive(api, list);\r\n  }\r\n\r\n  setActive(api, list, key) {\r\n    this._check(\"setActive\");\r\n    this.cb.setActive(api, list, key);\r\n  }\r\n\r\n  getKey(api, list, obj) {\r\n    this._check(\"getKey\");\r\n    return this.cb.getKey(api, list, obj);\r\n  }\r\n\r\n  getStruct(api, list, key) {\r\n    if (this.cb.getStruct !== undefined) {\r\n      return this.cb.getStruct(api, list, key);\r\n    }\r\n\r\n    let obj = this.get(api, list, key);\r\n\r\n    if (obj === undefined)\r\n      return undefined;\r\n\r\n    return api.getStruct(obj.constructor);\r\n  }\r\n}\r\n\r\nexport const StructFlags = {\r\n  NO_UNDO: 1 //struct and its child structs can't participate in undo\r\n             //via the DataPathToolOp\r\n};\r\n\r\nexport class DataStruct {\r\n  constructor(members = [], name = \"unnamed\") {\r\n    this.members = [];\r\n    this.name = name;\r\n    this.pathmap = {};\r\n    this.flag = 0;\r\n\r\n    for (let m of members) {\r\n      this.add(m);\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    let ret = new DataStruct();\r\n\r\n    ret.name = this.name;\r\n    ret.flag = this.flag;\r\n\r\n    for (let m of this.members) {\r\n      let m2 = m.copy();\r\n\r\n      //don't copy struct or list references, just\r\n      //direct properties\r\n\r\n      if (m2.type === DataTypes.PROP) {\r\n        m2.data = m2.data.copy();\r\n      }\r\n\r\n      ret.add(m2);\r\n    }\r\n\r\n    return ret;\r\n  }\r\n  /**\r\n   * Like .struct, but the type of struct is looked up\r\n   * for objects at runtime.  Note that to work correctly each object\r\n   * must create its own struct definition via api.mapStruct\r\n   *\r\n   * @param path\r\n   * @param apiname\r\n   * @param uiname\r\n   * @param default_struct : default struct if one can't be looked up\r\n   * @returns {*}\r\n   */\r\n  dynamicStruct(path, apiname, uiname, default_struct = undefined) {\r\n    let ret = default_struct ? default_struct : new DataStruct();\r\n\r\n    let dpath = new DataPath(path, apiname, ret, DataTypes.DYNAMIC_STRUCT);\r\n\r\n    this.add(dpath);\r\n    return ret;\r\n  }\r\n\r\n  struct(path, apiname, uiname, existing_struct = undefined) {\r\n    let ret = existing_struct ? existing_struct : new DataStruct();\r\n\r\n    let dpath = new DataPath(path, apiname, ret, DataTypes.STRUCT);\r\n\r\n    this.add(dpath);\r\n    return ret;\r\n  }\r\n\r\n  color3(path, apiname, uiname, description) {\r\n    let ret = this.vec3(path, apiname, uiname, description);\r\n\r\n    ret.data.subtype = toolprop.PropSubTypes.COLOR;\r\n\r\n    return ret;\r\n  }\r\n\r\n  color4(path, apiname, uiname, description) {\r\n    let ret = this.vec4(path, apiname, uiname, description);\r\n\r\n    ret.data.subtype = toolprop.PropSubTypes.COLOR;\r\n\r\n    return ret;\r\n  }\r\n\r\n  arrayList(path, apiname, structdef, uiname, description) {\r\n    let ret = this.list(path, apiname, [\r\n      function getIter(api, list) {\r\n        return list[Symbol.iterator]();\r\n      },\r\n      function getLength(api, list) {\r\n        return list.length;\r\n      },\r\n      function get(api, list, key) {\r\n        return list[key];\r\n      },\r\n      function set(api, list, key, val) {\r\n        if (typeof key === \"string\") {\r\n          key = parseInt(key);\r\n        }\r\n\r\n        if (key < 0 || key >= list.length) {\r\n          throw new DataPathError(\"Invalid index \" + key);\r\n        }\r\n\r\n        list[key] = val;\r\n        window.redraw_viewport();\r\n      },\r\n      function getKey(api, list, obj) {\r\n        return list.indexOf(obj);\r\n      },\r\n      function getStruct(api, list, key) {\r\n        return structdef;\r\n      }]);\r\n\r\n    return ret;\r\n  }\r\n\r\n  vectorList(size, path, apiname, uiname, description) {\r\n    let type;\r\n\r\n    switch (size) {\r\n      case 2:\r\n        type = toolprop.Vec2Property;\r\n        break;\r\n      case 3:\r\n        type = toolprop.Vec3Property;\r\n      case 4:\r\n        type = toolprop.Vec4Property;\r\n    }\r\n\r\n    if (type === undefined) {\r\n      throw new DataPathError(\"Invalid size for vectorList; expected 2 3 or 4\");\r\n    }\r\n\r\n    let prop = new type(undefined, apiname, uiname, description);\r\n\r\n    let pstruct = new DataStruct(undefined, \"Vector\");\r\n    pstruct.vec3(\"\", \"co\", \"Coords\", \"Coordinates\");\r\n\r\n    let ret = this.list(path, apiname, [\r\n      function getIter(api, list) {\r\n        return list[Symbol.iterator]();\r\n      },\r\n      function getLength(api, list) {\r\n        return list.length;\r\n      },\r\n      function get(api, list, key) {\r\n        return list[key];\r\n      },\r\n      function set(api, list, key, val) {\r\n        if (typeof key == \"string\") {\r\n          key = parseInt(key);\r\n        }\r\n\r\n        if (key < 0 || key >= list.length) {\r\n          throw new DataPathError(\"Invalid index \" + key);\r\n        }\r\n\r\n        list[key] = val;\r\n        window.redraw_viewport();\r\n      },\r\n      function getKey(api, list, obj) {\r\n        return list.indexOf(obj);\r\n      },\r\n      function getStruct(api, list, key) {\r\n        return pstruct;\r\n      }]);\r\n\r\n    return ret;\r\n  }\r\n\r\n  vec2(path, apiname, uiname, description) {\r\n    let prop = new toolprop.Vec2Property(undefined, apiname, uiname, description);\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  vec3(path, apiname, uiname, description) {\r\n    let prop = new toolprop.Vec3Property(undefined, apiname, uiname, description);\r\n    //prop.uiname = uiname;\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  vec4(path, apiname, uiname, description) {\r\n    let prop = new toolprop.Vec4Property(undefined, apiname, uiname, description);\r\n    //prop.uiname = uiname;\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  float(path, apiname, uiname, description) {\r\n    let prop = new toolprop.FloatProperty(0, apiname, uiname, description);\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  string(path, apiname, uiname, description) {\r\n    let prop = new toolprop.StringProperty(undefined, apiname, uiname, description);\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  int(path, apiname, uiname, description, prop=undefined) {\r\n    if (!prop) {\r\n      prop = new toolprop.IntProperty(0, apiname, uiname, description);\r\n    }\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  enum(path, apiname, enumdef, uiname, description) {\r\n    let prop;\r\n\r\n    if (enumdef instanceof toolprop.EnumProperty) {\r\n      prop = enumdef;\r\n    } else {\r\n      prop = new toolprop.EnumProperty(undefined, enumdef, apiname, uiname, description);\r\n    }\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  list(path, apiname, funcs) {\r\n    let array = new DataList(funcs);\r\n\r\n    let dpath = new DataPath(path, apiname, array);\r\n    dpath.type = DataTypes.ARRAY;\r\n\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  flags(path, apiname, enumdef, uiname, description) {\r\n    let prop;\r\n\r\n    if (enumdef === undefined || !(enumdef instanceof toolprop.ToolProperty)) {\r\n      prop = new toolprop.FlagProperty(undefined, enumdef, apiname, uiname, description);\r\n    } else {\r\n      prop = enumdef;\r\n    }\r\n\r\n    let dpath = new DataPath(path, apiname, prop);\r\n    this.add(dpath);\r\n    return dpath;\r\n  }\r\n\r\n  add(m) {\r\n    this.members.push(m);\r\n    m.parent = this;\r\n\r\n    this.pathmap[m.apiname] = m;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nlet _map_struct_idgen = 1;\r\nlet _map_structs = {};\r\n\r\nwindow._debug__map_structs = _map_structs; //global for debugging purposes only\r\n\r\nlet _dummypath = new DataPath();\r\n\r\nlet DummyIntProperty = new IntProperty();\r\n\r\nexport class DataAPI extends ModelInterface {\r\n  constructor() {\r\n    super();\r\n    this.rootContextStruct = undefined;\r\n  }\r\n\r\n  get list() {\r\n    return undefined;\r\n  }\r\n\r\n  setRoot(sdef) {\r\n    this.rootContextStruct = sdef;\r\n  }\r\n\r\n  getStruct(cls) {\r\n    return this.mapStruct(cls, false);\r\n  }\r\n\r\n  mergeStructs(dest, src) {\r\n    for (let m of src.members) {\r\n      dest.add(m.copy());\r\n    }\r\n  }\r\n\r\n  inheritStruct(cls, parent, auto_create_parent = false) {\r\n    let st = this.mapStruct(parent, auto_create_parent);\r\n\r\n    if (st === undefined) {\r\n      throw new Error(\"parent has no struct definition\");\r\n    }\r\n\r\n    st = st.copy();\r\n    st.name = cls.name;\r\n\r\n    this._addClass(cls, st);\r\n    return st;\r\n  }\r\n\r\n  /**\r\n   * Look up struct definition for a class.\r\n   *\r\n   * @param cls: the class\r\n   * @param auto_create: If true, automatically create definition if not already existing.\r\n   * @returns {IterableIterator<*>}\r\n   */\r\n\r\n  _addClass(cls, dstruct) {\r\n    let key =  _map_struct_idgen++;\r\n    cls.__dp_map_id = key;\r\n\r\n    _map_structs[key] = dstruct;\r\n  }\r\n\r\n  mapStruct(cls, auto_create = true) {\r\n    let key;\r\n\r\n    if (!cls.hasOwnProperty(\"__dp_map_id\")) {\r\n      key = undefined;\r\n    } else {\r\n      key = cls.__dp_map_id;\r\n    }\r\n\r\n    if (key === undefined && auto_create) {\r\n      let dstruct = new DataStruct(undefined, cls.name);\r\n      this._addClass(cls, dstruct);\r\n      return dstruct;\r\n    } else if (key === undefined) {\r\n      throw new Error(\"class does not have a struct definition: \" + cls.name);\r\n    }\r\n\r\n    return _map_structs[key];\r\n  }\r\n\r\n\r\n  resolvePath(ctx, inpath, ignoreExistence = false) {\r\n    try {\r\n      return this.resolvePath_intern(ctx, inpath, ignoreExistence)\r\n    } catch (error) {\r\n      //throw new DataPathError(\"bad path \" + path);\r\n      print_stack(error);\r\n      console.warn(\"bad path \" + inpath);\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   get meta information for a datapath.\r\n\r\n   @param ignoreExistence: don't try to get actual data associated with path,\r\n   just want meta information\r\n   */\r\n  resolvePath_intern(ctx, inpath, ignoreExistence = false) {\r\n    let p = pathParser;\r\n    inpath = inpath.replace(\"==\", \"=\");\r\n\r\n    p.input(inpath);\r\n\r\n    let dstruct = this.rootContextStruct;\r\n    let obj = ctx;\r\n    let lastobj = ctx;\r\n    let subkey;\r\n    let lastobj2 = undefined;\r\n    let lastkey = undefined;\r\n    let prop = undefined;\r\n\r\n    function p_key() {\r\n      let t = p.peeknext();\r\n      if (t.type == \"NUM\" || t.type == \"STRLIT\") {\r\n        p.next();\r\n        return t.value;\r\n      } else {\r\n        throw new PUTLParseError(\"Expected list key\");\r\n      }\r\n    }\r\n\r\n    let _i = 0;\r\n    while (!p.at_end()) {\r\n      let key = p.expect(\"ID\");\r\n      let path = dstruct.pathmap[key];\r\n\r\n      if (path === undefined) {\r\n        if (prop !== undefined && prop instanceof DataList && key === \"length\") {\r\n          prop.getLength(this, obj);\r\n          key = \"length\";\r\n\r\n          prop = DummyIntProperty;\r\n\r\n          prop.name = \"length\";\r\n          prop.flag = PropFlags.READ_ONLY;\r\n\r\n          path = _dummypath;\r\n          path.type = DataTypes.PROP;\r\n          path.data = prop;\r\n          path.struct = path.parent = dstruct;\r\n          path.flag = DataFlags.READ_ONLY;\r\n          path.path = \"length\";\r\n\r\n          /*\r\n          parent: lastobj2,\r\n            obj: lastobj,\r\n            value: obj,\r\n            key: lastkey,\r\n            //*/\r\n        } else if (prop !== undefined && prop instanceof DataList && key === \"active\") {\r\n          let act = prop.getActive(this, obj);\r\n\r\n          if (act === undefined && !ignoreExistence) {\r\n            throw new DataPathError(\"no active elem ent for list\");\r\n          }\r\n\r\n          dstruct = prop.getStruct(this, obj, prop.getKey(this, obj, act));\r\n          if (dstruct === undefined) {\r\n            throw new DataPathError(\"couldn't get data type for \" + inpath + \"'s element '\" + key + \"'\");\r\n          }\r\n\r\n          path = _dummypath;\r\n\r\n          path.type = DataTypes.STRUCT;\r\n          path.data = dstruct;\r\n          path.path = key;\r\n        } else {\r\n          throw new DataPathError(inpath + \": unknown property \" + key);\r\n        }\r\n      }\r\n\r\n      if (path.type === DataTypes.STRUCT) {\r\n        dstruct = path.data;\r\n      } else if (path.type === DataTypes.DYNAMIC_STRUCT) {\r\n        let ok = false;\r\n\r\n        if (obj !== undefined) {\r\n          let obj2 = obj[path.path];\r\n          if (obj2 !== undefined) {\r\n            dstruct = this.mapStruct(obj2.constructor, false);\r\n          } else {\r\n            dstruct = path.data;\r\n          }\r\n\r\n          if (dstruct === undefined) {\r\n            dstruct = path.data;\r\n          }\r\n\r\n          ok = dstruct !== undefined;\r\n        }\r\n\r\n        if (!ok) {\r\n          throw new DataPathError(\"dynamic struct error for path: \" + inpath);\r\n        }\r\n      } else {\r\n        prop = path.data;\r\n      }\r\n\r\n      if (path.path.search(/\\./) >= 0) {\r\n        let keys = path.path.split(/\\./);\r\n\r\n        for (let key of keys) {\r\n          lastobj2 = lastobj;\r\n          lastobj = obj;\r\n          lastkey = key;\r\n\r\n          if (obj === undefined && !ignoreExistence) {\r\n            throw new DataPathError(\"no data for \" + inpath);\r\n          } else if (obj !== undefined) {\r\n            obj = obj[key.trim()];\r\n          }\r\n        }\r\n      } else {\r\n        lastobj2 = lastobj;\r\n        lastobj = obj;\r\n\r\n        lastkey = path.path;\r\n        if (obj === undefined && !ignoreExistence) {\r\n          throw new DataPathError(\"no data for \" + inpath);\r\n        } else if (obj !== undefined && path.path !== \"\") {\r\n          obj = obj[path.path];\r\n        }\r\n      }\r\n\r\n      let t = p.peeknext();\r\n      if (t === undefined) {\r\n        break;\r\n      }\r\n\r\n      if (t.type == \"DOT\") {\r\n        p.next();\r\n      } else if (t.type == \"EQUALS\" && prop !== undefined && (prop.type & (PropTypes.ENUM | PropTypes.FLAG))) {\r\n        p.expect(\"EQUALS\");\r\n\r\n        let t2 = p.peeknext();\r\n        let type = t2 && t2.type == \"ID\" ? \"ID\" : \"NUM\";\r\n\r\n        let val = p.expect(type);\r\n\r\n        //console.log(\"== in resolvepath\", lastobj, val, path.path);\r\n        let val1 = val;\r\n\r\n        if (typeof val == \"string\") {\r\n          val = prop.values[val];\r\n        }\r\n\r\n        if (val === undefined) {\r\n          throw new DataPathError(\"unknown value \" + val1);\r\n        }\r\n\r\n        if (val in prop.keys) {\r\n          subkey = prop.keys[val];\r\n        }\r\n\r\n        key = path.path;\r\n        obj = !!(lastobj[key] == val);\r\n      } else if (t.type == \"AND\" && prop !== undefined && (prop.type & (PropTypes.ENUM | PropTypes.FLAG))) {\r\n        p.expect(\"AND\");\r\n\r\n        let t2 = p.peeknext();\r\n        let type = t2 && t2.type == \"ID\" ? \"ID\" : \"NUM\";\r\n\r\n        let val = p.expect(type);\r\n\r\n        //console.log(\"== in resolvepath\", lastobj, val, path.path);\r\n        let val1 = val;\r\n\r\n        if (typeof val == \"string\") {\r\n          val = prop.values[val];\r\n        }\r\n\r\n        if (val === undefined) {\r\n          throw new DataPathError(\"unknown value \" + val1);\r\n        }\r\n\r\n        if (val in prop.keys) {\r\n          subkey = prop.keys[val];\r\n        }\r\n\r\n        key = path.path;\r\n        obj = !!(lastobj[key] & val);\r\n      } else if (t.type == \"LSBRACKET\" && prop !== undefined && (prop.type & (PropTypes.ENUM | PropTypes.FLAG))) {\r\n        p.expect(\"LSBRACKET\");\r\n\r\n        let t2 = p.peeknext();\r\n        let type = t2 && t2.type == \"ID\" ? \"ID\" : \"NUM\";\r\n\r\n        let val = p.expect(type);\r\n\r\n        //console.log(\"== in resolvepath\", lastobj, val, path.path);\r\n        let val1 = val;\r\n\r\n        if (typeof val == \"string\") {\r\n          val = prop.values[val];\r\n        }\r\n\r\n        if (val === undefined) {\r\n          console.log(prop.values, val1, prop);\r\n          throw new DataPathError(\"unknown value \" + val1);\r\n        }\r\n\r\n        if (val in prop.keys) {\r\n          subkey = prop.keys[val];\r\n        }\r\n\r\n        key = path.path;\r\n        if (lastobj === undefined && !ignoreExistence) {\r\n          throw new DataPathError(\"no data for path \" + inpath);\r\n        } else if (lastobj !== undefined) {\r\n          if (prop.type == PropTypes.ENUM) {\r\n            obj = !!(lastobj[key] == val);\r\n          } else {\r\n            obj = !!(lastobj[key] & val);\r\n          }\r\n        }\r\n\r\n        p.expect(\"RSBRACKET\");\r\n      } else if (t.type === \"LSBRACKET\" && prop !== undefined && isVecProperty(prop)) {\r\n        p.expect(\"LSBRACKET\");\r\n        let num = p.expect(\"NUM\");\r\n        p.expect(\"RSBRACKET\");\r\n\r\n        subkey = num;\r\n\r\n        lastobj = obj;\r\n        obj = obj[num];\r\n      } else if (t.type === \"LSBRACKET\") {\r\n        p.expect(\"LSBRACKET\")\r\n\r\n        if (lastobj && lastkey && typeof lastkey === \"string\" && lastkey.length > 0) {\r\n          lastobj = lastobj[lastkey];\r\n        }\r\n\r\n        lastkey = p_key();\r\n        p.expect(\"RSBRACKET\");\r\n\r\n        if (!(prop instanceof DataList)) {\r\n          throw new DataPathError(\"bad property, not a list\");\r\n        }\r\n\r\n        obj = prop.get(this, lastobj, lastkey);\r\n        dstruct = prop.getStruct(this, lastobj, lastkey);\r\n\r\n        if (p.peeknext() !== undefined && p.peeknext().type == \"DOT\") {\r\n          p.next();\r\n        }\r\n      }\r\n\r\n      if (_i++ > 1000) {\r\n        console.warn(\"infinite loop in resolvePath parser\");\r\n        break;\r\n      }\r\n    }\r\n\r\n    return {\r\n      parent: lastobj2,\r\n      obj: lastobj,\r\n      value: obj,\r\n      key: lastkey,\r\n      dstruct: dstruct,\r\n      prop: prop,\r\n      subkey: subkey\r\n    };\r\n  }\r\n\r\n  resolvePathOld2(ctx, path) {\r\n    let splitchars = new Set([\".\", \"[\", \"]\", \"=\", \"&\"]);\r\n    let subkey = undefined;\r\n\r\n    path = path.replace(/\\=\\=/g, \"=\");\r\n\r\n    path = \".\" + this.prefix + path;\r\n    //console.log(path);\r\n\r\n    let p = [\"\"];\r\n    for (let i = 0; i < path.length; i++) {\r\n      let s = path[i];\r\n\r\n      if (splitchars.has(s)) {\r\n        if (s != \"]\") {\r\n          p.push(s);\r\n        }\r\n\r\n        p.push(\"\");\r\n        continue;\r\n      }\r\n\r\n      p[p.length - 1] += s;\r\n    }\r\n\r\n    for (let i = 0; i < p.length; i++) {\r\n      p[i] = p[i].trim();\r\n\r\n      if (p[i].length == 0) {\r\n        p.remove(p[i]);\r\n        i--;\r\n      }\r\n\r\n      let c = parseInt(p[i]);\r\n      if (!isNaN(c)) {\r\n        p[i] = c;\r\n      }\r\n    }\r\n\r\n    //console.log(p);\r\n    let i = 0;\r\n\r\n    let parent1, obj = ctx, parent2;\r\n    let key = undefined;\r\n    let dstruct = undefined;\r\n    let arg = undefined;\r\n    let type = \"normal\";\r\n    let retpath = p;\r\n    let prop;\r\n    let lastkey = key, a;\r\n    let apiname = key;\r\n\r\n    while (i < p.length - 1) {\r\n      lastkey = key;\r\n      apiname = key;\r\n\r\n      if (dstruct !== undefined && dstruct.pathmap[lastkey]) {\r\n        let dpath = dstruct.pathmap[lastkey];\r\n\r\n        apiname = dpath.apiname;\r\n      }\r\n\r\n      let a = p[i];\r\n      let b = p[i + 1];\r\n\r\n      //check for enum/flag propertys with [] form\r\n      if (a == \"[\") {\r\n        let ok = false;\r\n\r\n        key = b;\r\n        prop = undefined;\r\n\r\n        console.log(\"key\", key, \"lastkey\", lastkey, \"apiname\", apiname);\r\n\r\n        if (dstruct !== undefined && dstruct.pathmap[lastkey]) {\r\n          let dpath = dstruct.pathmap[lastkey];\r\n\r\n          if (dpath.type == DataTypes.PROP) {\r\n            prop = dpath.data;\r\n          }\r\n        }\r\n\r\n        if (prop !== undefined && (prop.type == PropTypes.ENUM || prop.type == PropTypes.FLAG)) {\r\n          console.log(\"found flag/enum property\");\r\n          ok = true;\r\n        }\r\n\r\n        if (ok) {\r\n          if (isNaN(parseInt(key))) {\r\n            key = prop.values[key];\r\n          } else if (typeof key == \"int\") {\r\n            key = parseInt(key);\r\n          }\r\n\r\n          let value = obj;\r\n          if (typeof value == \"string\") {\r\n            value = prop.values[key];\r\n          }\r\n\r\n          if (prop.type == PropTypes.ENUM) {\r\n            value = !!(value == key);\r\n          } else { //flag\r\n            value = !!(value & key);\r\n          }\r\n\r\n          if (key in prop.keys) {\r\n            subkey = prop.keys[key];\r\n          }\r\n\r\n          obj = value;\r\n          i++;\r\n          continue;\r\n        }\r\n      }\r\n\r\n      if (dstruct !== undefined && dstruct.pathmap[lastkey]) {\r\n        let dpath = dstruct.pathmap[lastkey];\r\n\r\n        if (dpath.type == DataTypes.PROP) {\r\n          prop = dpath.data;\r\n        }\r\n      }\r\n\r\n      if (a == \".\" || a == \"[\") {\r\n        key = b;\r\n\r\n        parent2 = parent1;\r\n        parent1 = obj;\r\n        obj = obj[b];\r\n\r\n        if (obj === undefined || obj === null) {\r\n          break;\r\n        }\r\n\r\n        if (typeof obj == \"object\") {\r\n          dstruct = this.mapStruct(obj.constructor, false);\r\n        }\r\n\r\n        i += 2;\r\n        continue;\r\n      } else if (a == \"&\") {\r\n        obj &= b;\r\n        arg = b;\r\n\r\n        if (b in prop.keys) {\r\n          subkey = prop.keys[b];\r\n        }\r\n\r\n        i += 2;\r\n        type = \"flag\";\r\n        continue;\r\n      } else if (a == \"=\") {\r\n        obj = obj == b;\r\n        arg = b;\r\n\r\n        if (b in prop.keys) {\r\n          subkey = prop.keys[b];\r\n        }\r\n\r\n        i += 2;\r\n        type = \"enum\";\r\n        continue;\r\n      } else {\r\n        throw new DataPathError(\"bad path \" + path);\r\n      }\r\n\r\n      i++;\r\n    }\r\n    /*\r\n    console.log(p);\r\n    console.log(parent2);\r\n    console.log(parent1);\r\n    console.log(obj);\r\n    //*/\r\n\r\n    if (lastkey !== undefined && dstruct !== undefined && dstruct.pathmap[lastkey]) {\r\n      let dpath = dstruct.pathmap[key];\r\n\r\n      apiname = dpath.apiname;\r\n    }\r\n\r\n    if (apiname != \"selectmode\")\r\n      console.log(apiname);\r\n\r\n    if (dstruct !== undefined && dstruct.pathmap[key]) {\r\n      let dpath = dstruct.pathmap[key];\r\n\r\n      if (dpath.type == DataTypes.PROP) {\r\n        prop = dpath.data;\r\n      }\r\n    }\r\n\r\n    return {\r\n      parent: parent2,\r\n      obj: parent1,\r\n      value: obj,\r\n      key: key,\r\n      dstruct: dstruct,\r\n      subkey: subkey,\r\n      prop: prop,\r\n      arg: arg,\r\n      type: type,\r\n      _path: retpath\r\n    };\r\n  }\r\n\r\n  /*returns {\r\n    obj : [object owning property key]\r\n    parent : [parent of obj]\r\n    key : [property key]\r\n    value : [value of property]\r\n    prop : [optional toolprop.ToolProperty representing the property definition]\r\n    struct : [optional datastruct representing the type, if value is an object]\r\n  }\r\n  */\r\n  resolvePathold(ctx, path) {\r\n    path = this.prefix + path;\r\n    path = path.replace(/\\[/g, \".\").replace(/\\]/g, \"\").trim().split(\".\");\r\n\r\n    let parent1, obj = ctx, parent2;\r\n    let key = undefined;\r\n    let dstruct = undefined;\r\n\r\n    for (let c of path) {\r\n      let c2 = parseInt(c);\r\n      if (!isNaN(c2)) {\r\n        c = c2;\r\n      }\r\n\r\n      parent2 = parent1;\r\n      parent1 = obj;\r\n      key = c;\r\n\r\n      if (typeof obj == \"number\") {\r\n        //bitmask test\r\n        obj = obj & c;\r\n        break;\r\n      }\r\n\r\n      obj = obj[c];\r\n\r\n      if (typeof obj == \"object\") {\r\n        dstruct = this.mapStruct(obj.constructor, false);\r\n      }\r\n    }\r\n\r\n    let prop;\r\n\r\n    if (dstruct !== undefined && dstruct.pathmap[key]) {\r\n      let dpath = dstruct.pathmap[key];\r\n\r\n      if (dpath.type == DataTypes.PROP) {\r\n        prop = dpath.data;\r\n      }\r\n    }\r\n\r\n    return {\r\n      parent: parent2,\r\n      obj: parent1,\r\n      value: obj,\r\n      key: key,\r\n      dstruct: dstruct,\r\n      prop: prop\r\n    };\r\n  }\r\n\r\n  getToolDef(path) {\r\n    let cls = this.parseToolPath(path);\r\n    if (cls === undefined) {\r\n      throw new DataPathError(\"unknown path \\\"\" + path + \"\\\"\");\r\n    }\r\n\r\n    return cls.tooldef();\r\n  }\r\n\r\n  getToolPathHotkey(ctx, path) {\r\n    try {\r\n      return this.getToolPathHotkey_intern(ctx, path);\r\n    } catch (error) {\r\n      print_stack(error);\r\n      console.log(\"failed to fetch tool path\");\r\n\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  getToolPathHotkey_intern(ctx, path) {\r\n    let screen = ctx.screen;\r\n\r\n    function searchKeymap(keymap) {\r\n      if (keymap === undefined) {\r\n        return undefined;\r\n      }\r\n\r\n      for (let hk of keymap) {\r\n        if (typeof hk.action == \"string\" && hk.action == path) {\r\n          return hk.buildString();\r\n        }\r\n      }\r\n    }\r\n\r\n    if (screen.sareas.length == 0) {\r\n      return searchKeymap(screen.keymap);\r\n    }\r\n\r\n    //client might have its own area subclass with\r\n    //getActiveArea defined (that's encouraged),\r\n    //which is why we don't just call Area.getActiveArea\r\n    let areacls = screen.sareas[0].area.constructor;\r\n    let area = areacls.getActiveArea();\r\n\r\n    for (let keymap of area.getKeyMaps()) {\r\n      let ret = searchKeymap(keymap);\r\n\r\n      if (ret !== undefined) {\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    return this.keymap ? searchKeymap(this.keymap) : false;\r\n  }\r\n\r\n  parseToolPath(path) {\r\n    try {\r\n      return parseToolPath(path).toolclass;\r\n    } catch (error) {\r\n      if (error instanceof DataPathError) {\r\n        console.warn(\"warning, bad tool path\", path);\r\n        return undefined;\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n\r\n  parseToolArgs(path) {\r\n    return parseToolPath(path).args;\r\n  }\r\n\r\n  createTool(ctx, path, inputs = {}) {\r\n    let cls;\r\n    let args;\r\n\r\n    if (typeof path == \"string\" || path instanceof String) {\r\n      //parseToolPath will raise DataPathError if path is malformed\r\n      let tpath = parseToolPath(path);\r\n\r\n      cls = tpath.toolclass;\r\n      args = tpath.args;\r\n    } else {\r\n      cls = path;\r\n      args = {};\r\n    }\r\n\r\n    let tool = cls.invoke(ctx, args);\r\n\r\n    if (inputs !== undefined) {\r\n      for (let k in inputs) {\r\n        if (!(k in tool.inputs)) {\r\n          console.warn(cls.tooldef().uiname + \": Unknown tool property \\\"\" + k + \"\\\"\");\r\n          continue;\r\n        }\r\n\r\n        tool.inputs[k].setValue(inputs[k]);\r\n      }\r\n    }\r\n\r\n    return tool;\r\n  }\r\n\r\n  static toolRegistered(cls) {\r\n    return ToolOp.isRegistered(cls);\r\n    //let key = toolkey(cls);\r\n    //return key in tool_classes;\r\n  }\r\n\r\n  static registerTool(cls) {\r\n    console.warn(\"Outdated function simple_controller.DataAPI.registerTool called\");\r\n\r\n    return ToolOp.register(cls);\r\n\r\n    //let key = toolkey(cls);\r\n    //\r\n    //if (!(key in tool_classes)) {\r\n    //  tool_classes[key] = cls;\r\n    //}\r\n  }\r\n}\r\n\r\nexport function registerTool(cls) {\r\n  return DataAPI.registerTool(cls);\r\n}\r\n\r\nexport function initSimpleController() {\r\n  initToolPaths();\r\n}\r\n\r\n//\r\nexport class DataPathToolOp extends ToolOp {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  static tooldef() {\r\n    return {\r\n      toolpath: \"app.datapath_set\",\r\n      uiname: \"Data Path Set\",\r\n      inputs: {\r\n        path: new toolprop.StringProperty(),\r\n        newValueJSON: new toolprop.StringProperty()\r\n      },\r\n\r\n      flag: ToolFlags.PRIVATE,\r\n\r\n      outputs: {\r\n        oldValueJSON: new toolprop.StringProperty()\r\n      }\r\n    }\r\n  }\r\n\r\n  undoPre(ctx) {\r\n    let val = ctx.api.getValue(this.inputs.path.getValue());\r\n    this.outputs.oldValueJSON.setValue(JSON.stringify(val));\r\n  }\r\n\r\n  undo(ctx) {\r\n    ctx.api.setValue(this.inputs.path.getValue(), JSON.parse(this.outputs.oldValueJSON.getValue()));\r\n    window.redraw_viewport();\r\n    window.updateDataGraph();\r\n  }\r\n\r\n  exec(ctx) {\r\n    ctx.api.setValue(this.inputs.path.getValue, JSON.parse(this.inputs.newValueJSON.getValue()));\r\n  }\r\n}\r\n\r\nToolOp.register(DataPathToolOp);\r\n\r\nlet dpt = DataPathToolOp;\r\n\r\nexport function getDataPathToolOp() {\r\n  return dpt;\r\n}\r\n\r\nexport function setDataPathToolOp(cls) {\r\n  ToolOp.unregister(DataPathToolOp);\r\n\r\n  if (!ToolOp.isRegistered(cls)) {\r\n    ToolOp.register(cls);\r\n  }\r\n\r\n  dpt = cls;\r\n}\r\n\r\nsetImplementationClass(DataAPI);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/simple_controller.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 800,
    "kind": "variable",
    "name": "PUTLParseError",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~PUTLParseError",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 801,
    "kind": "function",
    "name": "tk",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~tk",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "re",
        "types": [
          "*"
        ]
      },
      {
        "name": "func",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 802,
    "kind": "variable",
    "name": "tokens",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~tokens",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 803,
    "kind": "variable",
    "name": "lexer",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~lexer",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 804,
    "kind": "variable",
    "name": "pathParser",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~pathParser",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{pathParser}",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 805,
    "kind": "variable",
    "name": "tool_classes",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~tool_classes",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 806,
    "kind": "variable",
    "name": "tool_idgen",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~tool_idgen",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 807,
    "kind": "function",
    "name": "toolkey",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~toolkey",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 808,
    "kind": "variable",
    "name": "DataTypes",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataTypes}",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "type": {
      "types": [
        "{\"STRUCT\": *, \"DYNAMIC_STRUCT\": number, \"PROP\": number, \"ARRAY\": number}"
      ]
    }
  },
  {
    "__docId__": 809,
    "kind": "class",
    "name": "DataPath",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataPath",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataPath}",
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 810,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true
  },
  {
    "__docId__": 811,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#type",
    "access": "public",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 812,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#data",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 813,
    "kind": "member",
    "name": "apiname",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#apiname",
    "access": "public",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 814,
    "kind": "member",
    "name": "path",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#path",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 815,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#flag",
    "access": "public",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 816,
    "kind": "member",
    "name": "struct",
    "memberof": "scripts/simple_controller.js~DataPath",
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#struct",
    "access": "public",
    "description": null,
    "lineNumber": 79,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 817,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#copy",
    "access": "public",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 818,
    "kind": "method",
    "name": "setProp",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#setProp",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "params": [
      {
        "name": "prop",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 820,
    "kind": "method",
    "name": "read_only",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#read_only",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 822,
    "kind": "method",
    "name": "customGetSet",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#customGetSet",
    "access": "public",
    "description": null,
    "lineNumber": 110,
    "undocument": true,
    "params": [
      {
        "name": "get",
        "types": [
          "*"
        ]
      },
      {
        "name": "set",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 823,
    "kind": "method",
    "name": "on",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#on",
    "access": "public",
    "description": "db will be executed with underlying data object\nthat contains this path in 'this.dataref'\n\nmain event is 'change'",
    "lineNumber": 130,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 824,
    "kind": "method",
    "name": "off",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#off",
    "access": "public",
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 825,
    "kind": "method",
    "name": "range",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#range",
    "access": "public",
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "params": [
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 826,
    "kind": "method",
    "name": "decimalPlaces",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#decimalPlaces",
    "access": "public",
    "description": null,
    "lineNumber": 151,
    "undocument": true,
    "params": [
      {
        "name": "n",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 827,
    "kind": "method",
    "name": "radix",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#radix",
    "access": "public",
    "description": null,
    "lineNumber": 156,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 828,
    "kind": "method",
    "name": "step",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#step",
    "access": "public",
    "description": null,
    "lineNumber": 161,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 829,
    "kind": "method",
    "name": "icon",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#icon",
    "access": "public",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "params": [
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 830,
    "kind": "method",
    "name": "icons",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#icons",
    "access": "public",
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "params": [
      {
        "name": "icons",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 831,
    "kind": "method",
    "name": "descriptions",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#descriptions",
    "access": "public",
    "description": null,
    "lineNumber": 176,
    "undocument": true,
    "params": [
      {
        "name": "description_map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 832,
    "kind": "method",
    "name": "description",
    "memberof": "scripts/simple_controller.js~DataPath",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPath#description",
    "access": "public",
    "description": null,
    "lineNumber": 180,
    "undocument": true,
    "params": [
      {
        "name": "d",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 833,
    "kind": "variable",
    "name": "StandardListFilters",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~StandardListFilters",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{StandardListFilters}",
    "description": null,
    "lineNumber": 188,
    "undocument": true,
    "type": {
      "types": [
        "{\"SELECTED\": number, \"EDITABLE\": number, \"VISIBLE\": number, \"ACTIVE\": number}"
      ]
    }
  },
  {
    "__docId__": 834,
    "kind": "class",
    "name": "DataList",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataList",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataList}",
    "description": null,
    "lineNumber": 195,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/controller.js~ListIface"
    ]
  },
  {
    "__docId__": 835,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#copy",
    "access": "public",
    "description": "Okay, this is a simple interface for the controller to access lists,\nwhether it's {} object maps, [] arrays, util.set's, or whatever.\n\nIn fairmotion I used a lambda-type filter system, but that was problematic as it\ndidn't support any sort of abstraction or composition, so the lamba strings ended up\nlike this:\n\"($.flag & SELECT) && !($.flag & HIDE) && !($.flag & GHOST) && (ctx.spline.layers.active.id in $.layers)\n\nHopefully this new bitmask system will work better.\n\nCallbacks is an array of name functions, like so:\n- function getStruct(api, list, key) //return DataStruct type of object in key, key is optional if omitted return base type of all objects?\n- function get(api, list, key)\n- function set(api, list, key, val) //this one has default behavior: list[key] = val\n- function getLength(api, list)\n- function getActive(api, list)\n- function setActive(api, list, key)\n- function getIter(api, list)\n- function filter(api, list, filter : StandardListFilters bitmask) returns an iterable\n- function getKey(api, list, object) returns object's key in this list, either a string or a number",
    "lineNumber": 219,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 836,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 229,
    "undocument": true
  },
  {
    "__docId__": 837,
    "kind": "member",
    "name": "cb",
    "memberof": "scripts/simple_controller.js~DataList",
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#cb",
    "access": "public",
    "description": null,
    "lineNumber": 236,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 838,
    "kind": "method",
    "name": "get",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#get",
    "access": "public",
    "description": null,
    "lineNumber": 248,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 839,
    "kind": "method",
    "name": "getLength",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#getLength",
    "access": "public",
    "description": null,
    "lineNumber": 252,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 840,
    "kind": "method",
    "name": "_check",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#_check",
    "access": "private",
    "description": null,
    "lineNumber": 257,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 841,
    "kind": "method",
    "name": "set",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#set",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 842,
    "kind": "method",
    "name": "getIter",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#getIter",
    "access": "public",
    "description": null,
    "lineNumber": 271,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 843,
    "kind": "method",
    "name": "filter",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#filter",
    "access": "public",
    "description": null,
    "lineNumber": 276,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "bitmask",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 844,
    "kind": "method",
    "name": "getActive",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#getActive",
    "access": "public",
    "description": null,
    "lineNumber": 281,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 845,
    "kind": "method",
    "name": "setActive",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#setActive",
    "access": "public",
    "description": null,
    "lineNumber": 286,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 846,
    "kind": "method",
    "name": "getKey",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#getKey",
    "access": "public",
    "description": null,
    "lineNumber": 291,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 847,
    "kind": "method",
    "name": "getStruct",
    "memberof": "scripts/simple_controller.js~DataList",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataList#getStruct",
    "access": "public",
    "description": null,
    "lineNumber": 296,
    "undocument": true,
    "params": [
      {
        "name": "api",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 848,
    "kind": "variable",
    "name": "StructFlags",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~StructFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{StructFlags}",
    "description": null,
    "lineNumber": 310,
    "undocument": true,
    "type": {
      "types": [
        "{\"NO_UNDO\": number}"
      ]
    }
  },
  {
    "__docId__": 849,
    "kind": "class",
    "name": "DataStruct",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataStruct",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataStruct}",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 850,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 316,
    "undocument": true
  },
  {
    "__docId__": 851,
    "kind": "member",
    "name": "members",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#members",
    "access": "public",
    "description": null,
    "lineNumber": 317,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 852,
    "kind": "member",
    "name": "name",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#name",
    "access": "public",
    "description": null,
    "lineNumber": 318,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 853,
    "kind": "member",
    "name": "pathmap",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#pathmap",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 854,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#flag",
    "access": "public",
    "description": null,
    "lineNumber": 320,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 855,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#copy",
    "access": "public",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 856,
    "kind": "method",
    "name": "dynamicStruct",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#dynamicStruct",
    "access": "public",
    "description": "Like .struct, but the type of struct is looked up\nfor objects at runtime.  Note that to work correctly each object\nmust create its own struct definition via api.mapStruct",
    "lineNumber": 359,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{*}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "apiname",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "uiname",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "default_struct",
        "description": ": default struct if one can't be looked up"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 857,
    "kind": "method",
    "name": "struct",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#struct",
    "access": "public",
    "description": null,
    "lineNumber": 368,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "existing_struct",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 858,
    "kind": "method",
    "name": "color3",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#color3",
    "access": "public",
    "description": null,
    "lineNumber": 377,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 859,
    "kind": "method",
    "name": "color4",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#color4",
    "access": "public",
    "description": null,
    "lineNumber": 385,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 860,
    "kind": "method",
    "name": "arrayList",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#arrayList",
    "access": "public",
    "description": null,
    "lineNumber": 393,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "structdef",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 861,
    "kind": "method",
    "name": "vectorList",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#vectorList",
    "access": "public",
    "description": null,
    "lineNumber": 426,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 862,
    "kind": "method",
    "name": "vec2",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#vec2",
    "access": "public",
    "description": null,
    "lineNumber": 480,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 863,
    "kind": "method",
    "name": "vec3",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#vec3",
    "access": "public",
    "description": null,
    "lineNumber": 488,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 864,
    "kind": "method",
    "name": "vec4",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#vec4",
    "access": "public",
    "description": null,
    "lineNumber": 497,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 865,
    "kind": "method",
    "name": "float",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#float",
    "access": "public",
    "description": null,
    "lineNumber": 506,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 866,
    "kind": "method",
    "name": "string",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#string",
    "access": "public",
    "description": null,
    "lineNumber": 514,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 867,
    "kind": "method",
    "name": "int",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#int",
    "access": "public",
    "description": null,
    "lineNumber": 522,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      },
      {
        "name": "prop",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 868,
    "kind": "method",
    "name": "enum",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#enum",
    "access": "public",
    "description": null,
    "lineNumber": 532,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "enumdef",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 869,
    "kind": "method",
    "name": "list",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#list",
    "access": "public",
    "description": null,
    "lineNumber": 546,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "funcs",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 870,
    "kind": "method",
    "name": "flags",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#flags",
    "access": "public",
    "description": null,
    "lineNumber": 556,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "apiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "enumdef",
        "types": [
          "*"
        ]
      },
      {
        "name": "uiname",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 871,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/simple_controller.js~DataStruct",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataStruct#add",
    "access": "public",
    "description": null,
    "lineNumber": 570,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 872,
    "kind": "variable",
    "name": "_map_struct_idgen",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~_map_struct_idgen",
    "access": "private",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 580,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 873,
    "kind": "variable",
    "name": "_map_structs",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~_map_structs",
    "access": "private",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 581,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 874,
    "kind": "variable",
    "name": "_dummypath",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~_dummypath",
    "access": "private",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 585,
    "undocument": true,
    "type": {
      "types": [
        "scripts/simple_controller.js~DataPath"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 875,
    "kind": "variable",
    "name": "DummyIntProperty",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DummyIntProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 587,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 876,
    "kind": "class",
    "name": "DataAPI",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataAPI",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataAPI}",
    "description": null,
    "lineNumber": 589,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/controller.js~ModelInterface"
    ]
  },
  {
    "__docId__": 877,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 590,
    "undocument": true
  },
  {
    "__docId__": 878,
    "kind": "member",
    "name": "rootContextStruct",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#rootContextStruct",
    "access": "public",
    "description": null,
    "lineNumber": 592,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 879,
    "kind": "get",
    "name": "list",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#list",
    "access": "public",
    "description": null,
    "lineNumber": 595,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 880,
    "kind": "method",
    "name": "setRoot",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#setRoot",
    "access": "public",
    "description": null,
    "lineNumber": 599,
    "undocument": true,
    "params": [
      {
        "name": "sdef",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 882,
    "kind": "method",
    "name": "getStruct",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#getStruct",
    "access": "public",
    "description": null,
    "lineNumber": 603,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 883,
    "kind": "method",
    "name": "mergeStructs",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#mergeStructs",
    "access": "public",
    "description": null,
    "lineNumber": 607,
    "undocument": true,
    "params": [
      {
        "name": "dest",
        "types": [
          "*"
        ]
      },
      {
        "name": "src",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 884,
    "kind": "method",
    "name": "inheritStruct",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#inheritStruct",
    "access": "public",
    "description": null,
    "lineNumber": 613,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "auto_create_parent",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 885,
    "kind": "method",
    "name": "_addClass",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#_addClass",
    "access": "private",
    "description": "Look up struct definition for a class.",
    "lineNumber": 635,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{IterableIterator<*>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "cls:",
        "description": "the class"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "auto_create:",
        "description": "If true, automatically create definition if not already existing."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "IterableIterator<*>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 886,
    "kind": "method",
    "name": "mapStruct",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#mapStruct",
    "access": "public",
    "description": null,
    "lineNumber": 642,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "auto_create",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 887,
    "kind": "method",
    "name": "resolvePath",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#resolvePath",
    "access": "public",
    "description": null,
    "lineNumber": 663,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "ignoreExistence",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 888,
    "kind": "method",
    "name": "resolvePath_intern",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#resolvePath_intern",
    "access": "public",
    "description": "get meta information for a datapath.",
    "lineNumber": 680,
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "ignoreExistence:",
        "description": "don't try to get actual data associated with path,\njust want meta information"
      }
    ],
    "return": {
      "types": [
        "{\"parent\": *, \"obj\": *, \"value\": *, \"key\": *, \"dstruct\": *, \"prop\": *, \"subkey\": *}"
      ]
    }
  },
  {
    "__docId__": 889,
    "kind": "method",
    "name": "resolvePathOld2",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#resolvePathOld2",
    "access": "public",
    "description": null,
    "lineNumber": 948,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"parent\": *, \"obj\": *, \"value\": *, \"key\": *, \"dstruct\": *, \"subkey\": *, \"prop\": *, \"arg\": *, \"type\": *, \"_path\": *}"
      ]
    }
  },
  {
    "__docId__": 890,
    "kind": "method",
    "name": "resolvePathold",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#resolvePathold",
    "access": "public",
    "description": null,
    "lineNumber": 1163,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{\"parent\": *, \"obj\": *, \"value\": *, \"key\": *, \"dstruct\": *, \"prop\": *}"
      ]
    }
  },
  {
    "__docId__": 891,
    "kind": "method",
    "name": "getToolDef",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#getToolDef",
    "access": "public",
    "description": null,
    "lineNumber": 1214,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 892,
    "kind": "method",
    "name": "getToolPathHotkey",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#getToolPathHotkey",
    "access": "public",
    "description": null,
    "lineNumber": 1223,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 893,
    "kind": "method",
    "name": "getToolPathHotkey_intern",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#getToolPathHotkey_intern",
    "access": "public",
    "description": null,
    "lineNumber": 1234,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 894,
    "kind": "method",
    "name": "parseToolPath",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#parseToolPath",
    "access": "public",
    "description": null,
    "lineNumber": 1270,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 895,
    "kind": "method",
    "name": "parseToolArgs",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#parseToolArgs",
    "access": "public",
    "description": null,
    "lineNumber": 1283,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 896,
    "kind": "method",
    "name": "createTool",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataAPI#createTool",
    "access": "public",
    "description": null,
    "lineNumber": 1287,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "inputs",
        "optional": true,
        "types": [
          "{}"
        ],
        "defaultRaw": {},
        "defaultValue": "{}"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 897,
    "kind": "method",
    "name": "toolRegistered",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~DataAPI.toolRegistered",
    "access": "public",
    "description": null,
    "lineNumber": 1318,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 898,
    "kind": "method",
    "name": "registerTool",
    "memberof": "scripts/simple_controller.js~DataAPI",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~DataAPI.registerTool",
    "access": "public",
    "description": null,
    "lineNumber": 1324,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 899,
    "kind": "function",
    "name": "registerTool",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~registerTool",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{registerTool}",
    "description": null,
    "lineNumber": 1337,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 900,
    "kind": "function",
    "name": "initSimpleController",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~initSimpleController",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{initSimpleController}",
    "description": null,
    "lineNumber": 1341,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 901,
    "kind": "class",
    "name": "DataPathToolOp",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~DataPathToolOp",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{DataPathToolOp}",
    "description": null,
    "lineNumber": 1346,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/simple_toolsys.js~ToolOp"
    ]
  },
  {
    "__docId__": 902,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_controller.js~DataPathToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPathToolOp#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1347,
    "undocument": true
  },
  {
    "__docId__": 903,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/simple_controller.js~DataPathToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~DataPathToolOp.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 1351,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"toolpath\": string, \"uiname\": string, \"inputs\": *, \"flag\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 904,
    "kind": "method",
    "name": "undoPre",
    "memberof": "scripts/simple_controller.js~DataPathToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPathToolOp#undoPre",
    "access": "public",
    "description": null,
    "lineNumber": 1368,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 905,
    "kind": "method",
    "name": "undo",
    "memberof": "scripts/simple_controller.js~DataPathToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPathToolOp#undo",
    "access": "public",
    "description": null,
    "lineNumber": 1373,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 906,
    "kind": "method",
    "name": "exec",
    "memberof": "scripts/simple_controller.js~DataPathToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_controller.js~DataPathToolOp#exec",
    "access": "public",
    "description": null,
    "lineNumber": 1379,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 907,
    "kind": "variable",
    "name": "dpt",
    "memberof": "scripts/simple_controller.js",
    "static": true,
    "longname": "scripts/simple_controller.js~dpt",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1386,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 908,
    "kind": "function",
    "name": "getDataPathToolOp",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~getDataPathToolOp",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{getDataPathToolOp}",
    "description": null,
    "lineNumber": 1388,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 909,
    "kind": "function",
    "name": "setDataPathToolOp",
    "memberof": "scripts/simple_controller.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_controller.js~setDataPathToolOp",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_controller.js",
    "importStyle": "{setDataPathToolOp}",
    "description": null,
    "lineNumber": 1392,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 910,
    "kind": "file",
    "name": "scripts/simple_events.js",
    "content": "import * as util from \"./util.js\";\r\n\r\nexport let modalstack = [];\r\n\r\n/*\r\nstupid DOM event system.  I hate it.\r\n*/\r\n\r\nexport function eventWasTouch(e) {\r\n  let ret = e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents;\r\n  ret = ret || e.was_touch;\r\n\r\n  return ret;\r\n}\r\n\r\nexport function copyEvent(e) {\r\n  let ret = {};\r\n  let keys = [];\r\n\r\n  for (let k in e) {\r\n    keys.push(k);\r\n  }\r\n\r\n  keys = keys.concat(Object.getOwnPropertySymbols(e));\r\n  keys = keys.concat(Object.getOwnPropertyNames(e));\r\n\r\n  for (let k of keys) {\r\n    let v;\r\n\r\n    try {\r\n      v = e[k];\r\n    } catch (error) {\r\n      console.warn(\"read error for event key\", k);\r\n      continue;\r\n    }\r\n\r\n    if (typeof v == \"function\") {\r\n      ret[k] = v.bind(e);\r\n    } else {\r\n      ret[k] = v;\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport function pushModalLight(obj) {\r\n  console.trace(\"pushModalLight\");\r\n\r\n  let keys = new Set([\r\n    \"keydown\", \"keyup\", \"keypress\", \"mousedown\", \"mouseup\", \"touchstart\", \"touchend\",\r\n    \"touchcancel\", \"mousewheel\", \"mousemove\", \"mouseover\", \"mouseout\", \"mouseenter\", \"mouseleave\"\r\n  ]);\r\n\r\n  let ret = {\r\n    keys : keys,\r\n    handlers : {},\r\n    last_mpos : [0, 0]\r\n  };\r\n\r\n  let touchmap = {\r\n    \"touchstart\" : \"mousedown\",\r\n    \"touchmove\" : \"mousemove\",\r\n    \"touchend\" : \"mouseup\",\r\n    \"touchcancel\" : \"mouseup\"\r\n  };\r\n\r\n  function make_default_touchhandler(type, state) {\r\n    return function(e) {\r\n      //console.warn(\"touch event!\", type, touchmap[type], e.touches.length);\r\n\r\n      if (touchmap[type] in ret.handlers) {\r\n        let type2 = touchmap[type];\r\n\r\n        let e2 = copyEvent(e);\r\n\r\n        e2.was_touch = true;\r\n        e2.type = type2;\r\n        e2.button = type == \"touchcancel\" ? 1 : 0;\r\n        e2.touches = e.touches;\r\n\r\n        if (e.touches.length > 0) {\r\n          let dpi = window.devicePixelRatio; //UIBase.getDPI();\r\n          let t = e.touches[0];\r\n\r\n          e2.pageX = e2.x = t.pageX;// * dpi;\r\n          e2.pageY = e2.y = t.pageY;// * dpi;\r\n          e2.clientX = t.clientX;// * dpi;\r\n          e2.clientY = t.clientY;// * dpi;\r\n          e2.x = t.clientX;// * dpi;\r\n          e2.y = t.clientY;// * dpi;\r\n\r\n          ret.last_mpos[0] = e2.x;\r\n          ret.last_mpos[1] = e2.y;\r\n        } else {\r\n          e2.x = e2.clientX = e2.pageX = e2.screenX = ret.last_mpos[0];\r\n          e2.y = e2.clientY = e2.pageY = e2.screenY = ret.last_mpos[1];\r\n        }\r\n\r\n        e2.was_touch = true;\r\n        //console.log(e2.x, e2.y);\r\n        ret.handlers[type2](e2);\r\n      }\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n\r\n  function make_handler(type, key) {\r\n    return function(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      if (key !== undefined)\r\n        obj[key](e);\r\n    }\r\n  }\r\n\r\n  let found = {};\r\n\r\n  for (let k of keys) {\r\n    let key;\r\n\r\n    if (obj[k])\r\n      key = k;\r\n    else if (obj[\"on\"+k])\r\n      key = \"on\" + k;\r\n    else if (obj[\"on_\"+k])\r\n      key = \"on_\" + k;\r\n    else if (k in touchmap)\r\n      continue; //default touch event handlers will be done seperately\r\n    else\r\n      key = undefined; //make handler that still blocks events\r\n\r\n    if (key !== undefined) {\r\n      found[k] = 1;\r\n    }\r\n\r\n    let handler = make_handler(k, key);\r\n    ret.handlers[k] = handler;\r\n\r\n    let settings = handler.settings = {passive : false, capture : true};\r\n    window.addEventListener(k, handler, settings);\r\n  }\r\n\r\n  for (let k in touchmap) {\r\n    if (!(k in found)) {\r\n      //console.log(\"making touch handler for\", '\"' + k + '\"', ret.handlers[k]);\r\n\r\n      ret.handlers[k] = make_default_touchhandler(k, ret);\r\n\r\n      let settings = ret.handlers[k].settings = {passive : false, capture : true};\r\n      window.addEventListener(k, ret.handlers[k], settings);\r\n    }\r\n  }\r\n\r\n  modalstack.push(ret);\r\n\r\n  return ret;\r\n}\r\n\r\nexport function popModalLight(state) {\r\n  console.log(\"popModalLight\");\r\n\r\n  if (state === undefined) {\r\n    console.warn(\"Bad call to popModalLight: state was undefined\");\r\n    return;\r\n  }\r\n\r\n  if (state !== modalstack[modalstack.length-1]) {\r\n    if (modalstack.indexOf(state) < 0) {\r\n      console.warn(\"Error in popModalLight; modal handler not found\");\r\n      return;\r\n    } else {\r\n      console.warn(\"Error in popModalLight; called in wrong order\");\r\n    }\r\n  }\r\n\r\n  for (let k in state.handlers) {\r\n    //console.log(k);\r\n    window.removeEventListener(k, state.handlers[k], state.handlers[k].settings);\r\n  }\r\n\r\n  state.handlers = {};\r\n  modalstack.remove(state);\r\n}\r\n\r\nexport function haveModal() {\r\n  return modalstack.length > 0;\r\n}\r\nwindow._haveModal = haveModal; //for debugging console\r\n\r\nexport var keymap_latin_1 = {\r\n  \"Space\": 32,\r\n  \"Escape\" : 27,\r\n  \"Enter\": 13,\r\n  \"Return\" : 13,\r\n  \"Up\" : 38,\r\n  \"Down\" : 40,\r\n  \"Left\": 37,\r\n  \"Right\": 39,\r\n\r\n  \"Num0\": 96,\r\n  \"Num1\": 97,\r\n  \"Num2\": 98,\r\n  \"Num3\": 99,\r\n  \"Num4\": 100,\r\n  \"Num5\": 101,\r\n  \"Num6\": 102,\r\n  \"Num7\": 103,\r\n  \"Num8\": 104,\r\n  \"Num9\": 105,\r\n  \"Home\": 36,\r\n  \"End\": 35,\r\n  \"Delete\": 46,\r\n  \"Backspace\": 8,\r\n  \"Insert\": 45,\r\n  \"PageUp\": 33,\r\n  \"PageDown\": 34,\r\n  \"Tab\" : 9,\r\n  \"-\" : 189,\r\n  \"=\" : 187,\r\n  \".\" : 190,\r\n  \"/\" : 191,\r\n  \",\" : 188,\r\n  \";\" : 186,\r\n  \"'\" : 222,\r\n  \"[\" : 219,\r\n  \"]\" : 221,\r\n  \"NumPlus\" : 107,\r\n  \"NumMinus\" : 109,\r\n  \"Shift\" : 16,\r\n  \"Ctrl\" : 17,\r\n  \"Control\" : 17,\r\n  \"Alt\" : 18\r\n}\r\n\r\nfor (var i=0; i<26; i++) {\r\n  keymap_latin_1[String.fromCharCode(i+65)] = i+65\r\n}\r\nfor (var i=0; i<10; i++) {\r\n  keymap_latin_1[String.fromCharCode(i+48)] = i+48\r\n}\r\n\r\nfor (var k in keymap_latin_1) {\r\n  keymap_latin_1[keymap_latin_1[k]] = k;\r\n}\r\n\r\nvar keymap_latin_1_rev = {}\r\nfor (var k in keymap_latin_1) {\r\n  keymap_latin_1_rev[keymap_latin_1[k]] = k\r\n}\r\n\r\nexport var keymap = keymap_latin_1;\r\nexport var reverse_keymap = keymap_latin_1_rev;\r\n\r\nexport class HotKey {\r\n  /**action can be a callback or a toolpath string*/\r\n  constructor(key, modifiers, action) {\r\n    this.action = action;\r\n    this.mods = modifiers;\r\n    this.key = keymap[key];\r\n  }\r\n\r\n  exec(ctx) {\r\n    if (typeof this.action == \"string\") {\r\n      ctx.api.execTool(ctx, this.action);\r\n    } else {\r\n      this.action(ctx);\r\n    }\r\n  }\r\n\r\n  buildString() {\r\n    let s = \"\";\r\n\r\n    for (let i=0; i<this.mods.length; i++) {\r\n      if (i > 0) {\r\n        s += \"+\";\r\n      }\r\n\r\n      s += this.mods[i].toLowerCase();\r\n    }\r\n\r\n    if (this.mods.length > 0) {\r\n      s += \"+\";\r\n    }\r\n\r\n    s += reverse_keymap[this.key];\r\n\r\n    return s.trim();\r\n  }\r\n}\r\n\r\nexport class KeyMap extends Array {\r\n  constructor(hotkeys=[]) {\r\n    super();\r\n\r\n    for (let hk of hotkeys) {\r\n      this.add(hk);\r\n    }\r\n  }\r\n\r\n  handle(ctx, e) {\r\n    let mods = new util.set();\r\n    if (e.shiftKey)\r\n      mods.add(\"shift\");\r\n    if (e.altKey)\r\n      mods.add(\"alt\");\r\n    if (e.ctrlKey) {\r\n      mods.add(\"ctrl\");\r\n    }\r\n    if (e.commandKey) {\r\n      mods.add(\"command\");\r\n    }\r\n\r\n    for (let hk of this) {\r\n      let ok = e.keyCode == hk.key;\r\n      if (!ok) continue;\r\n\r\n      let count = 0;\r\n      for (let m of hk.mods) {\r\n        m = m.toLowerCase().trim();\r\n\r\n        if (!mods.has(m)) {\r\n          ok = false;\r\n          break;\r\n        }\r\n\r\n        count++;\r\n      }\r\n\r\n      if (count != mods.length) {\r\n        ok = false;\r\n      }\r\n\r\n      if (ok) {\r\n        try {\r\n          hk.exec(ctx);\r\n        } catch (error) {\r\n          util.print_stack(error);\r\n          console.log(\"failed to execute a hotkey\", keymap[e.keyCode]);\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  add(hk) {\r\n    this.push(hk);\r\n  }\r\n\r\n  push(hk) {\r\n    super.push(hk);\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/simple_events.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 911,
    "kind": "variable",
    "name": "modalstack",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~modalstack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{modalstack}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 912,
    "kind": "function",
    "name": "eventWasTouch",
    "memberof": "scripts/simple_events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_events.js~eventWasTouch",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{eventWasTouch}",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 913,
    "kind": "function",
    "name": "copyEvent",
    "memberof": "scripts/simple_events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_events.js~copyEvent",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{copyEvent}",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 914,
    "kind": "function",
    "name": "pushModalLight",
    "memberof": "scripts/simple_events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_events.js~pushModalLight",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{pushModalLight}",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 915,
    "kind": "function",
    "name": "popModalLight",
    "memberof": "scripts/simple_events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_events.js~popModalLight",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{popModalLight}",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "params": [
      {
        "name": "state",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 916,
    "kind": "function",
    "name": "haveModal",
    "memberof": "scripts/simple_events.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_events.js~haveModal",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{haveModal}",
    "description": null,
    "lineNumber": 189,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 917,
    "kind": "variable",
    "name": "keymap_latin_1",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~keymap_latin_1",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{keymap_latin_1}",
    "description": null,
    "lineNumber": 194,
    "undocument": true,
    "type": {
      "types": [
        "{\"Space\": number, \"Escape\": number, \"Enter\": number, \"Return\": number, \"Up\": number, \"Down\": number, \"Left\": number, \"Right\": number, \"Num0\": number, \"Num1\": number, \"Num2\": number, \"Num3\": number, \"Num4\": number, \"Num5\": number, \"Num6\": number, \"Num7\": number, \"Num8\": number, \"Num9\": number, \"Home\": number, \"End\": number, \"Delete\": number, \"Backspace\": number, \"Insert\": number, \"PageUp\": number, \"PageDown\": number, \"Tab\": number, \"-\": number, \"=\": number, \".\": number, \"/\": number, \",\": number, \";\": number, \"'\": number, \"[\": number, \"]\": number, \"NumPlus\": number, \"NumMinus\": number, \"Shift\": number, \"Ctrl\": number, \"Control\": number, \"Alt\": number}"
      ]
    }
  },
  {
    "__docId__": 918,
    "kind": "variable",
    "name": "keymap_latin_1_rev",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~keymap_latin_1_rev",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_events.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 250,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 919,
    "kind": "variable",
    "name": "keymap",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~keymap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{keymap}",
    "description": null,
    "lineNumber": 255,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 920,
    "kind": "variable",
    "name": "reverse_keymap",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~reverse_keymap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{reverse_keymap}",
    "description": null,
    "lineNumber": 256,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 921,
    "kind": "class",
    "name": "HotKey",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~HotKey",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{HotKey}",
    "description": null,
    "lineNumber": 258,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 922,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_events.js~HotKey",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#constructor",
    "access": "public",
    "description": "action can be a callback or a toolpath string",
    "lineNumber": 260
  },
  {
    "__docId__": 923,
    "kind": "member",
    "name": "action",
    "memberof": "scripts/simple_events.js~HotKey",
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#action",
    "access": "public",
    "description": null,
    "lineNumber": 261,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 924,
    "kind": "member",
    "name": "mods",
    "memberof": "scripts/simple_events.js~HotKey",
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#mods",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 925,
    "kind": "member",
    "name": "key",
    "memberof": "scripts/simple_events.js~HotKey",
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#key",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 926,
    "kind": "method",
    "name": "exec",
    "memberof": "scripts/simple_events.js~HotKey",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#exec",
    "access": "public",
    "description": null,
    "lineNumber": 266,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 927,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/simple_events.js~HotKey",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~HotKey#buildString",
    "access": "public",
    "description": null,
    "lineNumber": 274,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 928,
    "kind": "class",
    "name": "KeyMap",
    "memberof": "scripts/simple_events.js",
    "static": true,
    "longname": "scripts/simple_events.js~KeyMap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_events.js",
    "importStyle": "{KeyMap}",
    "description": null,
    "lineNumber": 295,
    "undocument": true,
    "interface": false,
    "extends": [
      "Array"
    ]
  },
  {
    "__docId__": 929,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_events.js~KeyMap",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~KeyMap#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 296,
    "undocument": true
  },
  {
    "__docId__": 930,
    "kind": "method",
    "name": "handle",
    "memberof": "scripts/simple_events.js~KeyMap",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~KeyMap#handle",
    "access": "public",
    "description": null,
    "lineNumber": 304,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 931,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/simple_events.js~KeyMap",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~KeyMap#add",
    "access": "public",
    "description": null,
    "lineNumber": 349,
    "undocument": true,
    "params": [
      {
        "name": "hk",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 932,
    "kind": "method",
    "name": "push",
    "memberof": "scripts/simple_events.js~KeyMap",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_events.js~KeyMap#push",
    "access": "public",
    "description": null,
    "lineNumber": 353,
    "undocument": true,
    "params": [
      {
        "name": "hk",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 933,
    "kind": "file",
    "name": "scripts/simple_toolsys.js",
    "content": "\"use strict\";\r\n/*\r\na basic, simple tool system implementation\r\n*/\r\n\r\nimport * as util from './util.js';\r\nimport * as events from './events.js';\r\nimport {keymap} from './simple_events.js';\r\nimport {PropTypes} from './toolprop.js';\r\n\r\nexport let ToolClasses = [];\r\n\r\n//XXX need to get rid of this ContextExample class\r\nexport class ContextExample {\r\n  constructor() {\r\n  }\r\n\r\n  execTool(tool) {\r\n    return this.state.toolstack.execTool(tool);\r\n  }\r\n  \r\n  get api() {\r\n    return _appstate.api;\r\n  }\r\n  \r\n  get screen() {\r\n    return _appstate.screen;\r\n  }\r\n  \r\n  get state() {\r\n    return _appstate;\r\n  }\r\n  \r\n  save() {\r\n    _appstate.save();\r\n  }\r\n  \r\n  get editor() {\r\n    throw new Error(\"implement me\");\r\n  }\r\n}\r\n\r\nexport function setContextClass(cls) {\r\n  console.warn(\"setContextClass is deprecated\");\r\n}\r\n\r\nexport const ToolFlags = {\r\n  PRIVATE : 1\r\n};\r\n\r\n\r\nexport const UndoFlags = {\r\n  NO_UNDO       : 2,\r\n  IS_UNDO_ROOT  : 4,\r\n  UNDO_BARRIER  :  8,\r\n  HAS_UNDO_DATA : 16\r\n};\r\n\r\nclass InheritFlag {\r\n  constructor(slots={}) {\r\n    this.slots = slots;\r\n  }\r\n}\r\n\r\nexport class ToolOp extends events.EventHandler {\r\n  static tooldef() {return {\r\n    uiname   : \"!untitled tool\",\r\n    toolpath : \"logical_module.tool\", //logical_module need not match up to real module name\r\n    icon     : -1,\r\n    description : undefined,\r\n    is_modal : false,\r\n    hotkey : undefined,\r\n    undoflag : 0,\r\n    flag     : 0,\r\n    inputs   : {}, //tool properties, enclose in ToolOp.inherit({}) to inherit from parent classes\r\n    outputs  : {}  //tool properties, enclose in ToolOp.inherit({}) to inherit from parent classes\r\n  }}\r\n\r\n  static inherit(slots) {\r\n    return new InheritFlag(slots);\r\n  }\r\n  \r\n  //creates a new instance from args\r\n  static invoke(ctx, args) {\r\n    let tool = new this();\r\n\r\n    for (let k in args) {\r\n      if (!(k in tool.inputs)) {\r\n        console.warn(\"Unknown tool argument \" + k);\r\n        continue;\r\n      }\r\n\r\n      let prop = tool.inputs[k];\r\n      let val = args[k];\r\n\r\n      if ((typeof val === \"string\") && prop.type & (PropTypes.ENUM|PropTypes.FLAG)) {\r\n        if (val in prop.values) {\r\n          val = prop.values[val];\r\n        } else {\r\n          console.warn(\"Possible invalid enum/flag:\", val);\r\n          continue;\r\n        }\r\n      }\r\n\r\n      tool.inputs[k].setValue(val);\r\n    }\r\n\r\n    return tool;\r\n  }\r\n  \r\n  static register(cls) {\r\n    if (ToolClasses.indexOf(cls) >= 0) {\r\n      console.warn(\"Tried to register same ToolOp class twice:\", cls.name, cls);\r\n      return;\r\n    }\r\n\r\n    ToolClasses.push(cls);\r\n  }\r\n\r\n  static isRegistered(cls) {\r\n    return ToolClasses.indexOf(cls) >= 0;\r\n  }\r\n\r\n  static unregister(cls) {\r\n    if (ToolClasses.indexOf(cls) >= 0) {\r\n      ToolClasses.remove(cls);\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this._overdraw = undefined;\r\n\r\n    var def = this.constructor.tooldef();\r\n\r\n    if (def.undoflag !== undefined) {\r\n      this.undoflag = def.undoflag;\r\n    }\r\n\r\n    if (def.flag !== undefined) {\r\n      this.flag = def.flag;\r\n    }\r\n\r\n    this._accept = this._reject = undefined;\r\n    this._promise = undefined;\r\n    \r\n    for (var k in def) {\r\n      this[k] = def[k];\r\n    }\r\n\r\n    let getSlots = (slots, key) => {\r\n      if (slots === undefined)\r\n        return {};\r\n\r\n      if (!(slots instanceof InheritFlag)) {\r\n        return slots;\r\n      }\r\n\r\n      slots = {};\r\n      let p = this.constructor;\r\n\r\n      while (p !== undefined && p !== Object && p !== ToolOp) {\r\n        if (p.tooldef) {\r\n          let def = p.tooldef();\r\n\r\n          if (def[key] !== undefined) {\r\n            let slots2 = def[key];\r\n            let stop = !(slots2 instanceof InheritFlag);\r\n\r\n            if (slots2 instanceof InheritFlag) {\r\n              slots2 = slots2.slots;\r\n            }\r\n\r\n            for (let k in slots2) {\r\n              if (!(k in slots)) {\r\n                slots[k] = slots2[k];\r\n              }\r\n            }\r\n\r\n            if (stop) {\r\n              break;\r\n            }\r\n          }\r\n\r\n        }\r\n        p = p.prototype.__proto__.constructor;\r\n      }\r\n\r\n      return slots;\r\n    };\r\n\r\n    let dinputs = getSlots(def.inputs, \"inputs\");\r\n    let doutputs = getSlots(def.outputs, \"outputs\");\r\n\r\n    this.inputs = {};\r\n    this.outputs = {};\r\n    \r\n    if (dinputs) {\r\n      for (let k in dinputs) {\r\n        this.inputs[k] = dinputs[k].copy();\r\n      }\r\n    }\r\n    \r\n    if (doutputs) {\r\n      for (let k in doutputs) {\r\n        this.outputs[k] = doutputs[k].copy();\r\n      }\r\n    }\r\n\r\n    this.drawlines = [];\r\n  }\r\n\r\n  //default on_keydown implementation for modal tools,\r\n  //no need to call super() to execute this if you don't want to\r\n  on_keydown(e) {\r\n    switch (e.keyCode) {\r\n      case keymap[\"Enter\"]:\r\n      case keymap[\"Space\"]:\r\n        this.modalEnd(false);\r\n        break;\r\n      case keymap[\"Escape\"]:\r\n        this.modalEnd(true);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /** for compatibility with fairmotion, don't use */\r\n  can_call(ctx) {\r\n    return this.constructor.canRun(ctx);\r\n  }\r\n\r\n  static canRun(ctx) {\r\n    return true;\r\n  }\r\n\r\n  /* eek this should have been static all along, make sure\r\n     to fix everything.\r\n  */\r\n  canRun(ctx) {\r\n    return this.constructor.canRun(ctx);\r\n  }\r\n\r\n\r\n  undoPre(ctx) {\r\n    this._undo = _appstate.genUndoFile();\r\n  }\r\n  \r\n  undo(ctx) {\r\n    _appstate.loadUndoFile(this._undo);\r\n  }\r\n\r\n  //for compatibility with fairmotion\r\n  exec_pre(ctx) {\r\n    this.execPre(ctx);\r\n  }\r\n\r\n  execPre(ctx) {\r\n  }\r\n  exec(ctx) {\r\n  }\r\n  execPost(ctx) {\r\n\r\n  }\r\n\r\n  //for use in modal mode only\r\n  resetDrawLines() {\r\n    var ctx = this.modal_ctx;\r\n    \r\n    for (var dl of this.drawlines) {\r\n      dl.remove();\r\n    }\r\n    \r\n    this.drawlines.length = 0;\r\n  }\r\n  \r\n  error(msg) {\r\n    console.warn(msg);\r\n  }\r\n\r\n  getOverdraw() {\r\n    if (this._overdraw === undefined) {\r\n      this._overdraw = document.createElement(\"overdraw-x\");\r\n      this._overdraw.start(this.modal_ctx.screen);\r\n    }\r\n\r\n    return this._overdraw;\r\n  }\r\n  //for use in modal mode only\r\n  addDrawLine(v1, v2, style) {\r\n    let line = this.getOverdraw().line(v1, v2, style);\r\n    this.drawlines.push(line);\r\n    return line;\r\n  }\r\n  \r\n  //returns promise to be executed on modalEnd\r\n  modalStart(ctx) {\r\n    if (this.modalRunning) {\r\n      console.warn(\"Warning, tool is already in modal mode consuming events\");\r\n      return this._promise;\r\n    }\r\n    \r\n    //console.warn(\"tool modal start\");\r\n    \r\n    this.modal_ctx = ctx;\r\n    this.modalRunning = true\r\n    \r\n    this.pushModal(ctx.screen);\r\n\r\n    this._promise = new Promise((function(accept, reject) {\r\n      this._accept = accept;\r\n      this._reject = reject;\r\n    }).bind(this));\r\n    \r\n    return this._promise;\r\n  }\r\n\r\n  /*eek, I've not been using this.\r\n    guess it's a non-enforced contract, I've been naming\r\n    cancel methods 'cancel' all this time.\r\n\r\n    XXX fix\r\n  */\r\n  toolCancel() {\r\n  }\r\n  \r\n  modalEnd(was_cancelled) {\r\n    if (this._overdraw !== undefined) {\r\n      this._overdraw.end();\r\n      this._overdraw = undefined;\r\n    }\r\n\r\n    //console.log(\"tool modal end\");\r\n    \r\n    if (was_cancelled && this._on_cancel !== undefined) {\r\n      this._accept(this.modal_ctx, true);\r\n      this._on_cancel(this);\r\n    }\r\n    \r\n    this.resetDrawLines();\r\n    \r\n    var ctx = this.modal_ctx;\r\n    \r\n    this.modal_ctx = undefined;\r\n    this.modalRunning = false;\r\n    this.is_modal = false;\r\n    \r\n    this.popModal(_appstate._modal_dom_root);\r\n    \r\n    this._promise = undefined;\r\n    this._accept(ctx, false); //Context, was_cancelled\r\n    this._accept = this._reject = undefined;\r\n  }\r\n}\r\n\r\nexport class ToolMacro extends ToolOp {\r\n  static tooldef() {return {\r\n    uiname : \"Tool Macro\"\r\n  }}\r\n  \r\n  constructor() {\r\n    super();\r\n    \r\n    this.tools = [];\r\n    this.curtool = 0;\r\n    this.has_modal = false;\r\n    this.connects = [];\r\n  }\r\n  \r\n  connect(srctool, dsttool, callback, thisvar) {\r\n    this.connects.push({\r\n      srctool  : srctool,\r\n      dsttool  : dsttool,\r\n      callback : callback,\r\n      thisvar  : thisvar\r\n    });\r\n    \r\n    return this;\r\n  }\r\n  \r\n  add(tool) {\r\n    if (tool.is_modal) {\r\n      this.is_modal = true;\r\n    }\r\n    \r\n    this.tools.push(tool);\r\n    \r\n    return this;\r\n  }\r\n  \r\n  _do_connections(tool) {\r\n    for (var c of this.connects) {\r\n      if (c.srctool === tool) {\r\n        c.callback.call(c.thisvar, c.srctool, c.dsttool);\r\n      }\r\n    }\r\n  }\r\n\r\n  static canRun(ctx) {\r\n    return true;\r\n  }\r\n\r\n  /*\r\n  canRun(ctx) {\r\n    if (this.tools.length == 0)\r\n      return false;\r\n    \r\n    //poll first tool only in list\r\n    return this.tools[0].constructor.canRun(ctx);\r\n  }//*/\r\n  \r\n  modalStart(ctx) {\r\n    this._promise = new Promise((function(accept, reject) {\r\n      this._accept = accept;\r\n      this._reject = reject;\r\n    }).bind(this));\r\n    \r\n    this.curtool = 0;\r\n\r\n    let i;\r\n\r\n    for (i=0; i<this.tools.length; i++) {\r\n      if (this.tools[i].is_modal)\r\n        break;\r\n      \r\n      this.tools[i].undoPre(ctx);\r\n      this.tools[i].execPre(ctx);\r\n      this.tools[i].exec(ctx);\r\n      this.tools[i].execPost(ctx);\r\n      this._do_connections(this.tools[i]);\r\n    }\r\n    \r\n    var on_modal_end = (function on_modal_end() {\r\n        this._do_connections(this.tools[this.curtool]);\r\n        this.curtool++;\r\n        \r\n        while (this.curtool < this.tools.length && \r\n               !this.tools[this.curtool].is_modal) \r\n        {\r\n            this.tools[this.curtool].undoPre(ctx);\r\n            this.tools[this.curtool].execPre(ctx);\r\n            this.tools[this.curtool].exec(ctx);\r\n            this.tools[this.curtool].execPost(ctx);\r\n            this._do_connections(this.tools[this.curtool]);\r\n            \r\n            this.curtool++;\r\n        }\r\n        \r\n        if (this.curtool < this.tools.length) {\r\n          this.tools[this.curtool].undoPre(ctx);\r\n          this.tools[this.curtool].modalStart(ctx).then(on_modal_end);\r\n        } else {\r\n          this._accept(this, false);\r\n        }\r\n    }).bind(this);\r\n    \r\n    if (i < this.tools.length) {\r\n      this.curtool = i;\r\n      this.tools[this.curtool].undoPre(ctx);\r\n      this.tools[this.curtool].modalStart(ctx).then(on_modal_end);\r\n    }\r\n    \r\n    return this._promise;\r\n  }\r\n  \r\n  exec(ctx) {\r\n    for (var i=0; i<this.tools.length; i++) {\r\n      this.tools[i].undoPre(ctx);\r\n      this.tools[i].execPre(ctx);\r\n      this.tools[i].exec(ctx);\r\n      this.tools[i].execPost(ctx);\r\n      this._do_connections(this.tools[i]);\r\n    }\r\n  }\r\n  \r\n  undoPre() {\r\n    return; //undoPre is handled in exec() or modalStart()\r\n  }\r\n  \r\n  undo(ctx) {\r\n    for (var i=this.tools.length-1; i >= 0; i--) {\r\n      this.tools[i].undo(ctx);\r\n    }\r\n  }\r\n}\r\n\r\nexport class ToolStack extends Array {\r\n  constructor(ctx) {\r\n    super();\r\n    \r\n    this.cur = -1;\r\n    this.ctx = ctx;\r\n    this.modalRunning = 0;\r\n  }\r\n\r\n  reset(ctx) {\r\n    if (ctx !== undefined) {\r\n      this.ctx = ctx;\r\n    }\r\n\r\n    this.modalRunning = 0;\r\n    this.cur = -1;\r\n    this.length = 0;\r\n  }\r\n\r\n  execTool(toolop, ctx=this.ctx) {\r\n    if (!toolop.constructor.canRun(ctx)) {\r\n      console.log(\"toolop.constructor.canRun returned false\");\r\n      return;\r\n    }\r\n    \r\n    if (!(toolop.undoflag & UndoFlags.NO_UNDO)) {\r\n      this.cur++;\r\n\r\n      //truncate\r\n      this.length = this.cur+1;\r\n      \r\n      this[this.cur] = toolop;\r\n      toolop.undoPre(ctx);\r\n    }\r\n    \r\n    if (toolop.is_modal) {\r\n      this.modalRunning = true;\r\n      \r\n      toolop._on_cancel = (function(toolop) {\r\n        this.pop_i(this.cur);\r\n        this.cur--;\r\n      }).bind(this);\r\n      \r\n      //will handle calling .exec itself\r\n      toolop.modalStart(ctx);\r\n    } else {\r\n      toolop.execPre(ctx);\r\n      toolop.exec(ctx);\r\n      toolop.execPost(ctx);\r\n    }\r\n  }\r\n  \r\n  undo() {\r\n    if (this.cur >= 0 && !(this[this.cur].undoflag & UndoFlags.IS_UNDO_ROOT)) {\r\n      console.log(\"undo!\", this.cur, this.length);\r\n      \r\n      this[this.cur].undo(this.ctx);\r\n      this.cur--;\r\n    }\r\n  }\r\n  \r\n  redo() {\r\n    if (this.cur >= -1 && this.cur+1 < this.length) {\r\n      console.log(\"redo!\", this.cur, this.length);\r\n      \r\n      this.cur++;\r\n      \r\n      this[this.cur].undoPre(this.ctx);\r\n      this[this.cur].execPre(this.ctx);\r\n      this[this.cur].exec(this.ctx);\r\n      this[this.cur].execPost(this.ctx);\r\n    }\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/simple_toolsys.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 934,
    "kind": "variable",
    "name": "ToolClasses",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolClasses",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ToolClasses}",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 935,
    "kind": "class",
    "name": "ContextExample",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ContextExample",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ContextExample}",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 936,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 15,
    "undocument": true
  },
  {
    "__docId__": 937,
    "kind": "method",
    "name": "execTool",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#execTool",
    "access": "public",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "params": [
      {
        "name": "tool",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 938,
    "kind": "get",
    "name": "api",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#api",
    "access": "public",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 939,
    "kind": "get",
    "name": "screen",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#screen",
    "access": "public",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 940,
    "kind": "get",
    "name": "state",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#state",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 941,
    "kind": "method",
    "name": "save",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#save",
    "access": "public",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 942,
    "kind": "get",
    "name": "editor",
    "memberof": "scripts/simple_toolsys.js~ContextExample",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ContextExample#editor",
    "access": "public",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": null
  },
  {
    "__docId__": 943,
    "kind": "function",
    "name": "setContextClass",
    "memberof": "scripts/simple_toolsys.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~setContextClass",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{setContextClass}",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 944,
    "kind": "variable",
    "name": "ToolFlags",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ToolFlags}",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "{\"PRIVATE\": number}"
      ]
    }
  },
  {
    "__docId__": 945,
    "kind": "variable",
    "name": "UndoFlags",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~UndoFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{UndoFlags}",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "type": {
      "types": [
        "{\"NO_UNDO\": number, \"IS_UNDO_ROOT\": number, \"UNDO_BARRIER\": number, \"HAS_UNDO_DATA\": number}"
      ]
    }
  },
  {
    "__docId__": 946,
    "kind": "class",
    "name": "InheritFlag",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~InheritFlag",
    "access": "public",
    "export": false,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 947,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_toolsys.js~InheritFlag",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~InheritFlag#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 60,
    "undocument": true
  },
  {
    "__docId__": 948,
    "kind": "member",
    "name": "slots",
    "memberof": "scripts/simple_toolsys.js~InheritFlag",
    "static": false,
    "longname": "scripts/simple_toolsys.js~InheritFlag#slots",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 949,
    "kind": "class",
    "name": "ToolOp",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ToolOp}",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/events.js~events.EventHandler"
    ]
  },
  {
    "__docId__": 950,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string, \"toolpath\": string, \"icon\": *, \"description\": *, \"is_modal\": *, \"hotkey\": *, \"undoflag\": *, \"flag\": *, \"inputs\": *, \"outputs\": *}"
      ]
    }
  },
  {
    "__docId__": 951,
    "kind": "method",
    "name": "inherit",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.inherit",
    "access": "public",
    "description": null,
    "lineNumber": 79,
    "undocument": true,
    "params": [
      {
        "name": "slots",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 952,
    "kind": "method",
    "name": "invoke",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.invoke",
    "access": "public",
    "description": null,
    "lineNumber": 84,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "args",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 953,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.register",
    "access": "public",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 954,
    "kind": "method",
    "name": "isRegistered",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.isRegistered",
    "access": "public",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 955,
    "kind": "method",
    "name": "unregister",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.unregister",
    "access": "public",
    "description": null,
    "lineNumber": 124,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 956,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 130,
    "undocument": true
  },
  {
    "__docId__": 957,
    "kind": "member",
    "name": "_overdraw",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#_overdraw",
    "access": "private",
    "description": null,
    "lineNumber": 133,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 958,
    "kind": "member",
    "name": "undoflag",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#undoflag",
    "access": "public",
    "description": null,
    "lineNumber": 138,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 959,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#flag",
    "access": "public",
    "description": null,
    "lineNumber": 142,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 960,
    "kind": "member",
    "name": "_accept",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#_accept",
    "access": "private",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 961,
    "kind": "member",
    "name": "_promise",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#_promise",
    "access": "private",
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 962,
    "kind": "member",
    "name": "[k]",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#[k]",
    "access": "public",
    "description": null,
    "lineNumber": 149,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 963,
    "kind": "member",
    "name": "inputs",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#inputs",
    "access": "public",
    "description": null,
    "lineNumber": 196,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 964,
    "kind": "member",
    "name": "outputs",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#outputs",
    "access": "public",
    "description": null,
    "lineNumber": 197,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 965,
    "kind": "member",
    "name": "drawlines",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#drawlines",
    "access": "public",
    "description": null,
    "lineNumber": 211,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 966,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 967,
    "kind": "method",
    "name": "can_call",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#can_call",
    "access": "public",
    "description": "for compatibility with fairmotion, don't use",
    "lineNumber": 229,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 968,
    "kind": "method",
    "name": "canRun",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolOp.canRun",
    "access": "public",
    "description": null,
    "lineNumber": 233,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 969,
    "kind": "method",
    "name": "canRun",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#canRun",
    "access": "public",
    "description": null,
    "lineNumber": 240,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 970,
    "kind": "method",
    "name": "undoPre",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#undoPre",
    "access": "public",
    "description": null,
    "lineNumber": 245,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 971,
    "kind": "member",
    "name": "_undo",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#_undo",
    "access": "private",
    "description": null,
    "lineNumber": 246,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 972,
    "kind": "method",
    "name": "undo",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#undo",
    "access": "public",
    "description": null,
    "lineNumber": 249,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 973,
    "kind": "method",
    "name": "exec_pre",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#exec_pre",
    "access": "public",
    "description": null,
    "lineNumber": 254,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 974,
    "kind": "method",
    "name": "execPre",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#execPre",
    "access": "public",
    "description": null,
    "lineNumber": 258,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 975,
    "kind": "method",
    "name": "exec",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#exec",
    "access": "public",
    "description": null,
    "lineNumber": 260,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 976,
    "kind": "method",
    "name": "execPost",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#execPost",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 977,
    "kind": "method",
    "name": "resetDrawLines",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#resetDrawLines",
    "access": "public",
    "description": null,
    "lineNumber": 267,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 978,
    "kind": "method",
    "name": "error",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#error",
    "access": "public",
    "description": null,
    "lineNumber": 277,
    "undocument": true,
    "params": [
      {
        "name": "msg",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 979,
    "kind": "method",
    "name": "getOverdraw",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#getOverdraw",
    "access": "public",
    "description": null,
    "lineNumber": 281,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 981,
    "kind": "method",
    "name": "addDrawLine",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#addDrawLine",
    "access": "public",
    "description": null,
    "lineNumber": 290,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "style",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 982,
    "kind": "method",
    "name": "modalStart",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#modalStart",
    "access": "public",
    "description": null,
    "lineNumber": 297,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 983,
    "kind": "member",
    "name": "modal_ctx",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#modal_ctx",
    "access": "public",
    "description": null,
    "lineNumber": 305,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 984,
    "kind": "member",
    "name": "modalRunning",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#modalRunning",
    "access": "public",
    "description": null,
    "lineNumber": 306,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 987,
    "kind": "member",
    "name": "_reject",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#_reject",
    "access": "private",
    "description": null,
    "lineNumber": 312,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 988,
    "kind": "method",
    "name": "toolCancel",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#toolCancel",
    "access": "public",
    "description": null,
    "lineNumber": 324,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 989,
    "kind": "method",
    "name": "modalEnd",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#modalEnd",
    "access": "public",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "params": [
      {
        "name": "was_cancelled",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 993,
    "kind": "member",
    "name": "is_modal",
    "memberof": "scripts/simple_toolsys.js~ToolOp",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolOp#is_modal",
    "access": "public",
    "description": null,
    "lineNumber": 346,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 996,
    "kind": "class",
    "name": "ToolMacro",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolMacro",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ToolMacro}",
    "description": null,
    "lineNumber": 356,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolOp"
    ]
  },
  {
    "__docId__": 997,
    "kind": "method",
    "name": "tooldef",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolMacro.tooldef",
    "access": "public",
    "description": null,
    "lineNumber": 357,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"uiname\": string}"
      ]
    }
  },
  {
    "__docId__": 998,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 361,
    "undocument": true
  },
  {
    "__docId__": 999,
    "kind": "member",
    "name": "tools",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#tools",
    "access": "public",
    "description": null,
    "lineNumber": 364,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1000,
    "kind": "member",
    "name": "curtool",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#curtool",
    "access": "public",
    "description": null,
    "lineNumber": 365,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1001,
    "kind": "member",
    "name": "has_modal",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#has_modal",
    "access": "public",
    "description": null,
    "lineNumber": 366,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1002,
    "kind": "member",
    "name": "connects",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#connects",
    "access": "public",
    "description": null,
    "lineNumber": 367,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1003,
    "kind": "method",
    "name": "connect",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#connect",
    "access": "public",
    "description": null,
    "lineNumber": 370,
    "undocument": true,
    "params": [
      {
        "name": "srctool",
        "types": [
          "*"
        ]
      },
      {
        "name": "dsttool",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1004,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#add",
    "access": "public",
    "description": null,
    "lineNumber": 381,
    "undocument": true,
    "params": [
      {
        "name": "tool",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1005,
    "kind": "member",
    "name": "is_modal",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#is_modal",
    "access": "public",
    "description": null,
    "lineNumber": 383,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1006,
    "kind": "method",
    "name": "_do_connections",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#_do_connections",
    "access": "private",
    "description": null,
    "lineNumber": 391,
    "undocument": true,
    "params": [
      {
        "name": "tool",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1007,
    "kind": "method",
    "name": "canRun",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolMacro.canRun",
    "access": "public",
    "description": null,
    "lineNumber": 399,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1008,
    "kind": "method",
    "name": "modalStart",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#modalStart",
    "access": "public",
    "description": null,
    "lineNumber": 412,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1009,
    "kind": "member",
    "name": "_promise",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#_promise",
    "access": "private",
    "description": null,
    "lineNumber": 413,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1010,
    "kind": "member",
    "name": "_accept",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#_accept",
    "access": "private",
    "description": null,
    "lineNumber": 414,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1011,
    "kind": "member",
    "name": "_reject",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#_reject",
    "access": "private",
    "description": null,
    "lineNumber": 415,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1014,
    "kind": "method",
    "name": "exec",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#exec",
    "access": "public",
    "description": null,
    "lineNumber": 466,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1015,
    "kind": "method",
    "name": "undoPre",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#undoPre",
    "access": "public",
    "description": null,
    "lineNumber": 476,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1016,
    "kind": "method",
    "name": "undo",
    "memberof": "scripts/simple_toolsys.js~ToolMacro",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolMacro#undo",
    "access": "public",
    "description": null,
    "lineNumber": 480,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1017,
    "kind": "class",
    "name": "ToolStack",
    "memberof": "scripts/simple_toolsys.js",
    "static": true,
    "longname": "scripts/simple_toolsys.js~ToolStack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/simple_toolsys.js",
    "importStyle": "{ToolStack}",
    "description": null,
    "lineNumber": 487,
    "undocument": true,
    "interface": false,
    "extends": [
      "Array"
    ]
  },
  {
    "__docId__": 1018,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 488,
    "undocument": true
  },
  {
    "__docId__": 1019,
    "kind": "member",
    "name": "cur",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#cur",
    "access": "public",
    "description": null,
    "lineNumber": 491,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1020,
    "kind": "member",
    "name": "ctx",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 492,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1021,
    "kind": "member",
    "name": "modalRunning",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#modalRunning",
    "access": "public",
    "description": null,
    "lineNumber": 493,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1022,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#reset",
    "access": "public",
    "description": null,
    "lineNumber": 496,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1026,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#length",
    "access": "public",
    "description": null,
    "lineNumber": 503,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1027,
    "kind": "method",
    "name": "execTool",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#execTool",
    "access": "public",
    "description": null,
    "lineNumber": 506,
    "undocument": true,
    "params": [
      {
        "name": "toolop",
        "types": [
          "*"
        ]
      },
      {
        "name": "ctx",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1029,
    "kind": "member",
    "name": "[.cur]",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#[.cur]",
    "access": "public",
    "description": null,
    "lineNumber": 518,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1031,
    "kind": "method",
    "name": "undo",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#undo",
    "access": "public",
    "description": null,
    "lineNumber": 539,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1032,
    "kind": "method",
    "name": "redo",
    "memberof": "scripts/simple_toolsys.js~ToolStack",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/simple_toolsys.js~ToolStack#redo",
    "access": "public",
    "description": null,
    "lineNumber": 548,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1033,
    "kind": "file",
    "name": "scripts/struct.js",
    "content": "(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        //Allow using this built library as an AMD module\r\n        //in another project. That other project will only\r\n        //see this AMD call, not the internal modules in\r\n        //the closure below.\r\n        define([], factory);\r\n    } else {\r\n      function getGlobal() {\r\n        return this;\r\n      }\r\n      \r\n      //Browser globals case. Just assign the\r\n      //result to a property on the global.\r\n      \r\n      if (typeof window === \"object\") {\r\n        window.nstructjs = factory();\r\n      } else if (typeof self === \"object\") { //browser worker\r\n        self.nstructjs = factory();\r\n      } else if (typeof module === \"object\") { //node.js\r\n        module.exports = factory();\r\n      }\r\n    }\r\n}(this, function () {\r\n    //almond, and your modules will be inlined here\r\n/**\r\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\r\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\r\n */\r\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\r\n//be followed.\r\n/*global setTimeout: false */\r\n\r\nvar requirejs, require, define;\r\n(function (undef) {\r\n    var main, req, makeMap, handlers,\r\n        defined = {},\r\n        waiting = {},\r\n        config = {},\r\n        defining = {},\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        aps = [].slice,\r\n        jsSuffixRegExp = /\\.js$/;\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    /**\r\n     * Given a relative module name, like ./something, normalize it to\r\n     * a real name that can be mapped to a path.\r\n     * @param {String} name the relative name\r\n     * @param {String} baseName a real name that the name arg is relative\r\n     * to.\r\n     * @returns {String} normalized name\r\n     */\r\n    function normalize(name, baseName) {\r\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\r\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\r\n            baseParts = baseName && baseName.split(\"/\"),\r\n            map = config.map,\r\n            starMap = (map && map['*']) || {};\r\n\r\n        //Adjust any relative paths.\r\n        if (name) {\r\n            name = name.split('/');\r\n            lastIndex = name.length - 1;\r\n\r\n            // If wanting node ID compatibility, strip .js from end\r\n            // of IDs. Have to do this here, and not in nameToUrl\r\n            // because node allows either .js or non .js to map\r\n            // to same file.\r\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n            }\r\n\r\n            // Starts with a '.' so need the baseName\r\n            if (name[0].charAt(0) === '.' && baseParts) {\r\n                //Convert baseName to array, and lop off the last part,\r\n                //so that . matches that 'directory' and not name of the baseName's\r\n                //module. For instance, baseName of 'one/two/three', maps to\r\n                //'one/two/three.js', but we want the directory, 'one/two' for\r\n                //this normalization.\r\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\r\n                name = normalizedBaseParts.concat(name);\r\n            }\r\n\r\n            //start trimDots\r\n            for (i = 0; i < name.length; i++) {\r\n                part = name[i];\r\n                if (part === '.') {\r\n                    name.splice(i, 1);\r\n                    i -= 1;\r\n                } else if (part === '..') {\r\n                    // If at the start, or previous value is still ..,\r\n                    // keep them so that when converted to a path it may\r\n                    // still work when converted to a path, even though\r\n                    // as an ID it is less than ideal. In larger point\r\n                    // releases, may be better to just kick out an error.\r\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\r\n                        continue;\r\n                    } else if (i > 0) {\r\n                        name.splice(i - 1, 2);\r\n                        i -= 2;\r\n                    }\r\n                }\r\n            }\r\n            //end trimDots\r\n\r\n            name = name.join('/');\r\n        }\r\n\r\n        //Apply map config if available.\r\n        if ((baseParts || starMap) && map) {\r\n            nameParts = name.split('/');\r\n\r\n            for (i = nameParts.length; i > 0; i -= 1) {\r\n                nameSegment = nameParts.slice(0, i).join(\"/\");\r\n\r\n                if (baseParts) {\r\n                    //Find the longest baseName segment match in the config.\r\n                    //So, do joins on the biggest to smallest lengths of baseParts.\r\n                    for (j = baseParts.length; j > 0; j -= 1) {\r\n                        mapValue = map[baseParts.slice(0, j).join('/')];\r\n\r\n                        //baseName segment has  config, find if it has one for\r\n                        //this name.\r\n                        if (mapValue) {\r\n                            mapValue = mapValue[nameSegment];\r\n                            if (mapValue) {\r\n                                //Match, update name to the new value.\r\n                                foundMap = mapValue;\r\n                                foundI = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (foundMap) {\r\n                    break;\r\n                }\r\n\r\n                //Check for a star map match, but just hold on to it,\r\n                //if there is a shorter segment match later in a matching\r\n                //config, then favor over this star map.\r\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\r\n                    foundStarMap = starMap[nameSegment];\r\n                    starI = i;\r\n                }\r\n            }\r\n\r\n            if (!foundMap && foundStarMap) {\r\n                foundMap = foundStarMap;\r\n                foundI = starI;\r\n            }\r\n\r\n            if (foundMap) {\r\n                nameParts.splice(0, foundI, foundMap);\r\n                name = nameParts.join('/');\r\n            }\r\n        }\r\n\r\n        return name;\r\n    }\r\n\r\n    function makeRequire(relName, forceSync) {\r\n        return function () {\r\n            //A version of a require function that passes a moduleName\r\n            //value for items that may need to\r\n            //look up paths relative to the moduleName\r\n            var args = aps.call(arguments, 0);\r\n\r\n            //If first arg is not require('string'), and there is only\r\n            //one arg, it is the array form without a callback. Insert\r\n            //a null so that the following concat is correct.\r\n            if (typeof args[0] !== 'string' && args.length === 1) {\r\n                args.push(null);\r\n            }\r\n            return req.apply(undef, args.concat([relName, forceSync]));\r\n        };\r\n    }\r\n\r\n    function makeNormalize(relName) {\r\n        return function (name) {\r\n            return normalize(name, relName);\r\n        };\r\n    }\r\n\r\n    function makeLoad(depName) {\r\n        return function (value) {\r\n            defined[depName] = value;\r\n        };\r\n    }\r\n\r\n    function callDep(name) {\r\n        if (hasProp(waiting, name)) {\r\n            var args = waiting[name];\r\n            delete waiting[name];\r\n            defining[name] = true;\r\n            main.apply(undef, args);\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\r\n            throw new Error('No ' + name);\r\n        }\r\n        return defined[name];\r\n    }\r\n\r\n    //Turns a plugin!resource to [plugin, resource]\r\n    //with the plugin being undefined if the name\r\n    //did not have a plugin prefix.\r\n    function splitPrefix(name) {\r\n        var prefix,\r\n            index = name ? name.indexOf('!') : -1;\r\n        if (index > -1) {\r\n            prefix = name.substring(0, index);\r\n            name = name.substring(index + 1, name.length);\r\n        }\r\n        return [prefix, name];\r\n    }\r\n\r\n    //Creates a parts array for a relName where first part is plugin ID,\r\n    //second part is resource ID. Assumes relName has already been normalized.\r\n    function makeRelParts(relName) {\r\n        return relName ? splitPrefix(relName) : [];\r\n    }\r\n\r\n    /**\r\n     * Makes a name map, normalizing the name, and using a plugin\r\n     * for normalization if necessary. Grabs a ref to plugin\r\n     * too, as an optimization.\r\n     */\r\n    makeMap = function (name, relParts) {\r\n        var plugin,\r\n            parts = splitPrefix(name),\r\n            prefix = parts[0],\r\n            relResourceName = relParts[1];\r\n\r\n        name = parts[1];\r\n\r\n        if (prefix) {\r\n            prefix = normalize(prefix, relResourceName);\r\n            plugin = callDep(prefix);\r\n        }\r\n\r\n        //Normalize according\r\n        if (prefix) {\r\n            if (plugin && plugin.normalize) {\r\n                name = plugin.normalize(name, makeNormalize(relResourceName));\r\n            } else {\r\n                name = normalize(name, relResourceName);\r\n            }\r\n        } else {\r\n            name = normalize(name, relResourceName);\r\n            parts = splitPrefix(name);\r\n            prefix = parts[0];\r\n            name = parts[1];\r\n            if (prefix) {\r\n                plugin = callDep(prefix);\r\n            }\r\n        }\r\n\r\n        //Using ridiculous property names for space reasons\r\n        return {\r\n            f: prefix ? prefix + '!' + name : name, //fullName\r\n            n: name,\r\n            pr: prefix,\r\n            p: plugin\r\n        };\r\n    };\r\n\r\n    function makeConfig(name) {\r\n        return function () {\r\n            return (config && config.config && config.config[name]) || {};\r\n        };\r\n    }\r\n\r\n    handlers = {\r\n        require: function (name) {\r\n            return makeRequire(name);\r\n        },\r\n        exports: function (name) {\r\n            var e = defined[name];\r\n            if (typeof e !== 'undefined') {\r\n                return e;\r\n            } else {\r\n                return (defined[name] = {});\r\n            }\r\n        },\r\n        module: function (name) {\r\n            return {\r\n                id: name,\r\n                uri: '',\r\n                exports: defined[name],\r\n                config: makeConfig(name)\r\n            };\r\n        }\r\n    };\r\n\r\n    main = function (name, deps, callback, relName) {\r\n        var cjsModule, depName, ret, map, i, relParts,\r\n            args = [],\r\n            callbackType = typeof callback,\r\n            usingExports;\r\n\r\n        //Use name if no relName\r\n        relName = relName || name;\r\n        relParts = makeRelParts(relName);\r\n\r\n        //Call the callback to define the module, if necessary.\r\n        if (callbackType === 'undefined' || callbackType === 'function') {\r\n            //Pull out the defined dependencies and pass the ordered\r\n            //values to the callback.\r\n            //Default to [require, exports, module] if no deps\r\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\r\n            for (i = 0; i < deps.length; i += 1) {\r\n                map = makeMap(deps[i], relParts);\r\n                depName = map.f;\r\n\r\n                //Fast path CommonJS standard dependencies.\r\n                if (depName === \"require\") {\r\n                    args[i] = handlers.require(name);\r\n                } else if (depName === \"exports\") {\r\n                    //CommonJS module spec 1.1\r\n                    args[i] = handlers.exports(name);\r\n                    usingExports = true;\r\n                } else if (depName === \"module\") {\r\n                    //CommonJS module spec 1.1\r\n                    cjsModule = args[i] = handlers.module(name);\r\n                } else if (hasProp(defined, depName) ||\r\n                           hasProp(waiting, depName) ||\r\n                           hasProp(defining, depName)) {\r\n                    args[i] = callDep(depName);\r\n                } else if (map.p) {\r\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\r\n                    args[i] = defined[depName];\r\n                } else {\r\n                    throw new Error(name + ' missing ' + depName);\r\n                }\r\n            }\r\n\r\n            ret = callback ? callback.apply(defined[name], args) : undefined;\r\n\r\n            if (name) {\r\n                //If setting exports via \"module\" is in play,\r\n                //favor that over return value and exports. After that,\r\n                //favor a non-undefined return value over exports use.\r\n                if (cjsModule && cjsModule.exports !== undef &&\r\n                        cjsModule.exports !== defined[name]) {\r\n                    defined[name] = cjsModule.exports;\r\n                } else if (ret !== undef || !usingExports) {\r\n                    //Use the return value from the function.\r\n                    defined[name] = ret;\r\n                }\r\n            }\r\n        } else if (name) {\r\n            //May just be an object definition for the module. Only\r\n            //worry about defining if have a module name.\r\n            defined[name] = callback;\r\n        }\r\n    };\r\n\r\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\r\n        if (typeof deps === \"string\") {\r\n            if (handlers[deps]) {\r\n                //callback in this case is really relName\r\n                return handlers[deps](callback);\r\n            }\r\n            //Just return the module wanted. In this scenario, the\r\n            //deps arg is the module name, and second arg (if passed)\r\n            //is just the relName.\r\n            //Normalize module name, if it contains . or ..\r\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\r\n        } else if (!deps.splice) {\r\n            //deps is a config object, not an array.\r\n            config = deps;\r\n            if (config.deps) {\r\n                req(config.deps, config.callback);\r\n            }\r\n            if (!callback) {\r\n                return;\r\n            }\r\n\r\n            if (callback.splice) {\r\n                //callback is an array, which means it is a dependency list.\r\n                //Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = relName;\r\n                relName = null;\r\n            } else {\r\n                deps = undef;\r\n            }\r\n        }\r\n\r\n        //Support require(['a'])\r\n        callback = callback || function () {};\r\n\r\n        //If relName is a function, it is an errback handler,\r\n        //so remove it.\r\n        if (typeof relName === 'function') {\r\n            relName = forceSync;\r\n            forceSync = alt;\r\n        }\r\n\r\n        //Simulate async callback;\r\n        if (forceSync) {\r\n            main(undef, deps, callback, relName);\r\n        } else {\r\n            //Using a non-zero value because of concern for what old browsers\r\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\r\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\r\n            //If want a value immediately, use require('id') instead -- something\r\n            //that works in almond on the global level, but not guaranteed and\r\n            //unlikely to work in other AMD implementations.\r\n            setTimeout(function () {\r\n                main(undef, deps, callback, relName);\r\n            }, 4);\r\n        }\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Just drops the config on the floor, but returns req in case\r\n     * the config return value is used.\r\n     */\r\n    req.config = function (cfg) {\r\n        return req(cfg);\r\n    };\r\n\r\n    /**\r\n     * Expose module registry for debugging and tooling\r\n     */\r\n    requirejs._defined = defined;\r\n\r\n    define = function (name, deps, callback) {\r\n        if (typeof name !== 'string') {\r\n            throw new Error('See almond README: incorrect module build, no module name');\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!deps.splice) {\r\n            //deps is not an array, so probably means\r\n            //an object literal or factory function for\r\n            //the value. Adjust args.\r\n            callback = deps;\r\n            deps = [];\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\r\n            waiting[name] = [name, deps, callback];\r\n        }\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n}());\r\n\r\ndefine(\"../node_modules/almond/almond\", function(){});\r\n\r\n//zebra-style class system, see zebkit.org\r\ndefine('struct_typesystem',[],function() {\r\n  \"use strict\";\r\n  \r\n  var exports = {};\r\n  \r\n  function ClassGetter(func) {\r\n    this.func = func;\r\n  }\r\n  function ClassSetter(func) {\r\n    this.func = func;\r\n  }\r\n  \r\n  var prototype_idgen = 1;\r\n  var defined_classes = exports.defined_classes = [];\r\n\r\n  var StaticMethod = function StaticMethod(func) {\r\n    this.func = func;\r\n  };\r\n  \r\n  //parent is optional\r\n  var handle_statics = function(cls, methods, parent) {\r\n    for (var i=0; i<methods.length; i++) {\r\n      var m = methods[i];\r\n      \r\n      if (m instanceof StaticMethod) {\r\n        cls[m.func.name] = m.func;\r\n      }\r\n    }\r\n    \r\n    //inherit from parent too.\r\n    //only inherit static methods added to parent with this module, though\r\n    if (parent != undefined) {\r\n      for (var k in parent) {\r\n        var v = parent[k];\r\n        \r\n        if ((typeof v == \"object\"|| typeof v == \"function\")\r\n             && \"_is_static_method\" in v && !(k in cls)) \r\n        {\r\n          cls[k] = v;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var Class = exports.Class = function Class(methods) {\r\n    var construct = undefined;\r\n    var parent = undefined;\r\n    \r\n    if (arguments.length > 1) {\r\n      //a parent was passed in\r\n      \r\n      parent = methods;\r\n      methods = arguments[1];\r\n    }\r\n    \r\n    for (var i=0; i<methods.length; i++) {\r\n      var f = methods[i];\r\n      \r\n      if (f.name == \"constructor\") {\r\n        construct = f;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (construct == undefined) {\r\n      console.trace(\"Warning, constructor was not defined\", methods);\r\n      \r\n      if (parent != undefined) {\r\n        construct = function() {\r\n          parent.apply(this, arguments);\r\n        }\r\n      } else {\r\n        construct = function() {\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (parent != undefined) {\r\n      construct.prototype = Object.create(parent.prototype);\r\n    }\r\n    \r\n    construct.prototype.__prototypeid__ = prototype_idgen++;\r\n    construct.__keystr__ = function() {\r\n      return this.prototype.__prototypeid__;\r\n    }\r\n    \r\n    construct.__parent__ = parent;\r\n    construct.__statics__ = [];\r\n    \r\n    var getters = {};\r\n    var setters = {};\r\n    var getset = {};\r\n    \r\n    //handle getters/setters\r\n    for (var i=0; i<methods.length; i++) {\r\n      var f = methods[i];\r\n      if (f instanceof ClassSetter) {\r\n        setters[f.func.name] = f.func;\r\n        getset[f.func.name] = 1;\r\n      } else if (f instanceof ClassGetter) {\r\n        getters[f.func.name] = f.func;\r\n        getset[f.func.name] = 1;\r\n      }\r\n    }\r\n    \r\n    for (var k in getset) {\r\n      var def = {\r\n        enumerable   : true,\r\n        configurable : true,\r\n        get : getters[k],\r\n        set : setters[k]\r\n      }\r\n      \r\n      Object.defineProperty(construct.prototype, k, def);\r\n    }\r\n    \r\n    handle_statics(construct, methods, parent);\r\n    \r\n    if (parent != undefined)\r\n      construct.__parent__ = parent;\r\n    \r\n    for (var i=0; i<methods.length; i++) {\r\n      var f = methods[i];\r\n      \r\n      if (f instanceof StaticMethod || f instanceof ClassGetter || f instanceof ClassSetter)\r\n        continue;\r\n\r\n      construct.prototype[f.name] = f;\r\n    }\r\n    \r\n    return construct;\r\n  }\r\n  \r\n  Class.getter = function(func) {\r\n    return new ClassGetter(func);\r\n  }\r\n  Class.setter = function(func) {\r\n    return new ClassSetter(func);\r\n  }\r\n  \r\n  Class.static_method = function(func) {\r\n    func._is_static_method = true;\r\n    \r\n    return new StaticMethod(func);\r\n  }\r\n  \r\n  var EmptySlot = {};\r\n  \r\n  var set = exports.set = Class([\r\n    function constructor(input) {\r\n      this.items = [];\r\n      this.keys = {};\r\n      this.freelist = [];\r\n      \r\n      this.length = 0;\r\n      \r\n      if (input != undefined) {\r\n        input.forEach(function(item) {\r\n          this.add(item);\r\n        }, this);\r\n      }\r\n    },\r\n    \r\n    function add(item) {\r\n      var key = item.__keystr__();\r\n      \r\n      if (key in this.keys) return;\r\n      \r\n      if (this.freelist.length > 0) {\r\n        var i = this.freelist.pop();\r\n        \r\n        this.keys[key] = i;\r\n        items[i] = i;\r\n      } else {\r\n        var i = this.items.length;\r\n        \r\n        this.keys[key] = i;\r\n        this.items.push(item);\r\n      }\r\n      \r\n      this.length++;\r\n    },\r\n    \r\n    function remove(item) {\r\n      var key = item.__keystr__();\r\n      \r\n      if (!(key in this.keys)) {\r\n        console.trace(\"Warning, item\", item, \"is not in set\");\r\n        return;\r\n      }\r\n      \r\n      var i = this.keys[key];\r\n      this.freelist.push(i);\r\n      this.items[i] = EmptySlot;\r\n      \r\n      delete this.items[i];\r\n      this.length--;\r\n    },\r\n    \r\n    function has(item) {\r\n      return item.__keystr__() in this.keys;\r\n    },\r\n    \r\n    function forEach(func, thisvar) {\r\n      for (var i=0; i<this.items.length; i++) {\r\n        var item = this.items[i];\r\n        \r\n        if (item === EmptySlot) \r\n          continue;\r\n          \r\n        thisvar != undefined ? func.call(thisvar, time) : func(item);\r\n      }\r\n    }\r\n  ]);\r\n\r\n  return exports;\r\n});\r\n\r\ndefine('struct_util',[\r\n  \"struct_typesystem\"\r\n], function(struct_typesystem) {\r\n  \"use strict\";\r\n  \r\n  var Class = struct_typesystem.Class;\r\n  \r\n  var exports = {};\r\n  var _o_basic_types = {\"String\" : 0, \"Number\" : 0, \"Array\" : 0, \"Function\" : 0};\r\n  \r\n  function is_obj_lit(obj) {\r\n    if (obj.constructor.name in _o_basic_types)\r\n      return false;\r\n      \r\n    if (obj.constructor.name == \"Object\")\r\n      return true;\r\n    if (obj.prototype == undefined)\r\n      return true;\r\n    \r\n    return false;\r\n  }\r\n  \r\n  function set_getkey(obj) {\r\n    if (typeof obj == \"number\" || typeof obj == \"boolean\")\r\n      return \"\"+obj;\r\n    else if (typeof obj == \"string\")\r\n      return obj;\r\n    else\r\n      return obj.__keystr__();\r\n  }\r\n  \r\n  var set = exports.set = Class([\r\n    function constructor(input) {\r\n      this.items = [];\r\n      this.keys = {};\r\n      this.freelist = [];\r\n      \r\n      this.length = 0;\r\n      \r\n      if (input != undefined && input instanceof Array) {\r\n        for (var i=0; i<input.length; i++) {\r\n          this.add(input[i]);\r\n        }\r\n      } else if (input != undefined && input.forEach != undefined) {\r\n        input.forEach(function(item) {\r\n          this.add(input[i]);\r\n        }, this);\r\n      }\r\n  },\r\n  function add(obj) {\r\n      var key = set_getkey(obj);\r\n      if (key in this.keys) return;\r\n      \r\n      if (this.freelist.length > 0) {\r\n          var i = this.freelist.pop();\r\n          this.keys[key] = i;\r\n          this.items[i] = obj;\r\n      } else {\r\n        this.keys[key] = this.items.length;\r\n        this.items.push(obj);\r\n      }\r\n      \r\n      this.length++;\r\n    },\r\n    function remove(obj, raise_error) {\r\n      var key = set_getkey(obj);\r\n      \r\n      if (!(keystr in this.keys)) {\r\n        if (raise_error)\r\n          throw new Error(\"Object not in set\");\r\n        else\r\n          console.trace(\"Object not in set\", obj);\r\n        return;\r\n      }\r\n      \r\n      var i = this.keys[keystr];\r\n      \r\n      this.freelist.push(i);\r\n      this.items[i] = undefined;\r\n      \r\n      delete this.keys[keystr];\r\n      this.length--;\r\n    },\r\n    \r\n    function has(obj) {\r\n      return set_getkey(obj) in this.keys;\r\n    },\r\n    \r\n    function forEach(func, thisvar) {\r\n      for (var i=0; i<this.items.length; i++) {\r\n        var item = this.items[i];\r\n        \r\n        if (item == undefined) continue;\r\n        \r\n        if (thisvar != undefined)\r\n          func.call(thisvar, item);\r\n        else\r\n          func(item);\r\n      }\r\n    }\r\n  ]);\r\n  \r\n  var IDGen = exports.IDGen = Class([\r\n    function constructor() {\r\n      this.cur_id = 1;\r\n    },\r\n    \r\n    function gen_id() {\r\n      return this.cur_id++;\r\n    },\r\n    \r\n    Class.static_method(function fromSTRUCT(reader) {\r\n      var ret = new IDGen();\r\n      reader(ret);\r\n      return ret;\r\n    })\r\n  ]);\r\n  \r\n  IDGen.STRUCT = [\r\n    \"struct_util.IDGen {\",\r\n    \"  cur_id : int;\",\r\n    \"}\"\r\n  ].join(\"\\n\");\r\n  \r\n  return exports;\r\n});\r\n\r\ndefine('struct_binpack',[\r\n  \"struct_typesystem\", \"struct_util\"\r\n], function(struct_typesystem, struct_util) {\r\n  var exports = {};\r\n  \r\n  window.STRUCT_ENDIAN = true; //little endian\r\n  \r\n  var Class = struct_typesystem.Class;\r\n  \r\n  var temp_dataview = new DataView(new ArrayBuffer(16));\r\n  var uint8_view = new Uint8Array(temp_dataview.buffer);\r\n\r\n  var unpack_context = exports.unpack_context = Class([\r\n    function constructor() {\r\n      this.i = 0;\r\n    }\r\n  ]);\r\n  \r\n  var pack_byte = exports.pack_byte = function(array, val) {\r\n    array.push(val);\r\n  }\r\n  \r\n  var pack_bytes = exports.pack_bytes = function(array, bytes) {\r\n    for (var i=0; i<bytes.length; i++) {\r\n      array.push(bytes[i]);\r\n    }\r\n  }\r\n  \r\n  var pack_int = exports.pack_int = function(array, val) {\r\n    temp_dataview.setInt32(0, val, STRUCT_ENDIAN);\r\n    \r\n    array.push(uint8_view[0]);\r\n    array.push(uint8_view[1]);\r\n    array.push(uint8_view[2]);\r\n    array.push(uint8_view[3]);\r\n  }\r\n  \r\n  exports.pack_float = function(array, val) {\r\n    temp_dataview.setFloat32(0, val, STRUCT_ENDIAN);\r\n    \r\n    array.push(uint8_view[0]);\r\n    array.push(uint8_view[1]);\r\n    array.push(uint8_view[2]);\r\n    array.push(uint8_view[3]);\r\n  }\r\n  \r\n  exports.pack_double = function(array, val) {\r\n    temp_dataview.setFloat64(0, val, STRUCT_ENDIAN);\r\n    \r\n    array.push(uint8_view[0]);\r\n    array.push(uint8_view[1]);\r\n    array.push(uint8_view[2]);\r\n    array.push(uint8_view[3]);\r\n    array.push(uint8_view[4]);\r\n    array.push(uint8_view[5]);\r\n    array.push(uint8_view[6]);\r\n    array.push(uint8_view[7]);\r\n  }\r\n  \r\n  exports.pack_short = function(array, val) {\r\n    temp_dataview.setInt16(0, val, STRUCT_ENDIAN);\r\n    \r\n    array.push(uint8_view[0]);\r\n    array.push(uint8_view[1]);\r\n  }\r\n\r\n  var encode_utf8 = exports.encode_utf8 = function encode_utf8(arr, str) {\r\n    for (var i=0; i<str.length; i++) {\r\n      var c = str.charCodeAt(i);\r\n      \r\n      while (c != 0) {\r\n        var uc = c & 127;\r\n        c = c>>7;\r\n        \r\n        if (c != 0)\r\n          uc |= 128;\r\n        \r\n        arr.push(uc);\r\n      }\r\n    }\r\n  }\r\n\r\n  var decode_utf8 = exports.decode_utf8 = function decode_utf8(arr) {\r\n    var str = \"\"\r\n    var i = 0;\r\n    \r\n    while (i < arr.length) {\r\n      var c = arr[i];\r\n      var sum = c & 127;\r\n      var j = 0;\r\n      var lasti = i;\r\n      \r\n      while (i < arr.length && (c & 128)) {\r\n        j += 7;\r\n        i++;\r\n        c = arr[i];\r\n        \r\n        c = (c&127)<<j;\r\n        sum |= c;\r\n      }\r\n      \r\n      if (sum == 0) break;\r\n      \r\n      str += String.fromCharCode(sum);\r\n      i++;\r\n    }\r\n    \r\n    return str;\r\n  }\r\n\r\n  var test_utf8 = exports.test_utf8 = function test_utf8()\r\n  {\r\n    var s = \"a\" + String.fromCharCode(8800) + \"b\";\r\n    var arr = [];\r\n    \r\n    encode_utf8(arr, s);\r\n    var s2 = decode_utf8(arr);\r\n    \r\n    if (s != s2) {\r\n      throw new Error(\"UTF-8 encoding/decoding test failed\");\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  function truncate_utf8(arr, maxlen)\r\n  {\r\n    var len = Math.min(arr.length, maxlen);\r\n    \r\n    var last_codepoint = 0;\r\n    var last2 = 0;\r\n    \r\n    var incode = false;\r\n    var i = 0;\r\n    var code = 0;\r\n    while (i < len) {\r\n      incode = arr[i] & 128;\r\n      \r\n      if (!incode) {\r\n        last2 = last_codepoint+1;\r\n        last_codepoint = i+1;\r\n      }\r\n      \r\n      i++;\r\n    }\r\n    \r\n    if (last_codepoint < maxlen)\r\n      arr.length = last_codepoint;\r\n    else\r\n      arr.length = last2;\r\n      \r\n    return arr;\r\n  }\r\n  \r\n  var _static_sbuf_ss = new Array(2048);\r\n  var pack_static_string = exports.pack_static_string = function pack_static_string(data, str, length)\r\n  {\r\n    if (length == undefined)\r\n     throw new Error(\"'length' paremter is not optional for pack_static_string()\");\r\n    \r\n    var arr = length < 2048 ? _static_sbuf_ss : new Array();\r\n    arr.length = 0;\r\n    \r\n    encode_utf8(arr, str);\r\n    truncate_utf8(arr, length);\r\n    \r\n    for (var i=0; i<length; i++) {\r\n      if (i >= arr.length) {\r\n        data.push(0);\r\n      } else {\r\n        data.push(arr[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  var _static_sbuf = new Array(32);\r\n  \r\n  /*strings are packed as 32-bit unicode codepoints*/\r\n  var pack_string = exports.pack_string = function pack_string(data, str)\r\n  {\r\n    _static_sbuf.length = 0;\r\n    encode_utf8(_static_sbuf, str);\r\n    \r\n    pack_int(data, _static_sbuf.length);\r\n    \r\n    for (var i=0; i<_static_sbuf.length; i++) {\r\n      data.push(_static_sbuf[i]);\r\n    }\r\n  }\r\n  \r\n  var unpack_bytes = exports.unpack_bytes = function unpack_bytes(dview, uctx, len)\r\n  {\r\n    var ret = new DataView(dview.buffer.slice(uctx.i, uctx.i+len));\r\n    uctx.i += len;\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  var unpack_byte = exports.unpack_byte = function(dview, uctx) {\r\n    return dview.getUint8(uctx.i++);\r\n  }\r\n  \r\n  var unpack_int = exports.unpack_int = function(dview, uctx) {\r\n    uctx.i += 4;\r\n    return dview.getInt32(uctx.i-4, STRUCT_ENDIAN);\r\n  }\r\n  \r\n  exports.unpack_float = function(dview, uctx) {\r\n    uctx.i += 4;\r\n    return dview.getFloat32(uctx.i-4, STRUCT_ENDIAN);\r\n  }\r\n  \r\n  exports.unpack_double = function(dview, uctx) {\r\n    uctx.i += 8;\r\n    return dview.getFloat64(uctx.i-8, STRUCT_ENDIAN);\r\n  }\r\n  \r\n  exports.unpack_short = function(dview, uctx) {\r\n    uctx.i += 2;\r\n    return dview.getInt16(uctx.i-2, STRUCT_ENDIAN);\r\n  }\r\n\r\n  var _static_arr_us = new Array(32);\r\n  exports.unpack_string = function(data, uctx) {\r\n    var str = \"\"\r\n    \r\n    var slen = unpack_int(data, uctx);\r\n    var arr = slen < 2048 ? _static_arr_us : new Array(slen);\r\n    \r\n    arr.length = slen;\r\n    for (var i=0; i<slen; i++) {\r\n      arr[i] = unpack_byte(data, uctx);\r\n    }\r\n    \r\n    return decode_utf8(arr);\r\n  }\r\n  \r\n  var _static_arr_uss = new Array(2048);\r\n  exports.unpack_static_string = function unpack_static_string(data, uctx, length) {\r\n    var str = \"\";\r\n    \r\n    if (length == undefined)\r\n      throw new Error(\"'length' cannot be undefined in unpack_static_string()\");\r\n    \r\n    var arr = length < 2048 ? _static_arr_uss : new Array(length);\r\n    arr.length = 0;\r\n\r\n    var done = false;\r\n    for (var i=0; i<length; i++) {\r\n      var c = unpack_byte(data, uctx);\r\n      \r\n      if (c == 0) {\r\n        done = true;\r\n      }\r\n      \r\n      if (!done && c != 0) {\r\n        arr.push(c);\r\n        //arr.length++;\r\n      }\r\n    }\r\n    \r\n    truncate_utf8(arr, length);\r\n    return decode_utf8(arr);\r\n  }\r\n\r\n  return exports;\r\n});\r\n\r\n/*\r\nThe lexical scanner in this module was inspired by PyPLY\r\n\r\nhttp://www.dabeaz.com/ply/ply.html\r\n*/\r\n\r\ndefine('struct_parseutil',[\r\n  \"struct_typesystem\", \"struct_util\"\r\n], function(struct_typesystem, struct_util) {\r\n  \"use strict\";\r\n  var t;\r\n  \r\n  var Class = struct_typesystem.Class;\r\n  \r\n  var exports = {};\r\n  exports.token = Class([\r\n    function constructor(type, val, lexpos, lineno, lexer, parser) {\r\n      this.type = type;\r\n      this.value = val;\r\n      this.lexpos = lexpos;\r\n      this.lineno = lineno;\r\n      this.lexer = lexer;\r\n      this.parser = parser;\r\n    },\r\n    function toString() {\r\n      if (this.value!=undefined)\r\n        return \"token(type=\"+this.type+\", value='\"+this.value+\"')\";\r\n      else \r\n        return \"token(type=\"+this.type+\")\";\r\n    }\r\n  ]);\r\n  \r\n  exports.tokdef = Class([\r\n    function constructor(name, regexpr, func) {\r\n      this.name = name;\r\n      this.re = regexpr;\r\n      this.func = func;\r\n    }\r\n  ]);\r\n  \r\n  var PUTIL_ParseError = exports.PUTIL_ParseError = Class(Error, [\r\n    function constructor(msg) {\r\n      Error.call(this);\r\n    }\r\n  ]);\r\n  \r\n  exports.lexer = Class([\r\n    function constructor(tokdef, errfunc) {\r\n      this.tokdef = tokdef;\r\n      this.tokens = new Array();\r\n      this.lexpos = 0;\r\n      this.lexdata = \"\";\r\n      this.lineno = 0;\r\n      this.errfunc = errfunc;\r\n      this.tokints = {}\r\n      for (var i=0; i<tokdef.length; i++) {\r\n          this.tokints[tokdef[i].name] = i;\r\n      }\r\n      this.statestack = [[\"__main__\", 0]];\r\n      this.states = {\"__main__\": [tokdef, errfunc]}\r\n      this.statedata = 0;\r\n    },\r\n    function add_state(name, tokdef, errfunc) {\r\n      if (errfunc==undefined) {\r\n          errfunc = function(lexer) {\r\n            return true;\r\n          };\r\n      }\r\n      this.states[name] = [tokdef, errfunc];\r\n    },\r\n    function tok_int(name) {\r\n    },\r\n    function push_state(state, statedata) {\r\n      this.statestack.push([state, statedata]);\r\n      state = this.states[state];\r\n      this.statedata = statedata;\r\n      this.tokdef = state[0];\r\n      this.errfunc = state[1];\r\n    },\r\n    function pop_state() {\r\n      var item=this.statestack[this.statestack.length-1];\r\n      var state=this.states[item[0]];\r\n      this.tokdef = state[0];\r\n      this.errfunc = state[1];\r\n      this.statedata = item[1];\r\n    },\r\n    function input(str) {\r\n      while (this.statestack.length>1) {\r\n        this.pop_state();\r\n      }\r\n      this.lexdata = str;\r\n      this.lexpos = 0;\r\n      this.lineno = 0;\r\n      this.tokens = new Array();\r\n      this.peeked_tokens = [];\r\n    },\r\n    function error() {\r\n      if (this.errfunc != undefined && !this.errfunc(this))\r\n        return;\r\n        \r\n      console.log(\"Syntax error near line \"+this.lineno);\r\n\r\n      var next=Math.min(this.lexpos+8, this.lexdata.length);\r\n      console.log(\"  \"+this.lexdata.slice(this.lexpos, next));\r\n\r\n      throw new PUTIL_ParseError(\"Parse error\");\r\n    },\r\n    function peek() {\r\n      var tok=this.next(true);\r\n      if (tok==undefined)\r\n        return undefined;\r\n      this.peeked_tokens.push(tok);\r\n      return tok;\r\n    },\r\n    \r\n    function peeknext() {\r\n      if (this.peeked_tokens.length > 0) {\r\n        return this.peeked_tokens[0];\r\n      }\r\n      \r\n      return this.peek();\r\n    },\r\n    function at_end() {\r\n      return this.lexpos>=this.lexdata.length&&this.peeked_tokens.length==0;\r\n    },\r\n    \r\n    //ignore_peek is optional, false\r\n    function next(ignore_peek) {\r\n      if (!ignore_peek && this.peeked_tokens.length>0) {\r\n          var tok=this.peeked_tokens[0];\r\n          this.peeked_tokens.shift();\r\n          return tok;\r\n      }\r\n      \r\n      if (this.lexpos>=this.lexdata.length)\r\n        return undefined;\r\n        \r\n      var ts=this.tokdef;\r\n      var tlen=ts.length;\r\n      var lexdata=this.lexdata.slice(this.lexpos, this.lexdata.length);\r\n      var results=[];\r\n      \r\n      for (var i=0; i<tlen; i++) {\r\n          var t=ts[i];\r\n          if (t.re==undefined)\r\n            continue;\r\n          var res=t.re.exec(lexdata);\r\n          if (res!=null&&res!=undefined&&res.index==0) {\r\n              results.push([t, res]);\r\n          }\r\n      }\r\n      \r\n      var max_res=0;\r\n      var theres=undefined;\r\n      for (var i=0; i<results.length; i++) {\r\n          var res=results[i];\r\n          if (res[1][0].length>max_res) {\r\n              theres = res;\r\n              max_res = res[1][0].length;\r\n          }\r\n      }\r\n      \r\n      if (theres==undefined) {\r\n          this.error();\r\n          return ;\r\n      }\r\n      \r\n      var def=theres[0];\r\n      var token=new exports.token(def.name, theres[1][0], this.lexpos, this.lineno, this, undefined);\r\n      this.lexpos+=token.value.length;\r\n      \r\n      if (def.func) {\r\n          token = def.func(token);\r\n          if (token==undefined) {\r\n              return this.next();\r\n          }\r\n      }\r\n      \r\n      return token;\r\n    }\r\n  ]);\r\n  \r\n  exports.parser = Class([\r\n    function constructor(lexer, errfunc) {\r\n      this.lexer = lexer;\r\n      this.errfunc = errfunc;\r\n      this.start = undefined;\r\n    },\r\n    function parse(data, err_on_unconsumed) {\r\n      if (err_on_unconsumed==undefined)\r\n        err_on_unconsumed = true;\r\n        \r\n      if (data!=undefined)\r\n        this.lexer.input(data);\r\n        \r\n      var ret=this.start(this);\r\n      \r\n      if (err_on_unconsumed && !this.lexer.at_end() && this.lexer.next() != undefined) {\r\n          this.error(undefined, \"parser did not consume entire input\");\r\n      }\r\n      return ret;\r\n    },\r\n      \r\n    function input(data) {\r\n      this.lexer.input(data);\r\n    },\r\n    \r\n    function error(token, msg) {\r\n      if (msg==undefined)\r\n        msg = \"\";\r\n      if (token==undefined)\r\n        var estr=\"Parse error at end of input: \"+msg;\r\n      else \r\n        estr = \"Parse error at line \"+(token.lineno+1)+\": \"+msg;\r\n      var buf=\"1| \";\r\n      var ld=this.lexer.lexdata;\r\n      var l=1;\r\n      for (var i=0; i<ld.length; i++) {\r\n          var c=ld[i];\r\n          if (c=='\\n') {\r\n              l++;\r\n              buf+=\"\\n\"+l+\"| \";\r\n          }\r\n          else {\r\n            buf+=c;\r\n          }\r\n      }\r\n      console.log(\"------------------\");\r\n      console.log(buf);\r\n      console.log(\"==================\");\r\n      console.log(estr);\r\n      if (this.errfunc&&!this.errfunc(token)) {\r\n          return ;\r\n      }\r\n      throw new PUTIL_ParseError(estr);\r\n    },\r\n    function peek() {\r\n      var tok=this.lexer.peek();\r\n      if (tok!=undefined)\r\n        tok.parser = this;\r\n      return tok;\r\n    },\r\n    function peeknext() {\r\n      var tok=this.lexer.peeknext();\r\n      if (tok!=undefined)\r\n        tok.parser = this;\r\n      return tok;\r\n    },\r\n    function next() {\r\n      var tok=this.lexer.next();\r\n      if (tok!=undefined)\r\n        tok.parser = this;\r\n      return tok;\r\n    },\r\n    function optional(type) {\r\n      var tok=this.peek();\r\n      if (tok==undefined)\r\n        return false;\r\n      if (tok.type==type) {\r\n          this.next();\r\n          return true;\r\n      }\r\n      return false;\r\n    },\r\n    function at_end() {\r\n      return this.lexer.at_end();\r\n    },\r\n    function expect(type, msg) {\r\n      var tok=this.next();\r\n      if (msg==undefined)\r\n        msg = type;\r\n      if (tok==undefined||tok.type!=type) {\r\n          this.error(tok, \"Expected \"+msg);\r\n      }\r\n      return tok.value;\r\n    }\r\n  ]);\r\n  function test_parser() {\r\n    var basic_types=new set([\"int\", \"float\", \"double\", \"vec2\", \"vec3\", \"vec4\", \"mat4\", \"string\"]);\r\n    var reserved_tokens=new set([\"int\", \"float\", \"double\", \"vec2\", \"vec3\", \"vec4\", \"mat4\", \"string\", \"static_string\", \"array\"]);\r\n    function tk(name, re, func) {\r\n      return new exports.tokdef(name, re, func);\r\n    }\r\n    var tokens=[tk(\"ID\", /[a-zA-Z]+[a-zA-Z0-9_]*/, function(t) {\r\n      if (reserved_tokens.has(t.value)) {\r\n          t.type = t.value.toUpperCase();\r\n      }\r\n      return t;\r\n    }), tk(\"OPEN\", /\\{/), tk(\"CLOSE\", /}/), tk(\"COLON\", /:/), tk(\"JSCRIPT\", /\\|/, function(t) {\r\n      var js=\"\";\r\n      var lexer=t.lexer;\r\n      while (lexer.lexpos<lexer.lexdata.length) {\r\n        var c=lexer.lexdata[lexer.lexpos];\r\n        if (c==\"\\n\")\r\n          break;\r\n        js+=c;\r\n        lexer.lexpos++;\r\n      }\r\n      if (js.endsWith(\";\")) {\r\n          js = js.slice(0, js.length-1);\r\n          lexer.lexpos--;\r\n      }\r\n      t.value = js;\r\n      return t;\r\n    }), tk(\"LPARAM\", /\\(/), tk(\"RPARAM\", /\\)/), tk(\"COMMA\", /,/), tk(\"NUM\", /[0-9]/), tk(\"SEMI\", /;/), tk(\"NEWLINE\", /\\n/, function(t) {\r\n      t.lexer.lineno+=1;\r\n    }), tk(\"SPACE\", / |\\t/, function(t) {\r\n    })];\r\n    var __iter_rt=__get_iter(reserved_tokens);\r\n    var rt;\r\n    while (1) {\r\n      var __ival_rt=__iter_rt.next();\r\n      if (__ival_rt.done) {\r\n          break;\r\n      }\r\n      rt = __ival_rt.value;\r\n      tokens.push(tk(rt.toUpperCase()));\r\n    }\r\n    var a=\"\\n  Loop {\\n    eid : int;\\n    flag : int;\\n    index : int;\\n    type : int;\\n\\n    co : vec3;\\n    no : vec3;\\n    loop : int | eid(loop);\\n    edges : array(e, int) | e.eid;\\n\\n    loops : array(Loop);\\n  }\\n  \";\r\n    function errfunc(lexer) {\r\n      return true;\r\n    }\r\n    var lex=new exports.lexer(tokens, errfunc);\r\n    console.log(\"Testing lexical scanner...\");\r\n    lex.input(a);\r\n    var token;\r\n    while (token = lex.next()) {\r\n      console.log(token.toString());\r\n    }\r\n    var parser=new exports.parser(lex);\r\n    parser.input(a);\r\n    function p_Array(p) {\r\n      p.expect(\"ARRAY\");\r\n      p.expect(\"LPARAM\");\r\n      var arraytype=p_Type(p);\r\n      var itername=\"\";\r\n      if (p.optional(\"COMMA\")) {\r\n          itername = arraytype;\r\n          arraytype = p_Type(p);\r\n      }\r\n      p.expect(\"RPARAM\");\r\n      return {type: \"array\", data: {type: arraytype, iname: itername}}\r\n    }\r\n    function p_Type(p) {\r\n      var tok=p.peek();\r\n      if (tok.type==\"ID\") {\r\n          p.next();\r\n          return {type: \"struct\", data: \"\\\"\"+tok.value+\"\\\"\"}\r\n      }\r\n      else \r\n        if (basic_types.has(tok.type.toLowerCase())) {\r\n          p.next();\r\n          return {type: tok.type.toLowerCase()}\r\n      }\r\n      else \r\n        if (tok.type==\"ARRAY\") {\r\n          return p_Array(p);\r\n      }\r\n      else {\r\n        p.error(tok, \"invalid type \"+tok.type);\r\n      }\r\n    }\r\n    function p_Field(p) {\r\n      var field={}\r\n      console.log(\"-----\", p.peek().type);\r\n      field.name = p.expect(\"ID\", \"struct field name\");\r\n      p.expect(\"COLON\");\r\n      field.type = p_Type(p);\r\n      field.set = undefined;\r\n      field.get = undefined;\r\n      var tok=p.peek();\r\n      if (tok.type==\"JSCRIPT\") {\r\n          field.get = tok.value;\r\n          p.next();\r\n      }\r\n      tok = p.peek();\r\n      if (tok.type==\"JSCRIPT\") {\r\n          field.set = tok.value;\r\n          p.next();\r\n      }\r\n      p.expect(\"SEMI\");\r\n      return field;\r\n    }\r\n    function p_Struct(p) {\r\n      var st={}\r\n      st.name = p.expect(\"ID\", \"struct name\");\r\n      st.fields = [];\r\n      p.expect(\"OPEN\");\r\n      while (1) {\r\n        if (p.at_end()) {\r\n            p.error(undefined);\r\n        }\r\n        else \r\n          if (p.optional(\"CLOSE\")) {\r\n            break;\r\n        }\r\n        else {\r\n          st.fields.push(p_Field(p));\r\n        }\r\n      }\r\n      return st;\r\n    }\r\n    var ret=p_Struct(parser);\r\n    console.log(JSON.stringify(ret));\r\n  }\r\n  \r\n  return exports;\r\n});\r\ndefine('struct_parser',[\r\n  \"struct_parseutil\", \"struct_util\"\r\n], function(struct_parseutil, struct_util) {\r\n  \"use strict\";\r\n  \r\n  var exports = {};\r\n  \r\n  //the discontinuous id's are to make sure\r\n  //the version I originally wrote (which had a few application-specific types)\r\n  //and this one do not become totally incompatible.\r\n  var StructEnum = exports.StructEnum = {\r\n    T_INT    : 0,\r\n    T_FLOAT  : 1,\r\n    T_DOUBLE : 2,\r\n    T_STRING : 7,\r\n    T_STATIC_STRING : 8,\r\n    T_STRUCT : 9, \r\n    T_TSTRUCT : 10,\r\n    T_ARRAY   : 11,\r\n    T_ITER    : 12,\r\n    T_SHORT   : 13,\r\n    T_BYTE    : 14,\r\n    T_BOOL    : 15\r\n  };\r\n  \r\n  var StructTypes = exports.StructTypes = {\r\n    \"int\": StructEnum.T_INT, \r\n    \"float\": StructEnum.T_FLOAT, \r\n    \"double\": StructEnum.T_DOUBLE, \r\n    \"string\": StructEnum.T_STRING,\r\n    \"static_string\": StructEnum.T_STATIC_STRING, \r\n    \"struct\": StructEnum.T_STRUCT, \r\n    \"abstract\": StructEnum.T_TSTRUCT, \r\n    \"array\": StructEnum.T_ARRAY, \r\n    \"iter\": StructEnum.T_ITER,\r\n    \"short\": StructEnum.T_SHORT,\r\n    \"byte\": StructEnum.T_BYTE,\r\n    \"bool\": StructEnum.T_BOOL\r\n  };\r\n  \r\n  var StructTypeMap = exports.StructTypeMap = {};\r\n  \r\n  for (var k in StructTypes) {\r\n    StructTypeMap[StructTypes[k]] = k;\r\n  }\r\n\r\n  function gen_tabstr(t) {\r\n    var s=\"\";\r\n    for (var i=0; i<t; i++) {\r\n        s+=\"  \";\r\n    }\r\n    return s;\r\n  }\r\n  \r\n  function StructParser() {\r\n    var basic_types=new struct_util.set([\r\n      \"int\", \"float\", \"double\", \"string\", \"short\", \"byte\", \"bool\"\r\n    ]);\r\n    \r\n    var reserved_tokens=new struct_util.set([\r\n      \"int\", \"float\", \"double\", \"string\", \"static_string\", \"array\", \r\n      \"iter\", \"abstract\", \"short\", \"byte\", \"bool\"\r\n    ]);\r\n  \r\n    function tk(name, re, func) {\r\n      return new struct_parseutil.tokdef(name, re, func);\r\n    }\r\n    \r\n    var tokens=[tk(\"ID\", /[a-zA-Z_]+[a-zA-Z0-9_\\.]*/, function(t) {\r\n      if (reserved_tokens.has(t.value)) {\r\n          t.type = t.value.toUpperCase();\r\n      }\r\n      return t;\r\n    }), tk(\"OPEN\", /\\{/), tk(\"EQUALS\", /=/), tk(\"CLOSE\", /}/), tk(\"COLON\", /:/), tk(\"SOPEN\", /\\[/), tk(\"SCLOSE\", /\\]/), tk(\"JSCRIPT\", /\\|/, function(t) {\r\n      var js=\"\";\r\n      var lexer=t.lexer;\r\n      while (lexer.lexpos<lexer.lexdata.length) {\r\n        var c=lexer.lexdata[lexer.lexpos];\r\n        if (c==\"\\n\")\r\n          break;\r\n        js+=c;\r\n        lexer.lexpos++;\r\n      }\r\n      if (js.endsWith(\";\")) {\r\n          js = js.slice(0, js.length-1);\r\n          lexer.lexpos--;\r\n      }\r\n      t.value = js;\r\n      return t;\r\n    }), tk(\"LPARAM\", /\\(/), tk(\"RPARAM\", /\\)/), tk(\"COMMA\", /,/), tk(\"NUM\", /[0-9]+/), tk(\"SEMI\", /;/), tk(\"NEWLINE\", /\\n/, function(t) {\r\n      t.lexer.lineno+=1;\r\n    }), tk(\"SPACE\", / |\\t/, function(t) {\r\n    })\r\n    ];\r\n    \r\n    reserved_tokens.forEach(function(rt) {\r\n      tokens.push(tk(rt.toUpperCase()));\r\n    });\r\n    \r\n    function errfunc(lexer) {\r\n      return true;\r\n    }\r\n    \r\n    var lex=new struct_parseutil.lexer(tokens, errfunc);\r\n    var parser=new struct_parseutil.parser(lex);\r\n    \r\n    function p_Static_String(p) {\r\n      p.expect(\"STATIC_STRING\");\r\n      p.expect(\"SOPEN\");\r\n      var num=p.expect(\"NUM\");\r\n      p.expect(\"SCLOSE\");\r\n      return {type: StructEnum.T_STATIC_STRING, data: {maxlength: num}}\r\n    }\r\n    \r\n    function p_DataRef(p) {\r\n      p.expect(\"DATAREF\");\r\n      p.expect(\"LPARAM\");\r\n      var tname=p.expect(\"ID\");\r\n      p.expect(\"RPARAM\");\r\n      return {type: StructEnum.T_DATAREF, data: tname}\r\n    }\r\n    \r\n    function p_Array(p) {\r\n      p.expect(\"ARRAY\");\r\n      p.expect(\"LPARAM\");\r\n      var arraytype=p_Type(p);\r\n      \r\n      var itername=\"\";\r\n      if (p.optional(\"COMMA\")) {\r\n          itername = arraytype.data.replace(/\"/g, \"\");\r\n          arraytype = p_Type(p);\r\n      }\r\n      \r\n      p.expect(\"RPARAM\");\r\n      return {type: StructEnum.T_ARRAY, data: {type: arraytype, iname: itername}}\r\n    }\r\n    \r\n    function p_Iter(p) {\r\n      p.expect(\"ITER\");\r\n      p.expect(\"LPARAM\");\r\n      var arraytype=p_Type(p);\r\n      var itername=\"\";\r\n      \r\n      if (p.optional(\"COMMA\")) {\r\n          itername = arraytype.data.replace(/\"/g, \"\");\r\n          arraytype = p_Type(p);\r\n      }\r\n      \r\n      p.expect(\"RPARAM\");\r\n      return {type: StructEnum.T_ITER, data: {type: arraytype, iname: itername}}\r\n    }\r\n    \r\n    function p_Abstract(p) {\r\n      p.expect(\"ABSTRACT\");\r\n      p.expect(\"LPARAM\");\r\n      var type=p.expect(\"ID\");\r\n      p.expect(\"RPARAM\");\r\n      return {type: StructEnum.T_TSTRUCT, data: type}\r\n    }\r\n    \r\n    function p_Type(p) {\r\n      var tok=p.peek();\r\n      \r\n      if (tok.type==\"ID\") {\r\n          p.next();\r\n          return {type: StructEnum.T_STRUCT, data: tok.value}\r\n      } else if (basic_types.has(tok.type.toLowerCase())) {\r\n          p.next();\r\n          return {type: StructTypes[tok.type.toLowerCase()]}\r\n      } else if (tok.type==\"ARRAY\") {\r\n          return p_Array(p);\r\n      } else if (tok.type==\"ITER\") {\r\n          return p_Iter(p);\r\n      } else if (tok.type==\"STATIC_STRING\") {\r\n          return p_Static_String(p);\r\n      } else if (tok.type==\"ABSTRACT\") {\r\n          return p_Abstract(p);\r\n      } else if (tok.type==\"DATAREF\") {\r\n          return p_DataRef(p);\r\n      } else {\r\n        p.error(tok, \"invalid type \"+tok.type);\r\n      }\r\n    }\r\n    \r\n    function p_ID_or_num(p) {\r\n      let t = p.peeknext();\r\n\r\n      if (t.type == \"NUM\") {\r\n        p.next();\r\n        return t.value;\r\n      } else {\r\n        return p.expect(\"ID\", \"struct field name\");\r\n      }\r\n    }\r\n    \r\n    function p_Field(p) {\r\n      var field={}\r\n      \r\n      field.name = p_ID_or_num(p);\r\n      p.expect(\"COLON\");\r\n      \r\n      field.type = p_Type(p);\r\n      field.set = undefined;\r\n      field.get = undefined;\r\n      \r\n      var tok=p.peek();\r\n      if (tok.type==\"JSCRIPT\") {\r\n          field.get = tok.value;\r\n          p.next();\r\n      }\r\n      \r\n      tok = p.peek();\r\n      if (tok.type==\"JSCRIPT\") {\r\n          field.set = tok.value;\r\n          p.next();\r\n      }\r\n      \r\n      p.expect(\"SEMI\");\r\n      return field;\r\n    }\r\n    \r\n    function p_Struct(p) {\r\n      var st={}\r\n      \r\n      st.name = p.expect(\"ID\", \"struct name\");\r\n      \r\n      st.fields = [];\r\n      st.id = -1;\r\n      var tok=p.peek();\r\n      var id=-1;\r\n      if (tok.type==\"ID\"&&tok.value==\"id\") {\r\n          p.next();\r\n          p.expect(\"EQUALS\");\r\n          st.id = p.expect(\"NUM\");\r\n      }\r\n      \r\n      p.expect(\"OPEN\");\r\n      while (1) {\r\n        if (p.at_end()) {\r\n            p.error(undefined);\r\n        }\r\n        else \r\n          if (p.optional(\"CLOSE\")) {\r\n            break;\r\n        }\r\n        else {\r\n          st.fields.push(p_Field(p));\r\n        }\r\n      }\r\n      return st;\r\n    }\r\n    parser.start = p_Struct;\r\n    return parser;\r\n  }\r\n  \r\n  exports.struct_parse = StructParser();\r\n   \r\n  return exports;\r\n});\r\n\r\ndefine('struct_intern',[\r\n  \"struct_util\", \"struct_binpack\", \"struct_parseutil\", \"struct_typesystem\", \"struct_parser\"\r\n], function(struct_util, struct_binpack, struct_parseutil, struct_typesystem, struct_parser) {\r\n  \"use strict\";\r\n\r\n  var exports = {};\r\n  \r\n  /*\r\n  \r\n  class SomeClass {\r\n    static newSTRUCT() {\r\n      //returns a new, empty instance of SomeClass\r\n    }\r\n    \r\n    loadSTRUCT(reader) {\r\n      reader(this); //reads data into this instance\r\n    }\r\n    \r\n    //the old api, that both creates and reads\r\n    static fromSTRUCT(reader) {\r\n      let ret = new SomeClass();\r\n      reader(ret);\r\n      return ret;\r\n    }\r\n  }\r\n  SomeClass.STRUCT = `\r\n  SomeClass {\r\n  }\r\n  `\r\n  nstructjs.manager.add_class(SomeClass);\r\n  \r\n  */\r\n  var StructTypeMap = struct_parser.StructTypeMap;\r\n  var StructTypes = struct_parser.StructTypes;\r\n  var Class = struct_typesystem.Class;\r\n  \r\n  var struct_parse = struct_parser.struct_parse;\r\n  var StructEnum = struct_parser.StructEnum;\r\n  \r\n  var _static_envcode_null=\"\";\r\n  var debug_struct=0;\r\n  var packdebug_tablevel=0;\r\n  \r\n  function gen_tabstr(tot) {\r\n    var ret = \"\";\r\n    \r\n    for (var i=0; i<tot; i++) {\r\n      ret += \" \";\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  if (debug_struct) {\r\n      var packer_debug=function(msg) {\r\n        if (msg!=undefined) {\r\n            var t=gen_tabstr(packdebug_tablevel);\r\n            console.log(t+msg);\r\n        } else {\r\n          console.log(\"Warning: undefined msg\");\r\n        }\r\n      };\r\n      var packer_debug_start=function(funcname) {\r\n        packer_debug(\"Start \"+funcname);\r\n        packdebug_tablevel++;\r\n      };\r\n      \r\n      var packer_debug_end=function(funcname) {\r\n        packdebug_tablevel--;\r\n        packer_debug(\"Leave \"+funcname);\r\n      };\r\n  }\r\n  else {\r\n    var packer_debug=function() {};\r\n    var packer_debug_start=function() {};\r\n    var packer_debug_end=function() {};\r\n  }\r\n  \r\n  var _ws_env=[[undefined, undefined]];\r\n  \r\n  var pack_callbacks=[\r\n  function pack_int(data, val) {\r\n    packer_debug(\"int \"+val);\r\n    \r\n    struct_binpack.pack_int(data, val);\r\n  }, function pack_float(data, val) {\r\n    packer_debug(\"float \"+val);\r\n    \r\n    struct_binpack.pack_float(data, val);\r\n  }, function pack_double(data, val) {\r\n    packer_debug(\"double \"+val);\r\n    \r\n    struct_binpack.pack_double(data, val);\r\n  }, 0, 0, 0, 0,\r\n  function pack_string(data, val) {\r\n    if (val==undefined)\r\n      val = \"\";\r\n    packer_debug(\"string: \"+val);\r\n    packer_debug(\"int \"+val.length);\r\n    \r\n    struct_binpack.pack_string(data, val);\r\n  }, function pack_static_string(data, val, obj, thestruct, field, type) {\r\n    if (val==undefined)\r\n      val = \"\";\r\n    packer_debug(\"static_string: '\"+val+\"' length=\"+type.data.maxlength);\r\n    \r\n    struct_binpack.pack_static_string(data, val, type.data.maxlength);\r\n  }, function pack_struct(data, val, obj, thestruct, field, type) {\r\n    packer_debug_start(\"struct \"+type.data);\r\n    \r\n    thestruct.write_struct(data, val, thestruct.get_struct(type.data));\r\n    \r\n    packer_debug_end(\"struct\");\r\n  }, function pack_tstruct(data, val, obj, thestruct, field, type) {\r\n    var cls=thestruct.get_struct_cls(type.data);\r\n    var stt=thestruct.get_struct(type.data);\r\n    \r\n    //make sure inheritance is correct\r\n    if (val.constructor.structName!=type.data && (val instanceof cls)) {\r\n        //if (DEBUG.Struct) {\r\n        //    console.log(val.constructor.structName+\" inherits from \"+cls.structName);\r\n        //}\r\n        stt = thestruct.get_struct(val.constructor.structName);\r\n    } else if (val.constructor.structName==type.data) {\r\n        stt = thestruct.get_struct(type.data);\r\n    } else {\r\n      console.trace();\r\n      throw new Error(\"Bad struct \"+val.constructor.structName+\" passed to write_struct\");\r\n    }\r\n    \r\n    if (stt.id==0) {\r\n    }\r\n    \r\n    packer_debug_start(\"tstruct '\"+stt.name+\"'\");\r\n    packer_debug(\"int \"+stt.id);\r\n    \r\n    struct_binpack.pack_int(data, stt.id);\r\n    thestruct.write_struct(data, val, stt);\r\n    \r\n    packer_debug_end(\"tstruct\");\r\n  }, function pack_array(data, val, obj, thestruct, field, type) {\r\n    packer_debug_start(\"array\");\r\n    \r\n    if (val==undefined) {\r\n        console.trace();\r\n        console.log(\"Undefined array fed to struct struct packer!\");\r\n        console.log(\"Field: \", field);\r\n        console.log(\"Type: \", type);\r\n        console.log(\"\");\r\n        packer_debug(\"int 0\");\r\n        struct_binpack.pack_int(data, 0);\r\n        return ;\r\n    }\r\n    \r\n    packer_debug(\"int \"+val.length);\r\n    struct_binpack.pack_int(data, val.length);\r\n    \r\n    var d=type.data;\r\n    \r\n    var itername = d.iname;\r\n    var type2 = d.type;\r\n    \r\n    var env=_ws_env;\r\n    for (var i=0; i<val.length; i++) {\r\n        var val2=val[i];\r\n        if (itername!=\"\"&&itername!=undefined&&field.get) {\r\n            env[0][0] = itername;\r\n            env[0][1] = val2;\r\n            val2 = thestruct._env_call(field.get, obj, env);\r\n        }\r\n        var f2={type: type2, get: undefined, set: undefined};\r\n        do_pack(data, val2, obj, thestruct, f2, type2);\r\n    }\r\n    packer_debug_end(\"array\");\r\n  }, function pack_iter(data, val, obj, thestruct, field, type) {\r\n    //this was originally implemented to use ES6 iterators.\r\n    \r\n    packer_debug_start(\"iter\");\r\n    \r\n    if (val==undefined || val.forEach == undefined) {\r\n        console.trace();\r\n        console.log(\"Undefined iterable list fed to struct struct packer!\", val);\r\n        console.log(\"Field: \", field);\r\n        console.log(\"Type: \", type);\r\n        console.log(\"\");\r\n        packer_debug(\"int 0\");\r\n        struct_binpack.pack_int(data, 0);\r\n        return ;\r\n    }\r\n    \r\n    var len  = 0.0;\r\n    val.forEach(function(val2) {\r\n      len++;\r\n    }, this);\r\n    \r\n    packer_debug(\"int \"+len);\r\n    struct_binpack.pack_int(data, len);\r\n    \r\n    var d=type.data, itername=d.iname, type2=d.type;\r\n    var env=_ws_env;\r\n    \r\n    var i = 0;\r\n    val.forEach(function(val2) {\r\n      if (i >= len) {\r\n        console.trace(\"Warning: iterator returned different length of list!\", val, i);\r\n        return;\r\n      }\r\n      \r\n      if (itername!=\"\"&&itername!=undefined&&field.get) {\r\n          env[0][0] = itername;\r\n          env[0][1] = val2;\r\n          val2 = thestruct._env_call(field.get, obj, env);\r\n      }\r\n      \r\n      var f2={type: type2, get: undefined, set: undefined};\r\n      do_pack(data, val2, obj, thestruct, f2, type2);\r\n      \r\n      i++;\r\n    }, this);\r\n    \r\n    packer_debug_end(\"iter\");\r\n  }, function pack_short(data, val) {\r\n    packer_debug(\"short \"+val);\r\n    \r\n    struct_binpack.pack_short(data, Math.floor(val));\r\n  }, function pack_byte(data, val) {\r\n    packer_debug(\"byte \"+val);\r\n    \r\n    struct_binpack.pack_byte(data, Math.floor(val));\r\n  }, function pack_bool(data, val) {\r\n    packer_debug(\"bool \"+val);\r\n    \r\n    struct_binpack.pack_byte(data, !!val);\r\n  }];\r\n  \r\n  function do_pack(data, val, obj, thestruct, field, type) {\r\n    pack_callbacks[field.type.type](data, val, obj, thestruct, field, type);\r\n  \r\n  }\r\n  \r\n  function define_empty_class(name) {\r\n    var cls = function() {\r\n    };\r\n    \r\n    cls.prototype = Object.create(Object.prototype);\r\n    cls.constructor = cls.prototype.constructor = cls;\r\n    \r\n    cls.STRUCT = name+\" {\\n  }\\n\";\r\n    cls.structName = name;\r\n    \r\n    cls.prototype.loadSTRUCT = function (reader) {\r\n      reader(this);\r\n    }\r\n    \r\n    cls.newSTRUCT = function() {\r\n      return new this();\r\n    }\r\n    \r\n    return cls;\r\n  }\r\n      \r\n  var STRUCT=exports.STRUCT = Class([\r\n    function constructor() {\r\n      this.idgen = new struct_util.IDGen();\r\n\r\n      this.structs = {}\r\n      this.struct_cls = {}\r\n      this.struct_ids = {}\r\n\r\n      this.compiled_code = {}\r\n      this.null_natives = {}\r\n    \r\n      function define_null_native(name, cls) {\r\n        var obj = define_empty_class(name);\r\n        \r\n        var stt=struct_parse.parse(obj.STRUCT);\r\n        \r\n        stt.id = this.idgen.gen_id();\r\n        \r\n        this.structs[name] = stt;\r\n        this.struct_cls[name] = cls;\r\n        this.struct_ids[stt.id] = stt;\r\n        \r\n        this.null_natives[name] = 1;\r\n      }\r\n      \r\n      define_null_native.call(this, \"Object\", Object);\r\n    }, \r\n    \r\n    function forEach(func, thisvar) {\r\n      for (var k in this.structs) {\r\n        var stt = this.structs[k];\r\n        \r\n        if (thisvar != undefined)\r\n          func.call(thisvar, stt);\r\n        else\r\n          func(stt);\r\n      }\r\n    },\r\n    \r\n    //defined_classes is an array of class constructors\r\n    //with STRUCT scripts, *OR* another STRUCT instance\r\n    //\r\n    //defaults to structjs.manager\r\n    function parse_structs(buf, defined_classes) {\r\n      if (defined_classes === undefined) {\r\n        defined_classes = exports.manager;\r\n      }\r\n      \r\n      if (defined_classes instanceof STRUCT) {\r\n        var struct2 = defined_classes;\r\n        defined_classes = [];\r\n        \r\n        for (var k in struct2.struct_cls) {\r\n          defined_classes.push(struct2.struct_cls[k]);\r\n        }\r\n      }\r\n      \r\n      if (defined_classes == undefined) {\r\n        defined_classes = [];\r\n        for (var k in exports.manager.struct_cls) {\r\n          defined_classes.push(exports.manager.struct_cls[k]);\r\n        }\r\n      }\r\n      \r\n      var clsmap={}\r\n      \r\n      for (var i=0; i<defined_classes.length; i++) {\r\n        var cls = defined_classes[i];\r\n        \r\n        if (cls.structName == undefined && cls.STRUCT != undefined) {\r\n          var stt=struct_parse.parse(cls.STRUCT.trim());\r\n          cls.structName = stt.name;\r\n        } else if (cls.structName == undefined && cls.name != \"Object\") {\r\n          console.log(\"Warning, bad class in registered class list\", cls.name, cls);\r\n          continue;\r\n        }\r\n        \r\n        clsmap[cls.structName] = defined_classes[i];\r\n      }\r\n      \r\n      struct_parse.input(buf);\r\n      \r\n      while (!struct_parse.at_end()) {\r\n        var stt=struct_parse.parse(undefined, false);\r\n        \r\n        if (!(stt.name in clsmap)) {\r\n            if (!(stt.name in this.null_natives))\r\n              console.log(\"WARNING: struct \"+stt.name+\" is missing from class list.\");\r\n\r\n            var dummy = define_empty_class(stt.name);\r\n            \r\n            dummy.STRUCT = STRUCT.fmt_struct(stt);\r\n            dummy.structName = stt.name;\r\n            \r\n            dummy.prototype.structName = dummy.name;\r\n            \r\n            this.struct_cls[dummy.structName] = dummy;\r\n            this.struct_cls[dummy.structName] = stt;\r\n            \r\n            if (stt.id!=-1)\r\n              this.struct_ids[stt.id] = stt;\r\n        } else {\r\n          this.struct_cls[stt.name] = clsmap[stt.name];\r\n          this.structs[stt.name] = stt;\r\n          \r\n          if (stt.id!=-1)\r\n            this.struct_ids[stt.id] = stt;\r\n        }\r\n        \r\n        var tok=struct_parse.peek();\r\n        while (tok!=undefined&&(tok.value==\"\\n\" || tok.value==\"\\r\" || tok.value==\"\\t\" || tok.value==\" \")) {\r\n          tok = struct_parse.peek();\r\n        }\r\n      }\r\n    },\r\n\r\n    function add_class(cls, structName) {\r\n      if (!cls.STRUCT) {\r\n        throw new Error(\"class \" + cls.name + \" has no STRUCT script\");\r\n      }\r\n      \r\n      var stt=struct_parse.parse(cls.STRUCT);\r\n      \r\n      cls.structName = stt.name;\r\n      \r\n      //create default newSTRUCT\r\n      if (cls.newSTRUCT === undefined) {\r\n        cls.newSTRUCT = function() {\r\n          return new this();\r\n        }\r\n      }\r\n      \r\n      if (structName !== undefined) {\r\n        stt.name = cls.structName = structName;\r\n      } else if (cls.structName === undefined) {\r\n        cls.structName = stt.name;\r\n      } else if (cls.structName !== undefined) {\r\n        stt.name = cls.structName;\r\n      } else {\r\n        throw new Error(\"Missing structName parameter\");\r\n      }\r\n      \r\n      if (stt.id==-1)\r\n        stt.id = this.idgen.gen_id();\r\n        \r\n      this.structs[cls.structName] = stt;\r\n      this.struct_cls[cls.structName] = cls;\r\n      this.struct_ids[stt.id] = stt;\r\n    },\r\n\r\n    function get_struct_id(id) {\r\n      return this.struct_ids[id];\r\n    },\r\n\r\n    function get_struct(name) {\r\n      if (!(name in this.structs)) {\r\n          console.trace();\r\n          throw new Error(\"Unknown struct \"+name);\r\n      }\r\n      return this.structs[name];\r\n    },\r\n\r\n    function get_struct_cls(name) {\r\n      if (!(name in this.struct_cls)) {\r\n          console.trace();\r\n          throw new Error(\"Unknown struct \"+name);\r\n      }\r\n      return this.struct_cls[name];\r\n    },\r\n\r\n    Class.static_method(function inherit(child, parent, structName=child.name) {\r\n      if (!parent.STRUCT) {\r\n        return structName+\"{\\n\";\r\n      }\r\n      \r\n      var stt=struct_parse.parse(parent.STRUCT);\r\n      var code=structName+\"{\\n\";\r\n      code+=STRUCT.fmt_struct(stt, true);\r\n      return code;\r\n    }),\r\n    \r\n    /** invoke loadSTRUCT methods on parent objects.  note that \r\n      reader() is only called once.  it is called however.*/\r\n    Class.static_method(function Super(obj, reader) {\r\n      reader(obj);\r\n      \r\n      function reader2(obj) {\r\n      }\r\n      \r\n      let cls = obj.constructor;\r\n      let bad = cls === undefined || cls.prototype === undefined || cls.prototype.__proto__ === undefined;\r\n      \r\n      if (bad) {\r\n        return;\r\n      }\r\n      \r\n      let parent = cls.prototype.__proto__.constructor;\r\n      bad = bad || parent === undefined;\r\n      \r\n      if (!bad && parent.prototype.loadSTRUCT && parent.prototype.loadSTRUCT !== obj.loadSTRUCT) { //parent.prototype.hasOwnProperty(\"loadSTRUCT\")) {\r\n        parent.prototype.loadSTRUCT.call(obj, reader2);\r\n      }\r\n    }),\r\n    \r\n    /** deprecated.  used with old fromSTRUCT interface. */\r\n    Class.static_method(function chain_fromSTRUCT(cls, reader) {\r\n      var proto=cls.prototype;\r\n      var parent=cls.prototype.prototype.constructor;\r\n      \r\n      var obj=parent.fromSTRUCT(reader);\r\n      var keys=Object.keys(proto);\r\n      \r\n      for (var i=0; i<keys.length; i++) {\r\n          var k=keys[i];\r\n          if (k==\"__proto__\")\r\n            continue;\r\n          obj[k] = proto[k];\r\n      }\r\n      \r\n      if (proto.toString!=Object.prototype.toString)\r\n        obj.toString = proto.toString;\r\n        \r\n      return obj;\r\n    }),\r\n\r\n    Class.static_method(function fmt_struct(stt, internal_only, no_helper_js) {\r\n      if (internal_only==undefined)\r\n        internal_only = false;\r\n      if (no_helper_js==undefined)\r\n        no_helper_js = false;\r\n        \r\n      var s=\"\";\r\n      if (!internal_only) {\r\n          s+=stt.name;\r\n          if (stt.id!=-1)\r\n            s+=\" id=\"+stt.id;\r\n          s+=\" {\\n\";\r\n      }\r\n      var tab=\"  \";\r\n      function fmt_type(type) {\r\n        if (type.type==StructEnum.T_ARRAY||type.type==StructEnum.T_ITER) {\r\n            if (type.data.iname!=\"\"&&type.data.iname!=undefined) {\r\n                return \"array(\"+type.data.iname+\", \"+fmt_type(type.data.type)+\")\";\r\n            }\r\n            else {\r\n              return \"array(\"+fmt_type(type.data.type)+\")\";\r\n            }\r\n        } else  if (type.type==StructEnum.T_STATIC_STRING) {\r\n            return \"static_string[\"+type.data.maxlength+\"]\";\r\n        } else if (type.type==StructEnum.T_STRUCT) {\r\n            return type.data;\r\n        } else if (type.type==StructEnum.T_TSTRUCT) {\r\n            return \"abstract(\"+type.data+\")\";\r\n        } else {\r\n          return StructTypeMap[type.type];\r\n        }\r\n      }\r\n      \r\n      var fields=stt.fields;\r\n      for (var i=0; i<fields.length; i++) {\r\n          var f=fields[i];\r\n          s += tab + f.name+\" : \"+fmt_type(f.type);\r\n          if (!no_helper_js&&f.get!=undefined) {\r\n              s += \" | \"+f.get.trim();\r\n          }\r\n          s+=\";\\n\";\r\n      }\r\n      if (!internal_only)\r\n        s+=\"}\";\r\n      return s;\r\n    }),\r\n\r\n    function _env_call(code, obj, env) {\r\n      var envcode=_static_envcode_null;\r\n      if (env!=undefined) {\r\n          envcode = \"\";\r\n          for (var i=0; i<env.length; i++) {\r\n              envcode = \"var \"+env[i][0]+\" = env[\"+i.toString()+\"][1];\\n\"+envcode;\r\n          }\r\n      }\r\n      var fullcode=\"\";\r\n      if (envcode!==_static_envcode_null)\r\n        fullcode = envcode+code;\r\n      else \r\n        fullcode = code;\r\n      var func;\r\n      if (!(fullcode in this.compiled_code)) {\r\n          var code2=\"func = function(obj, env) { \"+envcode+\"return \"+code+\"}\";\r\n          try {\r\n            eval(code2);\r\n          }\r\n          catch (err) {\r\n              console.log(code2);\r\n              console.log(\" \");\r\n              print_stack(err);\r\n              throw err;\r\n          }\r\n          this.compiled_code[fullcode] = func;\r\n      }\r\n      else {\r\n        func = this.compiled_code[fullcode];\r\n      }\r\n      try {\r\n        return func(obj, env);\r\n      }\r\n      catch (err) {\r\n          var code2=\"func = function(obj, env) { \"+envcode+\"return \"+code+\"}\";\r\n          console.log(code2);\r\n          console.log(\" \");\r\n          print_stack(err);\r\n          throw err;\r\n      }\r\n    },\r\n    \r\n    function write_struct(data, obj, stt) {\r\n      function use_helper_js(field) {\r\n        if (field.type.type==StructEnum.T_ARRAY||field.type.type==StructEnum.T_ITER) {\r\n            return field.type.data.iname==undefined||field.type.data.iname==\"\";\r\n        }\r\n        return true;\r\n      }\r\n      \r\n      var fields=stt.fields;\r\n      var thestruct=this;\r\n      for (var i=0; i<fields.length; i++) {\r\n          var f=fields[i];\r\n          var t1=f.type;\r\n          var t2=t1.type;\r\n          \r\n          if (use_helper_js(f)) {\r\n              var val;\r\n              var type=t2;\r\n              if (f.get!=undefined) {\r\n                  val = thestruct._env_call(f.get, obj);\r\n              }\r\n              else {\r\n                val = obj[f.name];\r\n              }\r\n              do_pack(data, val, obj, thestruct, f, t1);\r\n          }\r\n          else {\r\n            var val=obj[f.name];\r\n            do_pack(data, val, obj, thestruct, f, t1);\r\n          }\r\n      }\r\n    },\r\n\r\n   function write_object(data, obj) {\r\n      var cls=obj.constructor.structName;\r\n      var stt=this.get_struct(cls);\r\n      \r\n      this.write_struct(data, obj, stt);\r\n    },\r\n\r\n    function read_object(data, cls_or_struct_id, uctx) {\r\n      var cls, stt;\r\n      \r\n      if (data instanceof Array) {\r\n        data = new DataView(new Uint8Array(data).buffer);\r\n      }\r\n      \r\n      if (typeof cls_or_struct_id == \"number\") {\r\n        cls = this.struct_cls[this.struct_ids[cls_or_struct_id].name];\r\n      } else {\r\n        cls = cls_or_struct_id;\r\n      }\r\n      \r\n      if (cls === undefined) {\r\n        throw new Error(\"bad cls_or_struct_id \" + cls_or_struct_id);\r\n      }\r\n      \r\n      stt=this.structs[cls.structName];\r\n      \r\n      if (uctx==undefined) {\r\n        uctx = new struct_binpack.unpack_context();\r\n        packer_debug(\"\\n\\n=Begin reading=\");\r\n      }\r\n      var thestruct=this;\r\n      \r\n      var unpack_funcs=[\r\n        function t_int(type) { //int\r\n          var ret=struct_binpack.unpack_int(data, uctx);\r\n          \r\n          packer_debug(\"-int \"+ret);\r\n          \r\n          return ret;\r\n        }, function t_float(type) {\r\n          var ret=struct_binpack.unpack_float(data, uctx);\r\n          \r\n          packer_debug(\"-float \"+ret);\r\n          \r\n          return ret;\r\n        }, function t_double(type) {\r\n          var ret=struct_binpack.unpack_double(data, uctx);\r\n          \r\n          packer_debug(\"-double \"+ret);\r\n          \r\n          return ret;\r\n        }, 0, 0, 0, 0, \r\n        function t_string(type) {\r\n          packer_debug_start(\"string\");\r\n          \r\n          var s=struct_binpack.unpack_string(data, uctx);\r\n          \r\n          packer_debug(\"data: '\"+s+\"'\");\r\n          packer_debug_end(\"string\");\r\n          return s;\r\n        }, function t_static_string(type) {\r\n          packer_debug_start(\"static_string\");\r\n          \r\n          var s=struct_binpack.unpack_static_string(data, uctx, type.data.maxlength);\r\n          \r\n          packer_debug(\"data: '\"+s+\"'\");\r\n          packer_debug_end(\"static_string\");\r\n          \r\n          return s;\r\n        }, function t_struct(type) {\r\n          packer_debug_start(\"struct \"+type.data);\r\n          \r\n          var cls2=thestruct.get_struct_cls(type.data);\r\n          var ret=thestruct.read_object(data, cls2, uctx);\r\n          \r\n          packer_debug_end(\"struct\");\r\n          return ret;\r\n        }, function t_tstruct(type) {\r\n          packer_debug_start(\"tstruct\");\r\n          \r\n          var id=struct_binpack.unpack_int(data, uctx);\r\n          \r\n          packer_debug(\"-int \"+id);\r\n          if (!(id in thestruct.struct_ids)) {\r\n              packer_debug(\"struct id: \"+id);\r\n              console.trace();\r\n              console.log(id);\r\n              console.log(thestruct.struct_ids);\r\n              packer_debug_end(\"tstruct\");\r\n              throw new Error(\"Unknown struct type \"+id+\".\");\r\n          }\r\n          \r\n          var cls2=thestruct.get_struct_id(id);\r\n          \r\n          packer_debug(\"struct name: \"+cls2.name);\r\n          cls2 = thestruct.struct_cls[cls2.name];\r\n          \r\n          var ret=thestruct.read_object(data, cls2, uctx);\r\n          \r\n          packer_debug_end(\"tstruct\");\r\n          return ret;\r\n        }, function t_array(type) {\r\n          packer_debug_start(\"array\");\r\n          \r\n          var len=struct_binpack.unpack_int(data, uctx);\r\n          packer_debug(\"-int \"+len);\r\n          \r\n          var arr=new Array(len);\r\n          for (var i=0; i<len; i++) {\r\n              arr[i] = unpack_field(type.data.type);\r\n          }\r\n          \r\n          packer_debug_end(\"array\");\r\n          return arr;\r\n        }, function t_iter(type) {\r\n          packer_debug_start(\"iter\");\r\n          \r\n          var len=struct_binpack.unpack_int(data, uctx);\r\n          packer_debug(\"-int \"+len);\r\n          \r\n          var arr=new Array(len);\r\n          for (var i=0; i<len; i++) {\r\n              arr[i] = unpack_field(type.data.type);\r\n          }\r\n          \r\n          packer_debug_end(\"iter\");\r\n          return arr;\r\n        }, function t_short(type) { //int\r\n          var ret=struct_binpack.unpack_short(data, uctx);\r\n          \r\n          packer_debug(\"-short \"+ret);\r\n          \r\n          return ret;\r\n        }, function t_byte(type) {\r\n          var ret=struct_binpack.unpack_byte(data, uctx);\r\n          \r\n          packer_debug(\"-byte \"+ret);\r\n          \r\n          return ret;\r\n        }, function t_bool(type) {\r\n          var ret=struct_binpack.unpack_byte(data, uctx);\r\n          \r\n          packer_debug(\"-bool \"+ret);\r\n          \r\n          return !!ret;\r\n        }          \r\n      ];\r\n      \r\n      function unpack_field(type) {\r\n        return unpack_funcs[type.type](type);\r\n      }\r\n      \r\n      let was_run = false;\r\n      function load(obj) {\r\n        if (was_run) {\r\n          return;\r\n        }\r\n        \r\n        was_run = true;\r\n        \r\n        var fields=stt.fields;\r\n        var flen=fields.length;\r\n        for (var i=0; i<flen; i++) {\r\n            var f=fields[i];\r\n            var val=unpack_field(f.type);\r\n            obj[f.name] = val;\r\n        }\r\n      }\r\n      \r\n      if (cls.prototype.loadSTRUCT !== undefined) {\r\n        let obj;\r\n        \r\n        if (cls.newSTRUCT !== undefined) {\r\n          obj = cls.newSTRUCT();\r\n        } else {\r\n          obj = new cls();\r\n        }\r\n        \r\n        obj.loadSTRUCT(load);\r\n        return obj;\r\n      } else if (cls.fromSTRUCT !== undefined) {\r\n        console.warn(\"Warning: class \" + cls.name + \" is using deprecated fromSTRUCT interface; use newSTRUCT/loadSTRUCT instead\");\r\n        return cls.fromSTRUCT(load);\r\n      } else { //default case, make new instance and then call load() on it\r\n        let obj;\r\n        if (cls.newSTRUCT !== undefined) {\r\n          obj = cls.newSTRUCT();\r\n        } else {\r\n          obj = new cls();\r\n        }\r\n        \r\n        load(obj);\r\n        \r\n        return obj;\r\n      }\r\n    }\r\n  ]);\r\n  \r\n  //main struct script manager\r\n  var manager = exports.manager = new STRUCT();\r\n  \r\n  //manager defaults to structjs.manager\r\n  var write_scripts = exports.write_scripts = function write_scripts(manager) {\r\n    if (manager === undefined)\r\n      manager = exports.manager;\r\n    \r\n    var buf=\"\";\r\n    \r\n    manager.forEach(function(stt) {\r\n      buf+=STRUCT.fmt_struct(stt, false, true)+\"\\n\";\r\n    });\r\n    \r\n    var buf2=buf;\r\n    buf = \"\";\r\n    \r\n    for (var i=0; i<buf2.length; i++) {\r\n        var c=buf2[i];\r\n        if (c==\"\\n\") {\r\n            buf+=\"\\n\";\r\n            var i2=i;\r\n            while (i<buf2.length&&(buf2[i]==\" \"||buf2[i]==\"\\t\"||buf2[i]==\"\\n\")) {\r\n              i++;\r\n            }\r\n            if (i!=i2)\r\n              i--;\r\n        }\r\n        else {\r\n          buf+=c;\r\n        }\r\n    }\r\n    \r\n    return buf;\r\n  }\r\n  \r\n  return exports;\r\n});\r\n\r\nif (typeof btoa == \"undefined\") {\r\n  btoa = function btoa(str) {\r\n    var buffer = new Buffer(\"\"+str, 'binary');\r\n    return buffer.toString('base64');\r\n  }\r\n  \r\n  atob = function atob(str) {\r\n    return new Buffer(str, 'base64').toString('binary');\r\n  }\r\n}\r\n\r\ndefine('struct_filehelper',[\r\n  \"struct_intern\", \"struct_util\", \"struct_binpack\", \"struct_parseutil\",\r\n  \"struct_typesystem\", \"struct_parser\"\r\n], function(structjs, struct_util, struct_binpack, struct_parseutil, \r\n            struct_typesystem, struct_parser) \r\n{\r\n  'use strict';\r\n  \r\n  var exports = {};\r\n  var Class = struct_typesystem.Class;\r\n  \r\n  /*\r\n  file format:\r\n    magic signature              : 4 bytes\r\n    file version major           : 2 bytes\r\n    file version minor           : 1 bytes\r\n    file version micro           : 1 bytes\r\n    length of struct scripts     : 4 bytes\r\n    struct scripts for this file : ...\r\n    \r\n    block:\r\n      magic signature for block              : 4 bytes\r\n      length of data  (not including header) : 4 bytes\r\n      id of struct type                      : 4 bytes\r\n      \r\n      data                                   : ...\r\n  */\r\n  \r\n  var FileParams = exports.FileParams = class FileParams {\r\n    constructor() {\r\n      this.magic = \"STRT\";\r\n      this.ext = \".bin\";\r\n      this.blocktypes = [\"DATA\"];\r\n      \r\n      this.version = {\r\n        major : 0,\r\n        minor : 0,\r\n        micro : 1\r\n      };\r\n    }\r\n  }\r\n  \r\n  //used to define blocks\r\n  var Block = exports.Block = Class([\r\n    function constructor(type_magic, data) {\r\n      this.type = type_magic;\r\n      this.data = data;\r\n    }\r\n  ]);\r\n  \r\n  var FileError = exports.FileError = class FileError {\r\n  };\r\n    \r\n  var FileHelper = exports.FileHelper = Class([\r\n    //params can be FileParams instance, or object literal\r\n    //(it will convert to FileParams)\r\n    function constructor(params) {\r\n      if (params === undefined) {\r\n        params = new FileParams();\r\n      } else {\r\n        var fp = new FileParams();\r\n        \r\n        for (var k in params) {\r\n          fp[k] = params[k];\r\n        }\r\n        params = fp;\r\n      }\r\n      \r\n      this.version = params.version;\r\n      this.blocktypes = params.blocktypes;\r\n      this.magic = params.magic;\r\n      this.ext = params.ext;\r\n      this.struct = undefined;\r\n      this.unpack_ctx = undefined;\r\n    },\r\n    \r\n    function read(dataview) {\r\n      this.unpack_ctx = new struct_binpack.unpack_context();\r\n      \r\n      var magic = struct_binpack.unpack_static_string(dataview, this.unpack_ctx, 4);\r\n      \r\n      if (magic !== this.magic) {\r\n        throw new FileError(\"corrupted file\");\r\n      }\r\n      \r\n      this.version = {};\r\n      this.version.major = struct_binpack.unpack_short(dataview, this.unpack_ctx);\r\n      this.version.minor = struct_binpack.unpack_byte(dataview, this.unpack_ctx);\r\n      this.version.micro = struct_binpack.unpack_byte(dataview, this.unpack_ctx);\r\n      \r\n      var struct = this.struct = new structjs.STRUCT();\r\n      \r\n      var scripts = struct_binpack.unpack_string(dataview, this.unpack_ctx);\r\n      this.struct.parse_structs(scripts, structjs.manager);\r\n      \r\n      var blocks = [];\r\n      var dviewlen = dataview.buffer.byteLength;\r\n      \r\n      while (this.unpack_ctx.i < dviewlen) {\r\n        //console.log(\"reading block. . .\", this.unpack_ctx.i, dviewlen);\r\n        \r\n        var type = struct_binpack.unpack_static_string(dataview, this.unpack_ctx, 4);\r\n        var datalen = struct_binpack.unpack_int(dataview, this.unpack_ctx);\r\n        var bstruct = struct_binpack.unpack_int(dataview, this.unpack_ctx);\r\n        var bdata;\r\n        \r\n        //console.log(type, datalen, bstruct);\r\n        \r\n        if (bstruct == -2) { //string data, e.g. JSON\r\n          bdata = struct_binpack.unpack_static_string(dataview, this.unpack_ctx, datalen);\r\n        } else {\r\n          bdata = struct_binpack.unpack_bytes(dataview, this.unpack_ctx, datalen);\r\n          bdata = struct.read_object(bdata, bstruct, new struct_binpack.unpack_context());\r\n        }\r\n        \r\n        var block = new Block();\r\n        block.type = type;\r\n        block.data =  bdata;\r\n        \r\n        blocks.push(block);\r\n      }\r\n      \r\n      this.blocks = blocks;\r\n      return blocks;\r\n    },\r\n    \r\n    function write(blocks) {\r\n      this.struct = structjs.manager;\r\n      this.blocks = blocks;\r\n      \r\n      var data = [];\r\n      \r\n      struct_binpack.pack_static_string(data, this.magic, 4);\r\n      struct_binpack.pack_short(data, this.version.major);\r\n      struct_binpack.pack_byte(data, this.version.minor & 255);\r\n      struct_binpack.pack_byte(data, this.version.micro & 255);\r\n      \r\n      var scripts = structjs.write_scripts();\r\n      struct_binpack.pack_string(data, scripts);\r\n      \r\n      var struct = this.struct;\r\n      \r\n      for (var block of blocks) {\r\n        if (typeof block.data == \"string\") { //string data, e.g. JSON\r\n          struct_binpack.pack_static_string(data, block.type, 4);\r\n          struct_binpack.pack_int(data, block.data.length);\r\n          struct_binpack.pack_int(data, -2); //flag as string data\r\n          struct_binpack.pack_static_string(data, block.data, block.data.length);\r\n          continue;\r\n        } \r\n        \r\n        var structName = block.data.constructor.structName;\r\n        if (structName===undefined || !(structName in struct.structs)) {\r\n          throw new Error(\"Non-STRUCTable object \" + block.data);\r\n        }\r\n        \r\n        var data2 = [];\r\n        var stt = struct.structs[structName];\r\n        \r\n        struct.write_object(data2, block.data);\r\n        \r\n        struct_binpack.pack_static_string(data, block.type, 4);\r\n        struct_binpack.pack_int(data, data2.length);\r\n        struct_binpack.pack_int(data, stt.id);\r\n        \r\n        struct_binpack.pack_bytes(data, data2);\r\n      }\r\n      \r\n      return new DataView(new Uint8Array(data).buffer);\r\n    },\r\n    \r\n    function writeBase64(blocks) {\r\n      var dataview = this.write(blocks);\r\n      \r\n      var str = \"\";\r\n      var bytes = new Uint8Array(dataview.buffer);\r\n      \r\n      for (var i=0; i<bytes.length; i++) {\r\n        str += String.fromCharCode(bytes[i]);\r\n      }\r\n      \r\n      return btoa(str);\r\n    },\r\n    \r\n    function makeBlock(type, data) {\r\n      return new Block(type, data);\r\n    },\r\n    \r\n    function readBase64(base64) {\r\n      var data = atob(base64);\r\n      var data2 = new Uint8Array(data.length);\r\n      \r\n      for (var i=0; i<data.length; i++) {\r\n        data2[i] = data.charCodeAt(i);\r\n      }\r\n      \r\n      return this.read(new DataView(data2.buffer));\r\n    }\r\n  ]);\r\n  /*\r\n    //get type data from structjs.manager\r\n    var classes = {};\r\n    structjs.manager.forEach(function(stt) {\r\n      classes[stt] \r\n    }, this);\r\n  */\r\n  \r\n  return exports;\r\n});\r\n\r\ndefine('structjs',[\r\n  \"struct_intern\", \"struct_filehelper\", \"struct_util\", \"struct_binpack\", \r\n  \"struct_parseutil\", \"struct_typesystem\", \"struct_parser\"\r\n], function(struct_intern, struct_filehelper, struct_util, struct_binpack, \r\n            struct_parseutil, struct_typesystem, struct_parser)\r\n{\r\n  \"use strict\";\r\n\r\n  var exports = {};\r\n  \r\n  var StructTypeMap = struct_parser.StructTypeMap;\r\n  var StructTypes = struct_parser.StructTypes;\r\n  var Class = struct_typesystem.Class;\r\n  \r\n  //forward struct_intern's exports\r\n  for (var k in struct_intern) {\r\n    exports[k] = struct_intern[k];\r\n  }\r\n  \r\n  //export other modules\r\n  exports.binpack = struct_binpack;\r\n  exports.util = struct_util;\r\n  exports.typesystem = struct_typesystem;\r\n  exports.parseutil = struct_parseutil;\r\n  exports.parser = struct_parser;\r\n  exports.filehelper = struct_filehelper;\r\n  \r\n  return exports;\r\n});\r\n\r\n\r\nrequire([\"structjs\"]);\r\n    //The modules for your project will be inlined above\r\n    //this snippet. Ask almond to synchronously require the\r\n    //module value for 'main' here and return it as the\r\n    //value to use for the public API for the built file.\r\n    return require('structjs');\r\n}));\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/struct.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1034,
    "kind": "file",
    "name": "scripts/theme.js",
    "content": "import {CSSFont} from \"./ui_theme.js\";\r\n\r\nexport const DefaultTheme = {\r\n  base : {\r\n    //used for by icon strips and the like\r\n    \"oneAxisPadding\" : 6,\r\n    \"oneAxisMargin\" : 6,\r\n\r\n    \"FocusOutline\" : \"rgba(100, 150, 255, 1.0)\",\r\n\r\n    \"BasePackFlag\" : 0,\r\n    \"ScreenBorderOuter\" : \"rgba(255, 255, 255, 1.0)\",\r\n    \"ScreenBorderInner\" : \"rgba(170, 170, 170, 1.0)\",\r\n\r\n    \"numslider_width\" : 24,\r\n    \"numslider_height\" : 24,\r\n\r\n    \"defaultWidth\" : 32,\r\n    \"defaultHeight\" : 32,\r\n    \r\n    \"ProgressBarBG\" : \"rgba(110, 110, 110, 1.0)\",\r\n    \"ProgressBar\" : \"rgba(75, 175, 255, 1.0)\",\r\n\r\n    \"NoteBG\" : \"rgba(220, 220, 220, 0.0)\",\r\n    \"NoteText\" : new CSSFont({\r\n      font  : \"sans-serif\",\r\n      size  : 12,\r\n      color :  \"rgba(135, 135, 135, 1.0)\",\r\n      weight : \"bold\"\r\n    }),\r\n\r\n    \"TabStrokeStyle1\" : \"rgba(200, 200, 200, 1.0)\",\r\n    \"TabStrokeStyle2\" : \"rgba(225, 225, 225, 1.0)\",\r\n    \"TabInactive\" : \"rgba(150, 150, 150, 1.0)\",\r\n    \"TabHighlight\" : \"rgba(50, 50, 50, 0.2)\",\r\n\r\n    \"DefaultPanelBG\" : \"rgba(155, 155, 155, 1.0)\",\r\n    \"InnerPanelBG\" : \"rgba(140, 140, 140, 1.0)\",\r\n\r\n    \"BoxRadius\" : 12,\r\n    \"BoxMargin\" : 4,\r\n    \"BoxDrawMargin\" : 2, //how much to shrink rects drawn by drawRoundBox\r\n    \"BoxHighlight\" : \"rgba(155, 220, 255, 1.0)\",\r\n    \"BoxDepressed\" : \"rgba(130, 130, 130, 1.0)\",\r\n    \"BoxBG\" : \"rgba(170, 170, 170, 1.0)\",\r\n    \"DisabledBG\" : \"rgba(110, 110, 110, 1.0)\",\r\n    \"BoxSubBG\" : \"rgba(175, 175, 175, 1.0)\",\r\n    \"BoxSub2BG\" : \"rgba(125, 125, 125, 1.0)\", //for panels\r\n    \"BoxBorder\" : \"rgba(255, 255, 255, 1.0)\",\r\n    \"MenuBG\" : \"rgba(250, 250, 250, 1.0)\",\r\n    \"MenuHighlight\" : \"rgba(155, 220, 255, 1.0)\",\r\n    \"AreaHeaderBG\" : \"rgba(170, 170, 170, 1.0)\",\r\n\r\n    //fonts\r\n    \"DefaultText\" : new CSSFont({\r\n      font  : \"sans-serif\",\r\n      size  : 14,\r\n      color :  \"rgba(35, 35, 35, 1.0)\",\r\n      weight : \"bold\"\r\n    }),\r\n\r\n    \"TabText\" : new CSSFont({\r\n      size     : 18,\r\n      color    : \"rgba(35, 35, 35, 1.0)\",\r\n      font     : \"sans-serif\",\r\n      //weight   : \"bold\"\r\n    }),\r\n\r\n    \"LabelText\" : new CSSFont({\r\n      size     : 13,\r\n      color    : \"rgba(75, 75, 75, 1.0)\",\r\n      font     : \"sans-serif\",\r\n      weight   : \"bold\"\r\n    }),\r\n\r\n    \"HotkeyText\" : new CSSFont({\r\n      size     : 12,\r\n      color    : \"rgba(130, 130, 130, 1.0)\",\r\n      font     : \"courier\"\r\n      //weight   : \"bold\"\r\n    }),\r\n\r\n    \"MenuText\" : new CSSFont({\r\n      size     : 12,\r\n      color    : \"rgba(25, 25, 25, 1.0)\",\r\n      font     : \"sans-serif\"\r\n      //weight   : \"bold\"\r\n    }),\r\n\r\n    \"TitleText\" : new CSSFont({\r\n      size     : 16,\r\n      color    : \"rgba(55, 55, 55, 1.0)\",\r\n      font     : \"sans-serif\",\r\n      weight   : \"bold\"\r\n    }),\r\n  },\r\n\r\n  button : {\r\n    \"defaultWidth\" : 100,\r\n    \"defaultHeight\" : 24\r\n  },\r\n  iconcheck : {\r\n\r\n  },\r\n\r\n  checkbox : {\r\n    BoxMargin : 2,\r\n    CheckSide : \"left\"\r\n  },\r\n\r\n  iconbutton : {\r\n\r\n  },\r\n\r\n  numslider : {\r\n    \"defaultWidth\" : 100,\r\n    \"defaultHeight\" : 29\r\n  },\r\n\r\n  numslider_simple : {\r\n    BoxBG : \"rgb(125, 125, 125)\",\r\n    BoxBorder : \"rgb(75, 75, 75)\",\r\n    SlideHeight : 18,\r\n    DefaultWidth : 125,\r\n    DefaultHeight : 32,\r\n    BoxRadius : 5,\r\n    TextBoxWidth : 40\r\n  },\r\n\r\n  colorfield : {\r\n    fieldsize : 32,\r\n    defaultWidth : 200,\r\n    defaultHeight : 200,\r\n    hueheight : 24,\r\n    colorBoxHeight : 24,\r\n    circleSize : 4,\r\n    DefaultPanelBG : \"rgba(170, 170, 170, 1.0)\"\r\n  },\r\n\r\n  listbox : {\r\n    DefaultPanelBG : \"rgba(230, 230, 230, 1.0)\",\r\n    ListHighlight : \"rgba(155, 220, 255, 0.5)\",\r\n    ListActive : \"rgba(200, 205, 215, 1.0)\",\r\n    width : 110,\r\n    height : 200\r\n  },\r\n\r\n  dopesheet : {\r\n    treeWidth : 100,\r\n    treeHeight : 600\r\n  },\r\n\r\n  colorpickerbutton : {\r\n    defaultWidth  : 100,\r\n    defaultHeight : 25,\r\n    defaultFont   : \"LabelText\"\r\n  },\r\n\r\n  dropbox : {\r\n    dropTextBG : \"rgba(250, 250, 250, 0.7)\" //if undefined, will use BoxBG\r\n  }\r\n};\r\n\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/theme.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1035,
    "kind": "variable",
    "name": "DefaultTheme",
    "memberof": "scripts/theme.js",
    "static": true,
    "longname": "scripts/theme.js~DefaultTheme",
    "access": "public",
    "export": true,
    "importPath": "./scripts/theme.js",
    "importStyle": "{DefaultTheme}",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "{\"base\": *, \"button\": *, \"iconcheck\": *, \"checkbox\": *, \"iconbutton\": *, \"numslider\": *, \"numslider_simple\": *, \"colorfield\": *, \"listbox\": *, \"dopesheet\": *, \"colorpickerbutton\": *, \"dropbox\": *}"
      ]
    }
  },
  {
    "__docId__": 1036,
    "kind": "file",
    "name": "scripts/toolpath.js",
    "content": "import {ToolClasses, ToolOp, ToolFlags, UndoFlags, ToolMacro} from './simple_toolsys.js';\nimport {tokdef, lexer, parser, PUTLParseError} from './parseutil.js';\nimport {DataPathError} from './controller.js';\nimport {cachering} from './util.js';\n\nexport let ToolPaths = {};\n\nexport function buildParser() {\n  let t = (name, re, func) => new tokdef(name, re, func);\n\n  let tokens = [\n    t('ID', /[a-zA-Z_$]+[a-zA-Z0-9_$]*/, (t) => {\n      if (t.value == \"true\" || t.value == \"false\") {\n        t.type = \"BOOL\";\n        t.value = t.value == \"true\";\n      }\n\n      return t;\n    }),\n    t('LPAREN', /\\(/),\n    t('RPAREN', /\\)/),\n    t('LSBRACKET', /\\[/),\n    t('RSBRACKET', /\\]/),\n    t('DOT', /\\./),\n    t('COMMA', /\\,/),\n    t('EQUALS', /\\=/),\n    t('STRLIT', /\"[^\"]*\"/, (t) => {\n      t.value = t.value.slice(1, t.value.length-1);\n      return t;\n    }),\n    t('STRLIT', /'[^']*'/, (t) => {\n      t.value = t.value.slice(1, t.value.length-1);\n      return t;\n    }),\n    t('NUMBER', /-?[0-9]+/, (t) => {\n      t.value = parseInt(t.value);\n      return t;\n    }),\n    t('NUMBER', /[0-9]+\\.[0-9]*/, (t) => {\n      t.value = parseFloat(t.value);\n      return t;\n    }),\n    t('WS', /[ \\n\\r\\t]/, (t) => undefined) //ignore whitespace\n  ];\n\n  let lexerror = (t) => {\n    console.warn(\"Parse error\");\n    return true;\n  };\n\n  let valid_datatypes = {\n    \"STRLIT\" : 1, \"NUMBER\" : 1, \"BOOL\" : 1\n  };\n\n  function p_Start(p) {\n    let args = {};\n\n    while (!p.at_end()) {\n      let keyword = p.expect(\"ID\");\n\n      p.expect(\"EQUALS\");\n\n      let t = p.next();\n      if (!(t.type in valid_datatypes)) {\n        throw new PUTLParseError(\"parse error: unexpected \" + t.type);\n      }\n\n      args[keyword] = t.value;\n    }\n\n    return args;\n  }\n\n  let lex = new lexer(tokens, lexerror)\n  let p = new parser(lex);\n  p.start = p_Start;\n\n  return p;\n}\n\nexport let Parser = buildParser();\n/*\nlet parse_rets = new cachering(() => return {\n  toolclass : undefined,\n  args : {}\n}, 64);\n//*/\n\nexport function parseToolPath(str, check_tool_exists=true) {\n  let i1 = str.search(/\\(/);\n  let i2 = str.search(/\\)/);\n  let args = \"\";\n\n  if (i1 >= 0 && i2 >= 0) {\n    args = str.slice(i1+1, i2).trim();\n    str = str.slice(0, i1).trim();\n  }\n\n  if (!(str in ToolPaths) && check_tool_exists) {\n    throw new DataPathError(\"unknown tool \" + str);\n  }\n\n  let ret = Parser.parse(args);\n\n  return {\n    toolclass : ToolPaths[str],\n    args      : ret\n  };\n}\n\nexport function testToolParser() {\n  let ret = parseToolPath(\"view3d.sometool(selectmode=1 str='str' bool=true)\", false);\n\n  return ret;\n}\n\nwindow.parseToolPath = parseToolPath;\n//window._ToolPaths = ToolPaths;\n\n//tool path parser for simple_toolsys.js\nexport function initToolPaths() {\n  for (let cls of ToolClasses) {\n    if (!cls.hasOwnProperty(\"tooldef\")) { //ignore abstract classes\n      continue;\n    }\n\n    let def = cls.tooldef();\n    let path = def.toolpath;\n\n    ToolPaths[path] = cls;\n  }\n}",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/toolpath.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1037,
    "kind": "variable",
    "name": "ToolPaths",
    "memberof": "scripts/toolpath.js",
    "static": true,
    "longname": "scripts/toolpath.js~ToolPaths",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{ToolPaths}",
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1038,
    "kind": "function",
    "name": "buildParser",
    "memberof": "scripts/toolpath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolpath.js~buildParser",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{buildParser}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1039,
    "kind": "variable",
    "name": "Parser",
    "memberof": "scripts/toolpath.js",
    "static": true,
    "longname": "scripts/toolpath.js~Parser",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{Parser}",
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1040,
    "kind": "function",
    "name": "parseToolPath",
    "memberof": "scripts/toolpath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolpath.js~parseToolPath",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{parseToolPath}",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "params": [
      {
        "name": "str",
        "types": [
          "*"
        ]
      },
      {
        "name": "check_tool_exists",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "{\"toolclass\": *, \"args\": *}"
      ]
    }
  },
  {
    "__docId__": 1041,
    "kind": "function",
    "name": "testToolParser",
    "memberof": "scripts/toolpath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolpath.js~testToolParser",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{testToolParser}",
    "description": null,
    "lineNumber": 111,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1042,
    "kind": "function",
    "name": "initToolPaths",
    "memberof": "scripts/toolpath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolpath.js~initToolPaths",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolpath.js",
    "importStyle": "{initToolPaths}",
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1043,
    "kind": "file",
    "name": "scripts/toolprop.js",
    "content": "import * as util from './util.js';\r\nimport {Vector2, Vector3, Vector4, Quat, Matrix4} from './vectormath.js';\r\nimport {ToolPropertyIF, PropTypes, PropFlags} from \"./toolprop_abstract.js\";\r\n\r\nexport {PropTypes, PropFlags} from './toolprop_abstract.js';\r\n\r\nlet first = (iter) => {\r\n  if (iter === undefined) {\r\n    return undefined;\r\n  }\r\n  \r\n  if (!(Symbol.iterator in iter)) {\r\n    for (let item in iter) {\r\n      return item;\r\n    }\r\n    \r\n    return undefined;\r\n  }\r\n  \r\n  for (let item of iter) {\r\n    return item;\r\n  }\r\n};\r\n\r\n//set PropTypes to custom type integers\r\nexport function setPropTypes(types) {\r\n  for (let k in types) {\r\n    PropTypes[k] = types[k];\r\n  }\r\n}\r\n\r\nexport const PropSubTypes = {\r\n  COLOR : 1\r\n};\r\n\r\nexport let customPropertyTypes = [];\r\n\r\nexport let PropClasses = {};\r\nfunction _addClass(cls) {\r\n  PropClasses[new cls().type] = cls;\r\n}\r\n\r\nexport class ToolProperty extends ToolPropertyIF {\r\n  constructor(type, subtype, apiname, uiname, description, flag, icon) {\r\n    super();\r\n\r\n    this.data = undefined;\r\n\r\n    if (type === undefined) {\r\n      type = this.constructor.PROP_TYPE_ID;\r\n    }\r\n\r\n    this.type = type;\r\n    this.subtype = subtype;\r\n\r\n    //is false if this property still has its default value,\r\n    //i.e. it hasn't been set by the user or anyone else\r\n    this.wasSet = false;\r\n\r\n    this.apiname = apiname;\r\n    this.uiname = uiname !== undefined ? uiname : apiname;\r\n    this.description = description;\r\n    this.flag = flag;\r\n    this.icon = icon;\r\n    \r\n    this.callbacks = {};\r\n  } \r\n\r\n  static register(cls) {\r\n    cls.PROP_TYPE_ID = util.strhash(cls.name);\r\n    PropTypes[cls.name] = cls.PROP_TYPE_ID;\r\n\r\n    customPropertyTypes.push(cls);\r\n  }\r\n\r\n  private() {\r\n    this.flag |= PropFlags.PRIVATE;\r\n    return this;\r\n  }\r\n\r\n  _fire(type, arg1, arg2) {\r\n    if (this.callbacks[type] === undefined) {\r\n      return;\r\n    }\r\n\r\n    for (let cb of this.callbacks[type]) {\r\n      cb.call(this, arg1, arg2);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  on(type, cb) {\r\n    if (this.callbacks[type] === undefined) {\r\n      this.callbacks[type] = [];\r\n    }\r\n\r\n    this.callbacks[type].push(cb);\r\n    return this;\r\n  }\r\n\r\n  off(type, cb) {\r\n    this.callbacks[type].remove(cb);\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      type : this.type,\r\n      subtype : this.subtype,\r\n      apiname : this.apiname,\r\n      uiname : this.uiname,\r\n      description : this.description,\r\n      flag : this.flag,\r\n      icon : this.icon,\r\n      data : this.data\r\n    }\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    this.type = obj.type;\r\n    this.subtype = obj.subtype;\r\n    this.apiname = obj.apiname;\r\n    this.uiname = obj.uiname;\r\n    this.description = obj.description;\r\n    this.flag = obj.flag;\r\n    this.icon = obj.icon;\r\n    this.data = obj.data;\r\n    \r\n    return this;\r\n  }\r\n  \r\n  getValue() {\r\n    return this.data;\r\n  }  \r\n  \r\n  setValue(val) {\r\n    if (this.constructor === ToolProperty) {\r\n      throw new Error(\"implement me!\");\r\n    }\r\n\r\n    this.wasSet = true;\r\n\r\n    this._fire(\"change\", val);\r\n  }\r\n  \r\n  copyTo(b) {\r\n    b.apiname = this.apiname;\r\n    b.uiname = this.uiname;\r\n    b.description = this.description;\r\n    b.flag = this.flag;\r\n    b.icon = this.icon;\r\n    b.subtype = this.subtype;\r\n\r\n    for (let k in this.callbacks) {\r\n      b.callbacks[k] = this.callbacks[k];\r\n    }\r\n  }\r\n  \r\n  copy() { //default copy method\r\n    let ret = new this.constructor();\r\n    \r\n    this.copyTo(ret);\r\n    ret.data = this.data;\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  setStep(step) {\r\n    this.step = step;\r\n    return this;\r\n  }\r\n  \r\n  setRange(min, max) {\r\n    if (min === undefined || max === undefined) {\r\n      throw new Error(\"min and/or max cannot be undefined\");\r\n    }\r\n    \r\n    this.range = [min, max];\r\n    return this;\r\n  }\r\n  \r\n  setIcon(icon) {\r\n    this.icon = icon;\r\n    \r\n    return this;\r\n  }\r\n}\r\n\r\nexport class StringProperty extends ToolProperty {\r\n  constructor(value, apiname, uiname, description, flag, icon) {\r\n    super(PropTypes.STRING, undefined, apiname, uiname, description, flag, icon);\r\n  }\r\n  \r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data = this.data;\r\n    \r\n    return this;\r\n  }\r\n  \r\n  copy() {\r\n    let ret = new StringProperty();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n  \r\n  setValue(val) {\r\n    //fire events\r\n    super.setValue(val);\r\n    this.data = val;\r\n  }\r\n}  \r\n  \r\nlet num_res =[\r\n  /([0-9]+)/,\r\n  /((0x)?[0-9a-fA-F]+(h?))/,\r\n  /([0-9]+\\.[0-9]*)/,\r\n  /([0-9]*\\.[0-9]+)/\r\n];\r\n//num_re = /([0-9]+\\.[0-9]*)|([0-9]*\\.[0-9]+)/\r\n\r\nexport function isNumber(f) {\r\n  if (f == \"NaN\" || (typeof f == \"number\" && isNaN(f))) {\r\n    return false;\r\n  }\r\n  \r\n  f = (\"\"+f).trim();\r\n  \r\n  let ok = false;\r\n  \r\n  for (let re of num_res) {\r\n    let ret = f.match(re)\r\n    if (!ret) {\r\n      ok = false;\r\n      continue;\r\n    }\r\n    \r\n    ok = ret[0].length == f.length;\r\n    if (ok) {\r\n      break;\r\n    }\r\n  }\r\n  \r\n  return ok;\r\n}\r\n_addClass(StringProperty);\r\n\r\nwindow.isNumber = isNumber;\r\n\r\nexport class NumProperty extends ToolProperty {\r\n  constructor(type, value, apiname, \r\n              uiname, description, flag, icon) {\r\n    super(type, undefined, apiname, uiname, description, flag, icon);\r\n    \r\n    this.data = 0;\r\n    this.range = [0, 0];\r\n  }\r\n};\r\n\r\nexport class IntProperty extends ToolProperty {\r\n  constructor(value, apiname, \r\n              uiname, description, flag, icon)  \r\n  {\r\n    super(PropTypes.INT, undefined, apiname, uiname, description, flag, icon);\r\n    \r\n    this.radix = 10;\r\n    this.data = value !== undefined ? Math.floor(value) : 0;\r\n  }\r\n  \r\n  toJSON() {\r\n    let ret = super.toJSON();\r\n    ret.range = this.range;\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    super.loadJSON(obj);\r\n    \r\n    this.range = obj.range;\r\n    return this;\r\n  }\r\n  \r\n  setValue(val) {\r\n    this.data = Math.floor(val);\r\n    \r\n    //fire events\r\n    super.setValue(val);\r\n    \r\n    return this;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data = this.data;\r\n    return this;\r\n  }\r\n\r\n  setStep(step) {\r\n    super.setStep(Math.floor(step));\r\n  }\r\n\r\n  setRange(min, max) {\r\n    if (min === undefined || max === undefined) {\r\n      throw new Error(\"min and/or max cannot be undefined\");\r\n    }\r\n    \r\n    super.setRange(Math.floor(min), Math.floor(max));\r\n    return this;\r\n  }\r\n  \r\n  setRadix(radix) {\r\n    this.radix = radix;\r\n  }\r\n}\r\n_addClass(IntProperty);\r\n\r\nexport class BoolProperty extends ToolProperty {\r\n  constructor(value, apiname,\r\n              uiname, description, flag, icon)\r\n  {\r\n    super(PropTypes.BOOL, undefined, apiname, uiname, description, flag, icon);\r\n\r\n    this.data = !!value;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data = this.data;\r\n\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new BoolProperty();\r\n    this.copyTo(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  setValue(val) {\r\n    this.data = !!val;\r\n    return this;\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  toJSON() {\r\n    let ret = super.toJSON();\r\n\r\n    return ret;\r\n  }\r\n\r\n  loadJSON(obj) {\r\n    super.loadJSON(obj);\r\n\r\n    return this;\r\n  }\r\n}\r\n_addClass(BoolProperty);\r\n\r\nexport class FloatProperty extends ToolProperty {\r\n  constructor(value, apiname, \r\n              uiname, description, flag, icon)  \r\n  {\r\n    super(PropTypes.FLOAT, undefined, apiname, uiname, description, flag, icon);\r\n    \r\n    this.data = value !== undefined ? ~~value : 0;\r\n    this.decimalPlaces = 4;\r\n  }\r\n  \r\n  toJSON() {\r\n    let ret = super.toJSON();\r\n    ret.range = this.range;\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    super.loadJSON(obj);\r\n    \r\n    this.range = obj.range;\r\n    return this;\r\n  }\r\n  \r\n  setDecimalPlaces(n) {\r\n    this.decimalPlaces = n;\r\n    return this;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data = this.data;\r\n    return this;\r\n  }\r\n\r\n  setValue(val) {\r\n    this.data = val;\r\n    \r\n    //fire events\r\n    super.setValue(val);\r\n    \r\n    return this;\r\n  }\r\n}\r\n_addClass(FloatProperty);\r\n\r\nexport class EnumProperty extends ToolProperty {\r\n  constructor(string, valid_values, apiname, \r\n              uiname, description, flag, icon) \r\n  {\r\n    super(PropTypes.ENUM, undefined, apiname, uiname, description, flag, icon);\r\n    \r\n    this.values = {};\r\n    this.keys = {};\r\n    this.ui_value_names = {};\r\n    this.descriptions = {};\r\n\r\n    if (valid_values === undefined) return this;\r\n    \r\n    if (valid_values instanceof Array || valid_values instanceof String) {\r\n      for (var i=0; i<valid_values.length; i++) {\r\n        this.values[valid_values[i]] = valid_values[i];\r\n        this.keys[valid_values[i]] = valid_values[i];\r\n      }\r\n    } else {\r\n      for (var k in valid_values) {\r\n        this.values[k] = valid_values[k];\r\n        this.keys[valid_values[k]] = k;\r\n      }\r\n    }\r\n    \r\n    if (string === undefined) {\r\n      this.data = first(valid_values);\r\n    } else {\r\n      this.setValue(string);\r\n    }\r\n    \r\n    for (var k in this.values) {\r\n      let uin = k.replace(/\\[_-]/g, \" \").trim();\r\n      uin = uin.split(\" \")\r\n      let uiname = \"\";\r\n\r\n      for (let word of uin) {\r\n        uiname += word[0].toUpperCase() + word.slice(1, word.length).toLowerCase();\r\n      }\r\n\r\n      this.ui_value_names[k] = uiname;\r\n      this.descriptions[k] = uiname;\r\n    }\r\n    \r\n    this.iconmap = {};\r\n  }\r\n\r\n  addUINames(map) {\r\n    for (let k in map) {\r\n      this.ui_value_names[k] = map[k];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  addDescriptions(map) {\r\n    for (let k in map) {\r\n      this.descriptions[k] = map[k];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  addIcons(iconmap) {\r\n    if (this.iconmap === undefined) {\r\n      this.iconmap = {};\r\n    }\r\n    for (var k in iconmap) {\r\n      this.iconmap[k] = iconmap[k];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  copyTo(p) {\r\n    super.copyTo(p);\r\n\r\n    p.keys = Object.assign({}, this.keys);\r\n    p.values = Object.assign({}, this.values);\r\n    p.data = this.data;\r\n    p.ui_value_names = this.ui_value_names;\r\n    p.update = this.update;\r\n    p.api_update = this.api_update;\r\n    \r\n    p.iconmap = this.iconmap;\r\n    p.descriptions = this.descriptions;\r\n    \r\n    return p;\r\n  }\r\n  \r\n  copy() {\r\n    var p = new EnumProperty(\"dummy\", {\"dummy\" : 0}, this.apiname, this.uiname, this.description, this.flag)\r\n\r\n    this.copyTo(p);\r\n    return p;\r\n  }\r\n\r\n  getValue() {\r\n    if (this.data in this.values)\r\n      return this.values[this.data];\r\n    else\r\n      return this.data;\r\n  }\r\n\r\n  setValue(val) {\r\n    if (!(val in this.values) && (val in this.keys))\r\n      val = this.keys[val];\r\n    \r\n    if (!(val in this.values)) {\r\n      console.warn(\"Invalid value for enum!\", val, this.values);\r\n      return;\r\n    }\r\n    \r\n    this.data = new String(val);\r\n    \r\n    //fire events\r\n    super.setValue(val);\r\n  }\r\n}\r\n_addClass(EnumProperty);\r\n\r\nexport class FlagProperty extends EnumProperty {\r\n  constructor(string, valid_values, apiname,\r\n              uiname, description, flag, icon) {\r\n    super(string, valid_values, apiname,\r\n          uiname, description, flag, icon);\r\n\r\n    this.type = PropTypes.FLAG;\r\n  }\r\n\r\n  setValue(bitmask) {\r\n    this.data = bitmask;\r\n\r\n    //do not trigger EnumProperty's setValue\r\n    ToolProperty.prototype.setValue.call(this, bitmask);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new FlagProperty();\r\n    this.copyTo(ret);\r\n    \r\n    return ret;\r\n  }\r\n}\r\n_addClass(FlagProperty);\r\n\r\nexport class Vec2Property extends ToolProperty {\r\n  constructor(data, apiname, uiname, description) {\r\n    super(PropTypes.VEC2, undefined, apiname, uiname, description);\r\n    this.data = new Vector2(data);\r\n  }\r\n\r\n  setValue(v) {\r\n    this.data.load(v);\r\n    super.setValue(v);\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data.load(this.data);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new Vec2Property();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n_addClass(Vec2Property);\r\n\r\nexport class Vec3Property extends ToolProperty {\r\n  constructor(data, apiname, uiname, description) {\r\n    super(PropTypes.VEC3, undefined, apiname, uiname, description);\r\n    this.data = new Vector3(data);\r\n  }\r\n\r\n  setValue(v) {\r\n    this.data.load(v);\r\n    super.setValue(v);\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data.load(this.data);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new Vec3Property();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n_addClass(Vec3Property);\r\n\r\nexport class Vec4Property extends ToolProperty {\r\n  constructor(data, apiname, uiname, description) {\r\n    super(PropTypes.VEC4, undefined, apiname, uiname, description);\r\n    this.data = new Vector4(data);\r\n  }\r\n\r\n  setValue(v) {\r\n    this.data.load(v);\r\n    super.setValue(v);\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data.load(this.data);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new Vec4Property();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n_addClass(Vec4Property);\r\n\r\nexport class QuatProperty extends ToolProperty {\r\n  constructor(data, apiname, uiname, description) {\r\n    super(PropTypes.QUAT, undefined, apiname, uiname, description);\r\n    this.data = new Quat(data);\r\n  }\r\n\r\n  setValue(v) {\r\n    this.data.load(v);\r\n    super.setValue(v);\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n    b.data.load(this.data);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new QuatProperty();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n_addClass(QuatProperty);\r\n\r\nexport class Mat4Property extends ToolProperty {\r\n  constructor(data, apiname, uiname, description) {\r\n    super(PropTypes.MATRIX4, undefined, apiname, uiname, description);\r\n    this.data = new Matrix4(data);\r\n  }\r\n\r\n  setValue(v) {\r\n    this.data.load(v);\r\n    super.setValue(v);\r\n  }\r\n\r\n  getValue() {\r\n    return this.data;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n\r\n    b.data.load(this.data);\r\n  }\r\n\r\n  copy() {\r\n    let ret = new Mat4Property();\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n_addClass(Mat4Property);\r\n\r\n/**\r\n * List of other tool props (all of one type)\r\n */\r\nexport class ListProperty extends ToolProperty {\r\n  /*\r\n  * Prop must be a ToolProperty subclass instance\r\n  * */\r\n  constructor(prop, list=[], uiname=\"\") {\r\n    super(PropTypes.PROPLIST);\r\n\r\n    this.uiname = uiname;\r\n\r\n    if (typeof prop == \"number\") {\r\n      prop = PropClasses[prop];\r\n\r\n      if (prop !== undefined) {\r\n        prop = new prop();\r\n      }\r\n    } else if (prop !== undefined) {\r\n      if (prop instanceof ToolProperty) {\r\n        prop = prop.copy();\r\n      } else {\r\n        prop = new prop();\r\n      }\r\n    }\r\n\r\n\r\n    this.prop = prop;\r\n    this.value = [];\r\n\r\n    for (let val of list) {\r\n      this.push(val);\r\n    }\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n\r\n    b.prop = this.prop.copy();\r\n\r\n    for (let prop of this.value) {\r\n      b.value.push(prop.copy());\r\n    }\r\n\r\n    return b;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new ListProperty(this.prop.copy());\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n\r\n  push(item=undefined) {\r\n    if (item === undefined) {\r\n      item = this.prop.copy();\r\n    }\r\n\r\n    if (!(item instanceof ToolProperty)) {\r\n      let prop = this.prop.copy();\r\n      prop.setValue(item);\r\n      item = prop;\r\n    }\r\n\r\n    this.value.push(item);\r\n    return item;\r\n  }\r\n\r\n  clear() {\r\n    this.value.length = 0;\r\n  }\r\n\r\n  setValue(value) {\r\n    this.clear();\r\n\r\n    for (let item of value) {\r\n      let prop = this.push();\r\n\r\n      if (typeof item !== \"object\") {\r\n        prop.setValue(item);\r\n      } else if (item instanceof prop.constructor) {\r\n        item.copyTo(prop);\r\n      } else {\r\n        console.log(item);\r\n        throw new Error(\"invalid value \" + item);\r\n      }\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    return this.value;\r\n  }\r\n\r\n  [Symbol.iterator]() {\r\n    let list = this.value;\r\n\r\n    return (function*() {\r\n      for (let item of list) {\r\n        yield item.getValue();\r\n      }\r\n    })();\r\n  }\r\n\r\n  get length() {\r\n    return this.value.length;\r\n  }\r\n\r\n  set length(val) {\r\n    this.value.length = val;\r\n  }\r\n}\r\n\r\n_addClass(ListProperty);\r\n\r\n//like FlagsProperty but uses strings\r\nexport class StringSetProperty extends ToolProperty {\r\n  constructor(value=undefined, definition=[]) {\r\n    super(PropTypes.STRSET);\r\n\r\n    let values = [];\r\n\r\n    this.value = new util.set();\r\n\r\n    let def = definition;\r\n    if (Array.isArray(def) || def instanceof util.set || def instanceof Set) {\r\n      for (let item of def) {\r\n        values.push(item);\r\n      }\r\n    } else if (typeof def === \"object\") {\r\n      for (let k in def) {\r\n        values.push(k);\r\n      }\r\n    } else if (typeof def === \"string\") {\r\n      values.push(def);\r\n    }\r\n\r\n    this.values = {};\r\n    this.ui_value_names = {};\r\n    this.descriptions = {};\r\n    this.iconmap = {};\r\n\r\n    for (let v of values) {\r\n      this.values[v] = v;\r\n      \r\n      let uiname = v.replace(/\\_/g, \" \").trim();\r\n      uiname = uiname[0].toUpperCase() + uiname.slice(1, uiname.length);\r\n\r\n      this.ui_value_names[v] = uiname;\r\n    }\r\n\r\n    if (value !== undefined) {\r\n      this.setValue(value);\r\n    }\r\n  }\r\n\r\n  /*\r\n  * Values can be a string, undefined/null, or a list/set/object-literal of strings.\r\n  * If destructive is true, then existing set will be cleared.\r\n  * */\r\n  setValue(values, destructive=true, soft_fail=true) {\r\n    let bad = typeof values !== \"string\";\r\n    bad = bad && typeof values !== \"object\";\r\n    bad = bad && values !== undefined && values !== null;\r\n\r\n    if (bad) {\r\n      if (soft_fail) {\r\n        console.warn(\"Invalid argument to StringSetProperty.prototype.setValue() \" + values);\r\n        return;\r\n      } else {\r\n        throw new Error(\"Invalid argument to StringSetProperty.prototype.setValue() \" + values);\r\n      }\r\n    }\r\n\r\n    //handle undefined/null\r\n    if (!values) {\r\n      this.value.clear();\r\n    } else if (typeof values === \"string\") {\r\n      if (destructive)\r\n        this.value.clear();\r\n\r\n      if (!(values in this.values)) {\r\n        if (soft_fail) {\r\n          console.warn(`\"${values}\" is not in this StringSetProperty`);\r\n          return;\r\n        } else {\r\n          throw new Error(`\"${values}\" is not in this StringSetProperty`);\r\n        }\r\n      }\r\n\r\n      this.value.add(values);\r\n    } else {\r\n      let data = [];\r\n\r\n      if (Array.isArray(values) || values instanceof util.set || values instanceof Set) {\r\n        for (let item of values) {\r\n          data.push(item);\r\n        }\r\n      } else { //object literal?\r\n        for (let k in values) {\r\n          data.push(k);\r\n        }\r\n      }\r\n\r\n      for (let item of data) {\r\n        if (!(item in this.values)) {\r\n          if (soft_fail) {\r\n            console.warn(`\"${item}\" is not in this StringSetProperty`);\r\n            continue;\r\n          } else {\r\n            throw new Error(`\"${item}\" is not in this StringSetProperty`);\r\n          }\r\n        }\r\n\r\n        this.value.add(item);\r\n      }\r\n    }\r\n  }\r\n\r\n  getValue() {\r\n    return this.value;\r\n  }\r\n\r\n  addIcons(iconmap) {\r\n    if (iconmap === undefined)\r\n      return;\r\n\r\n    for (let k in iconmap) {\r\n      this.iconmap[k] = iconmap[k];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n\r\n  addUINames(map) {\r\n    for (let k in map) {\r\n      this.ui_value_names[k] = map[k];\r\n    }\r\n    \r\n    return this;\r\n  }\r\n\r\n  addDescriptions(map) {\r\n    for (let k in map) {\r\n      this.descriptions[k] = map[k];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  copyTo(b) {\r\n    super.copyTo(b);\r\n\r\n    for (let val of this.value) {\r\n      b.value.add(val);\r\n    }\r\n    \r\n    b.values = {};\r\n    for (let k in this.values) {\r\n      b.values[k] = this.values[k];\r\n    }\r\n\r\n    for (let k in this.ui_value_names) {\r\n      b.ui_value_names[k] = this.ui_value_names[k];\r\n    }\r\n\r\n    for (let k in this.iconmap) {\r\n      b.iconmap[k] = this.iconmap[k];\r\n    }\r\n\r\n    for (let k in this.descriptions) {\r\n      b.descriptions[k] = this.descriptions[k];\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    let ret = new StringSetProperty(undefined, {});\r\n    this.copyTo(ret);\r\n    return ret;\r\n  }\r\n}\r\n\r\n_addClass(StringSetProperty);",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/toolprop.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1044,
    "kind": "function",
    "name": "first",
    "memberof": "scripts/toolprop.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolprop.js~first",
    "access": "public",
    "export": false,
    "importPath": "./scripts/toolprop.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [
      {
        "name": "iter",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1045,
    "kind": "function",
    "name": "setPropTypes",
    "memberof": "scripts/toolprop.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolprop.js~setPropTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{setPropTypes}",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "params": [
      {
        "name": "types",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1046,
    "kind": "variable",
    "name": "PropSubTypes",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~PropSubTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{PropSubTypes}",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "{\"COLOR\": number}"
      ]
    }
  },
  {
    "__docId__": 1047,
    "kind": "variable",
    "name": "customPropertyTypes",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~customPropertyTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{customPropertyTypes}",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1048,
    "kind": "variable",
    "name": "PropClasses",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~PropClasses",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{PropClasses}",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1049,
    "kind": "function",
    "name": "_addClass",
    "memberof": "scripts/toolprop.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolprop.js~_addClass",
    "access": "private",
    "export": false,
    "importPath": "./scripts/toolprop.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 1050,
    "kind": "class",
    "name": "ToolProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~ToolProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{ToolProperty}",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/toolprop_abstract.js~ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1051,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 44,
    "undocument": true
  },
  {
    "__docId__": 1052,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1053,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#type",
    "access": "public",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1054,
    "kind": "member",
    "name": "subtype",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#subtype",
    "access": "public",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1055,
    "kind": "member",
    "name": "wasSet",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#wasSet",
    "access": "public",
    "description": null,
    "lineNumber": 58,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1056,
    "kind": "member",
    "name": "apiname",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#apiname",
    "access": "public",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1057,
    "kind": "member",
    "name": "uiname",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#uiname",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1058,
    "kind": "member",
    "name": "description",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#description",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1059,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#flag",
    "access": "public",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1060,
    "kind": "member",
    "name": "icon",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#icon",
    "access": "public",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1061,
    "kind": "member",
    "name": "callbacks",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#callbacks",
    "access": "public",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1062,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolprop.js~ToolProperty.register",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1063,
    "kind": "method",
    "name": "private",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#private",
    "access": "public",
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1065,
    "kind": "method",
    "name": "_fire",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#_fire",
    "access": "private",
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "arg1",
        "types": [
          "*"
        ]
      },
      {
        "name": "arg2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1066,
    "kind": "method",
    "name": "on",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#on",
    "access": "public",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1067,
    "kind": "method",
    "name": "off",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#off",
    "access": "public",
    "description": null,
    "lineNumber": 101,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1068,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 106,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"type\": *, \"subtype\": *, \"apiname\": *, \"uiname\": *, \"description\": *, \"flag\": *, \"icon\": *, \"data\": *}"
      ]
    }
  },
  {
    "__docId__": 1069,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1078,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 132,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1079,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 136,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1081,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 146,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1082,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 159,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1083,
    "kind": "method",
    "name": "setStep",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#setStep",
    "access": "public",
    "description": null,
    "lineNumber": 168,
    "undocument": true,
    "params": [
      {
        "name": "step",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1084,
    "kind": "member",
    "name": "step",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#step",
    "access": "public",
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1085,
    "kind": "method",
    "name": "setRange",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#setRange",
    "access": "public",
    "description": null,
    "lineNumber": 173,
    "undocument": true,
    "params": [
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1086,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#range",
    "access": "public",
    "description": null,
    "lineNumber": 178,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 1087,
    "kind": "method",
    "name": "setIcon",
    "memberof": "scripts/toolprop.js~ToolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ToolProperty#setIcon",
    "access": "public",
    "description": null,
    "lineNumber": 182,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1089,
    "kind": "class",
    "name": "StringProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~StringProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{StringProperty}",
    "description": null,
    "lineNumber": 189,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1090,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~StringProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 190,
    "undocument": true
  },
  {
    "__docId__": 1091,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~StringProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 194,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1092,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~StringProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 201,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1093,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~StringProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 207,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1094,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~StringProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 210,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1095,
    "kind": "variable",
    "name": "num_res",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~num_res",
    "access": "public",
    "export": false,
    "importPath": "./scripts/toolprop.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 214,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1096,
    "kind": "function",
    "name": "isNumber",
    "memberof": "scripts/toolprop.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/toolprop.js~isNumber",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{isNumber}",
    "description": null,
    "lineNumber": 222,
    "undocument": true,
    "params": [
      {
        "name": "f",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1097,
    "kind": "class",
    "name": "NumProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~NumProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{NumProperty}",
    "description": null,
    "lineNumber": 250,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1098,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~NumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~NumProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 251,
    "undocument": true
  },
  {
    "__docId__": 1099,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~NumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~NumProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 255,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1100,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/toolprop.js~NumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~NumProperty#range",
    "access": "public",
    "description": null,
    "lineNumber": 256,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1101,
    "kind": "class",
    "name": "IntProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~IntProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{IntProperty}",
    "description": null,
    "lineNumber": 260,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1102,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 261,
    "undocument": true
  },
  {
    "__docId__": 1103,
    "kind": "member",
    "name": "radix",
    "memberof": "scripts/toolprop.js~IntProperty",
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#radix",
    "access": "public",
    "description": null,
    "lineNumber": 266,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1104,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~IntProperty",
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 267,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1105,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 270,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1106,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 277,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1107,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/toolprop.js~IntProperty",
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#range",
    "access": "public",
    "description": null,
    "lineNumber": 280,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1108,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 284,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1110,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 293,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1111,
    "kind": "method",
    "name": "setStep",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#setStep",
    "access": "public",
    "description": null,
    "lineNumber": 299,
    "undocument": true,
    "params": [
      {
        "name": "step",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1112,
    "kind": "method",
    "name": "setRange",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#setRange",
    "access": "public",
    "description": null,
    "lineNumber": 303,
    "undocument": true,
    "params": [
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1113,
    "kind": "method",
    "name": "setRadix",
    "memberof": "scripts/toolprop.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~IntProperty#setRadix",
    "access": "public",
    "description": null,
    "lineNumber": 312,
    "undocument": true,
    "params": [
      {
        "name": "radix",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1115,
    "kind": "class",
    "name": "BoolProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~BoolProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{BoolProperty}",
    "description": null,
    "lineNumber": 318,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1116,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true
  },
  {
    "__docId__": 1117,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 324,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1118,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1119,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 334,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1120,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 341,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1122,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 346,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1123,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 350,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1124,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/toolprop.js~BoolProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~BoolProperty#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 356,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1125,
    "kind": "class",
    "name": "FloatProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~FloatProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{FloatProperty}",
    "description": null,
    "lineNumber": 364,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1126,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 365,
    "undocument": true
  },
  {
    "__docId__": 1127,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 370,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1128,
    "kind": "member",
    "name": "decimalPlaces",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#decimalPlaces",
    "access": "public",
    "description": null,
    "lineNumber": 371,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1129,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 374,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1130,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 381,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1131,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#range",
    "access": "public",
    "description": null,
    "lineNumber": 384,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1132,
    "kind": "method",
    "name": "setDecimalPlaces",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#setDecimalPlaces",
    "access": "public",
    "description": null,
    "lineNumber": 388,
    "undocument": true,
    "params": [
      {
        "name": "n",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1134,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 393,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1135,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FloatProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 399,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1137,
    "kind": "class",
    "name": "EnumProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~EnumProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{EnumProperty}",
    "description": null,
    "lineNumber": 410,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1138,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 411,
    "undocument": true
  },
  {
    "__docId__": 1139,
    "kind": "member",
    "name": "values",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#values",
    "access": "public",
    "description": null,
    "lineNumber": 416,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1140,
    "kind": "member",
    "name": "keys",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#keys",
    "access": "public",
    "description": null,
    "lineNumber": 417,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1141,
    "kind": "member",
    "name": "ui_value_names",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#ui_value_names",
    "access": "public",
    "description": null,
    "lineNumber": 418,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1142,
    "kind": "member",
    "name": "descriptions",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#descriptions",
    "access": "public",
    "description": null,
    "lineNumber": 419,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1143,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 436,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1144,
    "kind": "member",
    "name": "iconmap",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#iconmap",
    "access": "public",
    "description": null,
    "lineNumber": 454,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1145,
    "kind": "method",
    "name": "addUINames",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#addUINames",
    "access": "public",
    "description": null,
    "lineNumber": 457,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1146,
    "kind": "method",
    "name": "addDescriptions",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#addDescriptions",
    "access": "public",
    "description": null,
    "lineNumber": 465,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1147,
    "kind": "method",
    "name": "addIcons",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#addIcons",
    "access": "public",
    "description": null,
    "lineNumber": 473,
    "undocument": true,
    "params": [
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1149,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 484,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1150,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 500,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1151,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 507,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1152,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~EnumProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 514,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1154,
    "kind": "class",
    "name": "FlagProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~FlagProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{FlagProperty}",
    "description": null,
    "lineNumber": 531,
    "undocument": true,
    "interface": false,
    "extends": [
      "EnumProperty"
    ]
  },
  {
    "__docId__": 1155,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~FlagProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FlagProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 532,
    "undocument": true
  },
  {
    "__docId__": 1156,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/toolprop.js~FlagProperty",
    "static": false,
    "longname": "scripts/toolprop.js~FlagProperty#type",
    "access": "public",
    "description": null,
    "lineNumber": 537,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1157,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~FlagProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FlagProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 540,
    "undocument": true,
    "params": [
      {
        "name": "bitmask",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1158,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~FlagProperty",
    "static": false,
    "longname": "scripts/toolprop.js~FlagProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 541,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1159,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~FlagProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~FlagProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 547,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1160,
    "kind": "class",
    "name": "Vec2Property",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~Vec2Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{Vec2Property}",
    "description": null,
    "lineNumber": 556,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1161,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 557,
    "undocument": true
  },
  {
    "__docId__": 1162,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#data",
    "access": "public",
    "description": null,
    "lineNumber": 559,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1163,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 562,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1164,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 567,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1165,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 571,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1166,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec2Property#copy",
    "access": "public",
    "description": null,
    "lineNumber": 576,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1167,
    "kind": "class",
    "name": "Vec3Property",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~Vec3Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{Vec3Property}",
    "description": null,
    "lineNumber": 584,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1168,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 585,
    "undocument": true
  },
  {
    "__docId__": 1169,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#data",
    "access": "public",
    "description": null,
    "lineNumber": 587,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1170,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 590,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1171,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 595,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1172,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 599,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1173,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec3Property#copy",
    "access": "public",
    "description": null,
    "lineNumber": 604,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1174,
    "kind": "class",
    "name": "Vec4Property",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~Vec4Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{Vec4Property}",
    "description": null,
    "lineNumber": 612,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1175,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 613,
    "undocument": true
  },
  {
    "__docId__": 1176,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#data",
    "access": "public",
    "description": null,
    "lineNumber": 615,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1177,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 618,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1178,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 623,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1179,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 627,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1180,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Vec4Property#copy",
    "access": "public",
    "description": null,
    "lineNumber": 632,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1181,
    "kind": "class",
    "name": "QuatProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~QuatProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{QuatProperty}",
    "description": null,
    "lineNumber": 640,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1182,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 641,
    "undocument": true
  },
  {
    "__docId__": 1183,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#data",
    "access": "public",
    "description": null,
    "lineNumber": 643,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1184,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 646,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1185,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 651,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1186,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 655,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1187,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~QuatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~QuatProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 660,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1188,
    "kind": "class",
    "name": "Mat4Property",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~Mat4Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{Mat4Property}",
    "description": null,
    "lineNumber": 668,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1189,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 669,
    "undocument": true
  },
  {
    "__docId__": 1190,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#data",
    "access": "public",
    "description": null,
    "lineNumber": 671,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1191,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 674,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1192,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 679,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1193,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 683,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1194,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~Mat4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~Mat4Property#copy",
    "access": "public",
    "description": null,
    "lineNumber": 689,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1195,
    "kind": "class",
    "name": "ListProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~ListProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{ListProperty}",
    "description": "List of other tool props (all of one type)",
    "lineNumber": 700,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1196,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 704,
    "undocument": true
  },
  {
    "__docId__": 1197,
    "kind": "member",
    "name": "uiname",
    "memberof": "scripts/toolprop.js~ListProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#uiname",
    "access": "public",
    "description": null,
    "lineNumber": 707,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1198,
    "kind": "member",
    "name": "prop",
    "memberof": "scripts/toolprop.js~ListProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#prop",
    "access": "public",
    "description": null,
    "lineNumber": 724,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1199,
    "kind": "member",
    "name": "value",
    "memberof": "scripts/toolprop.js~ListProperty",
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#value",
    "access": "public",
    "description": null,
    "lineNumber": 725,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1200,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 732,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1201,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 744,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1202,
    "kind": "method",
    "name": "push",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#push",
    "access": "public",
    "description": null,
    "lineNumber": 750,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1203,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#clear",
    "access": "public",
    "description": null,
    "lineNumber": 765,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1204,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 769,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1205,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 786,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1206,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 790,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1207,
    "kind": "get",
    "name": "length",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#length",
    "access": "public",
    "description": null,
    "lineNumber": 800,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1208,
    "kind": "set",
    "name": "length",
    "memberof": "scripts/toolprop.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~ListProperty#length",
    "access": "public",
    "description": null,
    "lineNumber": 804,
    "undocument": true
  },
  {
    "__docId__": 1209,
    "kind": "class",
    "name": "StringSetProperty",
    "memberof": "scripts/toolprop.js",
    "static": true,
    "longname": "scripts/toolprop.js~StringSetProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop.js",
    "importStyle": "{StringSetProperty}",
    "description": null,
    "lineNumber": 812,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolProperty"
    ]
  },
  {
    "__docId__": 1210,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 813,
    "undocument": true
  },
  {
    "__docId__": 1211,
    "kind": "member",
    "name": "value",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#value",
    "access": "public",
    "description": null,
    "lineNumber": 818,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1212,
    "kind": "member",
    "name": "values",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#values",
    "access": "public",
    "description": null,
    "lineNumber": 833,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1213,
    "kind": "member",
    "name": "ui_value_names",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#ui_value_names",
    "access": "public",
    "description": null,
    "lineNumber": 834,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1214,
    "kind": "member",
    "name": "descriptions",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#descriptions",
    "access": "public",
    "description": null,
    "lineNumber": 835,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1215,
    "kind": "member",
    "name": "iconmap",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#iconmap",
    "access": "public",
    "description": null,
    "lineNumber": 836,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1216,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 856,
    "undocument": true,
    "params": [
      {
        "name": "values",
        "types": [
          "*"
        ]
      },
      {
        "name": "destructive",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      },
      {
        "name": "soft_fail",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1217,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 915,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1218,
    "kind": "method",
    "name": "addIcons",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#addIcons",
    "access": "public",
    "description": null,
    "lineNumber": 919,
    "undocument": true,
    "params": [
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1219,
    "kind": "method",
    "name": "addUINames",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#addUINames",
    "access": "public",
    "description": null,
    "lineNumber": 931,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1220,
    "kind": "method",
    "name": "addDescriptions",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#addDescriptions",
    "access": "public",
    "description": null,
    "lineNumber": 939,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1221,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 947,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1222,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop.js~StringSetProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 972,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1223,
    "kind": "file",
    "name": "scripts/toolprop_abstract.js",
    "content": "\"use strict\";\r\n\r\n/*\r\nthis file is a skeleton that defines the contract\r\nthat any tool property library must implement to interface with path.ux.\r\n*/\r\n\r\n//maps prop type names to integers\r\nimport * as util from \"./util.js\";\r\n\r\nexport let PropTypes = {\r\n  INT : 1,\r\n  STRING : 2,\r\n  BOOL : 4,\r\n  ENUM : 8,\r\n  FLAG : 16,\r\n  FLOAT : 32,\r\n  VEC2 : 64,\r\n  VEC3 : 128,\r\n  VEC4 : 256,\r\n  MATRIX4 : 512,\r\n  QUAT : 1024,\r\n  PROPLIST : 4096,\r\n  STRSET : 8192,\r\n  //ITER : 8192<<1\r\n};\r\n\r\nexport const PropSubTypes = {\r\n  COLOR : 1\r\n};\r\n\r\n//flags\r\nexport const PropFlags = {\r\n  SELECT            : 1,\r\n  PRIVATE           : 2,\r\n  LABEL             : 4,\r\n  USE_ICONS         : 64,\r\n  USE_CUSTOM_GETSET : 128, //used by controller.js interface\r\n  SAVE_LAST_VALUE   : 256,\r\n  READ_ONLY         : 512\r\n};\r\n\r\nexport class ToolPropertyIF {\r\n  constructor(type, subtype, apiname, uiname, description, flag, icon) {\r\n    this.data = undefined;\r\n\r\n    this.type = type;\r\n    this.subtype = subtype;\r\n\r\n    this.apiname = apiname;\r\n    this.uiname = uiname;\r\n    this.description = description;\r\n    this.flag = flag;\r\n    this.icon = icon;\r\n  }\r\n\r\n  copyTo(b) {\r\n\r\n  }\r\n\r\n  copy() {\r\n\r\n  }\r\n\r\n  _fire(type, arg1, arg2) {\r\n  }\r\n\r\n  on(type, cb) {\r\n  }\r\n\r\n  off(type, cb) {\r\n  }\r\n\r\n  getValue() {\r\n  }\r\n\r\n  setValue(val) {\r\n  }\r\n\r\n  setStep(step) {\r\n  }\r\n\r\n  setRange(min, max) {\r\n  }\r\n\r\n  //some clients have seperate ui range\r\n  setUIRange(min, max) {\r\n  }\r\n\r\n  setIcon(icon) {\r\n  }\r\n}\r\n\r\nexport class StringPropertyIF extends ToolPropertyIF {\r\n  constructor() {\r\n    super(PropTypes.STRING);\r\n  }\r\n}\r\n\r\nexport class NumPropertyIF extends ToolPropertyIF {\r\n};\r\n\r\nexport class IntProperty extends ToolPropertyIF {\r\n  constructor() {\r\n    super(PropTypes.INT);\r\n  }\r\n\r\n  setRadix(radix) {\r\n    throw new Error(\"implement me\");\r\n  }\r\n}\r\n\r\nexport class FloatProperty extends ToolPropertyIF {\r\n  constructor() {\r\n    super(PropTypes.FLOAT);\r\n  }\r\n\r\n  setDecimalPlaces(n) {\r\n  }\r\n}\r\n\r\nexport class EnumProperty extends ToolPropertyIF {\r\n  constructor(value, valid_values) {\r\n    super(PropTypes.ENUM);\r\n\r\n    this.values = {}\r\n    this.keys = {};\r\n    this.ui_value_names = {};\r\n    this.iconmap = {};\r\n\r\n    if (valid_values === undefined) return this;\r\n\r\n    if (valid_values instanceof Array || valid_values instanceof String) {\r\n      for (var i=0; i<valid_values.length; i++) {\r\n        this.values[valid_values[i]] = valid_values[i];\r\n        this.keys[valid_values[i]] = valid_values[i];\r\n      }\r\n    } else {\r\n      for (var k in valid_values) {\r\n        this.values[k] = valid_values[k];\r\n        this.keys[valid_values[k]] = k;\r\n      }\r\n    }\r\n\r\n    for (var k in this.values) {\r\n      var uin = k[0].toUpperCase() + k.slice(1, k.length);\r\n\r\n      uin = uin.replace(/\\_/g, \" \");\r\n      this.ui_value_names[k] = uin;\r\n    }\r\n  }\r\n\r\n  addIcons(iconmap) {\r\n    if (this.iconmap === undefined) {\r\n      this.iconmap = {};\r\n    }\r\n    for (var k in iconmap) {\r\n      this.iconmap[k] = iconmap[k];\r\n    }\r\n  }\r\n}\r\n\r\nexport class FlagPropertyIF extends EnumProperty {\r\n  constructor(valid_values) {\r\n    super(PropTypes.FLAG);\r\n  }\r\n}\r\n\r\nexport class Vec2Property extends ToolPropertyIF {\r\n  constructor(valid_values) {\r\n    super(PropTypes.VEC2);\r\n  }\r\n}\r\n\r\nexport class Vec3Property extends ToolPropertyIF {\r\n  constructor(valid_values) {\r\n    super(PropTypes.VEC3);\r\n  }\r\n}\r\n\r\nexport class Vec4Property extends ToolPropertyIF {\r\n  constructor(valid_values) {\r\n    super(PropTypes.VEC4);\r\n  }\r\n}\r\n\r\n/**\r\n * List of other tool props (all of one type)\r\n */\r\nexport class ListProperty extends ToolPropertyIF {\r\n  /*\r\n  * Prop must be a ToolProperty subclass instance\r\n  * */\r\n  constructor(prop) {\r\n    super(PropTypes.PROPLIST);\r\n\r\n    this.prop = prop;\r\n  }\r\n\r\n  copyTo(b) {\r\n  }\r\n\r\n  copy() {\r\n  }\r\n\r\n  /**\r\n   * clear list\r\n   * */\r\n  clear() {\r\n\r\n  }\r\n\r\n  push(item=this.prop.copy()) {\r\n  }\r\n\r\n  [Symbol.iterator]() {\r\n  }\r\n\r\n  get length() {\r\n  }\r\n\r\n  set length(val) {\r\n  }\r\n}\r\n\r\n//like FlagsProperty but uses strings\r\nexport class StringSetProperty extends ToolPropertyIF {\r\n  constructor(value=undefined, definition=[]) {\r\n    super(PropTypes.STRSET);\r\n  }\r\n\r\n  /*\r\n  * Values can be a string, undefined/null, or a list/set/object-literal of strings.\r\n  * If destructive is true, then existing set will be cleared.\r\n  * */\r\n  setValue(values, destructive=true, soft_fail=true) {\r\n  }\r\n\r\n  getValue() {\r\n  }\r\n\r\n  addIcons(iconmap) {\r\n  }\r\n\r\n\r\n  addUINames(map) {\r\n  }\r\n\r\n  addDescriptions(map) {\r\n  }\r\n\r\n  copyTo(b) {\r\n  }\r\n\r\n  copy() {\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/toolprop_abstract.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1224,
    "kind": "variable",
    "name": "PropTypes",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~PropTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{PropTypes}",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "{\"INT\": number, \"STRING\": number, \"BOOL\": number, \"ENUM\": number, \"FLAG\": number, \"FLOAT\": number, \"VEC2\": number, \"VEC3\": number, \"VEC4\": number, \"MATRIX4\": number, \"QUAT\": number, \"PROPLIST\": number, \"STRSET\": number}"
      ]
    }
  },
  {
    "__docId__": 1225,
    "kind": "variable",
    "name": "PropSubTypes",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~PropSubTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{PropSubTypes}",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "{\"COLOR\": number}"
      ]
    }
  },
  {
    "__docId__": 1226,
    "kind": "variable",
    "name": "PropFlags",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~PropFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{PropFlags}",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "{\"SELECT\": number, \"PRIVATE\": number, \"LABEL\": number, \"USE_ICONS\": number, \"USE_CUSTOM_GETSET\": number, \"SAVE_LAST_VALUE\": number, \"READ_ONLY\": number}"
      ]
    }
  },
  {
    "__docId__": 1227,
    "kind": "class",
    "name": "ToolPropertyIF",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{ToolPropertyIF}",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1228,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 44,
    "undocument": true
  },
  {
    "__docId__": 1229,
    "kind": "member",
    "name": "data",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#data",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1230,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#type",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1231,
    "kind": "member",
    "name": "subtype",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#subtype",
    "access": "public",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1232,
    "kind": "member",
    "name": "apiname",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#apiname",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1233,
    "kind": "member",
    "name": "uiname",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#uiname",
    "access": "public",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1234,
    "kind": "member",
    "name": "description",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#description",
    "access": "public",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1235,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#flag",
    "access": "public",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1236,
    "kind": "member",
    "name": "icon",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#icon",
    "access": "public",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1237,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 57,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1238,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#copy",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1239,
    "kind": "method",
    "name": "_fire",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#_fire",
    "access": "private",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "arg1",
        "types": [
          "*"
        ]
      },
      {
        "name": "arg2",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1240,
    "kind": "method",
    "name": "on",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#on",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1241,
    "kind": "method",
    "name": "off",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#off",
    "access": "public",
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1242,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1243,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1244,
    "kind": "method",
    "name": "setStep",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#setStep",
    "access": "public",
    "description": null,
    "lineNumber": 80,
    "undocument": true,
    "params": [
      {
        "name": "step",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1245,
    "kind": "method",
    "name": "setRange",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#setRange",
    "access": "public",
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "params": [
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1246,
    "kind": "method",
    "name": "setUIRange",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#setUIRange",
    "access": "public",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "params": [
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1247,
    "kind": "method",
    "name": "setIcon",
    "memberof": "scripts/toolprop_abstract.js~ToolPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ToolPropertyIF#setIcon",
    "access": "public",
    "description": null,
    "lineNumber": 90,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1248,
    "kind": "class",
    "name": "StringPropertyIF",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~StringPropertyIF",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{StringPropertyIF}",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1249,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~StringPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringPropertyIF#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true
  },
  {
    "__docId__": 1250,
    "kind": "class",
    "name": "NumPropertyIF",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~NumPropertyIF",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{NumPropertyIF}",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1251,
    "kind": "class",
    "name": "IntProperty",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~IntProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{IntProperty}",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1252,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~IntProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 104,
    "undocument": true
  },
  {
    "__docId__": 1253,
    "kind": "method",
    "name": "setRadix",
    "memberof": "scripts/toolprop_abstract.js~IntProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~IntProperty#setRadix",
    "access": "public",
    "description": null,
    "lineNumber": 108,
    "undocument": true,
    "params": [
      {
        "name": "radix",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1254,
    "kind": "class",
    "name": "FloatProperty",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~FloatProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{FloatProperty}",
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1255,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~FloatProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 114,
    "undocument": true
  },
  {
    "__docId__": 1256,
    "kind": "method",
    "name": "setDecimalPlaces",
    "memberof": "scripts/toolprop_abstract.js~FloatProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~FloatProperty#setDecimalPlaces",
    "access": "public",
    "description": null,
    "lineNumber": 118,
    "undocument": true,
    "params": [
      {
        "name": "n",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1257,
    "kind": "class",
    "name": "EnumProperty",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~EnumProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{EnumProperty}",
    "description": null,
    "lineNumber": 122,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1258,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 123,
    "undocument": true
  },
  {
    "__docId__": 1259,
    "kind": "member",
    "name": "values",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#values",
    "access": "public",
    "description": null,
    "lineNumber": 126,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1260,
    "kind": "member",
    "name": "keys",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#keys",
    "access": "public",
    "description": null,
    "lineNumber": 127,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1261,
    "kind": "member",
    "name": "ui_value_names",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#ui_value_names",
    "access": "public",
    "description": null,
    "lineNumber": 128,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1262,
    "kind": "member",
    "name": "iconmap",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#iconmap",
    "access": "public",
    "description": null,
    "lineNumber": 129,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1263,
    "kind": "method",
    "name": "addIcons",
    "memberof": "scripts/toolprop_abstract.js~EnumProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~EnumProperty#addIcons",
    "access": "public",
    "description": null,
    "lineNumber": 153,
    "undocument": true,
    "params": [
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1265,
    "kind": "class",
    "name": "FlagPropertyIF",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~FlagPropertyIF",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{FlagPropertyIF}",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "interface": false,
    "extends": [
      "EnumProperty"
    ]
  },
  {
    "__docId__": 1266,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~FlagPropertyIF",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~FlagPropertyIF#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 164,
    "undocument": true
  },
  {
    "__docId__": 1267,
    "kind": "class",
    "name": "Vec2Property",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~Vec2Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{Vec2Property}",
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1268,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~Vec2Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~Vec2Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 170,
    "undocument": true
  },
  {
    "__docId__": 1269,
    "kind": "class",
    "name": "Vec3Property",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~Vec3Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{Vec3Property}",
    "description": null,
    "lineNumber": 175,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1270,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~Vec3Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~Vec3Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 176,
    "undocument": true
  },
  {
    "__docId__": 1271,
    "kind": "class",
    "name": "Vec4Property",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~Vec4Property",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{Vec4Property}",
    "description": null,
    "lineNumber": 181,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1272,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~Vec4Property",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~Vec4Property#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 182,
    "undocument": true
  },
  {
    "__docId__": 1273,
    "kind": "class",
    "name": "ListProperty",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~ListProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{ListProperty}",
    "description": "List of other tool props (all of one type)",
    "lineNumber": 190,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1274,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 194,
    "undocument": true
  },
  {
    "__docId__": 1275,
    "kind": "member",
    "name": "prop",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#prop",
    "access": "public",
    "description": null,
    "lineNumber": 197,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1276,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 200,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1277,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 203,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1278,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#clear",
    "access": "public",
    "description": "clear list",
    "lineNumber": 209,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1279,
    "kind": "method",
    "name": "push",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#push",
    "access": "public",
    "description": null,
    "lineNumber": 213,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1280,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1281,
    "kind": "get",
    "name": "length",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#length",
    "access": "public",
    "description": null,
    "lineNumber": 219,
    "undocument": true,
    "type": null
  },
  {
    "__docId__": 1282,
    "kind": "set",
    "name": "length",
    "memberof": "scripts/toolprop_abstract.js~ListProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~ListProperty#length",
    "access": "public",
    "description": null,
    "lineNumber": 222,
    "undocument": true
  },
  {
    "__docId__": 1283,
    "kind": "class",
    "name": "StringSetProperty",
    "memberof": "scripts/toolprop_abstract.js",
    "static": true,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/toolprop_abstract.js",
    "importStyle": "{StringSetProperty}",
    "description": null,
    "lineNumber": 227,
    "undocument": true,
    "interface": false,
    "extends": [
      "ToolPropertyIF"
    ]
  },
  {
    "__docId__": 1284,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 228,
    "undocument": true
  },
  {
    "__docId__": 1285,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 236,
    "undocument": true,
    "params": [
      {
        "name": "values",
        "types": [
          "*"
        ]
      },
      {
        "name": "destructive",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      },
      {
        "name": "soft_fail",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1286,
    "kind": "method",
    "name": "getValue",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#getValue",
    "access": "public",
    "description": null,
    "lineNumber": 239,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1287,
    "kind": "method",
    "name": "addIcons",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#addIcons",
    "access": "public",
    "description": null,
    "lineNumber": 242,
    "undocument": true,
    "params": [
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1288,
    "kind": "method",
    "name": "addUINames",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#addUINames",
    "access": "public",
    "description": null,
    "lineNumber": 246,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1289,
    "kind": "method",
    "name": "addDescriptions",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#addDescriptions",
    "access": "public",
    "description": null,
    "lineNumber": 249,
    "undocument": true,
    "params": [
      {
        "name": "map",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1290,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 252,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1291,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/toolprop_abstract.js~StringSetProperty",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/toolprop_abstract.js~StringSetProperty#copy",
    "access": "public",
    "description": null,
    "lineNumber": 255,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1292,
    "kind": "file",
    "name": "scripts/ui.js",
    "content": "//bind module to global var to get at it in console.\r\n//\r\n//note that require has an api for handling circular \r\n//module refs, in such cases do not use these vars.\r\n\r\nvar _ui = undefined;\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './util.js';\r\nimport * as ui_curvewidget from './ui_curvewidget.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as ui_widgets from './ui_widgets.js';\r\nimport * as toolprop from './toolprop.js';\r\nimport './html5_fileapi.js';\r\n\r\nlet PropFlags = toolprop.PropFlags;\r\nlet PropSubTypes = toolprop.PropSubTypes;\r\n\r\nlet EnumProperty = toolprop.EnumProperty;\r\n\r\nlet Vector2 = vectormath.Vector2,\r\n  UIBase = ui_base.UIBase,\r\n  PackFlags = ui_base.PackFlags,\r\n  PropTypes = toolprop.PropTypes;\r\n\r\nexport const SimpleContext = ui_base.SimpleContext;\r\nexport const DataPathError = ui_base.DataPathError;\r\n\r\nvar list = function list(iter) {\r\n  let ret = [];\r\n\r\n  for (let item of iter) {\r\n    ret.push(item);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport class Label extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this._label = \"\";\r\n    this._font = \"LabelText\";\r\n\r\n    this.dom = document.createElement(\"div\");\r\n    this.dom.setAttribute(\"class\", \"_labelx\");\r\n\r\n    let style = document.createElement(\"style\");\r\n    style.textContent = `\r\n      div._labelx::selection {\r\n        color: none;\r\n        background: none;\r\n      }\r\n    `;\r\n\r\n    this.shadow.appendChild(style);\r\n    this.shadow.appendChild(this.dom);\r\n  }\r\n\r\n  init() {\r\n    let font = this.getDefault(this._font);\r\n\r\n    this.dom.style[\"width\"] = \"max-content\";\r\n\r\n    this.dom.style[\"font\"] = font.genCSS();\r\n    this.dom.style[\"color\"] = font.color;\r\n  }\r\n\r\n  get font() {\r\n    return this._font;\r\n  }\r\n\r\n  /**Set a font defined in ui_base.defaults\r\n   e.g. DefaultText*/\r\n  set font(prefix) {\r\n    if (this._font == prefix) {\r\n      return;\r\n    }\r\n\r\n    this._font = prefix;\r\n\r\n    this.dom.style[\"font\"] = ui_base.getFont(this, undefined, prefix, false);\r\n    this.dom.style[\"color\"] = this.getDefault(prefix + \"Color\");\r\n  }\r\n\r\n  updateDataPath() {\r\n    if (this.ctx === undefined) {\r\n      return;\r\n    }\r\n\r\n    let path = this.getAttribute(\"datapath\");\r\n    let prop = this.getPathMeta(this.ctx, path);\r\n    let val = this.getPathValue(this.ctx, path);\r\n\r\n    if (val === undefined) {\r\n      return;\r\n    }\r\n    //console.log(path);\r\n    if (prop !== undefined && prop.type == PropTypes.INT) {\r\n      val = val.toString(prop.radix);\r\n\r\n      if (prop.radix == 2) {\r\n        val = \"0b\" + val;\r\n      } else if (prop.radix == 16) {\r\n        val += \"h\";\r\n      }\r\n    } else if (prop !== undefined && prop.type == PropTypes.FLOAT && val !== Math.floor(val)) {\r\n      val = val.toFixed(prop.decimalPlaces);\r\n    }\r\n\r\n    val = \"\" + val;\r\n\r\n    this.dom.innerText = this._label + val;\r\n  }\r\n\r\n  update() {\r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.updateDataPath();\r\n    }\r\n  }\r\n\r\n  get text() {\r\n    return this._label;\r\n    //return this.dom.innerText;\r\n  }\r\n\r\n  set text(text) {\r\n    this._label = text;\r\n\r\n    if (!this.hasAttribute(\"datapath\")) {\r\n      this.dom.innerText = text;\r\n    }\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"label-x\"\r\n    };\r\n  }\r\n}\r\n\r\nui_base.UIBase.register(Label);\r\n\r\nexport class Container extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.dataPrefix = '';\r\n    this.inherit_packflag = 0;\r\n\r\n    let style = this.styletag = document.createElement(\"style\")\r\n    style.textContent = `\r\n    `;\r\n\r\n    this.shadow.appendChild(style);\r\n  }\r\n\r\n  init() {\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"flex-direction\"] = \"column\";\r\n    this.style[\"flex-wrap\"] = \"nowrap\";\r\n\r\n    this.setCSS();\r\n\r\n    super.init();\r\n\r\n    this.setAttribute(\"class\", \"containerx\");\r\n  }\r\n\r\n  useIcons(enabled=true) {\r\n    if (enabled) {\r\n      this.packflag |= PackFlags.USE_ICONS;\r\n      this.inherit_packflag |= PackFlags.USE_ICONS;\r\n    } else {\r\n      this.packflag &= ~PackFlags.USE_ICONS;\r\n      this.inherit_packflag &= ~PackFlags.USE_ICONS;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param mode: flexbox wrap mode, can be wrap, nowrap, or wrap-reverse\r\n   * @returns {Container}\r\n   */\r\n  wrap(mode=\"wrap\") {\r\n    this.style[\"flex-wrap\"] = mode;\r\n    return this;\r\n  }\r\n\r\n  noMarginsOrPadding() {\r\n    super.noMarginsOrPadding();\r\n\r\n    let keys = [\"margin\", \"padding\", \"margin-block-start\", \"margin-block-end\"];\r\n    keys = keys.concat([\"padding-block-start\", \"padding-block-end\"]);\r\n\r\n    for (let k of keys) {\r\n      this.style[k] = \"0px\";\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  setCSS() {\r\n    this.styletag.textContent = `div.containerx {\r\n        background-color : ${this.getDefault(\"DefaultPanelBG\")};\r\n      }\r\n      `;\r\n  }\r\n\r\n  overrideDefault(key, val) {\r\n    super.overrideDefault(key, val);\r\n    this.setCSS();\r\n\r\n    return this;\r\n  }\r\n\r\n  /*\r\n  * shorthand for:\r\n  *\r\n  * .row().noMarginsOrPadding().oneAxisPadding()\r\n  * */\r\n  strip(m = this.getDefault(\"oneAxisPadding\"), m2 = 0) {\r\n    let horiz = this instanceof RowFrame;\r\n    horiz = horiz || this.style[\"flex-direction\"] === \"row\";\r\n\r\n    let flag = horiz ? PackFlags.STRIP_HORIZ : PackFlags.STRIP_VERT;\r\n\r\n    let strip = (horiz ? this.row() : this.col()).oneAxisPadding(m, m2);\r\n    strip.packflag |= flag;\r\n\r\n    let prev = strip.previousElementSibling;\r\n    if (prev !== undefined && (prev.packflag & flag)) {\r\n      if (horiz) {\r\n        prev.style[\"padding-right\"] = \"0px\";\r\n      } else {\r\n        prev.style[\"padding-top\"] = \"0px\";\r\n      }\r\n    }\r\n\r\n    return strip;\r\n  }\r\n\r\n  /**\r\n   * tries to set margin along one axis only in smart manner\r\n   * */\r\n  oneAxisMargin(m = this.getDefault(\"oneAxisMargin\"), m2 = 0) {\r\n    this.style[\"margin-top\"] = this.style[\"margin-bottom\"] = \"\" + m + \"px\";\r\n    this.style[\"margin-left\"] = this.style[\"margin-right\"] = \"\" + m2 + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * tries to set padding along one axis only in smart manner\r\n   * */\r\n  oneAxisPadding(m = this.getDefault(\"oneAxisPadding\"), m2 = 0) {\r\n    this.style[\"padding-top\"] = this.style[\"padding-bottom\"] = \"\" + m + \"px\";\r\n    this.style[\"padding-left\"] = this.style[\"padding-right\"] = \"\" + m2 + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  setMargin(m) {\r\n    this.style[\"margin\"] = m + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  setPadding(m) {\r\n    this.style[\"padding\"] = m + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    if (width !== undefined) {\r\n      if (typeof width == \"number\")\r\n        this.style[\"width\"] = this.div.style[\"width\"] = ~~width + \"px\";\r\n      else\r\n        this.style[\"width\"] = this.div.style[\"width\"] = width;\r\n    }\r\n\r\n    if (height !== undefined) {\r\n      if (typeof height == \"number\")\r\n        this.style[\"height\"] = this.div.style[\"height\"] = ~~height + \"px\";\r\n      else\r\n        this.style[\"height\"] = this.div.style[\"height\"] = height;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  set background(bg) {\r\n    this.__background = bg;\r\n\r\n    this.styletag.textContent = `div.containerx {\r\n        background-color : ${bg};\r\n      }\r\n    `;\r\n    this.style[\"background-color\"] = bg;\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"container-x\"\r\n    };\r\n  }\r\n\r\n  save() {\r\n  }\r\n\r\n  load() {\r\n  }\r\n\r\n  saveVisibility() {\r\n    localStorage[this.storagePrefix + \"_settings\"] = JSON.stringify(this);\r\n    return this;\r\n  }\r\n\r\n  loadVisibility() {\r\n    let key = this.storagePrefix + \"_settings\";\r\n    let ok = true;\r\n\r\n    if (key in localStorage) {\r\n      console.log(\"loading UI visibility state. . .\");\r\n\r\n      try {\r\n        this.loadJSON(JSON.parse(localStorage[key]));\r\n      } catch (error) {\r\n        util.print_stack(error);\r\n        ok = false;\r\n      }\r\n    }\r\n\r\n    return ok;\r\n  }\r\n\r\n  toJSON() {\r\n    let ret = {\r\n      opened: !this.closed\r\n    };\r\n\r\n    return Object.assign(super.toJSON(), ret);\r\n  }\r\n\r\n  _ondestroy() {\r\n    for (let child of this.children) {\r\n      child._ondestroy();\r\n    }\r\n\r\n    super._ondestroy();\r\n  }\r\n\r\n  loadJSON(obj) {\r\n    //console.error(\"ui.js:Container.loadJSON: implement me!\");\r\n\r\n    return this;\r\n  }\r\n\r\n  redrawCurves() {\r\n    throw new Error(\"Implement me (properly!)\");\r\n\r\n    if (this.closed)\r\n      return;\r\n\r\n    for (let cw of this.curve_widgets) {\r\n      cw.draw();\r\n    }\r\n  }\r\n\r\n  listen() {\r\n    window.setInterval(() => {\r\n      this.update();\r\n    }, 150);\r\n  }\r\n\r\n  get children() {\r\n    let list = [];\r\n\r\n    this._forEachChildWidget((n) => {\r\n      list.push(n);\r\n    });\r\n\r\n    return list\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n    //this._forEachChildWidget((n) => {\r\n    //  n.update();\r\n    //});\r\n  }\r\n\r\n  //on_destroy() {\r\n  //  super.on_destroy();\r\n  //this.dat.destroy();\r\n  //}\r\n\r\n  appendChild(child) {\r\n    if (child instanceof ui_base.UIBase) {\r\n      child.ctx = this.ctx;\r\n      child.parentWidget = this;\r\n    }\r\n\r\n    let ret = super.appendChild(child);\r\n\r\n    if (child instanceof ui_base.UIBase && child.onadd) {\r\n      child.onadd();\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  clear() {\r\n    for (let child of this.children) {\r\n      if (child instanceof ui_base.UIBase) {\r\n        child.remove();\r\n\r\n        if (child.on_destroy !== undefined)\r\n          child.on_destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  //*\r\n  _prepend(child) {\r\n    return this._add(child, true);\r\n  }//*/\r\n\r\n  add(child) {\r\n    return this._add(child);\r\n  }\r\n\r\n  _add(child, prepend = false) {\r\n    //paranoia check for if we accidentally got a DOM NodeList\r\n    if (child instanceof NodeList) {\r\n      throw new Error(\"eek!\");\r\n    }\r\n\r\n    child.ctx = this.ctx;\r\n    child.parentWidget = this;\r\n\r\n    if (child._useDataPathToolOp === undefined) {\r\n      child.useDataPathToolOp = this._useDataPathToolOp;\r\n    }\r\n\r\n    this.shadow.appendChild(child);\r\n\r\n    if (child.onadd)\r\n      child.onadd();\r\n\r\n    return child;\r\n  }\r\n\r\n  /*\r\n  .menu([\r\n    \"some_tool_path.tool\",\r\n    ui_widgets.Menu.SEP,\r\n    \"some_tool_path.another_tool\",\r\n    [\"Name\", () => {console.log(\"do something\")}]\r\n  ])\r\n  */\r\n  menu(title, list, packflag = 0) {\r\n    let dbox = document.createElement(\"dropbox-x\");\r\n\r\n    dbox._name = title;\r\n    dbox.setAttribute(\"simple\", true);\r\n    dbox.setAttribute(\"name\", title);\r\n\r\n    dbox._build_menu = () => {\r\n      if (this._menu !== undefined && this._menu.parentNode !== undefined) {\r\n        this._menu.remove();\r\n      }\r\n\r\n      let menu = dbox._menu = document.createElement(\"menu-x\");\r\n      //menu.setAttribute(\"name\", title);\r\n\r\n      let SEP = menu.constructor.SEP;\r\n      let id = 0;\r\n      let cbs = {};\r\n\r\n      for (let item of list) {\r\n        if (typeof item == \"string\") {\r\n          let def;\r\n          try {\r\n            def = this.ctx.api.getToolDef(item);\r\n          } catch (error) {\r\n            menu.addItem(\"(tool path error)\", id++);\r\n            continue;\r\n          }\r\n          //addItemExtra(text, id=undefined, hotkey, icon=-1, add=true) {\r\n          menu.addItemExtra(def.uiname, id, def.hotkey, def.icon);\r\n          let this2 = this;\r\n\r\n          cbs[id] = (function (toolpath) {\r\n            return function () {\r\n              this2.ctx.api.execTool(this2.ctx, toolpath);\r\n            }\r\n          })(item);\r\n\r\n          id++;\r\n        } else if (item === SEP) {\r\n          menu.seperator();\r\n        } else if (item instanceof Array) {\r\n          let hotkey = item.length > 2 ? item[2] : undefined;\r\n          let icon = item.length > 3 ? item[3] : undefined;\r\n\r\n          menu.addItemExtra(item[0], id, hotkey, icon);\r\n\r\n          cbs[id] = (function (cbfunc, arg) {\r\n            return function () {\r\n              cbfunc(arg);\r\n            }\r\n          })(item[1], item[2]);\r\n\r\n          id++;\r\n        }\r\n      }\r\n\r\n      menu.onselect = (id) => {\r\n        cbs[id]();\r\n      }\r\n    };\r\n\r\n    dbox.packflag |= packflag;\r\n    dbox.inherit_packflag |= packflag;\r\n\r\n    this._add(dbox);\r\n    return dbox;\r\n  }\r\n\r\n  tool(path_or_cls, packflag = 0, create_cb = undefined) {\r\n    let cls;\r\n\r\n    if (typeof path_or_cls == \"string\") {\r\n      if (this.ctx === undefined) {\r\n        console.warn(\"this.ctx was undefined in tool()\");\r\n        return;\r\n      }\r\n\r\n      cls = this.ctx.api.parseToolPath(path_or_cls);\r\n\r\n      if (cls === undefined) {\r\n        console.warn(\"Unknown tool for toolpath \\\"\" + path_or_cls + \"\\\"\");\r\n        return;\r\n      }\r\n    } else {\r\n      cls = path_or_cls;\r\n    }\r\n\r\n    packflag |= this.inherit_packflag;\r\n    let hotkey;\r\n\r\n    if (create_cb === undefined) {\r\n      create_cb = (cls) => {\r\n        return this.ctx.api.createTool(this.ctx, path_or_cls);\r\n      }\r\n    }\r\n\r\n    let cb = () => {\r\n      console.log(\"tool run\");\r\n\r\n      let toolob = create_cb(cls);\r\n      this.ctx.api.execTool(this.ctx, toolob);\r\n    }\r\n\r\n    let def = cls.tooldef();\r\n    let tooltip = def.description === undefined ? def.uiname : def.description;\r\n\r\n    //is there a hotkey hardcoded in the class?\r\n    if (def.hotkey !== undefined) {\r\n      tooltip += \"\\n\\t\" + def.hotkey;\r\n      hotkey = def.hotkey;\r\n    } else { //if not, use getToolPathHotkey api\r\n      let path = path_or_cls;\r\n\r\n      if (typeof path != \"string\") {\r\n        path = def.toolpath;\r\n      }\r\n\r\n      let hotkey = this.ctx.api.getToolPathHotkey(this.ctx, path);\r\n      if (hotkey !== undefined) {\r\n        tooltip += \"\\n\\tHotkey: \" + hotkey;\r\n      }\r\n    }\r\n\r\n    let ret;\r\n\r\n    if (def.icon !== undefined && (packflag & PackFlags.USE_ICONS)) {\r\n      //console.log(\"iconbutton!\");\r\n      ret = this.iconbutton(def.icon, tooltip, cb);\r\n\r\n      if (packflag & PackFlags.SMALL_ICON) {\r\n        ret.iconsheet = ui_base.IconSheets.SMALL;\r\n      } else {\r\n        ret.iconsheet = ui_base.IconSheets.LARGE;\r\n      }\r\n\r\n      ret.packflag |= packflag;\r\n    } else {\r\n      ret = this.button(def.uiname, cb);\r\n      ret.description = tooltip;\r\n      ret.packflag |= packflag;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  //supports number types\r\n  textbox(inpath, text=\"\", cb=undefined, packflag = 0) {\r\n    let path;\r\n\r\n    if (inpath)\r\n      path = this._joinPrefix(inpath);\r\n\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"textbox-x\")\r\n\r\n    ret.ctx = this.ctx;\r\n    ret.packflag |= packflag;\r\n    ret.onchange = cb;\r\n    ret.text = text;\r\n\r\n    if (path !== undefined) {\r\n      ret.setAttribute(\"datapath\", path);\r\n    }\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  pathlabel(inpath, label = \"\") {\r\n    let path;\r\n    if (inpath)\r\n      path = this._joinPrefix(inpath);\r\n\r\n    let ret = document.createElement(\"label-x\");\r\n\r\n    ret.text = label;\r\n    ret.setAttribute(\"datapath\", path);\r\n\r\n    this._add(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  label(text) {\r\n    let ret = document.createElement(\"label-x\");\r\n    ret.text = text;\r\n\r\n    this._add(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  iconbutton(icon, description, cb, thisvar, packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"iconbutton-x\")\r\n\r\n    ret.packflag |= packflag;\r\n\r\n    ret.setAttribute(\"icon\", icon);\r\n    ret.description = description;\r\n    ret.icon = icon;\r\n\r\n    if (packflag & PackFlags.SMALL_ICON) {\r\n      ret.iconsheet = ui_base.IconSheets.SMALL;\r\n    } else {\r\n      ret.iconsheet = ui_base.IconSheets.LARGE;\r\n    }\r\n\r\n    ret.onclick = cb;\r\n\r\n    this._add(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  button(label, cb, thisvar, id, packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"button-x\")\r\n\r\n    ret.packflag |= packflag;\r\n\r\n    ret.setAttribute(\"name\", label);\r\n    ret.setAttribute(\"buttonid\", id);\r\n    ret.onclick = cb;\r\n\r\n    this._add(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  _joinPrefix(path) {\r\n    let prefix = this.dataPrefix.trim();\r\n\r\n    return prefix + path;\r\n  }\r\n\r\n  colorbutton(inpath, packflag, mass_set_path = undefined) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"color-picker-button-x\");\r\n\r\n    if (inpath !== undefined) {\r\n      ret.setAttribute(\"datapath\", inpath);\r\n    }\r\n\r\n    if (mass_set_path !== undefined) {\r\n      ret.setAttribute(\"mass_set_path\", mass_set_path);\r\n    }\r\n\r\n    ret.packflag |= packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  noteframe(packflag = 0) {\r\n    let ret = document.createElement(\"noteframe-x\");\r\n\r\n    ret.packflag |= this.inherit_packflag | packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  prop(inpath, packflag = 0, mass_set_path = undefined) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let path = this._joinPrefix(inpath);\r\n\r\n    let rdef = this.ctx.api.resolvePath(this.ctx, path, true);\r\n\r\n    if (rdef === undefined || rdef.prop === undefined) {\r\n      console.warn(\"Unknown property at path\", path, this.ctx.api.resolvePath(this.ctx, path));\r\n      return;\r\n    }\r\n    //slider(path, name, defaultval, min, max, step, is_int, do_redraw, callback, packflag=0) {\r\n    let prop = rdef.prop;\r\n\r\n    //console.log(prop, PropTypes, PropSubTypes);\r\n\r\n    function makeUIName(name) {\r\n      name = name[0].toUpperCase() + name.slice(1, name.length).toLowerCase();\r\n      name = name.replace(/_/g, \" \");\r\n      return name;\r\n    }\r\n\r\n    if (prop.type == PropTypes.INT || prop.type == PropTypes.FLOAT) {\r\n      let ret = this.slider(inpath);\r\n\r\n      if (mass_set_path) {\r\n        ret.setAttribute(\"mass_set_path\", mass_set_path);\r\n      }\r\n\r\n      return ret;\r\n    } else if (prop.type == PropTypes.BOOL) {\r\n      this.check(inpath, prop.uiname, packflag, mass_set_path);\r\n    } else if (prop.type == PropTypes.ENUM) {\r\n      if (rdef.subkey !== undefined) {\r\n        let subkey = rdef.subkey;\r\n        let name = rdef.prop.ui_value_names[rdef.subkey];\r\n\r\n        if (name === undefined) {\r\n          name = makeUIName(rdef.subkey);\r\n        }\r\n\r\n        let check = this.check(inpath, rdef.prop.ui_value_names[subkey], packflag, mass_set_path);\r\n        let tooltip = rdef.prop.descriptions[subkey];\r\n\r\n        check.description = tooltip === undefined ? rdef.prop.ui_value_names[subkey] : tooltip;\r\n        check.icon = rdef.prop.iconmap[rdef.subkey];\r\n\r\n        return check;\r\n      }\r\n      if (!(packflag & PackFlags.USE_ICONS)) {\r\n        let val;\r\n        try {\r\n          val = this.ctx.api.getValue(this.ctx, path);\r\n        } catch (error) {\r\n          if (!(error instanceof DataPathError)) {\r\n            throw error;\r\n          }\r\n        }\r\n\r\n        this.listenum(inpath, undefined, undefined, val, undefined, undefined, packflag);\r\n      } else {\r\n        this.checkenum(inpath, undefined, packflag);\r\n      }\r\n    } else if (prop.type === PropTypes.VEC3 || prop.type == PropTypes.VEC4) {\r\n      if (prop.subtype === PropSubTypes.COLOR) {\r\n        return this.colorbutton(inpath, packflag, mass_set_path);\r\n        //return this.colorPicker(inpath, packflag, mass_set_path);\r\n      } else {\r\n        let ret = document.createElement(\"vector-panel-x\");\r\n\r\n        if (inpath) {\r\n          ret.setAttribute(\"datapath\", inpath);\r\n        }\r\n\r\n        if (mass_set_path) {\r\n          ret.setAttribute(\"mass_set_path\", mass_set_path);\r\n        }\r\n\r\n        this.add(ret);\r\n\r\n        return ret;\r\n      }\r\n    } else if (prop.type == PropTypes.FLAG) {\r\n      if (rdef.subkey !== undefined) {\r\n        let tooltip = rdef.prop.descriptions[rdef.subkey];\r\n        let name = rdef.prop.ui_value_names[rdef.subkey];\r\n\r\n        if (name === undefined) {\r\n          name = makeUIName(rdef.subkey);\r\n        }\r\n\r\n        let ret = this.check(inpath, name, packflag, mass_set_path);\r\n\r\n        ret.icon = rdef.prop.iconmap[rdef.subkey];\r\n\r\n        if (tooltip) {\r\n          ret.description = tooltip;\r\n        }\r\n      } else {\r\n        for (let k in prop.values) {\r\n          let name = prop.ui_value_names[k];\r\n          let tooltip = prop.descriptions[k];\r\n\r\n          if (name === undefined) {\r\n            name = makeUIName(k);\r\n          }\r\n\r\n          let ret = this.check(`${inpath}[${k}]`, name, packflag, mass_set_path);\r\n\r\n          if (tooltip) {\r\n            ret.description = tooltip;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  check(inpath, name, packflag = 0, mass_set_path = undefined) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let path = this._joinPrefix(inpath);\r\n\r\n    //let prop = this.ctx.getProp(path);\r\n    let ret;\r\n    if (packflag & PackFlags.USE_ICONS) {\r\n      ret = document.createElement(\"iconcheck-x\");\r\n\r\n      if (packflag & PackFlags.SMALL_ICON) {\r\n        ret.iconsheet = ui_base.IconSheets.SMALL;\r\n      }\r\n    } else {\r\n      ret = document.createElement(\"check-x\");\r\n    }\r\n\r\n    ret.packflag |= packflag;\r\n    ret.label = name;\r\n    ret.setAttribute(\"datapath\", path);\r\n    ret.noMarginsOrPadding();\r\n\r\n    if (mass_set_path) {\r\n      ret.setAttribute(\"mass_set_path\", mass_set_path);\r\n    }\r\n\r\n    this._add(ret);\r\n\r\n    //ret.update();\r\n\r\n    return ret;\r\n  }\r\n\r\n  checkenum(inpath, name, packflag, enummap, defaultval, callback, iconmap, mass_set_path) {\r\n    packflag = packflag === undefined ? 0 : packflag;\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let path = this._joinPrefix(inpath);\r\n\r\n    let has_path = path !== undefined;\r\n    let prop;\r\n\r\n    if (path !== undefined) {\r\n      prop = this.ctx.api.resolvePath(this.ctx, path);\r\n\r\n      if (prop !== undefined)\r\n        prop = prop.prop;\r\n    }\r\n\r\n    if (path !== undefined) {\r\n      if (prop === undefined) {\r\n        console.warn(\"Bad path in checkenum\", path);\r\n        return;\r\n      }\r\n\r\n      let frame;\r\n\r\n      if (packflag & PackFlags.VERTICAL) {\r\n        frame = this.col();\r\n      } else {\r\n        frame = this.row();\r\n      }\r\n\r\n      frame.oneAxisPadding();\r\n      frame.background = this.getDefault(\"BoxSub2BG\");\r\n\r\n      if (packflag & PackFlags.USE_ICONS) {\r\n        for (let key in prop.values) {\r\n          let check = frame.check(inpath + \"[\"+key+\"]\", \"\", packflag);\r\n\r\n          check.icon = prop.iconmap[key];\r\n          check.drawCheck = false;\r\n\r\n          check.style[\"padding\"] = \"0px\";\r\n          check.style[\"margin\"] = \"0px\";\r\n\r\n          check.dom.style[\"padding\"] = \"0px\";\r\n          check.dom.style[\"margin\"] = \"0px\";\r\n\r\n          check.description = prop.descriptions[key];\r\n          //console.log(check.description, key, prop.keys[key], prop.descriptions, prop.keys);\r\n        }\r\n      } else {\r\n        if (name === undefined) {\r\n          name = prop.uiname;\r\n        }\r\n\r\n        frame.label(name).font = \"TitleText\";\r\n\r\n        let checks = {};\r\n\r\n        let ignorecb = false;\r\n\r\n        function makecb(key) {\r\n          return () => {\r\n            if (ignorecb) return;\r\n\r\n            ignorecb = true;\r\n            for (let k in checks) {\r\n              if (k !== key) {\r\n                checks[k].checked = false;\r\n              }\r\n            }\r\n            ignorecb = false;\r\n\r\n            if (callback) {\r\n              callback(key);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (let key in prop.values) {\r\n          let check = frame.check(inpath + \" = \" + prop.values[key], prop.ui_value_names[key]);\r\n          checks[key] = check;\r\n\r\n          if (mass_set_path) {\r\n            check.setAttribute(\"mass_set_path\", mass_set_path);\r\n          }\r\n\r\n\r\n          check.description = prop.descriptions[prop.keys[key]];\r\n          if (!check.description) {\r\n            check.description = \"\"+prop.ui_value_names[key];\r\n          }\r\n          check.onchange = makecb(key);\r\n          //console.log(\"PATH\", path);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  checkenum_panel(inpath, name, packflag=0, callback=undefined, mass_set_path=undefined, prop=undefined) {\r\n    packflag = packflag === undefined ? 0 : packflag;\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let path = this._joinPrefix(inpath);\r\n\r\n    let has_path = path !== undefined;\r\n\r\n    if (path !== undefined && prop === undefined) {\r\n      prop = this.ctx.api.resolvePath(this.ctx, path);\r\n\r\n      if (prop !== undefined)\r\n        prop = prop.prop;\r\n    }\r\n\r\n    if (!name) {\r\n      name = prop.uiname;\r\n    }\r\n\r\n    if (path !== undefined) {\r\n      if (prop === undefined) {\r\n        console.warn(\"Bad path in checkenum\", path);\r\n        return;\r\n      }\r\n\r\n      let frame = this.panel(name, name, packflag);\r\n\r\n      frame.oneAxisPadding();\r\n      frame.background = this.getDefault(\"BoxSub2BG\");\r\n\r\n      if (packflag & PackFlags.USE_ICONS) {\r\n        for (let key in prop.values) {\r\n          let check = frame.check(inpath + \" == \" + prop.values[key], \"\", packflag);\r\n\r\n          check.icon = prop.iconmap[key];\r\n          check.drawCheck = false;\r\n\r\n          check.style[\"padding\"] = \"0px\";\r\n          check.style[\"margin\"] = \"0px\";\r\n\r\n          check.dom.style[\"padding\"] = \"0px\";\r\n          check.dom.style[\"margin\"] = \"0px\";\r\n\r\n          check.description = prop.descriptions[key];\r\n          //console.log(check.description, key, prop.keys[key], prop.descriptions, prop.keys);\r\n        }\r\n      } else {\r\n        if (name === undefined) {\r\n          name = prop.uiname;\r\n        }\r\n\r\n        frame.label(name).font = \"TitleText\";\r\n\r\n        let checks = {};\r\n\r\n        let ignorecb = false;\r\n\r\n        function makecb(key) {\r\n          return () => {\r\n            if (ignorecb) return;\r\n\r\n            ignorecb = true;\r\n            for (let k in checks) {\r\n              if (k !== key) {\r\n                checks[k].checked = false;\r\n              }\r\n            }\r\n            ignorecb = false;\r\n\r\n            if (callback) {\r\n              callback(key);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (let key in prop.values) {\r\n          let check = frame.check(inpath + \" = \" + prop.values[key], prop.ui_value_names[key]);\r\n          checks[key] = check;\r\n\r\n          if (mass_set_path) {\r\n            check.setAttribute(\"mass_set_path\", mass_set_path);\r\n          }\r\n\r\n\r\n          check.description = prop.descriptions[prop.keys[key]];\r\n          if (!check.description) {\r\n            check.description = \"\"+prop.ui_value_names[key];\r\n          }\r\n          check.onchange = makecb(key);\r\n          //console.log(\"PATH\", path);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /*\r\n    enummap is an object that maps\r\n    ui names to keys, e.g.:\r\n    \r\n    ui.listenum(\"color\", \"Color\", {\r\n      RED   : 0,\r\n      GREEN : 1,\r\n      BLUE  : 2\r\n    });\r\n\r\n    path can be undefined, in which case, use callback,\r\n    which gets the current enum as an argument\r\n\r\n    defaultval cannot be undefined\r\n  */\r\n  listenum(inpath, name, enummap, defaultval, callback, iconmap, packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let path;\r\n\r\n    if (inpath !== undefined) {\r\n      path = this._joinPrefix(inpath);\r\n    }\r\n\r\n    let ret = document.createElement(\"dropbox-x\")\r\n    if (enummap !== undefined) {\r\n      ret.prop = new ui_base.EnumProperty(defaultval, enummap, path, name);\r\n\r\n      if (iconmap !== undefined) {\r\n        ret.prop.addIcons(iconmap)\r\n      }\r\n    } else {\r\n      let res = this.ctx.api.resolvePath(this.ctx, path);\r\n\r\n      if (res !== undefined) {\r\n        ret.prop = res.prop;\r\n\r\n        name = name === undefined ? res.prop.uiname : name;\r\n      }\r\n    }\r\n\r\n    if (path !== undefined) {\r\n      ret.setAttribute(\"datapath\", path);\r\n    }\r\n\r\n    ret.setAttribute(\"name\", name);\r\n\r\n    ret.onselect = (id) => {\r\n      if (callback !== undefined) {\r\n        callback(id);\r\n      }\r\n    }\r\n\r\n    ret.packflag |= packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  getroot() {\r\n    let p = this;\r\n\r\n    while (p.parent !== undefined) {\r\n      p = p.parent;\r\n    }\r\n\r\n    return p;\r\n  }\r\n\r\n  curve(id, name, default_preset, packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    //XXX don't forget to OR packflag into widget\r\n    throw new Error(\"implement me!\");\r\n\r\n    var cw = new CurveWidget(this.storagePrefix + id);\r\n\r\n    if (default_preset !== undefined)\r\n      cw.load(default_preset);\r\n\r\n    var l = this.dat.add({bleh: \"name\"}, \"bleh\");\r\n\r\n    var parent = l.domElement.parentElement.parentElement.parentElement;\r\n\r\n    parent[\"class\"] = parent.style[\"class\"] = \"closed\";\r\n\r\n    cw.bind(parent, this);\r\n    cw.draw();\r\n\r\n    l.remove();\r\n\r\n    this.curve_widgets.push(cw);\r\n\r\n    return cw;\r\n  }\r\n\r\n  simpleslider(inpath, name, defaultval, min, max, step, is_int, do_redraw, callback, packflag = 0) {\r\n    return this.slider(inpath, name, defaultval, min,\r\n      max, step, is_int, do_redraw,\r\n      callback, packflag | PackFlags.SIMPLE_NUMSLIDERS);\r\n  }\r\n\r\n  slider(inpath, name, defaultval, min, max, step, is_int, do_redraw, callback, packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n    let ret;\r\n\r\n    if (packflag & PackFlags.SIMPLE_NUMSLIDERS) {\r\n      ret = document.createElement(\"numslider-simple-x\")\r\n    } else {\r\n      ret = document.createElement(\"numslider-x\")\r\n    }\r\n    ret.packflag |= packflag;\r\n\r\n    if (inpath) {\r\n      let path = this._joinPrefix(inpath);\r\n\r\n      ret.setAttribute(\"datapath\", path);\r\n\r\n      let rdef;\r\n      try {\r\n        rdef = this.ctx.api.resolvePath(this.ctx, path, true);\r\n      } catch (error) {\r\n        if (error instanceof DataPathError) {\r\n          util.print_stack(error);\r\n          console.warn(\"Error resolving property\", path);\r\n        } else {\r\n          throw error;\r\n        }\r\n      }\r\n      if (rdef && rdef.prop) {\r\n        let prop = rdef.prop;\r\n\r\n        let range = prop.ui_range !== undefined ? prop.ui_range : prop.range;\r\n        range = range === undefined ? [-10000, 10000] : range;\r\n\r\n        if (min === undefined)\r\n          min = range[0];\r\n        if (max === undefined)\r\n          max = range[1];\r\n        if (is_int === undefined)\r\n          is_int = prop.type === PropTypes.INT;\r\n        if (name === undefined)\r\n          name = prop.uiname;\r\n        if (step === undefined)\r\n          step = prop.step;\r\n      } else {\r\n        console.warn(\"warning, failed to lookup property info for path\", path);\r\n      }\r\n    }\r\n\r\n    if (name)\r\n      ret.setAttribute(\"name\", name);\r\n    if (min !== undefined)\r\n      ret.setAttribute(\"min\", min);\r\n    if (max !== undefined)\r\n      ret.setAttribute(\"max\", max);\r\n    if (is_int)\r\n      ret.setAttribute(\"is_int\", is_int);\r\n\r\n    if (callback) {\r\n      ret.onchange = callback;\r\n    }\r\n\r\n    this._add(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  panel(name, id, packflag = 0) {\r\n    id = id === undefined ? name : id;\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"panelframe-x\");\r\n\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    ret.setAttribute(\"title\", name);\r\n    ret.setAttribute(\"id\", id);\r\n\r\n    this._add(ret);\r\n\r\n    ret.ctx = this.ctx;\r\n    ret.contents.ctx = ret.ctx;\r\n\r\n    return ret.contents;\r\n  }\r\n\r\n  row(packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"rowframe-x\");\r\n\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    this._add(ret);\r\n\r\n    ret.ctx = this.ctx;\r\n\r\n    return ret;\r\n  }\r\n\r\n  listbox(packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"listbox-x\");\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  table(packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"tableframe-x\");\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  col(packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"colframe-x\");\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  colorPicker(inpath, packflag = 0, mass_set_path = undefined) {\r\n    let path;\r\n\r\n    if (inpath)\r\n      path = this._joinPrefix(inpath);\r\n\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"colorpicker-x\");\r\n\r\n    ret.constructor.setDefault(ret);\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n\r\n    if (path !== undefined) {\r\n      ret.setAttribute(\"datapath\", path);\r\n    }\r\n\r\n    console.warn(\"mass_set_path\", mass_set_path);\r\n    if (mass_set_path) {\r\n      ret.setAttribute(\"mass_set_path\", mass_set_path);\r\n    }\r\n\r\n    //XXX\r\n    window.colorpicker = ret;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n\r\n  //\r\n  tabs(position = \"top\", packflag = 0) {\r\n    packflag |= this.inherit_packflag;\r\n\r\n    let ret = document.createElement(\"tabcontainer-x\");\r\n\r\n    ret.constructor.setDefault(ret);\r\n    ret.setAttribute(\"bar_pos\", position);\r\n    ret.packflag |= packflag;\r\n    ret.inherit_packflag |= packflag;\r\n    ret.ctx = this.ctx;\r\n\r\n    this._add(ret);\r\n    return ret;\r\n  }\r\n};\r\n\r\nui_base.UIBase.register(Container, \"div\");\r\n\r\n\r\nexport class RowFrame extends Container {\r\n  constructor() {\r\n    super();\r\n\r\n    let style = document.createElement(\"style\");\r\n\r\n    this.shadow.appendChild(style);\r\n  }\r\n\r\n  //try to set styling as early as possible\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"flex-direction\"] = \"row\";\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    //this.style[\"flex-direction\"] = \"row\";\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"flex-direction\"] = \"row\";\r\n  }\r\n\r\n  oneAxisMargin(m = this.getDefault(\"oneAxisMargin\"), m2 = 0) {\r\n    this.style[\"margin-left\"] = this.style[\"margin-right\"] = m + \"px\";\r\n    this.style[\"margin-top\"] = this.style[\"margin-bottom\"] = \"\" + m2 + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  oneAxisPadding(m = this.getDefault(\"oneAxisPadding\"), m2 = 0) {\r\n    this.style[\"padding-left\"] = this.style[\"padding-right\"] = \"\" + m + \"px\";\r\n    this.style[\"padding-top\"] = this.style[\"padding-bottom\"] = \"\" + m2 + \"px\";\r\n\r\n    return this;\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"rowframe-x\"\r\n    };\r\n  }\r\n}\r\n\r\nUIBase.register(RowFrame);\r\n\r\nexport class ColumnFrame extends Container {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"flex-direction\"] = \"column\";\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"colframe-x\"\r\n    };\r\n  }\r\n}\r\n\r\nUIBase.register(ColumnFrame);\r\n\r\nexport class PanelFrame extends ColumnFrame {\r\n  constructor() {\r\n    super();\r\n\r\n    this.contents = document.createElement(\"colframe-x\");\r\n\r\n    this._closed = false;\r\n  }\r\n\r\n  saveData() {\r\n    let ret = {\r\n      _closed: this._closed\r\n    };\r\n\r\n    return Object.assign(super.saveData(), ret);\r\n  }\r\n\r\n  loadData(obj) {\r\n    this.closed = obj._closed;\r\n  }\r\n\r\n  clear() {\r\n    this.clear();\r\n    this.add(this.titleframe);\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    //con.style[\"margin-left\"] = \"5px\";\r\n    let con = this.titleframe = this.row();\r\n\r\n    this.setCSS();\r\n\r\n    let row = con;\r\n\r\n    let iconcheck = document.createElement(\"iconcheck-x\");\r\n    this.iconcheck = iconcheck;\r\n\r\n    this.style[\"width\"] = \"100%\";\r\n\r\n    this.overrideDefault(\"BoxMargin\", 0);\r\n    iconcheck.overrideDefault(\"BoxMargin\", 0);\r\n\r\n    iconcheck.noMarginsOrPadding();\r\n\r\n    iconcheck.overrideDefault(\"BoxBG\", \"rgba(0,0,0,0)\");\r\n    iconcheck.overrideDefault(\"BoxSubBG\", \"rgba(0,0,0,0)\");\r\n    iconcheck.overrideDefault(\"BoxDepressed\", \"rgba(0,0,0,0)\");\r\n    iconcheck.overrideDefault(\"BoxBorder\", \"rgba(0,0,0,0)\");\r\n\r\n    iconcheck.ctx = this.ctx;\r\n    iconcheck._icon_pressed = ui_base.Icons.UI_EXPAND;\r\n    iconcheck._icon = ui_base.Icons.UI_COLLAPSE;\r\n    iconcheck.drawCheck = false;\r\n    iconcheck.iconsheet = ui_base.IconSheets.SMALL;\r\n    iconcheck.checked = this._closed;\r\n\r\n    this.iconcheck.onchange = (e) => {\r\n      this.closed = this.iconcheck.checked;\r\n    };\r\n\r\n    row._add(iconcheck);\r\n\r\n    //stupid css, let's just hackishly put \" \" to create spacing2\r\n\r\n    let onclick = (e) => {\r\n      console.log(\"panel header click\");\r\n      iconcheck.checked = !iconcheck.checked;\r\n    };\r\n\r\n    let label = row.label(this.getAttribute(\"title\"));\r\n\r\n    label.overrideDefault(\"LabelText\", this.getDefault(\"TitleText\").copy());\r\n    label.noMarginsOrPadding();\r\n    label.addEventListener(\"mousedown\", onclick);\r\n    label.addEventListener(\"touchdown\", onclick);\r\n\r\n    row.background = this.getDefault(\"BoxSubBG\");\r\n    row.style[\"border-radius\"] = \"5px\";\r\n    \r\n    this.background = this.getDefault(\"BoxSub2BG\");\r\n\r\n    row.style[\"padding-right\"] = \"20px\";\r\n    row.style[\"padding-left\"] = \"5px\";\r\n    row.style[\"padding-top\"] = \"7px\";\r\n    row.style[\"padding-bottom\"] = \"5px\";\r\n\r\n    this.contents.ctx = this.ctx;\r\n    this.add(this.contents);\r\n  }\r\n\r\n  static define() {\r\n    return {\r\n      tagname: \"panelframe-x\"\r\n    };\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n  }\r\n\r\n  _setVisible(state) {\r\n    if (state) {\r\n      this.contents.remove();\r\n    } else {\r\n      this.add(this.contents, false);\r\n    }\r\n\r\n    this.contents.hidden = state;\r\n    return;\r\n    for (let c of this.shadow.childNodes) {\r\n      if (c !== this.titleframe) {\r\n        c.hidden = state;\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateClosed() {\r\n    this._setVisible(this._closed);\r\n    this.iconcheck.checked = this._closed;\r\n  }\r\n\r\n  get closed() {\r\n    return this._closed;\r\n  }\r\n\r\n  set closed(val) {\r\n    let update = !!val != !!this.closed;\r\n    this._closed = val;\r\n\r\n    //console.log(\"closed set\", update);\r\n    if (update) {\r\n      this._updateClosed();\r\n    }\r\n  }\r\n}\r\n\r\nUIBase.register(PanelFrame);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1293,
    "kind": "variable",
    "name": "_ui",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~_ui",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1294,
    "kind": "variable",
    "name": "PropFlags",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~PropFlags",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1295,
    "kind": "variable",
    "name": "PropSubTypes",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~PropSubTypes",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1296,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1297,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1298,
    "kind": "variable",
    "name": "SimpleContext",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~SimpleContext",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{SimpleContext}",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1299,
    "kind": "variable",
    "name": "DataPathError",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~DataPathError",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{DataPathError}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1300,
    "kind": "function",
    "name": "list",
    "memberof": "scripts/ui.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~list",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "params": [
      {
        "name": "iter",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1301,
    "kind": "class",
    "name": "Label",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~Label",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{Label}",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 1302,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 40,
    "undocument": true
  },
  {
    "__docId__": 1303,
    "kind": "member",
    "name": "_label",
    "memberof": "scripts/ui.js~Label",
    "static": false,
    "longname": "scripts/ui.js~Label#_label",
    "access": "private",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1304,
    "kind": "member",
    "name": "_font",
    "memberof": "scripts/ui.js~Label",
    "static": false,
    "longname": "scripts/ui.js~Label#_font",
    "access": "private",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1305,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui.js~Label",
    "static": false,
    "longname": "scripts/ui.js~Label#dom",
    "access": "public",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1306,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#init",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1307,
    "kind": "get",
    "name": "font",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#font",
    "access": "public",
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1308,
    "kind": "set",
    "name": "font",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#font",
    "access": "public",
    "description": "Set a font defined in ui_base.defaults\ne.g. DefaultText",
    "lineNumber": 76
  },
  {
    "__docId__": 1310,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 87,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1311,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#update",
    "access": "public",
    "description": null,
    "lineNumber": 117,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1312,
    "kind": "get",
    "name": "text",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#text",
    "access": "public",
    "description": null,
    "lineNumber": 123,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1313,
    "kind": "set",
    "name": "text",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Label#text",
    "access": "public",
    "description": null,
    "lineNumber": 128,
    "undocument": true
  },
  {
    "__docId__": 1315,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui.js~Label",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~Label.define",
    "access": "public",
    "description": null,
    "lineNumber": 136,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1316,
    "kind": "class",
    "name": "Container",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~Container",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{Container}",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 1317,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 146,
    "undocument": true
  },
  {
    "__docId__": 1318,
    "kind": "member",
    "name": "dataPrefix",
    "memberof": "scripts/ui.js~Container",
    "static": false,
    "longname": "scripts/ui.js~Container#dataPrefix",
    "access": "public",
    "description": null,
    "lineNumber": 149,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1319,
    "kind": "member",
    "name": "inherit_packflag",
    "memberof": "scripts/ui.js~Container",
    "static": false,
    "longname": "scripts/ui.js~Container#inherit_packflag",
    "access": "public",
    "description": null,
    "lineNumber": 150,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1320,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#init",
    "access": "public",
    "description": null,
    "lineNumber": 159,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1321,
    "kind": "method",
    "name": "useIcons",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#useIcons",
    "access": "public",
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "params": [
      {
        "name": "enabled",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1322,
    "kind": "member",
    "name": "packflag",
    "memberof": "scripts/ui.js~Container",
    "static": false,
    "longname": "scripts/ui.js~Container#packflag",
    "access": "public",
    "description": null,
    "lineNumber": 173,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1326,
    "kind": "method",
    "name": "wrap",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#wrap",
    "access": "public",
    "description": "",
    "lineNumber": 186,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Container}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "mode:",
        "description": "flexbox wrap mode, can be wrap, nowrap, or wrap-reverse"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Container"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 1327,
    "kind": "method",
    "name": "noMarginsOrPadding",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#noMarginsOrPadding",
    "access": "public",
    "description": null,
    "lineNumber": 191,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1328,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 204,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1329,
    "kind": "method",
    "name": "overrideDefault",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#overrideDefault",
    "access": "public",
    "description": null,
    "lineNumber": 211,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1330,
    "kind": "method",
    "name": "strip",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#strip",
    "access": "public",
    "description": null,
    "lineNumber": 223,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "m2",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1331,
    "kind": "method",
    "name": "oneAxisMargin",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#oneAxisMargin",
    "access": "public",
    "description": "tries to set margin along one axis only in smart manner",
    "lineNumber": 247,
    "params": [
      {
        "name": "m",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "m2",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1332,
    "kind": "method",
    "name": "oneAxisPadding",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#oneAxisPadding",
    "access": "public",
    "description": "tries to set padding along one axis only in smart manner",
    "lineNumber": 257,
    "params": [
      {
        "name": "m",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "m2",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1333,
    "kind": "method",
    "name": "setMargin",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#setMargin",
    "access": "public",
    "description": null,
    "lineNumber": 264,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1334,
    "kind": "method",
    "name": "setPadding",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#setPadding",
    "access": "public",
    "description": null,
    "lineNumber": 270,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1335,
    "kind": "method",
    "name": "setSize",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#setSize",
    "access": "public",
    "description": null,
    "lineNumber": 276,
    "undocument": true,
    "params": [
      {
        "name": "width",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1336,
    "kind": "set",
    "name": "background",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#background",
    "access": "public",
    "description": null,
    "lineNumber": 294,
    "undocument": true
  },
  {
    "__docId__": 1337,
    "kind": "member",
    "name": "__background",
    "memberof": "scripts/ui.js~Container",
    "static": false,
    "longname": "scripts/ui.js~Container#__background",
    "access": "private",
    "description": null,
    "lineNumber": 295,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1338,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~Container.define",
    "access": "public",
    "description": null,
    "lineNumber": 304,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1339,
    "kind": "method",
    "name": "save",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#save",
    "access": "public",
    "description": null,
    "lineNumber": 310,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1340,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#load",
    "access": "public",
    "description": null,
    "lineNumber": 313,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1341,
    "kind": "method",
    "name": "saveVisibility",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#saveVisibility",
    "access": "public",
    "description": null,
    "lineNumber": 316,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1342,
    "kind": "method",
    "name": "loadVisibility",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#loadVisibility",
    "access": "public",
    "description": null,
    "lineNumber": 321,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1343,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 339,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1344,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 347,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1345,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 355,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1346,
    "kind": "method",
    "name": "redrawCurves",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#redrawCurves",
    "access": "public",
    "description": null,
    "lineNumber": 361,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1347,
    "kind": "method",
    "name": "listen",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#listen",
    "access": "public",
    "description": null,
    "lineNumber": 372,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1348,
    "kind": "get",
    "name": "children",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#children",
    "access": "public",
    "description": null,
    "lineNumber": 378,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1349,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#update",
    "access": "public",
    "description": null,
    "lineNumber": 388,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1350,
    "kind": "method",
    "name": "appendChild",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#appendChild",
    "access": "public",
    "description": null,
    "lineNumber": 400,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1351,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#clear",
    "access": "public",
    "description": null,
    "lineNumber": 415,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1352,
    "kind": "method",
    "name": "_prepend",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#_prepend",
    "access": "private",
    "description": null,
    "lineNumber": 427,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1353,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#add",
    "access": "public",
    "description": null,
    "lineNumber": 431,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1354,
    "kind": "method",
    "name": "_add",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#_add",
    "access": "private",
    "description": null,
    "lineNumber": 435,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      },
      {
        "name": "prepend",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1355,
    "kind": "method",
    "name": "menu",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#menu",
    "access": "public",
    "description": null,
    "lineNumber": 464,
    "undocument": true,
    "params": [
      {
        "name": "title",
        "types": [
          "*"
        ]
      },
      {
        "name": "list",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1356,
    "kind": "method",
    "name": "tool",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#tool",
    "access": "public",
    "description": null,
    "lineNumber": 533,
    "undocument": true,
    "params": [
      {
        "name": "path_or_cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "create_cb",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1357,
    "kind": "method",
    "name": "textbox",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#textbox",
    "access": "public",
    "description": null,
    "lineNumber": 611,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      },
      {
        "name": "cb",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1358,
    "kind": "method",
    "name": "pathlabel",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#pathlabel",
    "access": "public",
    "description": null,
    "lineNumber": 634,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "label",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1359,
    "kind": "method",
    "name": "label",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#label",
    "access": "public",
    "description": null,
    "lineNumber": 649,
    "undocument": true,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1360,
    "kind": "method",
    "name": "iconbutton",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#iconbutton",
    "access": "public",
    "description": null,
    "lineNumber": 658,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "description",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1361,
    "kind": "method",
    "name": "button",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#button",
    "access": "public",
    "description": null,
    "lineNumber": 682,
    "undocument": true,
    "params": [
      {
        "name": "label",
        "types": [
          "*"
        ]
      },
      {
        "name": "cb",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1362,
    "kind": "method",
    "name": "_joinPrefix",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#_joinPrefix",
    "access": "private",
    "description": null,
    "lineNumber": 698,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1363,
    "kind": "method",
    "name": "colorbutton",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#colorbutton",
    "access": "public",
    "description": null,
    "lineNumber": 704,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "types": [
          "*"
        ]
      },
      {
        "name": "mass_set_path",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1364,
    "kind": "method",
    "name": "noteframe",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#noteframe",
    "access": "public",
    "description": null,
    "lineNumber": 723,
    "undocument": true,
    "params": [
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1365,
    "kind": "method",
    "name": "prop",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#prop",
    "access": "public",
    "description": null,
    "lineNumber": 732,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "mass_set_path",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1366,
    "kind": "method",
    "name": "check",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#check",
    "access": "public",
    "description": null,
    "lineNumber": 849,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "mass_set_path",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1367,
    "kind": "method",
    "name": "checkenum",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#checkenum",
    "access": "public",
    "description": null,
    "lineNumber": 882,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "types": [
          "*"
        ]
      },
      {
        "name": "enummap",
        "types": [
          "*"
        ]
      },
      {
        "name": "defaultval",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      },
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      },
      {
        "name": "mass_set_path",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1368,
    "kind": "method",
    "name": "checkenum_panel",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#checkenum_panel",
    "access": "public",
    "description": null,
    "lineNumber": 980,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "callback",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "mass_set_path",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "prop",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1369,
    "kind": "method",
    "name": "listenum",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#listenum",
    "access": "public",
    "description": null,
    "lineNumber": 1091,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "enummap",
        "types": [
          "*"
        ]
      },
      {
        "name": "defaultval",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      },
      {
        "name": "iconmap",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1370,
    "kind": "method",
    "name": "getroot",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#getroot",
    "access": "public",
    "description": null,
    "lineNumber": 1135,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1371,
    "kind": "method",
    "name": "curve",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#curve",
    "access": "public",
    "description": null,
    "lineNumber": 1145,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "default_preset",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1372,
    "kind": "method",
    "name": "simpleslider",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#simpleslider",
    "access": "public",
    "description": null,
    "lineNumber": 1172,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "defaultval",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      },
      {
        "name": "step",
        "types": [
          "*"
        ]
      },
      {
        "name": "is_int",
        "types": [
          "*"
        ]
      },
      {
        "name": "do_redraw",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1373,
    "kind": "method",
    "name": "slider",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#slider",
    "access": "public",
    "description": null,
    "lineNumber": 1178,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "defaultval",
        "types": [
          "*"
        ]
      },
      {
        "name": "min",
        "types": [
          "*"
        ]
      },
      {
        "name": "max",
        "types": [
          "*"
        ]
      },
      {
        "name": "step",
        "types": [
          "*"
        ]
      },
      {
        "name": "is_int",
        "types": [
          "*"
        ]
      },
      {
        "name": "do_redraw",
        "types": [
          "*"
        ]
      },
      {
        "name": "callback",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1374,
    "kind": "method",
    "name": "panel",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#panel",
    "access": "public",
    "description": null,
    "lineNumber": 1244,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1375,
    "kind": "method",
    "name": "row",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#row",
    "access": "public",
    "description": null,
    "lineNumber": 1264,
    "undocument": true,
    "params": [
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1376,
    "kind": "method",
    "name": "listbox",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#listbox",
    "access": "public",
    "description": null,
    "lineNumber": 1279,
    "undocument": true,
    "params": [
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1377,
    "kind": "method",
    "name": "table",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#table",
    "access": "public",
    "description": null,
    "lineNumber": 1290,
    "undocument": true,
    "params": [
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1378,
    "kind": "method",
    "name": "col",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#col",
    "access": "public",
    "description": null,
    "lineNumber": 1301,
    "undocument": true,
    "params": [
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1379,
    "kind": "method",
    "name": "colorPicker",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#colorPicker",
    "access": "public",
    "description": null,
    "lineNumber": 1312,
    "undocument": true,
    "params": [
      {
        "name": "inpath",
        "types": [
          "*"
        ]
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "mass_set_path",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1380,
    "kind": "method",
    "name": "tabs",
    "memberof": "scripts/ui.js~Container",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~Container#tabs",
    "access": "public",
    "description": null,
    "lineNumber": 1343,
    "undocument": true,
    "params": [
      {
        "name": "position",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "top",
        "defaultValue": "top"
      },
      {
        "name": "packflag",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1381,
    "kind": "class",
    "name": "RowFrame",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~RowFrame",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{RowFrame}",
    "description": null,
    "lineNumber": 1362,
    "undocument": true,
    "interface": false,
    "extends": [
      "Container"
    ]
  },
  {
    "__docId__": 1382,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1363,
    "undocument": true
  },
  {
    "__docId__": 1383,
    "kind": "method",
    "name": "connectedCallback",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#connectedCallback",
    "access": "public",
    "description": null,
    "lineNumber": 1372,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1384,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#init",
    "access": "public",
    "description": null,
    "lineNumber": 1379,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1385,
    "kind": "method",
    "name": "oneAxisMargin",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#oneAxisMargin",
    "access": "public",
    "description": null,
    "lineNumber": 1387,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "m2",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1386,
    "kind": "method",
    "name": "oneAxisPadding",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#oneAxisPadding",
    "access": "public",
    "description": null,
    "lineNumber": 1394,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "m2",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1387,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~RowFrame#update",
    "access": "public",
    "description": null,
    "lineNumber": 1401,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1388,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui.js~RowFrame",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~RowFrame.define",
    "access": "public",
    "description": null,
    "lineNumber": 1405,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1389,
    "kind": "class",
    "name": "ColumnFrame",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~ColumnFrame",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{ColumnFrame}",
    "description": null,
    "lineNumber": 1414,
    "undocument": true,
    "interface": false,
    "extends": [
      "Container"
    ]
  },
  {
    "__docId__": 1390,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui.js~ColumnFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~ColumnFrame#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1415,
    "undocument": true
  },
  {
    "__docId__": 1391,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui.js~ColumnFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~ColumnFrame#init",
    "access": "public",
    "description": null,
    "lineNumber": 1419,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1392,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui.js~ColumnFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~ColumnFrame#update",
    "access": "public",
    "description": null,
    "lineNumber": 1426,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1393,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui.js~ColumnFrame",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~ColumnFrame.define",
    "access": "public",
    "description": null,
    "lineNumber": 1430,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1394,
    "kind": "class",
    "name": "PanelFrame",
    "memberof": "scripts/ui.js",
    "static": true,
    "longname": "scripts/ui.js~PanelFrame",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui.js",
    "importStyle": "{PanelFrame}",
    "description": null,
    "lineNumber": 1439,
    "undocument": true,
    "interface": false,
    "extends": [
      "ColumnFrame"
    ]
  },
  {
    "__docId__": 1395,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1440,
    "undocument": true
  },
  {
    "__docId__": 1396,
    "kind": "member",
    "name": "contents",
    "memberof": "scripts/ui.js~PanelFrame",
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#contents",
    "access": "public",
    "description": null,
    "lineNumber": 1443,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1397,
    "kind": "member",
    "name": "_closed",
    "memberof": "scripts/ui.js~PanelFrame",
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#_closed",
    "access": "private",
    "description": null,
    "lineNumber": 1445,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1398,
    "kind": "method",
    "name": "saveData",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#saveData",
    "access": "public",
    "description": null,
    "lineNumber": 1448,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1399,
    "kind": "method",
    "name": "loadData",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#loadData",
    "access": "public",
    "description": null,
    "lineNumber": 1456,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1401,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#clear",
    "access": "public",
    "description": null,
    "lineNumber": 1460,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1402,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#init",
    "access": "public",
    "description": null,
    "lineNumber": 1465,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1403,
    "kind": "member",
    "name": "iconcheck",
    "memberof": "scripts/ui.js~PanelFrame",
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#iconcheck",
    "access": "public",
    "description": null,
    "lineNumber": 1476,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1405,
    "kind": "member",
    "name": "background",
    "memberof": "scripts/ui.js~PanelFrame",
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#background",
    "access": "public",
    "description": null,
    "lineNumber": 1520,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1406,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui.js~PanelFrame.define",
    "access": "public",
    "description": null,
    "lineNumber": 1531,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1407,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#update",
    "access": "public",
    "description": null,
    "lineNumber": 1537,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1408,
    "kind": "method",
    "name": "_setVisible",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#_setVisible",
    "access": "private",
    "description": null,
    "lineNumber": 1541,
    "undocument": true,
    "params": [
      {
        "name": "state",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1409,
    "kind": "method",
    "name": "_updateClosed",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#_updateClosed",
    "access": "private",
    "description": null,
    "lineNumber": 1557,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1410,
    "kind": "get",
    "name": "closed",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#closed",
    "access": "public",
    "description": null,
    "lineNumber": 1562,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1411,
    "kind": "set",
    "name": "closed",
    "memberof": "scripts/ui.js~PanelFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui.js~PanelFrame#closed",
    "access": "public",
    "description": null,
    "lineNumber": 1566,
    "undocument": true
  },
  {
    "__docId__": 1413,
    "kind": "file",
    "name": "scripts/ui_base.js",
    "content": "let _ui_base = undefined;\r\n\r\nimport './units.js';\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as toolprop from './toolprop.js';\r\nimport * as controller from './controller.js';\r\nimport {pushModalLight, popModalLight, copyEvent} from './simple_events.js';\r\n\r\nexport * from './ui_theme.js';\r\n\r\nimport {DefaultTheme} from './theme.js';\r\nexport let theme = {};\r\n\r\n//load default theme\r\nfor (let k in DefaultTheme) {\r\n  theme[k] = DefaultTheme[k];\r\n}\r\n\r\nlet Vector4 = vectormath.Vector4;\r\n\r\nexport let Icons = {};\r\n\r\n/*\r\nIcons are defined in spritesheets that live in \r\nthe iconsheet16/32 dom nodes.  Icons are numbered start from\r\nthe upper left sprite tile.\r\n\r\nThis function sets the mapping between icon numbers and names.\r\n\r\nThe following icons should be in the icon sheet and in this map:\r\n\r\nRESIZE      :\r\nSMALL_PLUS  :\r\nTRANSLATE   : for moving things\r\nUI_EXPAND   : panel open icon\r\nUI_COLLAPSE : panel close icon\r\nNOTE_EXCL   : exclamation mark for notifications\r\n*/\r\nexport function setIconMap(icons) {\r\n  for (let k in icons) {\r\n    Icons[k] = icons[k];\r\n  }\r\n}\r\n\r\nexport const EnumProperty = toolprop.EnumProperty;\r\n\r\nexport const ErrorColors = {\r\n  WARNING : \"yellow\",\r\n  ERROR : \"red\",\r\n  OK : \"green\"\r\n};\r\n\r\nexport function setTheme(theme2) {\r\n  //merge theme\r\n  for (let k in theme2) {\r\n    let v = theme2[k];\r\n\r\n    if (!(k in theme)) {\r\n      theme[k] = {};\r\n    }\r\n\r\n    for (let k2 in v) {\r\n      theme[k][k2] = v[k2];\r\n    }\r\n  }\r\n}\r\n\r\nlet _last_report = util.time_ms();\r\nexport function report(msg) {\r\n  if (util.time_ms() - _last_report > 350) {\r\n    console.warn(msg);\r\n    _last_report = util.time_ms();\r\n  }\r\n}\r\n\r\n//this function is deprecated\r\nexport function getDefault(key, elem) {\r\n  console.warn(\"Deprecated call to ui_base.js:getDefault\");\r\n\r\n  if (key in theme.base) {\r\n    return theme.base[key];\r\n  } else {\r\n    throw new Error(\"Unknown default\", key);\r\n  }\r\n}\r\n\r\n//XXX implement me!\r\nexport function IsMobile() {\r\n  return false;\r\n};\r\n\r\nlet keys = [\"margin\", \"padding\", \"margin-block-start\", \"margin-block-end\"];\r\nkeys = keys.concat([\"padding-block-start\", \"padding-block-end\"]);\r\n\r\nkeys = keys.concat([\"margin-left\", \"margin-top\", \"margin-bottom\", \"margin-right\"]);\r\nkeys = keys.concat([\"padding-left\", \"padding-top\", \"padding-bottom\", \"padding-right\"]);\r\nexport const marginPaddingCSSKeys = keys;\r\n\r\nclass _IconManager {\r\n  constructor(image, tilesize, number_of_horizontal_tiles, drawsize) {\r\n    this.tilex = number_of_horizontal_tiles;\r\n    this.tilesize = tilesize;\r\n    this.drawsize = drawsize;\r\n\r\n    this.image = image;\r\n  }\r\n  \r\n  canvasDraw(elem, canvas, g, icon, x=0, y=0) {\r\n    let tx = icon % this.tilex;\r\n    let ty = ~~(icon / this.tilex);\r\n\r\n    let dpi = elem.getDPI();\r\n    let ts = this.tilesize;\r\n    let ds = this.drawsize;\r\n\r\n    g.drawImage(this.image, tx*ts, ty*ts, ts, ts, x, y, ds*dpi, ds*dpi);\r\n  }\r\n\r\n  setCSS(icon, dom) {\r\n    dom.style[\"background\"] = this.getCSS(icon);\r\n    dom.style[\"background-size\"] = (this.drawsize*this.tilex) + \"px\";\r\n\r\n    if (!dom.style[\"width\"]) {\r\n      dom.style[\"width\"] = this.drawsize + \"px\";\r\n    }\r\n    if (!dom.style[\"height\"]) {\r\n      dom.style[\"height\"] = this.drawsize + \"px\";\r\n    }\r\n  }\r\n\r\n  //icon is an integer\r\n  getCSS(icon) {\r\n    if (icon == -1) { //-1 means no icon\r\n      return '';\r\n    }\r\n    \r\n    let ratio = this.drawsize / this.tilesize;\r\n\r\n    let x = (-(icon % this.tilex) * this.tilesize) * ratio;\r\n    let y = (-(~~(icon / this.tilex)) * this.tilesize) * ratio;\r\n\r\n    //x = ~~x;\r\n    //y = ~~y;\r\n\r\n    //console.log(this.tilesize, this.drawsize, x, y);\r\n\r\n    return `url(\"${this.image.src}\") ${x}px ${y}px`;\r\n  }\r\n}\r\n\r\nexport class IconManager {\r\n  /**\r\n   images is a list of dom ids of img tags\r\n\r\n   sizes is a list of tile sizes, one per image.\r\n   you can control the final *draw* size by passing an array\r\n   of [tilesize, drawsize] instead of just a number.\r\n   */\r\n  constructor(images, sizes, horizontal_tile_count) {\r\n    this.iconsheets = [];\r\n    this.tilex = horizontal_tile_count;\r\n    \r\n    for (let i=0; i<images.length; i++) {\r\n      let size, drawsize;\r\n\r\n      if (typeof sizes[i] == \"object\") {\r\n        size = sizes[i][0], drawsize = sizes[i][1];\r\n      } else {\r\n        size = drawsize = sizes[i];\r\n      }\r\n\r\n      this.iconsheets.push(new _IconManager(images[i], size, horizontal_tile_count, drawsize));\r\n    }\r\n  }\r\n\r\n  load(manager2) {\r\n    this.iconsheets = manager2.iconsheets;\r\n    this.tilex = manager2.tilex;\r\n\r\n    return this;\r\n  }\r\n\r\n  reset(horizontal_tile_count) {\r\n    this.iconsheets.length = 0;\r\n    this.tilex = horizontal_tile_count;\r\n  }\r\n\r\n  add(image, size, drawsize=size) {\r\n    this.iconsheets.push(new _IconManager(image, size, this.tilex, drawsize));\r\n    return this;\r\n  }\r\n\r\n  canvasDraw(elem, canvas, g, icon, x=0, y=0, sheet=0) {\r\n    let base = this.iconsheets[sheet];\r\n    \r\n    sheet = this.findSheet(sheet);\r\n    let ds = sheet.drawsize;\r\n\r\n    sheet.drawsize = base.drawsize;\r\n    sheet.canvasDraw(elem, canvas, g, icon, x, y);\r\n    sheet.drawsize = ds;\r\n  }\r\n  \r\n  findSheet(sheet) {\r\n    if (sheet === undefined) {\r\n      console.warn(\"sheet was undefined\");\r\n      sheet = 0;\r\n    }\r\n    \r\n    let base = this.iconsheets[sheet];\r\n\r\n    /**sigh**/\r\n    let dpi = UIBase.getDPI();\r\n    let minsheet = undefined;\r\n    let goal = dpi*base.drawsize;\r\n\r\n    for (let sheet of this.iconsheets) {\r\n      minsheet = sheet;\r\n\r\n      if (sheet.drawsize >= goal) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return minsheet === undefined ? base : minsheet;\r\n  }\r\n\r\n  getTileSize(sheet=0) {\r\n    return this.iconsheets[sheet].drawsize;\r\n    return this.findSheet(sheet).drawsize;\r\n  }\r\n\r\n  getRealSize(sheet=0) {\r\n    return this.iconsheets[sheet].tilesize;\r\n    return this.findSheet(sheet).tilesize;\r\n    //return this.iconsheets[sheet].tilesize;\r\n  }\r\n  \r\n  //icon is an integer\r\n  getCSS(icon, sheet=0) {\r\n    //return this.iconsheets[sheet].getCSS(icon);\r\n    //return this.findSheet(sheet).getCSS(icon);\r\n\r\n    let base = this.iconsheets[sheet];\r\n    sheet = this.findSheet(sheet);\r\n    let ds = sheet.drawsize;\r\n    \r\n    sheet.drawsize = base.drawsize;\r\n    let ret = sheet.getCSS(icon);\r\n    sheet.drawsize = ds;\r\n    \r\n    return ret;\r\n  }\r\n\r\n  setCSS(icon, dom, sheet=0) {\r\n    //return this.iconsheets[sheet].setCSS(icon, dom);\r\n    \r\n    let base = this.iconsheets[sheet];\r\n    sheet = this.findSheet(sheet);\r\n    let ds = sheet.drawsize;\r\n    \r\n    sheet.drawsize = base.drawsize;\r\n    let ret = sheet.setCSS(icon, dom);\r\n    sheet.drawsize = ds;\r\n\r\n    return ret;\r\n  }\r\n}\r\n\r\nexport let iconmanager = new IconManager([\r\n  document.getElementById(\"iconsheet16\"),\r\n  document.getElementById(\"iconsheet32\"),\r\n  document.getElementById(\"iconsheet48\")\r\n], [16, 32, 64], 16);\r\n\r\nwindow._iconmanager = iconmanager; //debug global\r\n\r\n//if client code overrides iconsheets, they must follow logical convention\r\n//that the first one is \"small\" and the second is \"large\"\r\nexport let IconSheets = {\r\n  SMALL  : 0,\r\n  LARGE  : 1,\r\n  XLARGE : 2\r\n};\r\n\r\nexport function setIconManager(manager, IconSheetsOverride) {\r\n  iconmanager.load(manager);\r\n\r\n  if (IconSheetsOverride !== undefined) {\r\n    for (let k in IconSheetsOverride) {\r\n      IconSheets[k] = IconSheetsOverride[k];\r\n    }\r\n  }\r\n}\r\n\r\nexport function makeIconDiv(icon, sheet=0) {\r\n    let size = iconmanager.getRealSize(sheet);\r\n    let drawsize = iconmanager.getTileSize(sheet);\r\n\r\n    let icontest = document.createElement(\"div\");\r\n    \r\n    icontest.style[\"width\"] = icontest.style[\"min-width\"] = drawsize + \"px\";\r\n    icontest.style[\"height\"] = icontest.style[\"min-height\"] = drawsize + \"px\";\r\n    \r\n    icontest.style[\"background-color\"] = \"orange\";\r\n    \r\n    icontest.style[\"margin\"] = \"0px\";\r\n    icontest.style[\"padding\"] = \"0px\";\r\n\r\n    iconmanager.setCSS(icon, icontest, sheet);\r\n\r\n    return icontest;\r\n}\r\n\r\nlet Vector2 = vectormath.Vector2;\r\nlet Matrix4 = vectormath.Matrix4;\r\n\r\nexport let dpistack = [];\r\n\r\nexport const UIFlags = {\r\n\r\n};\r\n\r\nexport const PackFlags = {\r\n  INHERIT_WIDTH  : 1,\r\n  INHERIT_HEIGHT : 2,\r\n  VERTICAL : 4,\r\n  USE_ICONS : 8,\r\n  SMALL_ICON : 16,\r\n  LARGE_ICON : 32,\r\n\r\n  //internal flags\r\n  STRIP_HORIZ : 512,\r\n  STRIP_VERT : 1024,\r\n  STRIP : 512|1024,\r\n  SIMPLE_NUMSLIDERS : 2048\r\n};\r\n \r\nlet first = (iter) => {\r\n  if (iter === undefined) {\r\n    return undefined;\r\n  }\r\n  \r\n  if (!(Symbol.iterator in iter)) {\r\n    for (let item in iter) {\r\n      return item;\r\n    }\r\n    \r\n    return undefined;\r\n  }\r\n  \r\n  for (let item of iter) {\r\n    return item;\r\n  }\r\n}\r\n\r\n\r\nimport {DataPathError} from './controller.js';\r\nexport {DataPathError} from './controller.js';\r\n\r\nexport class SimpleContext {\r\n  constructor(stateobj, api) {\r\n    if (api === undefined) {\r\n      throw new Error(\"api cannot be undefined, see controller.js\");\r\n    }\r\n    this.state = stateobj;\r\n    this.api = api;\r\n  }\r\n}\r\n  \r\n\r\nlet _idgen = 0;\r\n\r\nexport class UIBase extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n\r\n    this.visibleToPick = true;\r\n\r\n    this._override_class = undefined;\r\n    this.parentWidget = undefined;\r\n\r\n    /*\r\n    this.shadow._appendChild = this.shadow.appendChild;\r\n    this.shadow.appendChild = (child) => {\r\n      if (child instanceof UIBase) {\r\n        child.ctx = this.ctx;\r\n        child.parentWidget = this;\r\n\r\n        if (child._useDataPathToolOp === undefined) {\r\n          child.useDataPathToolOp = this.useDataPathToolOp;\r\n        }\r\n      }\r\n\r\n      return this.shadow._appendChild(child);\r\n    };\r\n    //*/\r\n\r\n    this._useDataPathToolOp = undefined;\r\n    let tagname = this.constructor.define().tagname;\r\n    \r\n    this._id = tagname.replace(/\\-/g, \"_\") + (_idgen++);\r\n\r\n    this.default_overrides = {};\r\n    this.class_default_overrides = {};\r\n\r\n    //getting css to flow down properly can be a pain, so\r\n    //some packing settings are set as bitflags here,\r\n    //see PackFlags\r\n    \r\n    /*\r\n    setInterval(() => {\r\n      this.update();\r\n    }, 200);\r\n    //*/\r\n\r\n    this._modaldata = undefined;\r\n    this.packflag = this.getDefault(\"BasePackFlag\");\r\n    this._disabled = false;\r\n    this._disdata = undefined;\r\n    this.shadow = this.attachShadow({mode : 'open'});\r\n    this._ctx = undefined;\r\n    \r\n    this.description = undefined;\r\n    \r\n    let style = document.createElement(\"style\");\r\n    style.textContent = `\r\n    .DefaultText {\r\n      font: `+_getFont(this)+`;\r\n    }\r\n    `;\r\n    this.shadow.appendChild(style);\r\n    this._init_done = false;\r\n\r\n    //make default touch handlers that send mouse events\r\n    let do_touch = (e, type, button) => {\r\n      button = button === undefined ? 0 : button;\r\n      let e2 = copyEvent(e);\r\n\r\n      if (e.touches.length == 0) {\r\n        //hrm, what to do, what to do. . .\r\n      } else {\r\n        let t = e.touches[0];\r\n\r\n        e2.pageX = t.pageX;\r\n        e2.pageY = t.pageY;\r\n        e2.screenX = t.screenX;\r\n        e2.screenY = t.screenY;\r\n        e2.clientX = t.clientX;\r\n        e2.clientY = t.clientY;\r\n        e2.x = t.x;\r\n        e2.y = t.y;\r\n      }\r\n\r\n      e2.button = button;\r\n\r\n      e2 = new MouseEvent(type, e2);\r\n\r\n      e2.was_touch = true;\r\n      e2.stopPropagation = e.stopPropagation.bind(e);\r\n      e2.preventDefault = e.preventDefault.bind(e);\r\n      e2.touches = e.touches;\r\n\r\n      this.dispatchEvent(e2);\r\n    };\r\n\r\n    this.addEventListener(\"touchstart\", (e) => {\r\n      do_touch(e, \"mousedown\", 0);\r\n    }, {passive : false});\r\n    this.addEventListener(\"touchmove\", (e) => {\r\n      do_touch(e, \"mousemove\");\r\n    }, {passive : false});\r\n    this.addEventListener(\"touchcancel\", (e) => {\r\n      do_touch(e, \"mouseup\", 2);\r\n    }, {passive : false});\r\n    this.addEventListener(\"touchend\", (e) => {\r\n      do_touch(e, \"mouseup\", 0);\r\n    }, {passive : false});\r\n  }\r\n\r\n  /**\r\n   causes calls to setPathValue to go through\r\n   toolpath app.datapath_set(path=\"\" newValueJSON=\"\")\r\n\r\n   every child will inherit\r\n  */\r\n  set useDataPathToolOp(val) {\r\n    this._useDataPathToolOp = val;\r\n\r\n    this._forEachChildWidget((n) => {\r\n      n.useDataPathToolOp = val;\r\n    })\r\n  }\r\n\r\n  connectedCallback() {\r\n\r\n  }\r\n\r\n  noMarginsOrPadding() {\r\n    let keys = [\"margin\", \"padding\", \"margin-block-start\", \"margin-block-end\"];\r\n    keys = keys.concat([\"padding-block-start\", \"padding-block-end\"]);\r\n    \r\n    keys = keys.concat([\"margin-left\", \"margin-top\", \"margin-bottom\", \"margin-right\"]);\r\n    keys = keys.concat([\"padding-left\", \"padding-top\", \"padding-bottom\", \"padding-right\"]);\r\n\r\n    for (let k of keys) {\r\n      this.style[k] = \"0px\";\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * find owning screen and tell it to update\r\n   * the global tab order\r\n   * */\r\n  regenTabOrder() {\r\n    let screen = this.getScreen();\r\n    if (screen !== undefined) {\r\n      screen.needsTabRecalc = true;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  noMargins() {\r\n    this.style[\"margin\"] = this.style[\"margin-left\"] = this.style[\"margin-right\"] = \"0px\";\r\n    this.style[\"margin-top\"] = this.style[\"margin-bottom\"] = \"0px\";\r\n    return this;\r\n  }\r\n\r\n  noPadding() {\r\n    this.style[\"padding\"] = this.style[\"padding-left\"] = this.style[\"padding-right\"] = \"0px\";\r\n    this.style[\"padding-top\"] = this.style[\"padding-bottom\"] = \"0px\";\r\n    return this;\r\n  }\r\n\r\n  get background() {\r\n    return this.__background;\r\n  }\r\n\r\n  set background(bg) {\r\n    this.__background = bg;\r\n    this.style[\"background-color\"] = bg;\r\n  }\r\n\r\n  getTotalRect() {\r\n    let found = false;\r\n\r\n    let min = new Vector2([1e17, 1e17]);\r\n    let max = new Vector2([-1e17, -1e17]);\r\n\r\n    let doaabb = (n) => {\r\n      let rs = n.getClientRects();\r\n\r\n      for (let r of rs) {\r\n        min[0] = Math.min(min[0], r.x);\r\n        min[1] = Math.min(min[1], r.y);\r\n        max[0] = Math.max(max[0], r.x+r.width);\r\n        max[1] = Math.max(max[1], r.y+r.height);\r\n\r\n        found = true;\r\n      }\r\n    };\r\n\r\n    doaabb(this);\r\n\r\n    this._forEachChildWidget((n) => {\r\n      doaabb(n);\r\n    });\r\n\r\n    if (found) {\r\n      return {\r\n        width  : max[0] - min[0],\r\n        height : max[1] - min[1],\r\n        x : min[0],\r\n        y : min[1],\r\n        left : min[0],\r\n        top : min[1],\r\n        right : max[0],\r\n        bottom : max[1]\r\n      };\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  get useDataPathToolOp() {\r\n    return this._useDataPathToolOp;\r\n  }\r\n\r\n  setCSS() {\r\n    let zoom = this.getZoom();\r\n    this.style[\"transform\"] = `scale(${zoom},${zoom})`;\r\n  }\r\n\r\n  appendChild(child) {\r\n    if (child instanceof UIBase) {\r\n      child.ctx = this.ctx;\r\n      child.parentWidget = this;\r\n\r\n      if (child._useDataPathToolOp === undefined) {\r\n        child.useDataPathToolOp = this.useDataPathToolOp;\r\n      }\r\n    }\r\n\r\n    return super.appendChild(child);\r\n  }\r\n\r\n    //delayed init\r\n  init() {\r\n    \r\n  }\r\n  \r\n  _ondestroy() {\r\n    if (this.tabIndex >= 0) {\r\n      this.regenTabOrder();\r\n    }\r\n\r\n    if (this.ondestroy !== undefined) {\r\n      this.ondestroy();\r\n    }\r\n  }\r\n  \r\n  remove() {\r\n    if (this.tabIndex >= 0) {\r\n      this.regenTabOrder();\r\n    }\r\n\r\n    super.remove();\r\n    this._ondestroy();\r\n  }\r\n  \r\n  removeChild(child) {\r\n    super.removeChild(child);\r\n    \r\n    child._ondestroy();\r\n  }\r\n\r\n\r\n  //used by container nodes\r\n  /**\r\n   * Iterates over all child widgets,\r\n   * including ones that might be inside\r\n   * of normal DOM nodes.\r\n   *\r\n   * This is done by recursing into the dom\r\n   * tree and stopping at any node that's\r\n   * descended from ui_base.UIBase\r\n   **/\r\n  _forEachChildWidget(cb, thisvar) {\r\n    let rec = (n) => {\r\n      if (n instanceof UIBase) {\r\n        if (thisvar !== undefined) {\r\n          cb.call(thisvar, n);\r\n        } else {\r\n          cb(n);\r\n        }\r\n      } else {\r\n        for (let n2 of n.childNodes) {\r\n          rec(n2);\r\n        }\r\n\r\n        if (n.shadow !== undefined) {\r\n          for (let n2 of n.shadow.childNodes) {\r\n            rec(n2);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    \r\n    for (let n of this.childNodes) {\r\n      rec(n);\r\n    }\r\n\r\n    for (let n of this.shadow.childNodes) {\r\n      rec(n);\r\n    }\r\n  }\r\n  \r\n  _init() {\r\n    if (this._init_done) {\r\n      return;\r\n    }\r\n    \r\n    this._init_done = true;\r\n    this.init();\r\n  }\r\n  \r\n  static setDefault(element) {\r\n    return element;\r\n  }\r\n  \r\n  getWinWidth() {\r\n    return window.innerWidth;\r\n  }\r\n  \r\n  getWinHeight() {\r\n    return window.innerHeight;\r\n  }\r\n\r\n  pickElement(x, y, marginx=0, marginy=0, nodeclass=UIBase) {\r\n    let ret = undefined;\r\n\r\n\r\n    let rec = (n, widget, depth=0) => {\r\n      if (n.getClientRects) {\r\n        let rects = n.getClientRects();\r\n\r\n        if (n instanceof nodeclass) {\r\n          if (!n.visibleToPick) {\r\n            return;\r\n          }\r\n\r\n          widget = n;\r\n        }\r\n\r\n        for (let rect of rects) {\r\n          let ok =   x >= rect.x-marginx && x <= rect.x+marginx+rect.width;\r\n          ok = ok && y >= rect.y-marginy && y <= rect.y+marginy+rect.height;\r\n\r\n          //ok = x >= rect.x && x <= rect.x + rect.width;\r\n          //ok = ok && y >= rect.y && y <= rect.y + rect.height;\r\n\r\n          if (nodeclass !== undefined) {\r\n            ok = ok && (widget instanceof nodeclass);\r\n          }\r\n\r\n          //console.log(ok, \"|\", x, y, rect.x, rect.y, rect.x+rect.width, rect.y+rect.height);\r\n          if (ok) {\r\n            ret = widget;\r\n          }\r\n          //console.log(rect.width, rect.height, \"eek\", depth);\r\n        }\r\n      }\r\n\r\n      let isleaf = n.childNodes.length == 0;\r\n\r\n      if (n.shadow !== undefined) {\r\n        isleaf = isleaf && (n.shadow.childNodes.length == 0);\r\n      }\r\n\r\n      if (!isleaf) {\r\n        for (let n2 of n.childNodes) {\r\n          rec(n2, widget, depth+1);\r\n        }\r\n\r\n        if (n.shadow !== undefined) {\r\n          for (let n2 of n.shadow.childNodes) {\r\n            rec(n2, widget, depth+1);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    rec(this, this);\r\n\r\n    return ret;\r\n  }\r\n  /**\r\n   *\r\n    * @param x\r\n   * @param y\r\n   * @param sx\r\n   * @param sy\r\n   * @param nodeclass\r\n   * @returns {*}\r\n   */\r\n  pickElement3(x, y, sx=0, sy=0, nodeclass=undefined) {\r\n    let rects = this.getClientRects();\r\n    let ret;\r\n    \r\n    //if (rects.length == 0)\r\n    //  return;\r\n\r\n    let nodes = [];\r\n    this._forEachChildWidget((n) => {\r\n      nodes.push(n);\r\n    });\r\n\r\n    for (let n of nodes) {\r\n      let ret2 = n.pickElement(x, y, sx, sy, nodeclass); //sx+rects[0].x, sy+rects[0].y);\r\n\r\n      ret = ret2 || ret;\r\n      ret = ret2 !== undefined ? ret2 : ret;\r\n    }\r\n\r\n    if (ret === undefined && rects !== undefined) {\r\n      console.log(rects[0]);\r\n\r\n      if (nodeclass !== undefined && !(this instanceof nodeclass))\r\n        return undefined;\r\n\r\n      //ignore svg overdraw elements\r\n      if (this.tagName == \"OVERDRAW-X\") {\r\n        return undefined;\r\n      }\r\n\r\n      for (let rect of rects) {\r\n        if (x >= rect.x+sx && x <=rect.x+sx+rect.width && \r\n            y >= rect.y+sy && y <=rect.y+sy+rect.height)\r\n        {\r\n          return this;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n\r\n  set disabled(val) {\r\n    if (!!this._disabled == !!val)\r\n      return;\r\n\r\n    if (val && !this._disdata) {\r\n      this._disdata = {\r\n        background : this.background,\r\n        bgcolor : this.style[\"background-color\"],\r\n        DefaultPanelBG : this.default_overrides.DefaultPanelBG,\r\n        BoxBG : this.default_overrides.BoxBG\r\n      };\r\n\r\n      let bg = this.getDefault(\"DisabledBG\");\r\n\r\n      this.background = bg;\r\n      this.default_overrides.DefaultPanelBG = bg;\r\n      this.default_overrides.BoxBG = bg;\r\n      this.style[\"background-color\"] = bg;\r\n\r\n      this._disabled = val;\r\n      this.on_disabled();\r\n    } else if (!val && this._disdata) {\r\n      if (this._disdata.DefaultPanelBG) {\r\n        this.default_overrides.DefaultPanelBG = this._disdata.DefaultPanelBG;\r\n      } else {\r\n        delete this.default_overrides.DefaultPanelBG;\r\n      }\r\n\r\n      if (this.boxBG) {\r\n        this.default_overrides.BoxBG = this._disdata.BoxBG;\r\n      } else {\r\n        delete this.default_overrides.BoxBG;\r\n      }\r\n\r\n      this.background = this._disdata.background;\r\n      this.style[\"background-color\"] = this._disdata.bgcolor;\r\n      this._disdata = undefined;\r\n\r\n      this._disabled = val;\r\n      this.on_enabled();\r\n    }\r\n\r\n    this._disabled = val;\r\n\r\n    let rec = (n) => {\r\n      if (n instanceof UIBase) {\r\n        n.disabled = val;\r\n      }\r\n\r\n      for (let c of n.childNodes) {\r\n        rec(c);\r\n      }\r\n\r\n      if (!n.shadow) return;\r\n\r\n      for (let c of n.shadow.childNodes) {\r\n        rec(c);\r\n      }\r\n    };\r\n\r\n    rec(this);\r\n  }\r\n\r\n  on_disabled() {\r\n\r\n  }\r\n\r\n  on_enabled() {\r\n\r\n  }\r\n\r\n  pushModal(handlers=this) {\r\n    if (this._modaldata !== undefined){\r\n      console.warn(\"UIBase.prototype.pushModal called when already in modal mode\");\r\n      //pop modal stack just to be safe\r\n      popModalLight(this._modaldata);\r\n      this._modaldata = undefined;\r\n    }\r\n\r\n    this._modaldata = pushModalLight(handlers);\r\n    return this._modaldata;\r\n  }\r\n\r\n  popModal() {\r\n    if (this._modaldata === undefined) {\r\n      console.warn(\"Invalid call to UIBase.prototype.popModal\");\r\n      return;\r\n    }\r\n\r\n    popModalLight(this._modaldata);\r\n    this._modaldata = undefined;\r\n  }\r\n\r\n  get disabled() {\r\n    return this._disabled;\r\n  }\r\n\r\n  flash(color, rect_element=this, timems=355) {\r\n    //console.warn(\"flash disabled due to bug\");\r\n    //return;\r\n    \r\n    console.warn(\"flash\");\r\n\r\n    if (typeof color != \"object\") {\r\n        color = css2color(color);\r\n    }\r\n    color = new Vector4(color);\r\n    let csscolor = color2css(color);\r\n    \r\n    if (this._flashtimer !== undefined && this._flashcolor != csscolor) {\r\n      window.setTimeout(() => {\r\n        this.flash(color, rect_element, timems);\r\n      }, 100);\r\n      \r\n      return;\r\n    } else if (this._flashtimer !== undefined) {\r\n      return;\r\n    }\r\n    \r\n    let rect = rect_element.getClientRects()[0];\r\n    if (rect === undefined) {\r\n      return;\r\n    }\r\n    \r\n    //okay, dom apparently calls onchange() on .remove, so we have\r\n    //to put the timer code first to avoid loops\r\n    let timer;\r\n    let tick = 0;\r\n    let max = ~~(timems/20);\r\n\r\n    this._flashtimer = timer = window.setInterval((e) => {\r\n      if (timer === undefined) {\r\n        return\r\n      }\r\n      \r\n      let a = 1.0 - tick / max;\r\n      div.style[\"background-color\"] = color2css(color, a*a*0.5);\r\n      \r\n      if (tick > max) {\r\n        window.clearInterval(timer);\r\n        \r\n        this._flashtimer = undefined;\r\n        this._flashcolor = undefined;\r\n        timer = undefined;\r\n        \r\n        try {\r\n          //this.remove();\r\n          //div.parentNode.insertBefore(this, div);\r\n        } catch (error) {\r\n          console.log(\"dom removal error\");\r\n          div.appendChild(this);\r\n          return;\r\n        }\r\n        \r\n        //console.log(div.parentNode);\r\n        div.remove();\r\n        \r\n        this.focus();\r\n      }\r\n      \r\n      tick++;\r\n    }, 20);\r\n\r\n    console.log(this.parentNode);\r\n    \r\n    let div = document.createElement(\"div\");\r\n    \r\n    //this.parentNode.insertBefore(div, this);\r\n    \r\n    try {\r\n      //this.remove();\r\n    } catch (error) {\r\n      console.log(\"this.remove() failure in UIBase.flash()\");\r\n    }        \r\n    \r\n    //div.appendChild(this);\r\n\r\n    div.style[\"pointer-events\"] = \"transparent\";\r\n    div.tabIndex = undefined;\r\n    div.style[\"z-index\"] = \"100\";\r\n    div.style[\"display\"] = \"float\";\r\n    div.style[\"position\"] = \"absolute\";\r\n    div.style[\"left\"] = rect.x + \"px\";\r\n    div.style[\"top\"] = rect.y + \"px\";\r\n\r\n    div.style[\"background-color\"] = color2css(color, 0.5);\r\n    div.style[\"width\"] = rect.width + \"px\";\r\n    div.style[\"height\"] = rect.height + \"px\";\r\n\r\n    document.body.appendChild(div);\r\n\r\n    this.focus();\r\n\r\n    this._flashcolor = csscolor;\r\n  }\r\n  \r\n  destory() {\r\n  }\r\n  \r\n  on_resize(newsize) {\r\n  }\r\n  \r\n  get ctx() {\r\n    return this._ctx;\r\n  }\r\n  \r\n  toJSON() {\r\n    let ret = {};\r\n    \r\n    if (this.hasAttribute(\"datapath\")) {\r\n      ret.datapath = this.getAttribute(\"datapath\");\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    if (!this._init_done) {\r\n      this._init();\r\n    }\r\n  }\r\n  \r\n  getPathValue(ctx, path) {\r\n    try {\r\n      return ctx.api.getValue(ctx, path);\r\n    } catch (error) {\r\n      //report(\"data path error in ui for\" + path);\r\n      return undefined;\r\n    }\r\n  }\r\n  \r\n  setPathValue(ctx, path, val) {\r\n    if (this.hasAttribute(\"mass_set_path\")) {\r\n      ctx.api.massSetProp(ctx, this.getAttribute(\"mass_set_path\"), val);\r\n      ctx.api.setValue(ctx, path, val);\r\n    } else {\r\n      ctx.api.setValue(ctx, path, val);\r\n    }\r\n  }\r\n  \r\n  getPathMeta(ctx, path) {\r\n    let ret = ctx.api.resolvePath(ctx, path);\r\n\r\n    return ret !== undefined ? ret.prop : undefined;\r\n  }\r\n\r\n  getScreen() {\r\n    if (this.ctx !== undefined)\r\n      return this.ctx.screen;\r\n  }\r\n\r\n  //not sure I'm happy about this. . .\r\n  //it adds a method call to the event queue,\r\n  //but only if that method (for this instance, as differentiated\r\n  //by ._id) isn't there already.\r\n  \r\n  doOnce(func, timeout=undefined) {\r\n    if (func._doOnce === undefined) {\r\n      func._doOnce_reqs = new Set();\r\n      \r\n      func._doOnce = (thisvar) => {\r\n        if (func._doOnce_reqs.has(thisvar._id)) {\r\n          return;\r\n        }\r\n        \r\n        func._doOnce_reqs.add(thisvar._id);\r\n        \r\n        window.setTimeout(() => {\r\n          func._doOnce_reqs.delete(thisvar._id);\r\n          \r\n          func.call(thisvar);\r\n        }, timeout);\r\n      }\r\n    }\r\n    \r\n    func._doOnce(this);\r\n  }\r\n\r\n  \r\n  set ctx(c) {\r\n    this._ctx = c;\r\n    \r\n    let rec = (n) => { \r\n      if (n instanceof UIBase) {\r\n        n.ctx = c;\r\n      }\r\n      for (let child of n.childNodes) {\r\n        rec(child);\r\n      }\r\n    }\r\n    \r\n    if (this._init_done) {\r\n      this.update();\r\n    }\r\n  }\r\n  \r\n  float(x=0, y=0, zindex=undefined) {\r\n    this.style.position = \"absolute\";\r\n    \r\n    this.style.left = x + \"px\";\r\n    this.style.top = y + \"px\";\r\n    \r\n    if (zindex !== undefined) {\r\n      this.style[\"z-index\"] = zindex\r\n    }\r\n    \r\n    return this;\r\n  }\r\n  \r\n  _ensureChildrenCtx() {\r\n    let ctx = this.ctx;\r\n    if (ctx === undefined) {\r\n      return;\r\n    }\r\n    \r\n    this._forEachChildWidget((n) => {\r\n      if (n.ctx === undefined) {\r\n        n.ctx = ctx;\r\n      }\r\n      \r\n      n._ensureChildrenCtx(ctx);\r\n    });\r\n  }\r\n  \r\n  //called regularly\r\n  update() {\r\n    //use dom tooltips\r\n    if (this.description !== undefined && this.title != this.description) {\r\n      this.title = this.description;\r\n    }\r\n\r\n    if (!this._init_done) {\r\n      this._init();\r\n    }\r\n    \r\n    //this._ensureChildrenCtx();\r\n  }\r\n  \r\n  onadd() {\r\n    if (this.parentWidget !== undefined) {\r\n      this._useDataPathToolOp = this.parentWidget._useDataPathToolOp;\r\n    }\r\n\r\n    if (!this._init_done) {\r\n      this.doOnce(this._init);\r\n    }\r\n\r\n    if (this.tabIndex >= 0) {\r\n      this.regenTabOrder();\r\n    }\r\n  }\r\n\r\n  getZoom() {\r\n    if (this.parentWidget !== undefined) {\r\n      return this.parentWidget.getZoom();\r\n    }\r\n\r\n    return 1.0;\r\n  }\r\n\r\n  /**try to use this method\r\n\r\n   scaling ratio (e.g. for high-resolution displays)\r\n   for zoom ratio use getZoom()\r\n   */\r\n  getDPI() {\r\n    if (this.parentWidget !== undefined) {\r\n      return this.parentWidget.getDPI();\r\n    }\r\n\r\n    return window.devicePixelRatio;\r\n  }\r\n\r\n  /**DEPRECATED\r\n\r\n    scaling ratio (e.g. for high-resolution displays)\r\n   */\r\n  static getDPI() {\r\n    //if (dpistack.length > 0) {\r\n    //  return dpistack[this.dpistack.length-1];\r\n    //} else {\r\n    return window.devicePixelRatio;\r\n    //}\r\n  }\r\n  \r\n  /**\r\n   * for saving ui state.\r\n   * see saveUIData() export\r\n   *\r\n   * should fail gracefully.\r\n   */\r\n  saveData() {\r\n    return {\r\n    };\r\n  }\r\n\r\n  /**\r\n   * for saving ui state.\r\n   * see saveUIData() export\r\n   *\r\n   * should fail gracefully.\r\n   *\r\n   * also, it doesn't rebuild the object graph,\r\n   * it patches it; for true serialization use\r\n   * the toJSON/loadJSON or STRUCT interfaces.\r\n   */\r\n  loadData(obj) {\r\n    return this;\r\n  }\r\n  \r\n  //parent_cls is a string, tagname of element to extend\r\n  static register(cls) {\r\n    //if (parent_cls !== undefined) {\r\n    // customElements.define(cls.define().tagname, cls, {extends : \"div\"});\r\n    //} else {\r\n      customElements.define(cls.define().tagname, cls);\r\n    //}\r\n  }\r\n\r\n  overrideDefault(key, val) {\r\n    this.default_overrides[key] = val;\r\n  }\r\n\r\n  overrideClass(style) {\r\n    this._override_class = style;\r\n  }\r\n\r\n  overrideClassDefault(style, key, val) {\r\n    if (!(style in this.class_default_overrides)) {\r\n      this.class_default_overrides[style] = {};\r\n    }\r\n\r\n    this.class_default_overrides[style][key] = val;\r\n  }\r\n\r\n  getDefault(key) {\r\n    let p = this;\r\n\r\n    while (p) {\r\n      if (key in p.default_overrides) {\r\n        return p.default_overrides[key];\r\n      }\r\n\r\n      p = p.parentWidget;\r\n    }\r\n\r\n    return this.getClassDefault(key);\r\n  }\r\n\r\n  getStyleClass() {\r\n    if (this._override_class !== undefined) {\r\n      return this._override_class;\r\n    }\r\n\r\n    let p = this.constructor, lastp = undefined;\r\n\r\n    while (p && p !== lastp && p !== UIBase && p !== Object) {\r\n      let def = p.define();\r\n\r\n      if (def.style) {\r\n        return def.style;\r\n      }\r\n\r\n      if (!p.prototype || !p.prototype.__proto__)\r\n        break;\r\n\r\n      p = p.prototype.__proto__.constructor;\r\n    }\r\n\r\n    return \"base\";\r\n  }\r\n\r\n  getClassDefault(key) {\r\n    let style = this.getStyleClass();\r\n\r\n    let p = this;\r\n    while (p) {\r\n      let def = p.class_default_overrides[style];\r\n\r\n      if (def && (key in def)) {\r\n        return def[key];\r\n      }\r\n\r\n      p = p.parentWidget;\r\n    }\r\n\r\n    if (style in theme && key in theme[style]) {\r\n      return theme[style][key];\r\n    }\r\n\r\n    return theme.base[key];\r\n  }\r\n\r\n  getStyle() {\r\n    console.warn(\"deprecated call to UIBase.getStyle\");\r\n    return this.getStyleClass();\r\n  }\r\n\r\n  /**\r\n   * Defines core attributes of the class\r\n   *\r\n   * @example\r\n   *\r\n   * static define() {return {\r\n   *   tagname : \"custom-element-x\",\r\n   *   style : \"[style class in theme]\"\r\n   * }}\r\n   */\r\n  static define() {\r\n    throw new Error(\"Missing define() for ux element\");\r\n  }\r\n}\r\n\r\n/**okay, I need to refactor this function,\r\n  it needs to take x, y as well as width, height,\r\n  and be usable for more use cases.*/\r\nexport function drawRoundBox(elem, canvas, g, width, height, r=undefined,\r\n                             op=\"fill\", color=undefined, margin=undefined, no_clear=false) {\r\n    width = width === undefined ? canvas.width : width;\r\n    height = height === undefined ? canvas.height : height;\r\n    \r\n    let dpi = elem.getDPI();\r\n    \r\n    r = r === undefined ? elem.getDefault(\"BoxRadius\") : r;\r\n\r\n    if (margin === undefined) {\r\n      margin = elem.getDefault(\"BoxDrawMargin\");\r\n    }\r\n\r\n    r *= dpi;\r\n    let r1=r, r2=r;\r\n    \r\n    if (r > (height - margin*2)*0.5) {\r\n      r1 = (height - margin*2)*0.5;\r\n    }\r\n    \r\n    if (r > (width - margin*2)*0.5) {\r\n      r2 = (width - margin*2)*0.5;\r\n    }\r\n    \r\n    let bg = color;\r\n    \r\n    if (bg === undefined && canvas._background !== undefined) {\r\n      bg = canvas._background;\r\n    } else if (bg === undefined) {\r\n      bg = elem.getDefault(\"BoxBG\");\r\n    }\r\n    \r\n    if (op == \"fill\" && !no_clear) {\r\n      g.clearRect(0, 0, width, height);\r\n    }\r\n    \r\n    g.fillStyle = bg;\r\n    //hackish!\r\n    g.strokeStyle = color === undefined ? elem.getDefault(\"BoxBorder\") : color;\r\n    \r\n    let w = width, h = height;\r\n    \r\n    let th = Math.PI/4;\r\n    let th2 = Math.PI*0.75;\r\n    \r\n    g.beginPath();\r\n\r\n    g.moveTo(margin, margin+r1);\r\n    g.lineTo(margin, h-r1-margin);\r\n\r\n    g.quadraticCurveTo(margin, h-margin, margin+r2, h-margin);\r\n    g.lineTo(w-margin-r2, h-margin);\r\n    \r\n    g.quadraticCurveTo(w-margin, h-margin, w-margin, h-margin-r1);\r\n    g.lineTo(w-margin, margin+r1);\r\n    \r\n    g.quadraticCurveTo(w-margin, margin, w-margin-r2, margin);\r\n    g.lineTo(margin+r2, margin);\r\n\r\n    g.quadraticCurveTo(margin, margin, margin, margin+r1);\r\n    g.closePath();\r\n\r\n    if (op == \"clip\") {\r\n      g.clip();\r\n    } else if (op == \"fill\") {\r\n      g.fill();\r\n      g.stroke();\r\n    } else {\r\n      g.stroke();\r\n    }\r\n};\r\n\r\nexport function _getFont_new(elem, size, font=\"DefaultText\", do_dpi=true) {\r\n\r\n  font = elem.getDefault(font);\r\n\r\n  return font.genCSS(size);\r\n}\r\n\r\nexport function getFont(elem, size, font=\"DefaultText\", do_dpi=true) {\r\n  return _getFont_new(elem, size, font=\"DefaultText\", do_dpi=true);\r\n}\r\n\r\n//size is optional, defaults to font's default size\r\nexport function _getFont(elem, size, font=\"DefaultText\", do_dpi=true) {\r\n  let dpi = elem.getDPI();\r\n\r\n  let font2 = elem.getDefault(font);\r\n  if (font2 !== undefined) {\r\n    //console.warn(\"New style font detected\", font2, font2.genCSS(size));\r\n    return _getFont_new(elem, size, font, do_dpi);\r\n  }\r\n\r\n  console.warn(\"Old style font detected\");\r\n\r\n  if (!do_dpi) {\r\n    dpi = 1;\r\n  }\r\n  \r\n  if (size !== undefined) {\r\n    return \"\"+(size * dpi) + \"px \" + getDefault(font+\"Font\");\r\n  } else {\r\n    let size = getDefault(font+\"Size\");\r\n\r\n    if (size === undefined) {\r\n      console.warn(\"Unknown fontsize for font\", font);\r\n      size = 14;\r\n    }\r\n\r\n    return \"\"+size+ \"px \" + getDefault(font+\"Font\");\r\n  }\r\n}\r\n\r\nexport function _ensureFont(elem, canvas, g, size) {\r\n  let dpi = elem.getDPI();\r\n  \r\n  if (size !== undefined) {\r\n    g.font = \"\"+Math.ceil(size * dpi) + \"px sans-serif\";\r\n  } else if (!canvas.font) {\r\n    let size = elem.getDefault(\"DefaultText\").size * dpi;\r\n\r\n    let add = \"0\"; //Math.ceil(Math.fract((0.5 / dpi))*100);\r\n    \r\n    //size += 4;\r\n    g.font = \"\"+Math.floor(size) + \".\" + add + \"px sans-serif\";\r\n  } else {\r\n    g.font = canvas.font;\r\n  }\r\n}\r\n\r\nlet _mc;\r\nfunction get_measure_canvas() {\r\n  if (_mc !== undefined) {\r\n    return _mc;\r\n  }\r\n\r\n  _mc = document.createElement(\"canvas\");\r\n  _mc.width = 256;\r\n  _mc.height = 256;\r\n  _mc.g = _mc.getContext(\"2d\");\r\n\r\n  return _mc;\r\n}\r\n\r\nexport function measureTextBlock(elem, text, canvas=undefined,\r\n                                 g=undefined, size=undefined, font=undefined) {\r\n  let lines = text.split(\"\\n\");\r\n\r\n  let ret = {\r\n    width : 0,\r\n    height : 0\r\n  };\r\n\r\n  if (size === undefined) {\r\n    size = elem.getDefault(\"DefaultText\").size;\r\n  }\r\n\r\n  for (let line of lines) {\r\n    ret.width = Math.max(ret.width, measureText(elem, line, canvas, g, size, font).width);\r\n    ret.height += Math.ceil(size*1.2+0.5);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport function measureText(elem, text, canvas=undefined,\r\n                            g=undefined, size=undefined, font=undefined) {\r\n  if (g === undefined) {\r\n    canvas = get_measure_canvas();\r\n    g = canvas.g;\r\n  }\r\n\r\n  if (font !== undefined) {\r\n    if (typeof font === \"object\" && font instanceof CSSFont) {\r\n      font = font.genCSS();\r\n    }\r\n\r\n    g.font = font;\r\n  } else {\r\n    _ensureFont(elem, canvas, g, size);\r\n  }\r\n\r\n  let ret = g.measureText(text);\r\n  \r\n  if (size !== undefined) {\r\n    //clear custom font for next time\r\n    g.font = undefined;\r\n  }\r\n  \r\n  return ret;\r\n}\r\n\r\nexport function drawText(elem, x, y, text, canvas, g, color=undefined, size=undefined) {\r\n  _ensureFont(elem, canvas, g, size);\r\n  \r\n  g.fillStyle = elem.getDefault(\"DefaultText\").color;\r\n  g.fillText(text, x+0.5, y+0.5);\r\n  \r\n  if (size !== undefined) {\r\n    //clear custom font for next time\r\n    g.font = undefined;\r\n  }\r\n}\r\n\r\nlet PIDX=0, PSHADOW=1, PTOT=2;\r\n\r\nexport function saveUIData(node, key) {\r\n  if (key === undefined) {\r\n    throw new Error(\"ui_base.saveUIData(): key cannot be undefined\");\r\n  }\r\n  \r\n  let paths = [];\r\n  \r\n  let rec = (n, path, ni, is_shadow) => {\r\n    path = path.slice(0, path.length); //copy path\r\n    \r\n    let pi = path.length;\r\n    for (let i=0; i<PTOT; i++) {\r\n      path.push(undefined);\r\n    }\r\n    \r\n    path[pi] = ni;\r\n    path[pi+1] = is_shadow;\r\n    \r\n    if (n instanceof UIBase) {\r\n      let path2 = path.slice(0, path.length);\r\n      path2.push(n.saveData());\r\n      \r\n      if (path2[pi+2]) {\r\n        paths.push(path2);\r\n      }\r\n    }\r\n    \r\n    for (let i=0; i<n.childNodes.length; i++) {\r\n      let n2 = n.childNodes[i];\r\n      \r\n      rec(n2, path, i, false);\r\n    }\r\n    \r\n    let shadow = n.shadow;\r\n    \r\n    if (!shadow)\r\n      return;\r\n    \r\n    for (let i=0; i<shadow.childNodes.length; i++) {\r\n      let n2 = shadow.childNodes[i];\r\n      \r\n      rec(n2, path, i, true);\r\n    }\r\n  }\r\n  \r\n  rec(node, [], 0, false);\r\n  \r\n  return JSON.stringify({\r\n    key : key,\r\n    paths : paths,\r\n    _ui_version : 1\r\n  });\r\n}\r\n\r\nexport function loadUIData(node, buf) {\r\n  if (buf === undefined || buf === null) {\r\n    return;\r\n  }\r\n  \r\n  let obj = JSON.parse(buf);\r\n  let key = buf.key;\r\n  \r\n  for (let path of obj.paths) {\r\n    let n = node;\r\n    \r\n    let data = path[path.length-1];\r\n    path = path.slice(2, path.length-1); //in case some api doesn't want me calling .pop()\r\n    \r\n    for (let pi=0; pi<path.length; pi += PTOT) {\r\n      let ni = path[pi], shadow = path[pi+1];\r\n      \r\n      let list;\r\n      \r\n      if (shadow) {\r\n        list = n.shadow;\r\n        \r\n        if (list) {\r\n          list = list.childNodes;\r\n        }\r\n      } else {\r\n        list = n.childNodes;\r\n      }\r\n      \r\n      if (list === undefined || list[ni] === undefined) {\r\n        //console.log(\"failed to load a ui data block\", path);\r\n        n = undefined;\r\n        break;\r\n      }\r\n      \r\n      n = list[ni];\r\n    }\r\n    \r\n    if (n !== undefined && n instanceof UIBase) {\r\n      n._init(); //ensure init's been called, _init will check if it has\r\n      n.loadData(data);\r\n      \r\n      //console.log(n, path, data);\r\n    }\r\n  }\r\n}\r\n\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_base.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1414,
    "kind": "variable",
    "name": "_ui_base",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~_ui_base",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1415,
    "kind": "variable",
    "name": "theme",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~theme",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{theme}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1416,
    "kind": "variable",
    "name": "Vector4",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~Vector4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1417,
    "kind": "variable",
    "name": "Icons",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~Icons",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{Icons}",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1418,
    "kind": "function",
    "name": "setIconMap",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~setIconMap",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{setIconMap}",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "params": [
      {
        "name": "icons",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1419,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~EnumProperty",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{EnumProperty}",
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1420,
    "kind": "variable",
    "name": "ErrorColors",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~ErrorColors",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{ErrorColors}",
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "type": {
      "types": [
        "{\"WARNING\": string, \"ERROR\": string, \"OK\": string}"
      ]
    }
  },
  {
    "__docId__": 1421,
    "kind": "function",
    "name": "setTheme",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~setTheme",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{setTheme}",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "params": [
      {
        "name": "theme2",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1422,
    "kind": "variable",
    "name": "_last_report",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~_last_report",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1423,
    "kind": "function",
    "name": "report",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~report",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{report}",
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "params": [
      {
        "name": "msg",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1424,
    "kind": "function",
    "name": "getDefault",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~getDefault",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{getDefault}",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "elem",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1425,
    "kind": "function",
    "name": "IsMobile",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~IsMobile",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{IsMobile}",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1426,
    "kind": "variable",
    "name": "keys",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~keys",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 93,
    "undocument": true,
    "type": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1427,
    "kind": "variable",
    "name": "marginPaddingCSSKeys",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~marginPaddingCSSKeys",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{marginPaddingCSSKeys}",
    "description": null,
    "lineNumber": 98,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1428,
    "kind": "class",
    "name": "_IconManager",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~_IconManager",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 1429,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_base.js~_IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 101,
    "undocument": true
  },
  {
    "__docId__": 1430,
    "kind": "member",
    "name": "tilex",
    "memberof": "scripts/ui_base.js~_IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#tilex",
    "access": "public",
    "description": null,
    "lineNumber": 102,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1431,
    "kind": "member",
    "name": "tilesize",
    "memberof": "scripts/ui_base.js~_IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#tilesize",
    "access": "public",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1432,
    "kind": "member",
    "name": "drawsize",
    "memberof": "scripts/ui_base.js~_IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#drawsize",
    "access": "public",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1433,
    "kind": "member",
    "name": "image",
    "memberof": "scripts/ui_base.js~_IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#image",
    "access": "public",
    "description": null,
    "lineNumber": 106,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1434,
    "kind": "method",
    "name": "canvasDraw",
    "memberof": "scripts/ui_base.js~_IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#canvasDraw",
    "access": "public",
    "description": null,
    "lineNumber": 109,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "y",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1435,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_base.js~_IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "dom",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1436,
    "kind": "method",
    "name": "getCSS",
    "memberof": "scripts/ui_base.js~_IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~_IconManager#getCSS",
    "access": "public",
    "description": null,
    "lineNumber": 133,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1437,
    "kind": "class",
    "name": "IconManager",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~IconManager",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{IconManager}",
    "description": null,
    "lineNumber": 152,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1438,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#constructor",
    "access": "public",
    "description": "images is a list of dom ids of img tags\n\nsizes is a list of tile sizes, one per image.\nyou can control the final *draw* size by passing an array\nof [tilesize, drawsize] instead of just a number.",
    "lineNumber": 160
  },
  {
    "__docId__": 1439,
    "kind": "member",
    "name": "iconsheets",
    "memberof": "scripts/ui_base.js~IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#iconsheets",
    "access": "public",
    "description": null,
    "lineNumber": 161,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1440,
    "kind": "member",
    "name": "tilex",
    "memberof": "scripts/ui_base.js~IconManager",
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#tilex",
    "access": "public",
    "description": null,
    "lineNumber": 162,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1441,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#load",
    "access": "public",
    "description": null,
    "lineNumber": 177,
    "undocument": true,
    "params": [
      {
        "name": "manager2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1444,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#reset",
    "access": "public",
    "description": null,
    "lineNumber": 184,
    "undocument": true,
    "params": [
      {
        "name": "horizontal_tile_count",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1446,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#add",
    "access": "public",
    "description": null,
    "lineNumber": 189,
    "undocument": true,
    "params": [
      {
        "name": "image",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "drawsize",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "size",
        "defaultValue": "size"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1447,
    "kind": "method",
    "name": "canvasDraw",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#canvasDraw",
    "access": "public",
    "description": null,
    "lineNumber": 194,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "y",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1448,
    "kind": "method",
    "name": "findSheet",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#findSheet",
    "access": "public",
    "description": null,
    "lineNumber": 205,
    "undocument": true,
    "params": [
      {
        "name": "sheet",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1449,
    "kind": "method",
    "name": "getTileSize",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#getTileSize",
    "access": "public",
    "description": null,
    "lineNumber": 229,
    "undocument": true,
    "params": [
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1450,
    "kind": "method",
    "name": "getRealSize",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#getRealSize",
    "access": "public",
    "description": null,
    "lineNumber": 234,
    "undocument": true,
    "params": [
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1451,
    "kind": "method",
    "name": "getCSS",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#getCSS",
    "access": "public",
    "description": null,
    "lineNumber": 241,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1452,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_base.js~IconManager",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~IconManager#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 256,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1453,
    "kind": "variable",
    "name": "iconmanager",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~iconmanager",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{iconmanager}",
    "description": null,
    "lineNumber": 271,
    "undocument": true,
    "type": {
      "types": [
        "scripts/ui_base.js~IconManager"
      ]
    }
  },
  {
    "__docId__": 1454,
    "kind": "variable",
    "name": "IconSheets",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~IconSheets",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{IconSheets}",
    "description": null,
    "lineNumber": 281,
    "undocument": true,
    "type": {
      "types": [
        "{\"SMALL\": *, \"LARGE\": number, \"XLARGE\": number}"
      ]
    }
  },
  {
    "__docId__": 1455,
    "kind": "function",
    "name": "setIconManager",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~setIconManager",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{setIconManager}",
    "description": null,
    "lineNumber": 287,
    "undocument": true,
    "params": [
      {
        "name": "manager",
        "types": [
          "*"
        ]
      },
      {
        "name": "IconSheetsOverride",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1456,
    "kind": "function",
    "name": "makeIconDiv",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~makeIconDiv",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{makeIconDiv}",
    "description": null,
    "lineNumber": 297,
    "undocument": true,
    "params": [
      {
        "name": "icon",
        "types": [
          "*"
        ]
      },
      {
        "name": "sheet",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1457,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 316,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1458,
    "kind": "variable",
    "name": "Matrix4",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~Matrix4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 317,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1459,
    "kind": "variable",
    "name": "dpistack",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~dpistack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{dpistack}",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1460,
    "kind": "variable",
    "name": "UIFlags",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~UIFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{UIFlags}",
    "description": null,
    "lineNumber": 321,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1461,
    "kind": "variable",
    "name": "PackFlags",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~PackFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{PackFlags}",
    "description": null,
    "lineNumber": 325,
    "undocument": true,
    "type": {
      "types": [
        "{\"INHERIT_WIDTH\": number, \"INHERIT_HEIGHT\": number, \"VERTICAL\": number, \"USE_ICONS\": number, \"SMALL_ICON\": number, \"LARGE_ICON\": number, \"STRIP_HORIZ\": number, \"STRIP_VERT\": number, \"STRIP\": *, \"SIMPLE_NUMSLIDERS\": number}"
      ]
    }
  },
  {
    "__docId__": 1462,
    "kind": "function",
    "name": "first",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~first",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 340,
    "undocument": true,
    "params": [
      {
        "name": "iter",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1463,
    "kind": "class",
    "name": "SimpleContext",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~SimpleContext",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{SimpleContext}",
    "description": null,
    "lineNumber": 362,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1464,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_base.js~SimpleContext",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~SimpleContext#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 363,
    "undocument": true
  },
  {
    "__docId__": 1465,
    "kind": "member",
    "name": "state",
    "memberof": "scripts/ui_base.js~SimpleContext",
    "static": false,
    "longname": "scripts/ui_base.js~SimpleContext#state",
    "access": "public",
    "description": null,
    "lineNumber": 367,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1466,
    "kind": "member",
    "name": "api",
    "memberof": "scripts/ui_base.js~SimpleContext",
    "static": false,
    "longname": "scripts/ui_base.js~SimpleContext#api",
    "access": "public",
    "description": null,
    "lineNumber": 368,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1467,
    "kind": "variable",
    "name": "_idgen",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~_idgen",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 373,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1468,
    "kind": "class",
    "name": "UIBase",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~UIBase",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{UIBase}",
    "description": null,
    "lineNumber": 375,
    "undocument": true,
    "interface": false,
    "extends": [
      "HTMLElement"
    ]
  },
  {
    "__docId__": 1469,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 376,
    "undocument": true
  },
  {
    "__docId__": 1470,
    "kind": "member",
    "name": "visibleToPick",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#visibleToPick",
    "access": "public",
    "description": null,
    "lineNumber": 379,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1471,
    "kind": "member",
    "name": "_override_class",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_override_class",
    "access": "private",
    "description": null,
    "lineNumber": 381,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1472,
    "kind": "member",
    "name": "parentWidget",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#parentWidget",
    "access": "public",
    "description": null,
    "lineNumber": 382,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1473,
    "kind": "member",
    "name": "_useDataPathToolOp",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_useDataPathToolOp",
    "access": "private",
    "description": null,
    "lineNumber": 400,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1474,
    "kind": "member",
    "name": "_id",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_id",
    "access": "private",
    "description": null,
    "lineNumber": 403,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1475,
    "kind": "member",
    "name": "default_overrides",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#default_overrides",
    "access": "public",
    "description": null,
    "lineNumber": 405,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1476,
    "kind": "member",
    "name": "class_default_overrides",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#class_default_overrides",
    "access": "public",
    "description": null,
    "lineNumber": 406,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1477,
    "kind": "member",
    "name": "_modaldata",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_modaldata",
    "access": "private",
    "description": null,
    "lineNumber": 418,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1478,
    "kind": "member",
    "name": "packflag",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#packflag",
    "access": "public",
    "description": null,
    "lineNumber": 419,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1479,
    "kind": "member",
    "name": "_disabled",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_disabled",
    "access": "private",
    "description": null,
    "lineNumber": 420,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1480,
    "kind": "member",
    "name": "_disdata",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_disdata",
    "access": "private",
    "description": null,
    "lineNumber": 421,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1481,
    "kind": "member",
    "name": "shadow",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#shadow",
    "access": "public",
    "description": null,
    "lineNumber": 422,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1482,
    "kind": "member",
    "name": "_ctx",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_ctx",
    "access": "private",
    "description": null,
    "lineNumber": 423,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1483,
    "kind": "member",
    "name": "description",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#description",
    "access": "public",
    "description": null,
    "lineNumber": 425,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1484,
    "kind": "member",
    "name": "_init_done",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_init_done",
    "access": "private",
    "description": null,
    "lineNumber": 434,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1485,
    "kind": "set",
    "name": "useDataPathToolOp",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#useDataPathToolOp",
    "access": "public",
    "description": "causes calls to setPathValue to go through\ntoolpath app.datapath_set(path=\"\" newValueJSON=\"\")\n\nevery child will inherit",
    "lineNumber": 488
  },
  {
    "__docId__": 1487,
    "kind": "method",
    "name": "connectedCallback",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#connectedCallback",
    "access": "public",
    "description": null,
    "lineNumber": 496,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1488,
    "kind": "method",
    "name": "noMarginsOrPadding",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#noMarginsOrPadding",
    "access": "public",
    "description": null,
    "lineNumber": 500,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1489,
    "kind": "method",
    "name": "regenTabOrder",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#regenTabOrder",
    "access": "public",
    "description": "find owning screen and tell it to update\nthe global tab order",
    "lineNumber": 518,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1490,
    "kind": "method",
    "name": "noMargins",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#noMargins",
    "access": "public",
    "description": null,
    "lineNumber": 527,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1491,
    "kind": "method",
    "name": "noPadding",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#noPadding",
    "access": "public",
    "description": null,
    "lineNumber": 533,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1492,
    "kind": "get",
    "name": "background",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#background",
    "access": "public",
    "description": null,
    "lineNumber": 539,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1493,
    "kind": "set",
    "name": "background",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#background",
    "access": "public",
    "description": null,
    "lineNumber": 543,
    "undocument": true
  },
  {
    "__docId__": 1494,
    "kind": "member",
    "name": "__background",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#__background",
    "access": "private",
    "description": null,
    "lineNumber": 544,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1495,
    "kind": "method",
    "name": "getTotalRect",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getTotalRect",
    "access": "public",
    "description": null,
    "lineNumber": 548,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1496,
    "kind": "get",
    "name": "useDataPathToolOp",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#useDataPathToolOp",
    "access": "public",
    "description": null,
    "lineNumber": 589,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1497,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 593,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1498,
    "kind": "method",
    "name": "appendChild",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#appendChild",
    "access": "public",
    "description": null,
    "lineNumber": 598,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1499,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#init",
    "access": "public",
    "description": null,
    "lineNumber": 612,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1500,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 616,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1501,
    "kind": "method",
    "name": "remove",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#remove",
    "access": "public",
    "description": null,
    "lineNumber": 626,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1502,
    "kind": "method",
    "name": "removeChild",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#removeChild",
    "access": "public",
    "description": null,
    "lineNumber": 635,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1503,
    "kind": "method",
    "name": "_forEachChildWidget",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_forEachChildWidget",
    "access": "private",
    "description": "Iterates over all child widgets,\nincluding ones that might be inside\nof normal DOM nodes.\n\nThis is done by recursing into the dom\ntree and stopping at any node that's\ndescended from ui_base.UIBase",
    "lineNumber": 652,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1504,
    "kind": "method",
    "name": "_init",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_init",
    "access": "private",
    "description": null,
    "lineNumber": 682,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1506,
    "kind": "method",
    "name": "setDefault",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~UIBase.setDefault",
    "access": "public",
    "description": null,
    "lineNumber": 691,
    "undocument": true,
    "params": [
      {
        "name": "element",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1507,
    "kind": "method",
    "name": "getWinWidth",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getWinWidth",
    "access": "public",
    "description": null,
    "lineNumber": 695,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1508,
    "kind": "method",
    "name": "getWinHeight",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getWinHeight",
    "access": "public",
    "description": null,
    "lineNumber": 699,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1509,
    "kind": "method",
    "name": "pickElement",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#pickElement",
    "access": "public",
    "description": null,
    "lineNumber": 703,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "marginx",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "marginy",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "nodeclass",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "UIBase",
        "defaultValue": "UIBase"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1510,
    "kind": "method",
    "name": "pickElement3",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#pickElement3",
    "access": "public",
    "description": "",
    "lineNumber": 770,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{*}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "x",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "y",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sx",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "sy",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "nodeclass",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 1511,
    "kind": "set",
    "name": "disabled",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 812,
    "undocument": true
  },
  {
    "__docId__": 1519,
    "kind": "method",
    "name": "on_disabled",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#on_disabled",
    "access": "public",
    "description": null,
    "lineNumber": 875,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1520,
    "kind": "method",
    "name": "on_enabled",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#on_enabled",
    "access": "public",
    "description": null,
    "lineNumber": 879,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1521,
    "kind": "method",
    "name": "pushModal",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#pushModal",
    "access": "public",
    "description": null,
    "lineNumber": 883,
    "undocument": true,
    "params": [
      {
        "name": "handlers",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1524,
    "kind": "method",
    "name": "popModal",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#popModal",
    "access": "public",
    "description": null,
    "lineNumber": 895,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1526,
    "kind": "get",
    "name": "disabled",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 905,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1527,
    "kind": "method",
    "name": "flash",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#flash",
    "access": "public",
    "description": null,
    "lineNumber": 909,
    "undocument": true,
    "params": [
      {
        "name": "color",
        "types": [
          "*"
        ]
      },
      {
        "name": "rect_element",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "timems",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 355,
        "defaultValue": "355"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1528,
    "kind": "member",
    "name": "_flashtimer",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_flashtimer",
    "access": "private",
    "description": null,
    "lineNumber": 942,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1530,
    "kind": "member",
    "name": "_flashcolor",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_flashcolor",
    "access": "private",
    "description": null,
    "lineNumber": 954,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1532,
    "kind": "method",
    "name": "destory",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#destory",
    "access": "public",
    "description": null,
    "lineNumber": 1008,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1533,
    "kind": "method",
    "name": "on_resize",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#on_resize",
    "access": "public",
    "description": null,
    "lineNumber": 1011,
    "undocument": true,
    "params": [
      {
        "name": "newsize",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1534,
    "kind": "get",
    "name": "ctx",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 1014,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1535,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1018,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1536,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1028,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1537,
    "kind": "method",
    "name": "getPathValue",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getPathValue",
    "access": "public",
    "description": null,
    "lineNumber": 1034,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1538,
    "kind": "method",
    "name": "setPathValue",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#setPathValue",
    "access": "public",
    "description": null,
    "lineNumber": 1043,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1539,
    "kind": "method",
    "name": "getPathMeta",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getPathMeta",
    "access": "public",
    "description": null,
    "lineNumber": 1052,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1540,
    "kind": "method",
    "name": "getScreen",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getScreen",
    "access": "public",
    "description": null,
    "lineNumber": 1058,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1541,
    "kind": "method",
    "name": "doOnce",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#doOnce",
    "access": "public",
    "description": null,
    "lineNumber": 1068,
    "undocument": true,
    "params": [
      {
        "name": "func",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1542,
    "kind": "set",
    "name": "ctx",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#ctx",
    "access": "public",
    "description": null,
    "lineNumber": 1091,
    "undocument": true
  },
  {
    "__docId__": 1544,
    "kind": "method",
    "name": "float",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#float",
    "access": "public",
    "description": null,
    "lineNumber": 1108,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "y",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      },
      {
        "name": "zindex",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1545,
    "kind": "method",
    "name": "_ensureChildrenCtx",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#_ensureChildrenCtx",
    "access": "private",
    "description": null,
    "lineNumber": 1121,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1546,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#update",
    "access": "public",
    "description": null,
    "lineNumber": 1137,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1547,
    "kind": "member",
    "name": "title",
    "memberof": "scripts/ui_base.js~UIBase",
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#title",
    "access": "public",
    "description": null,
    "lineNumber": 1140,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1548,
    "kind": "method",
    "name": "onadd",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#onadd",
    "access": "public",
    "description": null,
    "lineNumber": 1150,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1550,
    "kind": "method",
    "name": "getZoom",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getZoom",
    "access": "public",
    "description": null,
    "lineNumber": 1164,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1551,
    "kind": "method",
    "name": "getDPI",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getDPI",
    "access": "public",
    "description": "try to use this method\n\nscaling ratio (e.g. for high-resolution displays)\nfor zoom ratio use getZoom()",
    "lineNumber": 1177,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1552,
    "kind": "method",
    "name": "getDPI",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~UIBase.getDPI",
    "access": "public",
    "description": "DEPRECATED\n\nscaling ratio (e.g. for high-resolution displays)",
    "lineNumber": 1189,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1553,
    "kind": "method",
    "name": "saveData",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#saveData",
    "access": "public",
    "description": "for saving ui state.\nsee saveUIData() export\n\nshould fail gracefully.",
    "lineNumber": 1203,
    "params": [],
    "return": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1554,
    "kind": "method",
    "name": "loadData",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#loadData",
    "access": "public",
    "description": "for saving ui state.\nsee saveUIData() export\n\nshould fail gracefully.\n\nalso, it doesn't rebuild the object graph,\nit patches it; for true serialization use\nthe toJSON/loadJSON or STRUCT interfaces.",
    "lineNumber": 1218,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1555,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~UIBase.register",
    "access": "public",
    "description": null,
    "lineNumber": 1223,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1556,
    "kind": "method",
    "name": "overrideDefault",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#overrideDefault",
    "access": "public",
    "description": null,
    "lineNumber": 1231,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1557,
    "kind": "method",
    "name": "overrideClass",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#overrideClass",
    "access": "public",
    "description": null,
    "lineNumber": 1235,
    "undocument": true,
    "params": [
      {
        "name": "style",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1559,
    "kind": "method",
    "name": "overrideClassDefault",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#overrideClassDefault",
    "access": "public",
    "description": null,
    "lineNumber": 1239,
    "undocument": true,
    "params": [
      {
        "name": "style",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1560,
    "kind": "method",
    "name": "getDefault",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getDefault",
    "access": "public",
    "description": null,
    "lineNumber": 1247,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1561,
    "kind": "method",
    "name": "getStyleClass",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getStyleClass",
    "access": "public",
    "description": null,
    "lineNumber": 1261,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1562,
    "kind": "method",
    "name": "getClassDefault",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getClassDefault",
    "access": "public",
    "description": null,
    "lineNumber": 1284,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1563,
    "kind": "method",
    "name": "getStyle",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_base.js~UIBase#getStyle",
    "access": "public",
    "description": null,
    "lineNumber": 1305,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1564,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_base.js~UIBase",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~UIBase.define",
    "access": "public",
    "description": "Defines core attributes of the class",
    "examples": [
      "\nstatic define() {return {\n  tagname : \"custom-element-x\",\n  style : \"[style class in theme]\"\n}}"
    ],
    "lineNumber": 1320,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1565,
    "kind": "function",
    "name": "drawRoundBox",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~drawRoundBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{drawRoundBox}",
    "description": "okay, I need to refactor this function,\nit needs to take x, y as well as width, height,\nand be usable for more use cases.",
    "lineNumber": 1328,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "width",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      },
      {
        "name": "r",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "op",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "fill",
        "defaultValue": "fill"
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "margin",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "no_clear",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1566,
    "kind": "function",
    "name": "_getFont_new",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~_getFont_new",
    "access": "private",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{_getFont_new}",
    "description": null,
    "lineNumber": 1400,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "font",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "DefaultText",
        "defaultValue": "DefaultText"
      },
      {
        "name": "do_dpi",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1567,
    "kind": "function",
    "name": "getFont",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~getFont",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{getFont}",
    "description": null,
    "lineNumber": 1407,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "font",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "DefaultText",
        "defaultValue": "DefaultText"
      },
      {
        "name": "do_dpi",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1568,
    "kind": "function",
    "name": "_getFont",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~_getFont",
    "access": "private",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{_getFont}",
    "description": null,
    "lineNumber": 1412,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "font",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "DefaultText",
        "defaultValue": "DefaultText"
      },
      {
        "name": "do_dpi",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1569,
    "kind": "function",
    "name": "_ensureFont",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~_ensureFont",
    "access": "private",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{_ensureFont}",
    "description": null,
    "lineNumber": 1441,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1570,
    "kind": "function",
    "name": "get_measure_canvas",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~get_measure_canvas",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1459,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1571,
    "kind": "function",
    "name": "measureTextBlock",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~measureTextBlock",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{measureTextBlock}",
    "description": null,
    "lineNumber": 1472,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "g",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "size",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "font",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1572,
    "kind": "function",
    "name": "measureText",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~measureText",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{measureText}",
    "description": null,
    "lineNumber": 1493,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "g",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "size",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "font",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1573,
    "kind": "function",
    "name": "drawText",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~drawText",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{drawText}",
    "description": null,
    "lineNumber": 1520,
    "undocument": true,
    "params": [
      {
        "name": "elem",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "size",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1574,
    "kind": "variable",
    "name": "PIDX",
    "memberof": "scripts/ui_base.js",
    "static": true,
    "longname": "scripts/ui_base.js~PIDX",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_base.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1532,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1575,
    "kind": "function",
    "name": "saveUIData",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~saveUIData",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{saveUIData}",
    "description": null,
    "lineNumber": 1534,
    "undocument": true,
    "params": [
      {
        "name": "node",
        "types": [
          "*"
        ]
      },
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1576,
    "kind": "function",
    "name": "loadUIData",
    "memberof": "scripts/ui_base.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_base.js~loadUIData",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_base.js",
    "importStyle": "{loadUIData}",
    "description": null,
    "lineNumber": 1588,
    "undocument": true,
    "params": [
      {
        "name": "node",
        "types": [
          "*"
        ]
      },
      {
        "name": "buf",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1577,
    "kind": "file",
    "name": "scripts/ui_colorpicker.js",
    "content": "\"use strict\";\n\n//currently unused, see ui_colorpicker2.js\n\nimport * as util from './util.js';\nimport * as vectormath from './vectormath.js';\nimport * as ui_base from './ui_base.js';\nimport * as events from './events.js';\nimport * as ui from './ui.js';\nimport {PropTypes} from './toolprop.js';\n\nlet rgb_to_hsv_rets = new util.cachering(() => [0, 0, 0], 64);\n\nlet Vector2 = vectormath.Vector2,\n    Vector3 = vectormath.Vector3,\n    Vector4 = vectormath.Vector4,\n    Matrix4 = vectormath.Matrix4;\n\nexport function rgb_to_hsv (r,g,b) {\n  var computedH = 0;\n  var computedS = 0;\n  var computedV = 0;\n\n  if ( r==null || g==null || b==null ||\n     isNaN(r) || isNaN(g)|| isNaN(b) ) {\n   throw new Error('Please enter numeric RGB values!');\n   return;\n  }\n  /*\n  if (r<0 || g<0 || b<0 || r>1.0 || g>1.0 || b>1.0) {\n   throw new Error('RGB values must be in the range 0 to 1.0');\n   return;\n  }//*/\n\n  var minRGB = Math.min(r,Math.min(g,b));\n  var maxRGB = Math.max(r,Math.max(g,b));\n\n  // Black-gray-white\n  if (minRGB==maxRGB) {\n    computedV = minRGB;\n    \n    let ret = rgb_to_hsv_rets.next();\n    ret[0] = 0, ret[1] = 0, ret[2] = computedV;\n    return ret;\n  }\n\n  // Colors other than black-gray-white:\n  var d = (r==minRGB) ? g-b : ((b==minRGB) ? r-g : b-r);\n  var h = (r==minRGB) ? 3 : ((b==minRGB) ? 1 : 5);\n  \n  computedH = (60*(h - d/(maxRGB - minRGB))) / 360.0;\n  computedS = (maxRGB - minRGB)/maxRGB;\n  computedV = maxRGB;\n  \n  let ret = rgb_to_hsv_rets.next();\n  ret[0] = computedH, ret[1] = computedS, ret[2] = computedV;\n  return ret;\n}\n\nlet hsv_to_rgb_rets = new util.cachering(() => [0, 0, 0], 64);\n\nexport function hsv_to_rgb(h, s, v) {\n  let c=0, m=0, x=0;\n  let ret = hsv_to_rgb_rets.next();\n  \n  ret[0] = ret[1] = ret[2] = 0.0;\n  h *= 360.0;\n  \n  c = v * s;\n  x = c * (1.0 - Math.abs(((h / 60.0) % 2) - 1.0));\n  m = v - c;\n  let color;\n  \n  function RgbF_Create(r, g, b) {\n    ret[0] = r;\n    ret[1] = g;\n    ret[2] = b;\n    \n    return ret;\n  }\n  \n  if (h >= 0.0 && h < 60.0)\n  {\n      color = RgbF_Create(c + m, x + m, m);\n  }\n  else if (h >= 60.0 && h < 120.0)\n  {\n      color = RgbF_Create(x + m, c + m, m);\n  }\n  else if (h >= 120.0 && h < 180.0)\n  {\n      color = RgbF_Create(m, c + m, x + m);\n  }\n  else if (h >= 180.0 && h < 240.0)\n  {\n      color = RgbF_Create(m, x + m, c + m);\n  }\n  else if (h >= 240.0 && h < 300.0)\n  {\n      color = RgbF_Create(x + m, m, c + m);\n  }\n  else if (h >= 300.0 && h < 360.0)\n  {\n      color = RgbF_Create(c + m, m, x + m);\n  }\n  else\n  {\n      color = RgbF_Create(m, m, m);\n  }\n  \n  return color;\n}\n\nlet UIBase = ui_base.UIBase, \n    PackFlags = ui_base.PackFlags,\n    IconSheets = ui_base.IconSheets;\n\nlet UPW = 1.25, VPW = 0.75;\n\n//*\nlet sample_rets = new util.cachering(() => [0, 0], 64);      \nexport function inv_sample(u, v) {\n  let ret = sample_rets.next();\n\n  ret[0] = Math.pow(u, UPW);\n  ret[1] = Math.pow(v, VPW);\n\nreturn ret;\n}\n\nexport function sample(u, v) {\n  let ret = sample_rets.next();\n\n  ret[0] = Math.pow(u, 1.0/UPW);\n  ret[1] = Math.pow(v, 1.0/VPW);\n\n  return ret;\n}\n//*/\n\nlet fieldrand = new util.MersenneRandom(0);\n    \nlet fields = {};\nexport function getFieldImage(size, hsva) {\n  fieldrand.seed(0);\n  \n  let hue = hsva[0];\n  let hue_rgb = hsv_to_rgb(hue, 1.0, 1.0);\n  let key = size + \":\" + hue.toFixed(4);\n  \n  if (key in fields)\n    return fields[key];\n  \n  //console.log(\"generation color picker field of size\", size);\n  \n  let size2 = 128;\n  let image = {\n    width : size, \n    height : size, \n    image : new ImageData(size2, size2)\n  };\n  \n  let scale = size2 / size;\n  \n  let idata = image.image.data;\n  let dpi = this.getDPI();\n  \n  let band = ui_base.IsMobile() ? 35 : 20;\n  \n  let r2 = Math.ceil(size*0.5), r1 = r2 - band*dpi;\n  \n  let pad = 5*dpi;\n  let px1 = size*0.5 - r1 / Math.sqrt(2.0) + pad;\n  let py1 = size*0.5 - r1 / Math.sqrt(2.0) + pad;\n  \n  let pw = r1 / Math.sqrt(2)*2 - pad*2, ph = pw;\n  \n  image.params = {\n    r1 : r1,\n    r2 : r2,\n    \n    box : {\n      x : px1,\n      y : py1,\n      width : pw,\n      height : ph\n    }\n  };\n  \n  for (let i=0; i<size2*size2; i++) {\n    let x = i % size2, y = ~~(i / size2);\n    let idx = i*4;\n    let alpha = 0.0;\n    \n    let r = Math.sqrt((x-size2*0.5)**2 + (y-size2*0.5)**2);\n    \n    if (r < r2*scale && r > r1*scale) {\n      let th = Math.atan2(y-size2*0.5, x-size2*0.5) / (2 * Math.PI) + 0.5;\n      let eps = 0.001\n      th = th*(1.0 - eps*2) + eps;\n      \n      let r=0, g=0, b=0;\n      \n      if (th < 1.0/6.0) {\n        r = 1.0;\n        g = th*6.0;\n      } else if (th < 2.0/6.0) {\n        th -= 1.0/6.0;\n        r = 1.0 - th*6.0;\n        g = 1.0;\n      } else if (th < 3.0/6.0) {\n        th -= 2.0/6.0;\n        g = 1.0;\n        b = th*6.0;\n      } else if (th < 4.0/6.0) {\n        th -= 3.0/6.0;\n        b = 1.0;\n        g = 1.0 - th*6.0;\n      } else if (th < 5.0/6.0) {\n        th -= 4.0/6.0;\n        r = th * 6.0;\n        b = 1.0;\n      } else if (th < 6.0/6.0) {\n        th -= 5.0/6.0;\n        r = 1.0;\n        b = 1.0 - th*6.0;\n      }\n      \n      /*\n      let l = Math.sqrt(r*r + g*g + b*b);\n      if (l > 0.0) {\n        r = (r / l)*255;\n        g = (g / l)*255;\n        b = (b / l)*255;\n      }//*/\n      //*\n      r = r*255 + (fieldrand.random()-0.5);\n      g = g*255 + (fieldrand.random()-0.5);\n      b = b*255 + (fieldrand.random()-0.5);\n      //*/\n      \n      idata[idx] = r;\n      idata[idx+1] = g;\n      idata[idx+2] = b;\n      \n      alpha = 1.0;\n    }\n    \n    let px2 = (px1 + pw)*scale, py2 = (py1 + ph)*scale;\n    \n    if (x > px1*scale && y > py1*scale && x < px2 && y < py2) {\n      let u = 1.0 - (x - px1*scale) / (px2 - px1*scale);\n      let v = 1.0 - (y - py1*scale) / (py2 - py1*scale);\n      \n      //let inv = fields.inv_sample(u, v);\n      //u = inv[0], v = inv[1];\n      u = Math.pow(u, UPW);\n      v = Math.pow(v, VPW);\n      \n      //u = u*u*(3.0 - 2.0*u);\n      //v = v*v*(3.0 - 2.0*v);\n      \n      let r=0, g=0, b=0;\n      \n      //(u*v)*255;\n      r = hue_rgb[0]*(1.0-u) + u;\n      g = hue_rgb[1]*(1.0-u) + u;\n      b = hue_rgb[2]*(1.0-u) + u;\n      \n      //let s = 255;\n      let fac = 1.0;\n      \n      //r = (~~(r*s + (fieldrand.random()-0.5)*fac))/s;\n      //g = (~~(g*s + (fieldrand.random()-0.5)*fac))/s;\n      //b = (~~(b*s + (fieldrand.random()-0.5)*fac))/s;\n\n      idata[idx+0] = r*v*255 + (fieldrand.random()-0.5)*fac;\n      idata[idx+1] = g*v*255 + (fieldrand.random()-0.5)*fac;\n      idata[idx+2] = b*v*255 + (fieldrand.random()-0.5)*fac;\n      \n      alpha = 1.0;\n    }\n    \n    idata[idx+3] = alpha*255;\n  }\n  \n  //console.log(\"done.\");\n  \n  //*\n  let image2 = document.createElement(\"canvas\");\n  image2.width = size2;\n  image2.height = size2;\n  let g = image2.getContext(\"2d\");\n  g.putImageData(image.image, 0, 0);\n  //*/\n  image.canvas = image2;\n  image.scale = size / size2;\n  \n  fields[key] = image;\n  return image;\n}\n\nlet _update_temp = new Vector4();\n\nexport class SimpleBox {\n  constructor(pos=[0, 0], size=[1, 1]) {\n    this.pos = new Vector2(pos);\n    this.size = new Vector2(size);\n    this.r = 0;\n  }\n}\n\nexport class ColorField extends UIBase {\n  constructor() {\n    super();\n    \n    this.hsva = [0.05, 0.6, 0.15, 1.0];\n    this.rgba =new Vector4([0, 0, 0, 0]);\n    \n    this._recalcRGBA();\n    \n    /*\n    this.hbox = new SimpleBox();\n    this.svbox = new SimpleBox();\n    //*/\n    \n    this._last_dpi = undefined;\n    \n    let canvas = this.canvas = document.createElement(\"canvas\");\n    let g = this.g = canvas.getContext(\"2d\");\n    \n    this.shadow.appendChild(canvas);\n    \n    let mx, my;\n    \n    let do_mouse = (e) => {\n      let r = this.canvas.getClientRects()[0];\n      let dpi = this.getDPI();\n      \n      mx = (e.pageX-r.x)*dpi;\n      my = (e.pageY-r.y)*dpi;\n    }\n    \n    let do_touch = (e) => {\n      if (e.touches.length == 0) {\n        mx = my = undefined;\n        return;\n      }\n      \n      let r = this.canvas.getClientRects()[0];\n      let dpi = this.getDPI();\n      let t = e.touches[0];\n      \n      mx = (t.pageX-r.x)*dpi;\n      my = (t.pageY-r.y)*dpi;\n    }\n    \n    this.canvas.addEventListener(\"mousedown\", (e) => {\n      do_mouse(e);\n      return this.on_mousedown(e, mx, my, e.button);\n    });\n    this.canvas.addEventListener(\"mousemove\", (e) => {\n      do_mouse(e);\n      return this.on_mousemove(e, mx, my, e.button);\n    });\n    this.canvas.addEventListener(\"mouseup\", (e) => {\n      do_mouse(e);\n      return this.on_mouseup(e, mx, my, e.button);\n    });\n    \n    this.canvas.addEventListener(\"touchstart\", (e) => {\n      do_touch(e);\n      if (mx !== undefined)\n        return this.on_mousedown(e, mx, my, 0);\n    });\n    \n    this.canvas.addEventListener(\"touchmove\", (e) => {\n      do_touch(e);\n      if (mx !== undefined)\n        return this.on_mousemove(e, mx, my, 0);\n    });\n    \n    this.canvas.addEventListener(\"touchend\", (e) => {\n      do_touch(e);\n      if (mx !== undefined)\n        return this.on_mouseup(e, mx, my, 0);\n    });\n    \n    this.canvas.addEventListener(\"touchcancel\", (e) => {\n      do_touch(e);\n      if (mx !== undefined)\n        return this.on_mouseup(e, mx, my, 0);\n    });\n\n    this.updateCanvas(true);\n  }\n  \n  pick_h(x, y) {\n    let field = this._field;\n    let size = field.width;\n    let dpi = this.getDPI();\n    \n    if (field === undefined) {\n      console.error(\"no field in colorpicker\");\n      return //no field!\n    }\n    \n    \n    //console.log(x, y, size, \"SIZE\");\n    let th = Math.atan2(y-size/2, x-size/2)/(2*Math.PI) + 0.5;\n    \n    this.hsva[0] = th;\n\n    this.update(true);\n    this._recalcRGBA();\n    \n    \n    if (this.onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n  \n  setHSVA(h, s, v, a=1.0, fire_onchange=true) {\n    this.hsva[0] = h;\n    this.hsva[1] = s;\n    this.hsva[2] = v;\n    this.hsva[3] = a;\n    \n    this._recalcRGBA();\n    this.update(true);\n    \n    if (this.onchange && fire_onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n  \n  setRGBA(r, g, b, a=1.0, fire_onchange=true) {\n    let ret = rgb_to_hsv(r, g, b);\n    \n    this.hsva[0] = ret[0];\n    this.hsva[1] = ret[1];\n    this.hsva[2] = ret[2];\n    this.hsva[3] = a;\n    \n    this._recalcRGBA();\n    this.update(true);\n    \n    if (this.onchange && fire_onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n  \n  _recalcRGBA() {\n    let ret = hsv_to_rgb(this.hsva[0], this.hsva[1], this.hsva[2]);\n    \n    this.rgba[0] = ret[0];\n    this.rgba[1] = ret[1];\n    this.rgba[2] = ret[2];\n    this.rgba[3] = this.hsva[3];\n    \n    return this;\n  }\n  \n  on_mousedown(e, x, y, button) {\n      if (button != 0)\n        return\n      \n      let field = this._field;\n      if (field === undefined)\n        return;\n      let size = field.width;\n      \n      let dpi = this.getDPI();\n      let r = Math.sqrt((x-size/2)**2 + (y-size/2)**2);\n      let pad = 5*dpi;\n      \n      let px1 = field.params.box.x, py1 = field.params.box.y, \n          px2 = px1 + field.params.box.width, py2 = py1 + field.params.box.height;\n        \n      px1 -= pad*0.5;\n      py1 -= pad*0.5;\n      px2 += pad*0.5;\n      py2 += pad*0.5;\n      \n      if (r > field.params.r1-pad && r < field.params.r2+pad) {\n        this.pick_h(x, y);\n        this._mode = \"h\";\n      } else if (x >= px1 && x <= px2 && y >= py1 && y <= py2) {\n        this.pick_sv(x, y);\n        console.log(\"in box\");\n        this._mode = \"sv\";\n      }\n      \n      \n      \n      e.preventDefault();\n      e.stopPropagation();\n      \n      console.log(x, y);\n      \n  }\n  \n  pick_sv(x, y) {\n    let sv = this._sample_box(x, y);\n    \n    this.hsva[1] = sv[0];\n    this.hsva[2] = sv[1];\n    \n    this._recalcRGBA();\n    this.update(true);\n    \n    if (this.onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n  \n  //return saturation and value\n  _sample_box(x, y) {\n    let field = this._field;\n    \n    if (field === undefined) {\n      return [-1, -1];\n    }\n    \n    let px = field.params.box.x, py = field.params.box.y, \n        pw = field.params.box.width, ph = field.params.box.height;\n        \n    let u = (x - px) / pw;\n    let v = 1.0 - (y - py) / ph;\n    \n    u = Math.min(Math.max(u, 0.0), 1.0);\n    v = Math.min(Math.max(v, 0.0), 1.0);\n    \n    let ret = sample(u, 1.0-v);\n    u = ret[0], v = 1.0-ret[1];\n    \n    return [u, v];\n  }\n  \n  on_mousemove(e, x, y, button) {\n      if (this._mode == \"h\") {\n        this.pick_h(x, y);\n      } else if (this._mode == \"sv\") {\n        this.pick_sv(x, y);\n      }\n      \n      e.preventDefault();\n      e.stopPropagation();\n  }\n  \n  on_mouseup(e, x, y, button) {\n      this._mode = undefined;\n      \n      e.preventDefault();\n      e.stopPropagation();\n      console.log(x, y);\n  }\n  \n  updateCanvas(force_update=false, _in_update=false) {\n    let canvas = this.canvas;\n    let update = force_update;\n    \n    if (update) {\n      let size = this.getDefault(\"fieldsize\");\n      let dpi = this.getDPI();\n      \n      canvas.style[\"width\"] = size + \"px\";\n      canvas.style[\"height\"] = size + \"px\";\n      \n      canvas.width = canvas.height = Math.ceil(size*dpi);\n      \n      //console.log(\"SIZE!\", canvas.style[\"width\"], canvas.style[\"height\"]);\n      \n      //this._redraw();\n      if (!_in_update)\n        this._redraw();\n      \n      //this.doOnce(this._redraw);\n      return true;\n    }\n  }\n  \n  _redraw() {\n    let canvas = this.canvas, g = this.g;\n    let dpi = this.getDPI();\n    \n    let size = canvas.width;\n    let field = this._field = getFieldImage(size, this.hsva);\n    let w = size, h = size * field.height / field.width;\n    \n    //console.log(\"Redraw called!\"); //, canvas, canvas.width, canvas.height, canvas.style);\n    \n    g.clearRect(0, 0, w, h); //canvas.width, canvas.height);\n    //g.putImageData(field.image, 0, 0);\n    g.drawImage(field.canvas, 0, 0, field.width, field.height);\n    \n    g.lineWidth = 2.0;\n\n    function circle(x, y, r) {\n      g.strokeStyle = \"white\";\n      g.beginPath();\n      g.arc(x, y, r, -Math.PI, Math.PI);\n      g.stroke();\n      \n      g.strokeStyle = \"grey\";\n      g.beginPath();\n      g.arc(x, y, r-1, -Math.PI, Math.PI);\n      g.stroke();\n      \n      g.fillStyle = \"black\";\n      g.beginPath();\n      g.arc(x, y, 2*dpi, -Math.PI, Math.PI);\n      g.fill();\n    }\n    \n    let hsva = this.hsva;\n    let r = (field.params.r2 - field.params.r1)*0.7;\n    let bandr = (field.params.r2 + field.params.r1)*0.5;\n    \n    //let th = Math.fract(hsva[0]+1/Math.PI**0.5);\n    let th = Math.fract(1.0 - hsva[0] - 0.25);\n    \n    let x = Math.sin(th*Math.PI*2)*bandr + size/2;\n    let y = Math.cos(th*Math.PI*2)*bandr + size/2;\n    \n    /*\n    this.hbox.pos[0] = x;\n    this.hbox.pos[1] = y;\n    this.hbox.size[0] = r;\n    this.hbox.size[1] = r;\n    //*/\n    \n    circle(x, y, r);\n    \n    let u = this.hsva[1], v = 1.0 - this.hsva[2];\n    let ret = inv_sample(u, v);\n    u = ret[0], v = ret[1];\n    \n    x = field.params.box.x + u*field.params.box.width;\n    y = field.params.box.y + v*field.params.box.height;\n    \n    circle(x, y, r);\n  }\n  \n  updateDPI(force_update=false, _in_update=false) {\n    let dpi = this.getDPI();\n    \n    let update = force_update;\n    update = update || dpi != this._last_dpi;\n    \n    if (update) {\n      this._last_dpi = dpi;\n      \n      this.updateCanvas(true);\n      \n      if (!_in_update)\n        this._redraw();\n      \n      return true;\n    }\n  }\n  \n  update(force_update=false) {\n    super.update();\n    \n    let redraw = false;\n    \n    redraw = redraw || this.updateCanvas(force_update, true);\n    redraw = redraw || this.updateDPI(force_update, true);\n    \n    if (redraw) {\n      this._redraw();\n    }\n  }\n  \n  static define() {return {\n    tagname : \"colorfield0-x\",\n    style : \"colorfield\"\n  };}\n}\n\nUIBase.register(ColorField);\n\nexport class ColorPicker extends ui.ColumnFrame {\n  constructor() {\n    super();\n    \n    this.field = document.createElement(\"colorfield-x\");\n    this.field.setAttribute(\"class\", \"colorpicker\");\n    \n    this.field.onchange = (hsva, rgba) => {\n      if (this.onchange) {\n        this.onchange(hsva, rgba);\n      }\n\n      this._setDataPath();\n      this._setSliders();\n    }\n    \n    let style = document.createElement(\"style\");\n    style.textContent = `\n      .colorpicker {\n        background-color : ${ui_base.getDefault(\"InnerPanelBG\")};\n      }\n    `;\n    \n    \n    this._style = style;\n    \n    this.shadow.appendChild(style);\n    this.field.ctx = this.ctx;\n    this.shadow.appendChild(this.field);\n    //this._add(this.field);\n    //this.style[\"background-color\"] = ui_base.getDefault(\"InnerPanelBG\");\n  }\n  \n  static setDefault(node) {\n    let tabs = node.tabs();\n    let tab = tabs.tab(\"HSV\");\n    \n    node.h = tab.slider(undefined, \"Hue\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(e.value, hsva[1], hsva[2], hsva[3]);\n    });\n    node.s = tab.slider(undefined, \"Saturation\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], e.value, hsva[2], hsva[3]);\n    });\n    node.v = tab.slider(undefined, \"Value\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], hsva[1], e.value, hsva[3]);\n    });\n    node.a = tab.slider(undefined, \"Alpha\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], hsva[1], hsva[2], e.value);\n    });\n\n    \n    tab = tabs.tab(\"RGB\");\n    \n    node.r = tab.slider(undefined, \"R\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(e.value, rgba[1], rgba[2], rgba[3]);\n    });\n    node.g = tab.slider(undefined, \"G\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], e.value, rgba[2], rgba[3]);\n    });\n    node.b = tab.slider(undefined, \"B\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], rgba[1], e.value, rgba[3]);\n    });\n    node.a2 = tab.slider(undefined, \"Alpha\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], rgba[1], rgba[2], e.value);\n    });\n\n    node._setSliders();\n  }\n  \n  _setSliders() {\n    if (this.h === undefined) {\n      //setDefault() wasn't called\n      console.warn(\"colorpicker ERROR\");\n      return;\n    }\n    \n    let hsva = this.hsva;\n    this.h.setValue(hsva[0], false);\n    this.s.setValue(hsva[1], false);\n    this.v.setValue(hsva[2], false);\n    this.a.setValue(hsva[3], false);\n\n    let rgba = this.rgba;\n    \n    this.r.setValue(rgba[0], false);\n    this.g.setValue(rgba[1], false);\n    this.b.setValue(rgba[2], false);\n    this.a2.setValue(rgba[3], false);\n  }\n  \n  get hsva() {\n    return this.field.hsva;\n  }\n  \n  get rgba() {\n    return this.field.rgba;\n  }\n\n  updateDataPath() {\n    if (!this.hasAttribute(\"datapath\")) {\n      return;\n    }\n\n    let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\n    let val =  this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\n\n    if (val === undefined) {\n      //console.warn(\"Bad datapath\", this.getAttribute(\"datapath\"));\n      this.disabled = true;\n      return;\n    }\n\n    this.disabled = false;\n\n    _update_temp.load(val);\n\n    if (prop.type == PropTypes.VEC3) {\n      _update_temp[3] = 1.0;\n    }\n\n    if (_update_temp.vectorDistance(this.field.rgba) > 0.01)  {\n        console.log(\"VAL\", val);\n      console.log(\"color changed!\");\n      this.setRGBA(_update_temp[0], _update_temp[1], _update_temp[2], _update_temp[3]);\n    }\n  }\n\n  update() {\n    if (this.hasAttribute(\"datapath\")) {\n      this.updateDataPath();\n    }\n\n    super.update();\n  }\n\n  _setDataPath() {\n    if (this.hasAttribute(\"datapath\")) {\n      this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), this.field.rgba);\n    }\n  }\n\n  setHSVA(h, s, v, a) {\n    this.field.setHSVA(h, s, v, a);\n    this._setDataPath();\n  }\n  \n  setRGBA(r, g, b, a) {\n    this.field.setRGBA(r, g, b, a)\n    this._setDataPath();\n  }\n  \n  static define() {return {\n    tagname : \"colorpicker0-x\"\n  };}\n}\n\nUIBase.register(ColorPicker);\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_colorpicker.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1578,
    "kind": "variable",
    "name": "rgb_to_hsv_rets",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~rgb_to_hsv_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1579,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1580,
    "kind": "function",
    "name": "rgb_to_hsv",
    "memberof": "scripts/ui_colorpicker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~rgb_to_hsv",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{rgb_to_hsv}",
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1581,
    "kind": "variable",
    "name": "hsv_to_rgb_rets",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~hsv_to_rgb_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1582,
    "kind": "function",
    "name": "hsv_to_rgb",
    "memberof": "scripts/ui_colorpicker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~hsv_to_rgb",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{hsv_to_rgb}",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1583,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 114,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1584,
    "kind": "variable",
    "name": "UPW",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~UPW",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 118,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1585,
    "kind": "variable",
    "name": "sample_rets",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~sample_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1586,
    "kind": "function",
    "name": "inv_sample",
    "memberof": "scripts/ui_colorpicker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~inv_sample",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{inv_sample}",
    "description": null,
    "lineNumber": 122,
    "undocument": true,
    "params": [
      {
        "name": "u",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1587,
    "kind": "function",
    "name": "sample",
    "memberof": "scripts/ui_colorpicker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~sample",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{sample}",
    "description": null,
    "lineNumber": 131,
    "undocument": true,
    "params": [
      {
        "name": "u",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1588,
    "kind": "variable",
    "name": "fieldrand",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~fieldrand",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 141,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1589,
    "kind": "variable",
    "name": "fields",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~fields",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1590,
    "kind": "function",
    "name": "getFieldImage",
    "memberof": "scripts/ui_colorpicker.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~getFieldImage",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{getFieldImage}",
    "description": null,
    "lineNumber": 144,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      },
      {
        "name": "hsva",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1591,
    "kind": "variable",
    "name": "_update_temp",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~_update_temp",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 303,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector4"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1592,
    "kind": "class",
    "name": "SimpleBox",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~SimpleBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{SimpleBox}",
    "description": null,
    "lineNumber": 305,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1593,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker.js~SimpleBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~SimpleBox#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 306,
    "undocument": true
  },
  {
    "__docId__": 1594,
    "kind": "member",
    "name": "pos",
    "memberof": "scripts/ui_colorpicker.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~SimpleBox#pos",
    "access": "public",
    "description": null,
    "lineNumber": 307,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1595,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ui_colorpicker.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~SimpleBox#size",
    "access": "public",
    "description": null,
    "lineNumber": 308,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1596,
    "kind": "member",
    "name": "r",
    "memberof": "scripts/ui_colorpicker.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~SimpleBox#r",
    "access": "public",
    "description": null,
    "lineNumber": 309,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1597,
    "kind": "class",
    "name": "ColorField",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~ColorField",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{ColorField}",
    "description": null,
    "lineNumber": 313,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 1598,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 314,
    "undocument": true
  },
  {
    "__docId__": 1599,
    "kind": "member",
    "name": "hsva",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#hsva",
    "access": "public",
    "description": null,
    "lineNumber": 317,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1600,
    "kind": "member",
    "name": "rgba",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#rgba",
    "access": "public",
    "description": null,
    "lineNumber": 318,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1601,
    "kind": "member",
    "name": "_last_dpi",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#_last_dpi",
    "access": "private",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1602,
    "kind": "method",
    "name": "pick_h",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#pick_h",
    "access": "public",
    "description": null,
    "lineNumber": 398,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1603,
    "kind": "method",
    "name": "setHSVA",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#setHSVA",
    "access": "public",
    "description": null,
    "lineNumber": 423,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1604,
    "kind": "method",
    "name": "setRGBA",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#setRGBA",
    "access": "public",
    "description": null,
    "lineNumber": 437,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1605,
    "kind": "method",
    "name": "_recalcRGBA",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#_recalcRGBA",
    "access": "private",
    "description": null,
    "lineNumber": 453,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1606,
    "kind": "method",
    "name": "on_mousedown",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#on_mousedown",
    "access": "public",
    "description": null,
    "lineNumber": 464,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "button",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1607,
    "kind": "member",
    "name": "_mode",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#_mode",
    "access": "private",
    "description": null,
    "lineNumber": 487,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1609,
    "kind": "method",
    "name": "pick_sv",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#pick_sv",
    "access": "public",
    "description": null,
    "lineNumber": 503,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1610,
    "kind": "method",
    "name": "_sample_box",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#_sample_box",
    "access": "private",
    "description": null,
    "lineNumber": 518,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 1611,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 540,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "button",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1612,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 551,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "button",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1614,
    "kind": "method",
    "name": "updateCanvas",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#updateCanvas",
    "access": "public",
    "description": null,
    "lineNumber": 559,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      },
      {
        "name": "_in_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1615,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 583,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1616,
    "kind": "method",
    "name": "updateDPI",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#updateDPI",
    "access": "public",
    "description": null,
    "lineNumber": 645,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      },
      {
        "name": "_in_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1618,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorField#update",
    "access": "public",
    "description": null,
    "lineNumber": 663,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1619,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker.js~ColorField",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~ColorField.define",
    "access": "public",
    "description": null,
    "lineNumber": 676,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1620,
    "kind": "class",
    "name": "ColorPicker",
    "memberof": "scripts/ui_colorpicker.js",
    "static": true,
    "longname": "scripts/ui_colorpicker.js~ColorPicker",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker.js",
    "importStyle": "{ColorPicker}",
    "description": null,
    "lineNumber": 684,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ui.ColumnFrame"
    ]
  },
  {
    "__docId__": 1621,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 685,
    "undocument": true
  },
  {
    "__docId__": 1622,
    "kind": "member",
    "name": "field",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#field",
    "access": "public",
    "description": null,
    "lineNumber": 688,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1623,
    "kind": "member",
    "name": "_style",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#_style",
    "access": "private",
    "description": null,
    "lineNumber": 708,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1624,
    "kind": "method",
    "name": "setDefault",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~ColorPicker.setDefault",
    "access": "public",
    "description": null,
    "lineNumber": 717,
    "undocument": true,
    "params": [
      {
        "name": "node",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1625,
    "kind": "method",
    "name": "_setSliders",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#_setSliders",
    "access": "private",
    "description": null,
    "lineNumber": 761,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1626,
    "kind": "get",
    "name": "hsva",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#hsva",
    "access": "public",
    "description": null,
    "lineNumber": 782,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1627,
    "kind": "get",
    "name": "rgba",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#rgba",
    "access": "public",
    "description": null,
    "lineNumber": 786,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1628,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 790,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1629,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 800,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1631,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#update",
    "access": "public",
    "description": null,
    "lineNumber": 819,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1632,
    "kind": "method",
    "name": "_setDataPath",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#_setDataPath",
    "access": "private",
    "description": null,
    "lineNumber": 827,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1633,
    "kind": "method",
    "name": "setHSVA",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#setHSVA",
    "access": "public",
    "description": null,
    "lineNumber": 833,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1634,
    "kind": "method",
    "name": "setRGBA",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker.js~ColorPicker#setRGBA",
    "access": "public",
    "description": null,
    "lineNumber": 838,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1635,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker.js~ColorPicker.define",
    "access": "public",
    "description": null,
    "lineNumber": 843,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 1636,
    "kind": "file",
    "name": "scripts/ui_colorpicker2.js",
    "content": "\"use strict\";\n\nimport * as util from './util.js';\nimport * as vectormath from './vectormath.js';\nimport * as ui_base from './ui_base.js';\nimport * as events from './events.js';\nimport * as ui from './ui.js';\nimport {PropTypes} from './toolprop.js';\nimport {keymap} from './simple_events.js';\n\nlet rgb_to_hsv_rets = new util.cachering(() => [0, 0, 0], 64);\n\nlet Vector2 = vectormath.Vector2,\n  Vector3 = vectormath.Vector3,\n  Vector4 = vectormath.Vector4,\n  Matrix4 = vectormath.Matrix4;\n\nexport function rgb_to_hsv (r,g,b) {\n  var computedH = 0;\n  var computedS = 0;\n  var computedV = 0;\n\n  if ( r==null || g==null || b==null ||\n    isNaN(r) || isNaN(g)|| isNaN(b) ) {\n    throw new Error('Please enter numeric RGB values!');\n    return;\n  }\n  /*\n  if (r<0 || g<0 || b<0 || r>1.0 || g>1.0 || b>1.0) {\n   throw new Error('RGB values must be in the range 0 to 1.0');\n   return;\n  }//*/\n\n  var minRGB = Math.min(r,Math.min(g,b));\n  var maxRGB = Math.max(r,Math.max(g,b));\n\n  // Black-gray-white\n  if (minRGB==maxRGB) {\n    computedV = minRGB;\n\n    let ret = rgb_to_hsv_rets.next();\n    ret[0] = 0, ret[1] = 0, ret[2] = computedV;\n    return ret;\n  }\n\n  // Colors other than black-gray-white:\n  var d = (r==minRGB) ? g-b : ((b==minRGB) ? r-g : b-r);\n  var h = (r==minRGB) ? 3 : ((b==minRGB) ? 1 : 5);\n\n  computedH = (60*(h - d/(maxRGB - minRGB))) / 360.0;\n  computedS = (maxRGB - minRGB)/maxRGB;\n  computedV = maxRGB;\n\n  let ret = rgb_to_hsv_rets.next();\n  ret[0] = computedH, ret[1] = computedS, ret[2] = computedV;\n  return ret;\n}\n\nlet hsv_to_rgb_rets = new util.cachering(() => [0, 0, 0], 64);\n\nexport function hsv_to_rgb(h, s, v) {\n  let c=0, m=0, x=0;\n  let ret = hsv_to_rgb_rets.next();\n\n  ret[0] = ret[1] = ret[2] = 0.0;\n  h *= 360.0;\n\n  c = v * s;\n  x = c * (1.0 - Math.abs(((h / 60.0) % 2) - 1.0));\n  m = v - c;\n  let color;\n\n  function RgbF_Create(r, g, b) {\n    ret[0] = r;\n    ret[1] = g;\n    ret[2] = b;\n\n    return ret;\n  }\n\n  if (h >= 0.0 && h < 60.0)\n  {\n    color = RgbF_Create(c + m, x + m, m);\n  }\n  else if (h >= 60.0 && h < 120.0)\n  {\n    color = RgbF_Create(x + m, c + m, m);\n  }\n  else if (h >= 120.0 && h < 180.0)\n  {\n    color = RgbF_Create(m, c + m, x + m);\n  }\n  else if (h >= 180.0 && h < 240.0)\n  {\n    color = RgbF_Create(m, x + m, c + m);\n  }\n  else if (h >= 240.0 && h < 300.0)\n  {\n    color = RgbF_Create(x + m, m, c + m);\n  }\n  else if (h >= 300.0)\n  {\n    color = RgbF_Create(c + m, m, x + m);\n  }\n  else\n  {\n    color = RgbF_Create(m, m, m);\n  }\n\n  return color;\n}\n\nlet UIBase = ui_base.UIBase,\n  PackFlags = ui_base.PackFlags,\n  IconSheets = ui_base.IconSheets;\n\nlet UPW = 1.25, VPW = 0.75;\n\n//*\nlet sample_rets = new util.cachering(() => [0, 0], 64);\nexport function inv_sample(u, v) {\n  let ret = sample_rets.next();\n\n  ret[0] = Math.pow(u, UPW);\n  ret[1] = Math.pow(v, VPW);\n\n  return ret;\n}\n\nexport function sample(u, v) {\n  let ret = sample_rets.next();\n\n  ret[0] = Math.pow(u, 1.0/UPW);\n  ret[1] = Math.pow(v, 1.0/VPW);\n\n  return ret;\n}\n//*/\n\nlet fieldrand = new util.MersenneRandom(0);\n\nlet huefields = {};\nexport function getHueField(width, height, dpi) {\n  let key = width + \":\" + height + \":\" + dpi.toFixed(4);\n\n  if (key in huefields) {\n    return huefields[key];\n  }\n\n  let field = new ImageData(width, height);\n  let idata = field.data;\n\n  for (let i=0; i<width*height; i++) {\n    let ix = i % width, iy = ~~(i / width);\n    let idx = i*4;\n\n    let rgb = hsv_to_rgb(ix/width, 1, 1);\n\n    idata[idx] = rgb[0]*255;\n    idata[idx+1] = rgb[1]*255;\n    idata[idx+2] = rgb[2]*255;\n    idata[idx+3] = 255;\n  }\n\n  //*\n  let canvas = document.createElement(\"canvas\");\n  canvas.width = field.width;\n  canvas.height = field.height;\n  let g = canvas.getContext(\"2d\");\n  g.putImageData(field, 0, 0);\n  field = canvas;\n  //*/\n\n  huefields[key] = field;\n  return field;\n}\n\nlet fields = {};\nexport function getFieldImage(fieldsize, width, height, hsva) {\n  fieldrand.seed(0);\n\n  let hue = hsva[0];\n  let hue_rgb = hsv_to_rgb(hue, 1.0, 1.0);\n  let key = fieldsize + \":\" + width + \":\" + height + \":\" + hue.toFixed(5);\n\n  if (key in fields)\n    return fields[key];\n\n  //console.log(\"generation color picker field of size\", size);\n\n  let size2 = fieldsize;\n  let valpow = 0.75;\n\n  let image = {\n    width : width,\n    height : height,\n    image : new ImageData(fieldsize, fieldsize),\n\n    x2sat : (x) => {\n      return Math.min(Math.max(x/width, 0), 1);\n    },\n    y2val : (y) => {\n      y = 1.0 - Math.min(Math.max(y/height, 0), 1);\n\n      return y === 0.0 ? 0.0 : y**valpow;\n    },\n    sat2x : (s) => {\n       return s*width;\n    },\n    val2y : (v) => {\n      if (v == 0)\n        return height;\n\n      v = v**(1.0 / valpow);\n      return (1.0 - v)*height;\n    }\n  };\n\n  image.params = {\n    box : {\n      x : 0,\n      y : 0,\n      width : width,\n      height : height\n    }\n  };\n\n  let idata = image.image.data;\n  for (let i=0; i<idata.length; i += 4) {\n    let i2 = i/4;\n    let x = i2 % size2, y = ~~(i2 / size2);\n\n    let v = 1.0 - (y / size2);\n    let s = (x/size2);\n\n    let rgb = hsv_to_rgb(hsva[0], s, v**valpow);\n\n    idata[i] = rgb[0]*255;\n    idata[i+1] = rgb[1]*255;\n    idata[i+2] = rgb[2]*255;\n    idata[i+3] = 255;\n  }\n\n  //*\n  let image2 = document.createElement(\"canvas\");\n  image2.width = size2;\n  image2.height = size2;\n  let g = image2.getContext(\"2d\");\n  g.putImageData(image.image, 0, 0);\n  //*/\n  image.canvas = image2;\n  image.scale = width / size2;\n\n  fields[key] = image;\n  return image;\n}\n\nlet _update_temp = new Vector4();\n\nexport class SimpleBox {\n  constructor(pos=[0, 0], size=[1, 1]) {\n    this.pos = new Vector2(pos);\n    this.size = new Vector2(size);\n    this.r = 0;\n  }\n}\n\nexport class HueField extends UIBase {\n  constructor() {\n    super();\n\n    this.canvas = document.createElement(\"canvas\");\n    this.g = this.canvas.getContext(\"2d\");\n    this.shadow.appendChild(this.canvas);\n\n    let setFromXY = (x, y) => {\n      let dpi = this.getDPI();\n      let r = this.getDefault(\"circleSize\");\n\n      let h = x / ((this.canvas.width - r*4)/dpi);\n      h = Math.min(Math.max(h, 0.0), 1.0);\n\n      this.hsva[0] = h;\n\n      if (this.onchange !== undefined) {\n        this.onchange(this.hsva);\n      }\n\n      this._redraw();\n    };\n\n    this.addEventListener(\"mousedown\", (e) => {\n      let rect = this.canvas.getClientRects()[0];\n      let x = e.clientX - rect.x, y = e.clientY - rect.y;\n\n      setFromXY(x, y);\n\n      setTimeout(() => {\n        this.pushModal({\n          on_mousemove: (e) => {\n            let rect = this.canvas.getClientRects()[0];\n            let x = e.clientX - rect.x, y = e.clientY - rect.y;\n\n            setFromXY(x, y);\n          },\n          on_mousedown: (e) => {\n            this.popModal();\n          },\n          on_mouseup: (e) => {\n            this.popModal();\n          },\n          on_keydown: (e) => {\n            if (e.keyCode == keymap[\"Enter\"] || e.keyCode == keymap[\"Escape\"] || e.keyCode == keymap[\"Space\"]) {\n              this.popModal();\n            }\n          }\n        });\n      }, 1)\n    });\n  }\n\n  _redraw() {\n    let g = this.g, canvas = this.canvas;\n    let dpi = this.getDPI();\n\n    let w = this.getDefault(\"defaultWidth\");\n    let h = this.getDefault(\"hueheight\");\n\n    canvas.width = ~~(w*dpi);\n    canvas.height = ~~(h*dpi);\n\n    canvas.style[\"width\"] = w + \"px\";\n    canvas.style[\"height\"] = h + \"px\";\n\n    let rselector = ~~(this.getDefault(\"circleSize\") * dpi);\n\n    let w2 = canvas.width - rselector*4, h2 = canvas.height;\n\n    g.drawImage(getHueField(w2, h2, dpi), 0, 0, w2, h2, rselector*2, 0, w2, h2);\n\n    let x = this.hsva[0]*(canvas.width - rselector*4) + rselector*2;\n    let y = canvas.height*0.5;\n\n    g.beginPath();\n    g.arc(x, y, rselector, -Math.PI, Math.PI);\n    g.closePath();\n\n    g.strokeStyle = \"white\";\n    g.lineWidth = 3*dpi;\n    g.stroke();\n\n    g.strokeStyle = \"grey\";\n    g.lineWidth = 1*dpi;\n    g.stroke();\n\n    if (this.disabled) {\n      g.beginPath();\n      g.fillStyle = \"rgba(25,25,25,0.75)\"\n      g.rect(0, 0, this.canvas.width, this.canvas.height);\n      g.fill();\n    }\n  }\n\n  on_disabled() {\n    this._redraw();\n  }\n\n  on_enabled() {\n    this._redraw();\n  }\n\n  static define() {return {\n    tagname : \"huefield-x\",\n    style   : \"colorfield\"\n  };}\n}\n\nUIBase.register(HueField);\n\nexport class SatValField extends UIBase {\n  constructor() {\n    super();\n\n    this.hsva = [0,0,0,1];\n\n    this.canvas = document.createElement(\"canvas\");\n    this.g = this.canvas.getContext(\"2d\");\n    this.shadow.appendChild(this.canvas);\n\n    this.onchange = undefined;\n\n    let setFromXY = (x, y) => {\n      let field = this._getField();\n      let r = ~~(this.getDefault(\"circleSize\")*this.getDPI());\n\n      let sat = field.x2sat(x-r);\n      let val = field.y2val(y-r);\n\n      this.hsva[1] = sat;\n      this.hsva[2] = val;\n\n      if (this.onchange) {\n        this.onchange(this.hsva);\n      }\n\n      this._redraw();\n    };\n\n    this.canvas.addEventListener(\"mousedown\", (e) => {\n      let rect = this.canvas.getClientRects()[0];\n      let x = e.clientX - rect.x, y = e.clientY - rect.y;\n\n      setFromXY(x, y);\n\n      setTimeout(() => {\n        this.pushModal({\n          on_mousemove: (e) => {\n            let rect = this.canvas.getClientRects()[0];\n            let x = e.clientX - rect.x, y = e.clientY - rect.y;\n\n            setFromXY(x, y);\n          },\n          on_mousedown: (e) => {\n            this.popModal();\n          },\n          on_mouseup: (e) => {\n            this.popModal();\n          },\n          on_keydown: (e) => {\n            if (e.keyCode == keymap[\"Enter\"] || e.keyCode == keymap[\"Escape\"] || e.keyCode == keymap[\"Space\"]) {\n              this.popModal();\n            }\n          }\n        });\n      }, 1);\n    });\n\n    this.canvas.addEventListener(\"touchstart\", (e) => {\n      console.log(\"touch start\");\n      let rect = this.canvas.getClientRects()[0];\n      let x = e.touches[0].clientX - rect.x, y = e.touches[0].clientY - rect.y;\n\n      setFromXY(x, y);\n\n      setTimeout(() => {\n        this.pushModal({\n          on_mousemove: (e) => {\n            let rect = this.canvas.getClientRects()[0];\n            let x = e.touches[0].clientX - rect.x, y = e.touches[0].clientY - rect.y;\n\n            setFromXY(x, y);\n          },\n          on_touchmove: (e) => {\n            let rect = this.canvas.getClientRects()[0];\n            let x = e.touches[0].clientX - rect.x, y = e.touches[0].clientY - rect.y;\n\n            setFromXY(x, y);\n          },\n          on_mousedown: (e) => {\n            this.popModal();\n          },\n          on_touchcancel: (e) => {\n            this.popModal();\n          },\n          on_touchend: (e) => {\n            this.popModal();\n          },\n          on_mouseup: (e) => {\n            this.popModal();\n          },\n          on_keydown: (e) => {\n            if (e.keyCode == keymap[\"Enter\"] || e.keyCode == keymap[\"Escape\"] || e.keyCode == keymap[\"Space\"]) {\n              this.popModal();\n            }\n          }\n        });\n      }, 1);\n    })\n  }\n\n  _getField() {\n    let dpi = this.getDPI();\n    let canvas = this.canvas;\n    let r = this.getDefault(\"circleSize\");\n    let w = this.getDefault(\"defaultWidth\");\n    let h = this.getDefault(\"defaultHeight\");\n\n    //r = ~~(r*dpi);\n\n    return getFieldImage(this.getDefault(\"fieldsize\"), w-r*2, h-r*2, this.hsva);\n  }\n\n  update(force_update=false) {\n    super.update();\n\n    if (force_update) {\n      this._redraw();\n    }\n  }\n\n  _redraw() {\n    let g = this.g, canvas = this.canvas;\n    let dpi = this.getDPI();\n\n    let w = this.getDefault(\"defaultWidth\");\n    let h = this.getDefault(\"defaultHeight\");\n\n    canvas.width = ~~(w*dpi);\n    canvas.height = ~~(h*dpi);\n\n    canvas.style[\"width\"] = w + \"px\";\n    canvas.style[\"height\"] = h + \"px\";\n    //SatValField\n\n    let rselector = ~~(this.getDefault(\"circleSize\") * dpi);\n\n    let field = this._getField()\n    let image = field.canvas;\n\n    g.globalAlpha = 1.0;\n    g.beginPath();\n    g.rect(0, 0, canvas.width, canvas.height);\n    g.fillStyle = \"rgb(200, 200, 200)\";\n    g.fill();\n\n    g.beginPath();\n\n    let steps = 17;\n    let dx = canvas.width / steps;\n    let dy = canvas.height / steps;\n\n    for (let i=0; i<steps*steps; i++) {\n      let x = (i % steps)*dx, y = (~~(i / steps))*dy;\n\n      if (i % 2 == 0) {\n        continue;\n      }\n      g.rect(x, y, dx, dy);\n    }\n\n    g.fillStyle = \"rgb(110, 110, 110)\";\n    g.fill();\n\n    g.globalAlpha = this.hsva[3];\n    g.drawImage(image, 0, 0, image.width, image.height, rselector, rselector, canvas.width-rselector*2, canvas.height-rselector*2);\n\n    let hsva = this.hsva;\n\n    let x = field.sat2x(hsva[1])*dpi + rselector;\n    let y = field.val2y(hsva[2])*dpi + rselector;\n    let r = rselector;\n\n    g.beginPath();\n    g.arc(x, y, r, -Math.PI, Math.PI);\n    g.closePath();\n\n    g.strokeStyle = \"white\";\n    g.lineWidth = 3*dpi;\n    g.stroke();\n\n    g.strokeStyle = \"grey\";\n    g.lineWidth = 1*dpi;\n    g.stroke();\n\n    if (this.disabled) {\n      g.beginPath();\n      g.fillStyle = \"rgba(25,25,25,0.75)\";\n      g.rect(0, 0, this.canvas.width, this.canvas.height);\n      g.fill();\n    }\n  }\n\n  on_disabled() {\n    this._redraw();\n  }\n\n  on_enabled() {\n    this._redraw();\n  }\n\n  static define() {return {\n    tagname : \"satvalfield-x\",\n    style   : \"colorfield\"\n  };}\n}\n\nUIBase.register(SatValField);\n\nexport class ColorField extends ui.ColumnFrame {\n  constructor() {\n    super();\n\n    this.hsva = [0.05, 0.6, 0.15, 1.0];\n    this.rgba = new Vector4([0, 0, 0, 0]);\n\n    this._recalcRGBA();\n\n    /*\n    this.hbox = new SimpleBox();\n    this.svbox = new SimpleBox();\n    //*/\n\n    this._last_dpi = undefined;\n\n    let satvalfield = this.satvalfield = document.createElement(\"satvalfield-x\");\n    satvalfield.hsva = this.hsva;\n\n    let huefield = this.huefield = document.createElement(\"huefield-x\");\n    huefield.hsva = this.hsva;\n\n    huefield.onchange = (e) => {\n      this.satvalfield._redraw();\n      this._recalcRGBA();\n\n      if (this.onchange) {\n        this.onchange(this.rgba);\n      }\n    };\n\n    satvalfield.onchange = (e) => {\n      this._recalcRGBA();\n\n      if (this.onchange) {\n        this.onchange(this.rgba);\n      }\n    };\n\n    this._add(satvalfield);\n    this._add(huefield);\n    //this.shadow.appendChild(canvas);\n    //this.shadow.appendChild(huecanvas);\n  }\n\n  setHSVA(h, s, v, a=1.0, fire_onchange=true) {\n    this.hsva[0] = h;\n    this.hsva[1] = s;\n    this.hsva[2] = v;\n    this.hsva[3] = a;\n\n    this._recalcRGBA();\n    this.update(true);\n\n    if (this.onchange && fire_onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n\n  setRGBA(r, g, b, a=1.0, fire_onchange=true) {\n    let hsv = rgb_to_hsv(r, g, b);\n\n    this.hsva[0] = hsv[0];\n    this.hsva[1] = hsv[1];\n    this.hsva[2] = hsv[2];\n    this.hsva[3] = a;\n\n    this._recalcRGBA();\n    this.update(true);\n\n    if (this.onchange && fire_onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n\n  _recalcRGBA() {\n    let ret = hsv_to_rgb(this.hsva[0], this.hsva[1], this.hsva[2]);\n\n    this.rgba[0] = ret[0];\n    this.rgba[1] = ret[1];\n    this.rgba[2] = ret[2];\n    this.rgba[3] = this.hsva[3];\n\n    return this;\n  }\n\n  updateDPI(force_update=false, _in_update=false) {\n    let dpi = this.getDPI();\n\n    let update = force_update;\n    update = update || dpi != this._last_dpi;\n\n    if (update) {\n      this._last_dpi = dpi;\n\n      if (!_in_update)\n        this._redraw();\n\n      return true;\n    }\n  }\n\n  setRGBA(r, g, b, a=1.0, fire_onchange=true) {\n    let ret = rgb_to_hsv(r, g, b);\n\n    this.hsva[0] = ret[0];\n    this.hsva[1] = ret[1];\n    this.hsva[2] = ret[2];\n    this.hsva[3] = a;\n\n    this._recalcRGBA();\n    this.update(true);\n\n    if (this.onchange && fire_onchange) {\n      this.onchange(this.hsva, this.rgba);\n    }\n  }\n  update(force_update=false) {\n    super.update();\n\n    let redraw = false;\n\n    redraw = redraw || this.updateDPI(force_update, true);\n\n    if (redraw) {\n      this.satvalfield.update(true);\n      this._redraw();\n    }\n  }\n\n  static define() {return {\n    tagname : \"colorfield-x\",\n    style : \"colorfield\"\n  };}\n\n  _redraw() {\n    this.satvalfield._redraw();\n    this.huefield._redraw();\n  }\n}\nUIBase.register(ColorField);\n\nexport class ColorPicker extends ui.ColumnFrame {\n  constructor() {\n    super();\n\n    this.field = document.createElement(\"colorfield-x\");\n    this.field.setAttribute(\"class\", \"colorpicker\");\n\n    this.field.onchange = () => {\n      this._setDataPath();\n      this._setSliders();\n\n      if (this.onchange) {\n        this.onchange(this.field.rgba);\n      }\n    };\n\n    let style = document.createElement(\"style\");\n    style.textContent = `\n      .colorpicker {\n        background-color : ${this.getDefault(\"BoxBG\")};\n      }\n    `;\n\n    this._style = style;\n\n    let cb = this.colorbox = document.createElement(\"div\");\n    cb.style[\"width\"] = \"100%\";\n    cb.style[\"height\"] = this.getDefault(\"colorBoxHeight\") + \"px\";\n    cb.style[\"background-color\"] = \"black\";\n\n    this.shadow.appendChild(style);\n    this.field.ctx = this.ctx;\n  }\n\n  updateColorBox() {\n    let r = this.field.rgba[0], g = this.field.rgba[1], b = this.field.rgba[2];\n    //let a = this.field.rgba[3];\n\n    r = ~~(r*255);\n    g = ~~(g*255);\n    b = ~~(b*255);\n\n    let css = `rgb(${r},${g},${b})`;\n    this.colorbox.style[\"background-color\"] = css;\n  }\n\n  init() {\n    super.init();\n\n    this.add(this.colorbox);\n    this.add(this.field);\n\n    this.style[\"width\"] = this.getDefault(\"defaultWidth\") + \"px\";\n  }\n\n  static setDefault(node) {\n    let tabs = node.tabs();\n\n    tabs.overrideDefault(\"DefaultPanelBG\", node.getDefault(\"DefaultPanelBG\"));\n\n    let tab = tabs.tab(\"HSV\");\n\n    node.h = tab.slider(undefined, \"Hue\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(e.value, hsva[1], hsva[2], hsva[3]);\n    });\n    node.s = tab.slider(undefined, \"Saturation\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], e.value, hsva[2], hsva[3]);\n    });\n    node.v = tab.slider(undefined, \"Value\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], hsva[1], e.value, hsva[3]);\n    });\n    node.a = tab.slider(undefined, \"Alpha\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let hsva = node.hsva;\n      node.setHSVA(hsva[0], hsva[1], hsva[2], e.value);\n    });\n\n\n    tab = tabs.tab(\"RGB\");\n\n    node.r = tab.slider(undefined, \"R\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(e.value, rgba[1], rgba[2], rgba[3]);\n    });\n    node.g = tab.slider(undefined, \"G\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], e.value, rgba[2], rgba[3]);\n    });\n    node.b = tab.slider(undefined, \"B\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], rgba[1], e.value, rgba[3]);\n    });\n    node.a2 = tab.slider(undefined, \"Alpha\", 0.0, 0.0, 1.0, 0.001, false, true, (e) => {\n      let rgba = node.rgba;\n      node.setRGBA(rgba[0], rgba[1], rgba[2], e.value);\n    });\n\n    node._setSliders();\n  }\n\n  _setSliders() {\n    if (this.h === undefined) {\n      //setDefault() wasn't called\n      console.warn(\"colorpicker ERROR\");\n      return;\n    }\n\n    let hsva = this.hsva;\n    this.h.setValue(hsva[0], false);\n    this.s.setValue(hsva[1], false);\n    this.v.setValue(hsva[2], false);\n    this.a.setValue(hsva[3], false);\n\n    let rgba = this.rgba;\n\n    this.r.setValue(rgba[0], false);\n    this.g.setValue(rgba[1], false);\n    this.b.setValue(rgba[2], false);\n    this.a2.setValue(rgba[3], false);\n\n    this.updateColorBox();\n  }\n\n  get hsva() {\n    return this.field.hsva;\n  }\n\n  get rgba() {\n    return this.field.rgba;\n  }\n\n  updateDataPath() {\n    if (!this.hasAttribute(\"datapath\")) {\n      return;\n    }\n\n    let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\n    let val =  this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\n\n    if (val === undefined) {\n      //console.warn(\"Bad datapath\", this.getAttribute(\"datapath\"));\n      this.disabled = true;\n      return;\n    }\n\n    this.disabled = false;\n\n    _update_temp.load(val);\n\n    if (prop.type == PropTypes.VEC3) {\n      _update_temp[3] = 1.0;\n    }\n\n    if (_update_temp.vectorDistance(this.field.rgba) > 0.01)  {\n      this.field.setRGBA(_update_temp[0], _update_temp[1], _update_temp[2], _update_temp[3], false);\n      this._setSliders();\n      this.field.update(true);\n    }\n  }\n\n  update() {\n    if (this.hasAttribute(\"datapath\")) {\n      this.updateDataPath();\n    }\n\n    super.update();\n  }\n\n  _setDataPath() {\n    if (this.hasAttribute(\"datapath\")) {\n      let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\n\n      if (prop === undefined) {\n        console.warn(\"Bad data path for color field:\", this.getAttribute(\"datapath\"));\n      }\n\n      let val = this.field.rgba;\n      if (prop !== undefined && prop.type == PropTypes.VEC3) {\n        val = new Vector3();\n        val.load(this.field.rgba);\n      }\n\n      this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), val);\n\n      //if (this.hasAttribute(\"mass_set_path\")) {\n      //  let mass_set_path = this.getAttribute(\"mass_set_path\");\n      //}\n    }\n  }\n\n  setHSVA(h, s, v, a) {\n    this.field.setHSVA(h, s, v, a);\n    this._setSliders();\n    this._setDataPath();\n  }\n\n  setRGBA(r, g, b, a) {\n    this.field.setRGBA(r, g, b, a)\n    this._setSliders();\n    this._setDataPath();\n  }\n\n  static define() {return {\n    tagname : \"colorpicker-x\",\n    style : \"colorfield\"\n  };}\n}\n\nUIBase.register(ColorPicker);\n\n\nexport class ColorPickerButton extends UIBase {\n  constructor() {\n    super();\n\n    this._highlight = false;\n    this._depress = false;\n    this._label = \"\";\n\n    this.rgba = new Vector4([1, 1, 1, 1]);\n    this.labelDom = document.createElement(\"span\");\n    this.labelDom.textContent = \"yay\";\n    this.dom = document.createElement(\"canvas\");\n    this.g = this.dom.getContext(\"2d\");\n\n    this.shadow.appendChild(this.labelDom);\n    this.shadow.appendChild(this.dom);\n  }\n\n  set label(val) {\n    this._label = val;\n    this.labelDom.textContent = val;\n  }\n\n  get label() {\n    return this._label;\n  }\n\n  init() {\n    super.init();\n    this._font = \"DefaultText\"; //this.getDefault(\"defaultFont\");\n\n    let enter = (e) => {\n      console.log(e.type);\n      this._highlight = true;\n      this._redraw();\n    };\n\n    let leave = (e) => {\n      console.log(e.type);\n      this._highlight = false;\n      this._redraw();\n    };\n\n\n    this.addEventListener(\"mousedown\", (e) => {\n      this.click(e);\n    });\n\n    this.addEventListener(\"mouseover\", enter);\n    this.addEventListener(\"mouseleave\", leave);\n    this.addEventListener(\"mousein\", enter);\n    this.addEventListener(\"mouseout\", leave);\n    this.addEventListener(\"focus\", enter);\n    this.addEventListener(\"blur\", leave);\n\n    this.setCSS();\n  }\n\n  click(e) {\n    //console.log(\"click!\", this.getAttribute(\"mass_set_path\"));\n\n    if (this.onclick) {\n      this.onclick(e);\n    }\n\n    let colorpicker = this.ctx.screen.popup(this);\n    let widget = colorpicker.colorPicker(this.getAttribute(\"datapath\"), undefined, this.getAttribute(\"mass_set_path\"));\n\n    widget.onchange = onchange;\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(val) {\n    this._font = val;\n\n    this.setCSS();\n  }\n\n  _redraw() {\n    let canvas = this.dom, g = this.g;\n\n    g.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (this.disabled) {\n      let color = \"rgb(55, 55, 55)\";\n\n      g.save();\n\n      ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"fill\", color);\n      ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"clip\");\n      let steps = 10;\n      let dt = canvas.width / steps, t = 0;\n\n      g.beginPath();\n      g.lineWidth = 2;\n      g.strokeStyle = \"black\";\n\n      for (let i=0; i<steps; i++, t += dt) {\n        g.moveTo(t, 0);\n        g.lineTo(t+dt, canvas.height);\n        g.moveTo(t+dt, 0);\n        g.lineTo(t, canvas.height);\n      }\n\n      g.stroke();\n      g.restore();\n      return;\n    }\n\n    //do checker pattern for alpha\n    g.save();\n\n    let grid1 = \"rgb(100, 100, 100)\";\n    let grid2 = \"rgb(175, 175, 175)\";\n\n    ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"clip\");\n    ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"fill\", grid1);\n\n    let cellsize = 10;\n    let totx = Math.ceil(canvas.width / cellsize), toty = Math.ceil(canvas.height / cellsize);\n\n    //console.log(\"TOTX, TOTY\", totx, toty);\n\n    g.beginPath();\n    for (let x=0; x<totx; x++) {\n      for (let y=0; y<toty; y++) {\n        if ((x+y) & 1) {\n          continue;\n        }\n\n        g.rect(x*cellsize, y*cellsize, cellsize, cellsize);\n      }\n    }\n\n    g.fillStyle = grid2;\n    g.fill();\n\n    //g.fillStyle = \"orange\";\n    //g.beginPath();\n    //g.rect(0, 0, canvas.width, canvas.height);\n    //g.fill();\n\n    let color = color2css(this.rgba);\n    //console.log(color);\n    ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"fill\", color, undefined, true);\n    //drawRoundBox(elem, canvas, g, width, height, r=undefined, op=\"fill\", color=undefined, pad=undefined) {\n\n    if (this._highlight) {\n      //let color = \"rgba(200, 200, 255, 0.5)\";\n      let color = this.getDefault(\"BoxHighlight\");\n      ui_base.drawRoundBox(this, canvas, g, canvas.width, canvas.height, undefined, \"fill\", color);\n    }\n\n    g.restore();\n  }\n  setCSS() {\n    let w = this.getDefault(\"defaultWidth\");\n    let h = this.getDefault(\"defaultHeight\");\n    let dpi = this.getDPI();\n\n    this.style[\"width\"] = w + \"px\";\n    this.style[\"height\"] = h + \"px\";\n\n    this.style[\"flex-direction\"] = \"row\";\n    this.style[\"display\"] = \"flex\";\n\n    this.labelDom.style[\"color\"] = this.getDefault(this._font).color;\n    this.labelDom.style[\"font\"] = ui_base.getFont(this, undefined, this._font, false);\n\n    let canvas = this.dom;\n\n    canvas.style[\"width\"] = w + \"px\";\n    canvas.style[\"height\"] = h + \"px\";\n    canvas.width = ~~(w*dpi);\n    canvas.height = ~~(h*dpi);\n\n    this._redraw();\n  }\n\n  static define() {return {\n    tagname : \"color-picker-button-x\",\n    style   : \"colorpickerbutton\"\n  }}\n\n  updateDataPath() {\n    if (!(this.hasAttribute(\"datapath\"))) {\n      return;\n    }\n\n    let path = this.getAttribute(\"datapath\");\n    let prop = this.getPathMeta(this.ctx, path);\n\n    if ((prop === undefined || prop.data === undefined) && DEBUG.verboseDataPath) {\n      console.log(\"bad path\", path);\n      return;\n    }\n\n    prop = prop;\n\n    if (prop.uiname !== this._label) {\n      //console.log(prop);\n      this.label = prop.uiname;\n    }\n\n    let val = this.getPathValue(this.ctx, path);\n\n    if (val === undefined) {\n      let redraw = this.disabled !== true;\n\n      this.disabled = true;\n\n      if (redraw) {\n        this._redraw();\n      }\n\n      return;\n    } else {\n      let redraw = this.disabled;\n\n      this.disabled = false;\n\n      if (redraw) {\n        this._redraw();\n      }\n    }\n\n    if (this.rgba.vectorDistance(val) > 0.0001) {\n      if (prop.type == PropTypes.VEC3) {\n        this.rgba.load(val);\n        this.rgba[3] = 1.0;\n      } else {\n        this.rgba.load(val);\n      }\n\n      this._redraw();\n    }\n  }\n\n  update() {\n    if (this.hasAttribute(\"datapath\")) {\n      this.updateDataPath();\n    }\n  }\n\n  redraw() {\n    this._redraw();\n  }\n};\nUIBase.register(ColorPickerButton);\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_colorpicker2.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1637,
    "kind": "variable",
    "name": "rgb_to_hsv_rets",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~rgb_to_hsv_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1638,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1639,
    "kind": "function",
    "name": "rgb_to_hsv",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~rgb_to_hsv",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{rgb_to_hsv}",
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1640,
    "kind": "variable",
    "name": "hsv_to_rgb_rets",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~hsv_to_rgb_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1641,
    "kind": "function",
    "name": "hsv_to_rgb",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~hsv_to_rgb",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{hsv_to_rgb}",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1642,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1643,
    "kind": "variable",
    "name": "UPW",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~UPW",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 117,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1644,
    "kind": "variable",
    "name": "sample_rets",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~sample_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1645,
    "kind": "function",
    "name": "inv_sample",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~inv_sample",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{inv_sample}",
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "params": [
      {
        "name": "u",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1646,
    "kind": "function",
    "name": "sample",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~sample",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{sample}",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "params": [
      {
        "name": "u",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1647,
    "kind": "variable",
    "name": "fieldrand",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~fieldrand",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1648,
    "kind": "variable",
    "name": "huefields",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~huefields",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 142,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1649,
    "kind": "function",
    "name": "getHueField",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~getHueField",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{getHueField}",
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "params": [
      {
        "name": "width",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      },
      {
        "name": "dpi",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1650,
    "kind": "variable",
    "name": "fields",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~fields",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 178,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1651,
    "kind": "function",
    "name": "getFieldImage",
    "memberof": "scripts/ui_colorpicker2.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~getFieldImage",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{getFieldImage}",
    "description": null,
    "lineNumber": 179,
    "undocument": true,
    "params": [
      {
        "name": "fieldsize",
        "types": [
          "*"
        ]
      },
      {
        "name": "width",
        "types": [
          "*"
        ]
      },
      {
        "name": "height",
        "types": [
          "*"
        ]
      },
      {
        "name": "hsva",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1652,
    "kind": "variable",
    "name": "_update_temp",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~_update_temp",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 258,
    "undocument": true,
    "type": {
      "types": [
        "scripts/vectormath.js~Vector4"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1653,
    "kind": "class",
    "name": "SimpleBox",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~SimpleBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{SimpleBox}",
    "description": null,
    "lineNumber": 260,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1654,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~SimpleBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SimpleBox#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 261,
    "undocument": true
  },
  {
    "__docId__": 1655,
    "kind": "member",
    "name": "pos",
    "memberof": "scripts/ui_colorpicker2.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SimpleBox#pos",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1656,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ui_colorpicker2.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SimpleBox#size",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1657,
    "kind": "member",
    "name": "r",
    "memberof": "scripts/ui_colorpicker2.js~SimpleBox",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SimpleBox#r",
    "access": "public",
    "description": null,
    "lineNumber": 264,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1658,
    "kind": "class",
    "name": "HueField",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~HueField",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{HueField}",
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 1659,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 269,
    "undocument": true
  },
  {
    "__docId__": 1660,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 272,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1661,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#g",
    "access": "public",
    "description": null,
    "lineNumber": 273,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1662,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 322,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1663,
    "kind": "method",
    "name": "on_disabled",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#on_disabled",
    "access": "public",
    "description": null,
    "lineNumber": 364,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1664,
    "kind": "method",
    "name": "on_enabled",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~HueField#on_enabled",
    "access": "public",
    "description": null,
    "lineNumber": 368,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1665,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker2.js~HueField",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~HueField.define",
    "access": "public",
    "description": null,
    "lineNumber": 372,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1666,
    "kind": "class",
    "name": "SatValField",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~SatValField",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{SatValField}",
    "description": null,
    "lineNumber": 380,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 1667,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 381,
    "undocument": true
  },
  {
    "__docId__": 1668,
    "kind": "member",
    "name": "hsva",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#hsva",
    "access": "public",
    "description": null,
    "lineNumber": 384,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1669,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 386,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1670,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#g",
    "access": "public",
    "description": null,
    "lineNumber": 387,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1671,
    "kind": "member",
    "name": "onchange",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#onchange",
    "access": "public",
    "description": null,
    "lineNumber": 390,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1672,
    "kind": "method",
    "name": "_getField",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#_getField",
    "access": "private",
    "description": null,
    "lineNumber": 481,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1673,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#update",
    "access": "public",
    "description": null,
    "lineNumber": 493,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1674,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 501,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1675,
    "kind": "method",
    "name": "on_disabled",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#on_disabled",
    "access": "public",
    "description": null,
    "lineNumber": 573,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1676,
    "kind": "method",
    "name": "on_enabled",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~SatValField#on_enabled",
    "access": "public",
    "description": null,
    "lineNumber": 577,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1677,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker2.js~SatValField",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~SatValField.define",
    "access": "public",
    "description": null,
    "lineNumber": 581,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1678,
    "kind": "class",
    "name": "ColorField",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorField",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{ColorField}",
    "description": null,
    "lineNumber": 589,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ui.ColumnFrame"
    ]
  },
  {
    "__docId__": 1679,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 590,
    "undocument": true
  },
  {
    "__docId__": 1680,
    "kind": "member",
    "name": "hsva",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#hsva",
    "access": "public",
    "description": null,
    "lineNumber": 593,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1681,
    "kind": "member",
    "name": "rgba",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#rgba",
    "access": "public",
    "description": null,
    "lineNumber": 594,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1682,
    "kind": "member",
    "name": "_last_dpi",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#_last_dpi",
    "access": "private",
    "description": null,
    "lineNumber": 603,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1683,
    "kind": "method",
    "name": "setHSVA",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#setHSVA",
    "access": "public",
    "description": null,
    "lineNumber": 634,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1684,
    "kind": "method",
    "name": "setRGBA",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#setRGBA",
    "access": "public",
    "description": null,
    "lineNumber": 648,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1685,
    "kind": "method",
    "name": "_recalcRGBA",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#_recalcRGBA",
    "access": "private",
    "description": null,
    "lineNumber": 664,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1686,
    "kind": "method",
    "name": "updateDPI",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#updateDPI",
    "access": "public",
    "description": null,
    "lineNumber": 675,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      },
      {
        "name": "_in_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1688,
    "kind": "method",
    "name": "setRGBA",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#setRGBA",
    "access": "public",
    "description": null,
    "lineNumber": 691,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1689,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#update",
    "access": "public",
    "description": null,
    "lineNumber": 706,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 1690,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorField.define",
    "access": "public",
    "description": null,
    "lineNumber": 719,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1691,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_colorpicker2.js~ColorField",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorField#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 724,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1692,
    "kind": "class",
    "name": "ColorPicker",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{ColorPicker}",
    "description": null,
    "lineNumber": 731,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ui.ColumnFrame"
    ]
  },
  {
    "__docId__": 1693,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 732,
    "undocument": true
  },
  {
    "__docId__": 1694,
    "kind": "member",
    "name": "field",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#field",
    "access": "public",
    "description": null,
    "lineNumber": 735,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1695,
    "kind": "member",
    "name": "_style",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#_style",
    "access": "private",
    "description": null,
    "lineNumber": 754,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1696,
    "kind": "method",
    "name": "updateColorBox",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#updateColorBox",
    "access": "public",
    "description": null,
    "lineNumber": 765,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1697,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#init",
    "access": "public",
    "description": null,
    "lineNumber": 777,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1698,
    "kind": "method",
    "name": "setDefault",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker.setDefault",
    "access": "public",
    "description": null,
    "lineNumber": 786,
    "undocument": true,
    "params": [
      {
        "name": "node",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1699,
    "kind": "method",
    "name": "_setSliders",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#_setSliders",
    "access": "private",
    "description": null,
    "lineNumber": 833,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1700,
    "kind": "get",
    "name": "hsva",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#hsva",
    "access": "public",
    "description": null,
    "lineNumber": 856,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1701,
    "kind": "get",
    "name": "rgba",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#rgba",
    "access": "public",
    "description": null,
    "lineNumber": 860,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1702,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 864,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1703,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 874,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1705,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#update",
    "access": "public",
    "description": null,
    "lineNumber": 893,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1706,
    "kind": "method",
    "name": "_setDataPath",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#_setDataPath",
    "access": "private",
    "description": null,
    "lineNumber": 901,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1707,
    "kind": "method",
    "name": "setHSVA",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#setHSVA",
    "access": "public",
    "description": null,
    "lineNumber": 923,
    "undocument": true,
    "params": [
      {
        "name": "h",
        "types": [
          "*"
        ]
      },
      {
        "name": "s",
        "types": [
          "*"
        ]
      },
      {
        "name": "v",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1708,
    "kind": "method",
    "name": "setRGBA",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker#setRGBA",
    "access": "public",
    "description": null,
    "lineNumber": 929,
    "undocument": true,
    "params": [
      {
        "name": "r",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "a",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1709,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker2.js~ColorPicker",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorPicker.define",
    "access": "public",
    "description": null,
    "lineNumber": 935,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1710,
    "kind": "class",
    "name": "ColorPickerButton",
    "memberof": "scripts/ui_colorpicker2.js",
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_colorpicker2.js",
    "importStyle": "{ColorPickerButton}",
    "description": null,
    "lineNumber": 944,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 1711,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 945,
    "undocument": true
  },
  {
    "__docId__": 1712,
    "kind": "member",
    "name": "_highlight",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#_highlight",
    "access": "private",
    "description": null,
    "lineNumber": 948,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1713,
    "kind": "member",
    "name": "_depress",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#_depress",
    "access": "private",
    "description": null,
    "lineNumber": 949,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1714,
    "kind": "member",
    "name": "_label",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#_label",
    "access": "private",
    "description": null,
    "lineNumber": 950,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1715,
    "kind": "member",
    "name": "rgba",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#rgba",
    "access": "public",
    "description": null,
    "lineNumber": 952,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1716,
    "kind": "member",
    "name": "labelDom",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#labelDom",
    "access": "public",
    "description": null,
    "lineNumber": 953,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1717,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#dom",
    "access": "public",
    "description": null,
    "lineNumber": 955,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1718,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#g",
    "access": "public",
    "description": null,
    "lineNumber": 956,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1719,
    "kind": "set",
    "name": "label",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#label",
    "access": "public",
    "description": null,
    "lineNumber": 962,
    "undocument": true
  },
  {
    "__docId__": 1721,
    "kind": "get",
    "name": "label",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#label",
    "access": "public",
    "description": null,
    "lineNumber": 967,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1722,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#init",
    "access": "public",
    "description": null,
    "lineNumber": 971,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1723,
    "kind": "member",
    "name": "_font",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#_font",
    "access": "private",
    "description": null,
    "lineNumber": 973,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1726,
    "kind": "method",
    "name": "click",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#click",
    "access": "public",
    "description": null,
    "lineNumber": 1002,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1727,
    "kind": "get",
    "name": "font",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#font",
    "access": "public",
    "description": null,
    "lineNumber": 1015,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1728,
    "kind": "set",
    "name": "font",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#font",
    "access": "public",
    "description": null,
    "lineNumber": 1019,
    "undocument": true
  },
  {
    "__docId__": 1730,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 1025,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1731,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1102,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1732,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton.define",
    "access": "public",
    "description": null,
    "lineNumber": 1126,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1733,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 1131,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1735,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 1156,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1737,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#update",
    "access": "public",
    "description": null,
    "lineNumber": 1185,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1738,
    "kind": "method",
    "name": "redraw",
    "memberof": "scripts/ui_colorpicker2.js~ColorPickerButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_colorpicker2.js~ColorPickerButton#redraw",
    "access": "public",
    "description": null,
    "lineNumber": 1191,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1739,
    "kind": "file",
    "name": "scripts/ui_curvewidget.js",
    "content": "\"use strict\";\n\n/*FIXME: not sure this works anymore*/\n\nimport * as util from './util.js';\nimport * as ui_base from './ui_base.js';\nimport * as vectormath from './vectormath.js';\n\nvar Vector2 = vectormath.Vector2;\n\n  \nvar bin_cache = {};\nwindow._bin_cache = bin_cache;\n\nvar eval2_rets = util.cachering.fromConstructor(Vector2, 32);\n\nexport const CURVE_VERSION = 0.5;\n\n/*\n  I hate these stupid curve widgets.  This horrible one here works by\n  root-finding the x axis on a two dimensional b-spline (which works\n  surprisingly well).\n*/\n\nfunction bez3(a, b, c, t) {\n  var r1 = a + (b - a)*t;\n  var r2 = b + (c - b)*t;\n  \n  return r1 + (r2 - r1)*t;\n}\n\nfunction bez4(a, b, c, d, t) {\n  var r1 = bez3(a, b, c, t);\n  var r2 = bez3(b, c, d, t);\n  \n  return r1 + (r2 - r1)*t;\n}\n\nexport function binomial(n, i) {\n  if (i > n) {\n    throw new Error(\"Bad call to binomial(n, i), i was > than n\");\n  }\n  \n  if (i == 0 || i == n) {\n    return 1;\n  }\n  \n  var key = \"\" + n + \",\" + i;\n  \n  if (key in bin_cache) \n    return bin_cache[key];\n  \n  var ret = binomial(n-1, i-1) + bin(n-1, i);\n  bin_cache[key] = ret;\n  \n  return ret;\n}\nwindow.bin = binomial;\n\nexport const TangentModes = {\n  SMOOTH : 1,\n  BREAK  : 2\n};\n\n//when in doubt I prefer to make enums bitmasks\nexport const CurveTypes = {\n  BSPLINE  : 1,\n  CUSTOM   : 2,\n  GUASSIAN : 4\n};\n\nclass CurveTypeData {\n  constructor(type) {\n    this.type = type;\n  }\n\n  toJSON() {\n    return {\n      type : this.type\n    }\n  }\n\n  loadJSON(obj) {\n    this.type = obj.type;\n    \n    return this;\n  }\n  \n  redraw() {\n    if (this._redraw_hook) {\n      this._redraw_hook();\n    }\n  }\n  \n  setRedrawHook(cb) {\n    this._redraw_hook = cb;\n    return this;\n  }\n\n  doSave() {\n    if (this._save_hook) {\n      this._save_hook();\n    }\n  }\n  \n  //sets a callback so gui code can trigger saves\n  setSaveHook(cb) {\n    this._save_hook = cb;\n    return this;\n  }\n  \n  get hasGUI() {\n    throw new Error(\"get hasGUI(): implement me!\");\n  }\n  \n  makeGUI(dom, gui, canvas, g, draw_transform) {\n  \n  }\n\n  killGUI(dom, gui, canvas, g, draw_transform) {\n  }\n  \n  evaluate(s) {\n    throw new Error(\"implement me!\");\n  }\n\n  derivative(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.evaluate(s) - this.evaluate(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.evaluate(s+df) - this.evaluate(s)) / df;\n    } else {\n      return (this.evaluate(s+df) - this.evaluate(s-df)) / (2 * df);\n    }\n  }\n\n  derivative2(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.derivative(s) - this.derivative(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.derivative(s+df) - this.derivative(s)) / df;\n    } else {\n      return (this.derivative(s+df) - this.derivative(s-df)) / (2 * df);\n    }\n  }\n\n  inverse(y) {\n    let steps = 9;\n    let ds = 1.0 / steps, s = 0.0;\n    let best = undefined;\n    let ret = undefined;\n    \n    for (let i=0; i<steps; i++, s += ds) {\n      let s1 = s, s2 = s+ds;\n      \n      let mid;\n      \n      for (let j=0; j<11; j++) {\n        let y1 = this.evaluate(s1);\n        let y2 = this.evaluate(s2);\n        mid = (s1+s2)*0.5;\n        \n        if (Math.abs(y1-y) < Math.abs(y2-y)) {\n          s2 = mid;\n        } else {\n          s1 = mid;\n        }\n      }\n      \n      let ymid = this.evaluate(mid);\n      \n      if (best === undefined || Math.abs(y - ymid) < best) {\n        best = Math.abs(y - ymid);\n        ret = mid;\n      }\n    }\n    \n    return ret === undefined ? 0.0 : ret;\n  }\n\n  onActive(parent, draw_transform) {\n  }\n  \n  onInactive(parent, draw_transform) {\n  }\n  \n  reset() {\n\n  }\n\n  destroy() {\n  }\n  \n  update() {\n    \n  }\n  \n  draw(canvas, g, draw_transform) {\n  }\n}\n\nexport const CurveFlags = {\n  SELECT : 1\n};\n\nexport class CurvePoint extends Vector2 {\n  constructor(co) {\n    super(co);\n    \n    this.deg = 3;\n    this.rco = new Vector2(co);\n    this.sco = new Vector2(co);\n    \n    //for transform\n    this.startco = new Vector2();\n    this.eid = -1;\n    this.flag = 0;\n    \n    this.tangent = TangentModes.SMOOTH;\n  }\n  \n  copy() {\n    var ret = new CurvePoint(this);\n    \n    ret.tangent = this.tangent;\n    ret.rco.load(ret);\n    \n    return ret;\n  }\n  \n  toJSON() {\n    return {\n      0       : this[0],\n      1       : this[1],\n      eid     : this.eid,\n      flag    : this.flag,\n      deg     : this.deg,\n      tangent : this.tangent\n    };\n  }\n  \n  static fromJSON(obj) {\n    var ret = new CurvePoint(obj);\n    \n    ret.eid = obj.eid;\n    ret.flag = obj.flag;\n    ret.deg = obj.deg;\n    ret.tangent = obj.tangent;\n    \n    return ret;\n  }\n  \n  basis(t, kprev, knext, is_end, totp, pi) {\n    var wid = (knext-kprev)*0.5;\n    var k = this.rco[0];\n    \n    this.deg = 3;\n    \n    kprev -= (this.deg)*wid;\n    knext += (this.deg)*wid;\n    \n    if (is_end != 1) {\n      kprev = Math.max(kprev, 0.0);\n    }\n    if (is_end != 2) {\n      knext = Math.min(knext, 1.0);\n    }\n    \n    if (t <= kprev || t > knext) {\n      //return 0;\n    }\n    \n    var w;\n    if (t > k) {\n      w = 1.0+(k - t) / (knext - k + 0.00001);\n      w = 2.0 - w;\n    } else {\n      w = (t - kprev) / (k - kprev + 0.00001);\n    }\n    w *= 0.5;\n    \n    var w = (t - kprev) / (knext - kprev);\n    var n = totp;\n    var v = pi;\n    \n    w = Math.min(Math.max(w, 0.0), 1.0);\n    var bernstein = binomial(n, v)*Math.pow(w, v)*Math.pow(1.0-w, n-v);\n    return bernstein;\n    \n    if (w == 0) return 0;\n    \n    w *= w*w;\n    w = 1.0 - Math.pow(1.0-w, 2.0);\n    \n    return w;\n  }\n\n  loadSTRUCT(reader) {\n    reader(this);\n\n    this.load(this._vec);\n    delete this._vec;\n  }\n};\nCurvePoint.STRUCT = `\nCurvePoint {\n  _vec : vec2;\n}\n`;\n\nclass BSplineCurve extends CurveTypeData {\n  constructor() {\n    super(CurveTypes.BSPLINE);\n    \n    this.fastmode = false;\n    this.points = [];\n    this.length = 0;\n    \n    this._ps = [];\n    this.hermite = [];\n    this.fastmode = false;\n    \n    this.deg = 6;\n    this.recalc = 1;\n    this.basis_tables = [];\n    this.eidgen = new util.IDGen();\n    \n    this.add(0, 0);\n    this.add(1, 1);\n    \n    this.on_mousedown = this.on_mousedown.bind(this);\n    this.on_mousemove = this.on_mousemove.bind(this);\n    this.on_mouseup = this.on_mouseup.bind(this);\n    this.on_keydown = this.on_keydown.bind(this);\n    this.on_touchstart = this.on_touchstart.bind(this);\n    this.on_touchmove = this.on_touchmove.bind(this);\n    this.on_touchend = this.on_touchend.bind(this);\n    this.on_touchcancel = this.on_touchcancel.bind(this);\n  }\n  \n  remove(p) {\n    let ret = this.points.remove(p);\n    this.length = this.points.length;\n    \n    return ret;\n  }\n  \n  add(x, y) {\n    var p = new CurvePoint();\n    this.recalc = 1;\n    \n    p.eid = this.eidgen.next();\n    \n    p[0] = x;\n    p[1] = y;\n    \n    p.sco.load(p);\n    p.rco.load(p);\n    \n    this.points.push(p);\n    this.update();\n    \n    this.length = this.points.length;\n    \n    return p;\n  }\n  \n  update() {\n    this.recalc = 1;\n    \n    for (var i=0; i<this.points.length; i++) {\n      this.points[i].rco.load(this.points[i]);\n    }\n    \n    this.points.sort(function(a, b) {\n      return a[0] - b[0];\n    });\n    \n    this._ps = [];\n    if (this.points.length < 2) return;\n    var a = this.points[0][0], b = this.points[this.points.length-1][0];\n    \n    for (var i=0; i<this.points.length-1; i++) {\n      this._ps.push(this.points[i]);\n    }\n    \n    if (this.points.length < 3) return;\n\n    var l1 = this.points[this.points.length-1];\n    var l2 = this.points[this.points.length-2];\n    \n    var p = l1.copy();\n    p.rco[0] = l1.rco[0] - 0.00004;\n    p.rco[1] = l2.rco[1] + (l1.rco[1] - l2.rco[1])*1.0/3.0;\n    //this._ps.push(p);\n    \n    var p = l1.copy();\n    p.rco[0] = l1.rco[0] - 0.00003;\n    p.rco[1] = l2.rco[1] + (l1.rco[1] - l2.rco[1])*1.0/3.0;\n    //this._ps.push(p);\n    \n    var p = l1.copy();\n    p.rco[0] = l1.rco[0] - 0.00001;\n    p.rco[1] = l2.rco[1] + (l1.rco[1] - l2.rco[1])*1.0/3.0;\n    this._ps.push(p);\n    \n    var p = l1.copy();\n    p.rco[0] = l1.rco[0] - 0.00001;\n    p.rco[1] = l2.rco[1] + (l1.rco[1] - l2.rco[1])*2.0/3.0;\n    this._ps.push(p);\n    \n    this._ps.push(l1);\n    \n    for (var i=0; i<this._ps.length; i++) {\n      this._ps[i].rco.load(this._ps[i]);\n    }\n    \n    for (var i=0; i<this.points.length; i++) {\n      var p = this.points[i];\n      var x = p[0], y = p[1];//this.evaluate(x);\n      \n      p.sco[0] = x;\n      p.sco[1] = y;\n    }\n  }\n\n  toJSON() {\n    let ret = super.toJSON();\n    \n    var ps = [];\n    for (var i=0; i<this.points.length; i++) {\n      ps.push(this.points[i].toJSON());\n    }\n    \n    ret = Object.assign(ret, {\n      points : ps,\n      deg    : this.deg,\n      eidgen : this.eidgen.toJSON()\n    });\n    \n    return ret;\n  }\n  \n  loadJSON(obj) {\n    super.loadJSON(obj);\n    \n    this.length = 0;\n    this.points = [];\n    this._ps = [];\n\n    this.hightlight = undefined;\n    this.eidgen = util.IDGen.fromJSON(obj.eidgen);\n    this.recalc = 1;\n    this.mpos = [0, 0];\n\n    if (obj.deg != undefined) \n      this.deg = obj.deg;\n    \n    for (var i=0; i<obj.points.length; i++) {\n      this.points.push(CurvePoint.fromJSON(obj.points[i]));\n    }\n    \n    this.redraw();\n    return this;\n  }\n  \n  basis(t, i) {\n    if (this.recalc) {\n      this.regen_basis();\n    }\n    \n    i = Math.min(Math.max(i, 0), this._ps.length-1);\n    t = Math.min(Math.max(t, 0.0), 1.0)*0.999999999;\n    \n    var table = this.basis_tables[i];\n   \n    var s = t*(table.length/4)*0.99999;\n    \n    var j = ~~s;\n    s -= j;\n     \n    j *= 4;\n    return table[j] + (table[j+3] - table[j])*s;\n    \n    return bez4(table[j], table[j+1], table[j+2], table[j+3], s);\n  }\n  \n  reset() {\n    this.length = 0;\n    this.points = [];\n    this._ps = [];\n    \n    this.add(0, 0);\n    this.add(0.5, 0.5);\n    this.add(1, 1);\n\n    this.update();\n\n    return this;\n  }\n  \n  regen_hermite(steps) {\n    console.log(\"building spline approx\");\n    \n    steps = steps == undefined ? 240 : steps;\n    \n    this.hermite = new Array(steps);\n    var table =this.hermite;\n    \n    var eps = 0.00001;\n    var dt = (1.0-eps*8)/(steps-1);\n    var t=eps*4;\n    var lastdv1, lastf3;\n    \n    for (var j=0; j<steps; j++, t += dt) {\n      var f1 = this._evaluate(t-eps*2);\n      var f2 = this._evaluate(t-eps);\n      var f3 = this._evaluate(t);\n      var f4 = this._evaluate(t+eps);\n      var f5 = this._evaluate(t+eps*2);\n      \n      var dv1 = (f4-f2) / (eps*2);\n      dv1 /= steps;\n      \n      if (j > 0) {\n        var j2 = j-1;\n        \n        table[j2*4]   = lastf3;\n        table[j2*4+1] = lastf3 + lastdv1/3.0;\n        table[j2*4+2] = f3 - dv1/3.0;\n        table[j2*4+3] = f3;\n      }\n      \n      lastdv1 = dv1;\n      lastf3 = f3;\n    }\n  }\n  \n  regen_basis() {\n    console.log(\"building basis functions\");\n    this.recalc = 0;\n    \n    var steps = this.fastmode ? 64 : 128;\n    \n    this.basis_tables = new Array(this._ps.length);\n    \n    for (var i=0; i<this._ps.length; i++) {\n      var table = this.basis_tables[i] = new Array((steps-1)*4);\n      \n      var eps = 0.00001;\n      var dt = (1.0-eps*8)/(steps-1);\n      var t=eps*4;\n      var lastdv1, lastf3;\n      \n      for (var j=0; j<steps; j++, t += dt) {\n        var f1 = this._basis(t-eps*2, i);\n        var f2 = this._basis(t-eps, i);\n        var f3 = this._basis(t, i);\n        var f4 = this._basis(t+eps, i);\n        var f5 = this._basis(t+eps*2, i);\n        \n        var dv1 = (f4-f2) / (eps*2);\n        dv1 /= steps;\n        \n        if (j > 0) {\n          var j2 = j-1;\n          \n          table[j2*4]   = lastf3;\n          table[j2*4+1] = lastf3 + lastdv1/3.0;\n          table[j2*4+2] = f3 - dv1/3.0;\n          table[j2*4+3] = f3;\n        }\n        \n        lastdv1 = dv1;\n        lastf3 = f3;\n      }\n    }\n    \n    this.regen_hermite();\n  }\n  \n  _basis(t, i) {\n    var len = this._ps.length;\n    var ps = this._ps;\n    \n    function safe_inv(n) {\n      return n == 0 ? 0 : 1.0 / n;\n    }\n    \n    function bas(s, i, n) {\n      var kp = Math.min(Math.max(i-1, 0), len-1);\n      var kn = Math.min(Math.max(i+1, 0), len-1);\n      var knn = Math.min(Math.max(i+n, 0), len-1);\n      var knn1 = Math.min(Math.max(i+n+1, 0), len-1);\n      var ki = Math.min(Math.max(i, 0), len-1);\n      \n      if (n == 0) {\n         return s >= ps[ki].rco[0] && s < ps[kn].rco[0] ? 1 : 0;\n      } else {\n        \n        var a = (s-ps[ki].rco[0]) * safe_inv(ps[knn].rco[0]-ps[ki].rco[0]+0.0001);\n        var b = (ps[knn1].rco[0] - s) * safe_inv(ps[knn1].rco[0] - ps[kn].rco[0] + 0.0001);\n        \n        var ret = a*bas(s, i, n-1) + b*bas(s, i+1, n-1);\n        \n        /*\n        if (isNaN(ret)) {\n          console.log(a, b, s, i, n, len);\n          throw new Error();\n        }\n        //*/\n        \n        //if (Math.random() > 0.99) {\n          //console.log(ret, a, b, n, i);\n        //}\n        return ret;\n      }\n    }\n    \n    var p = this._ps[i].rco, nk, pk;\n    var deg = this.deg;\n    \n    var b = bas(t, i-deg, deg);\n    \n    return b;\n  }\n  \n  evaluate(t) {\n    var a = this.points[0].rco, b = this.points[this.points.length-1].rco;\n    \n    if (t < a[0]) return a[1];\n    if (t > b[0]) return b[1];\n\n    if (this.points.length == 2) {\n      t = (t - a[0]) / (b[0] - a[0]);\n      return a[1] + (b[1] - a[1])*t;\n    }\n    \n    if (this.recalc) {\n      this.regen_basis();\n    }\n    \n    t *= 0.999999;\n    \n    var table = this.hermite;\n    var s = t*(table.length/4);\n\n    var i = Math.floor(s);\n    s -= i;\n\n    i *= 4;\n    \n    return table[i] + (table[i+3] - table[i])*s; \n  }\n\n  _evaluate(t) {\n    var start_t = t;\n    \n    if (this.points.length > 1) {\n      var a = this.points[0], b = this.points[this.points.length-1];\n      \n      if (t < a[0]) return a[1];\n      if (t >= b[0]) return b[1];\n    }\n    \n    for (var i=0; i<35; i++) {\n      var df = 0.0001;\n      var ret1 = this._evaluate2(t < 0.5 ? t : t-df);\n      var ret2 = this._evaluate2(t < 0.5 ? t+df : t);\n      \n      var f1 = Math.abs(ret1[0]-start_t);\n      var f2 = Math.abs(ret2[0]-start_t);\n      var g = (f2-f1) / df;\n      \n      if (f1 == f2) break;\n      \n      //if (f1 < 0.0005) break;\n      \n      if (f1 == 0.0 || g == 0.0)\n        return this._evaluate2(t)[1];\n      \n      var fac = -(f1/g)*0.5;\n      if (fac == 0.0) {\n        fac = 0.01;\n      } else if (Math.abs(fac) > 0.1) {\n        fac = 0.1*Math.sign(fac);\n      }\n      \n      t += fac;\n      var eps = 0.00001;\n      t = Math.min(Math.max(t, eps), 1.0-eps);\n    }\n    \n    return this._evaluate2(t)[1];\n  }\n  \n  _evaluate2(t) {\n    var ret = eval2_rets.next();\n    \n    t *= 0.9999999;\n    \n    var totbasis = 0;\n    var sumx = 0;\n    var sumy = 0;\n    \n    for (var i=0; i<this._ps.length; i++) {\n      var p = this._ps[i].rco;\n      var b = this.basis(t, i);\n      \n      sumx += b*p[0];\n      sumy += b*p[1];\n      \n      totbasis += b;\n    }\n    \n    if (totbasis != 0.0) {\n      sumx /= totbasis;\n      sumy /= totbasis;\n    }\n    \n    ret[0] = sumx;\n    ret[1] = sumy;\n    \n    return ret;\n  }\n\n  get hasGUI() {\n    return this.uidata !== undefined;\n  }\n\n  on_touchstart(e) {\n    this.mpos[0] = e.touches[0].pageX;\n    this.mpos[1] = e.touches[0].pageY;\n\n    this.on_mousedown({\n      x          : e.touches[0].pageX,\n      y          : e.touches[0].pageY,\n      button     : 0,\n      shiftKey   : e.shiftKey,\n      altKey     : e.altKey,\n      ctrlKey    : e.ctrlKey,\n      isTouch    : true,\n      commandKey : e.commandKey\n    });\n  }\n  \n  on_touchmove(e) {\n    this.mpos[0] = e.touches[0].pageX;\n    this.mpos[1] = e.touches[0].pageY;\n\n    this.on_mousemove({\n      x          : e.touches[0].pageX,\n      y          : e.touches[0].pageY,\n      button     : 0,\n      shiftKey   : e.shiftKey,\n      altKey     : e.altKey,\n      ctrlKey    : e.ctrlKey,\n      commandKey : e.commandKey,\n      preventDefault : () => e.preventDefault(),\n      stopPropagation : () => e.stopPropagation(),\n      isTouch : true,\n    });\n  }\n\n  on_touchend(e) {\n    this.on_mouseup({\n      x          : this.mpos[0],\n      y          : this.mpos[1],\n      button     : 0,\n      shiftKey   : e.shiftKey,\n      altKey     : e.altKey,\n      ctrlKey    : e.ctrlKey,\n      isTouch : true,\n      commandKey : e.commandKey\n    });\n  }\n  \n  on_touchcancel(e) {\n    this.on_touchend(e);\n  }\n  \n  makeGUI(dom, gui, canvas, g, draw_transform) {\n    this.uidata = {\n      start_mpos  : new Vector2(),\n      transpoints : [],\n      \n      dom         : dom,\n      gui         : gui,\n      canvas      : canvas,\n      g           : g,\n      transforming: false,\n      draw_trans  : draw_transform\n    };\n    \n    canvas.addEventListener(\"touchstart\", this.on_touchstart);\n    canvas.addEventListener(\"touchmove\", this.on_touchmove);\n    canvas.addEventListener(\"touchend\", this.on_touchend);\n    canvas.addEventListener(\"touchcancel\", this.on_touchcancel);\n    \n    canvas.addEventListener(\"mousedown\", this.on_mousedown);\n    canvas.addEventListener(\"mousemove\", this.on_mousemove);\n    canvas.addEventListener(\"mouseup\", this.on_mouseup);\n    canvas.addEventListener(\"keydown\", this.on_keydown);\n    \n    var button = document.createElement(\"button\")\n    \n    button.innerHTML = \"Delete Point\";\n    \n    dom.appendChild(button);\n    this.button = button;\n    \n    button.addEventListener(\"click\", (e) => {\n      console.log(\"delete point\");\n      \n      for (var i=0; i<this.points.length; i++) {\n        var p = this.points[i];\n        \n        if (p.flag & CurveFlags.SELECT) {\n          this.points.remove(p);\n          i--;\n        }\n      }\n      \n      this.update();\n      this.redraw();\n      this.doSave();\n    });\n    \n    this.uidata.button = button;\n    \n    return this;\n  }\n\n  killGUI(dom, gui, canvas, g, draw_transform) {\n    if (this.uidata !== undefined) {\n      let ud = this.uidata;\n      this.uidata = undefined;\n\n      ud.button.remove();\n\n      console.log(\"removing event handlers for bspline curve\");\n      \n      canvas.removeEventListener(\"touchstart\", this.on_touchstart);\n      canvas.removeEventListener(\"touchmove\", this.on_touchmove);\n      canvas.removeEventListener(\"touchend\", this.on_touchend);\n      canvas.removeEventListener(\"touchcancel\", this.on_touchcancel);\n\n      canvas.removeEventListener(\"mousedown\", this.on_mousedown);\n      canvas.removeEventListener(\"mousemove\", this.on_mousemove);\n      canvas.removeEventListener(\"mouseup\", this.on_mouseup);\n      canvas.removeEventListener(\"keydown\", this.on_keydown);\n    }\n\n    return this;\n  }\n  \n  start_transform() {\n    this.uidata.transpoints = [];\n\n    for (let p of this.points) {\n      if (p.flag & CurveFlags.SELECT) {\n        this.uidata.transpoints.push(p);\n        p.startco.load(p);\n      }\n    }\n  }\n\n  on_mousedown(e) {\n    console.log(\"bspline mdown\");\n    \n    this.uidata.start_mpos.load(this.transform_mpos(e.x, e.y));\n    this.fastmode = true;\n    \n    var mpos = this.transform_mpos(e.x, e.y);\n    var x=mpos[0], y = mpos[1];\n    this.do_highlight(x, y);\n    \n    if (this.points.highlight != undefined) {\n      if (!e.shiftKey) {\n        for (var i=0; i<this.points.length; i++) {\n          this.points[i].flag &= ~CurveFlags.SELECT;\n        }\n\n        this.points.highlight.flag |= CurveFlags.SELECT;\n      } else {\n        this.points.highlight.flag ^= CurveFlags.SELECT;\n      }\n\n      \n      this.uidata.transforming = true;\n      \n      this.start_transform();\n      \n      this.redraw();\n      return;\n    } else if (!e.isTouch) {\n      var p = this.add(this.uidata.start_mpos[0], this.uidata.start_mpos[1]);\n      this.points.highlight = p;\n\n      this.update();\n      this.redraw();\n      \n      this.points.highlight.flag |= CurveFlags.SELECT;\n      \n      this.uidata.transforming = true;\n      this.uidata.transpoints = [this.points.highlight];\n      this.uidata.transpoints[0].startco.load(this.uidata.transpoints[0]);\n    }\n  }\n  \n  do_highlight(x, y) {\n    var trans = this.uidata.draw_trans;\n    var mindis = 1e17, minp=undefined;\n    var limit = 19/trans[0], limitsqr = limit*limit;\n    \n    for (var i=0; i<this.points.length; i++) {\n      var p = this.points[i];\n      var dx = x-p.sco[0], dy = y-p.sco[1], dis = dx*dx + dy*dy;\n      \n      if (dis < mindis && dis < limitsqr) {\n        mindis = dis;\n        minp = p;\n      }\n    }\n    \n    if (this.points.highlight != minp) {\n      this.points.highlight = minp;\n      this.redraw()\n    }\n    //console.log(x, y, minp);\n  }\n  \n  do_transform(x, y) {\n    var off = new Vector2([x, y]).sub(this.uidata.start_mpos);\n    this.points.recalc = 1;\n    \n    for (var i=0; i<this.uidata.transpoints.length; i++) {\n      var p = this.uidata.transpoints[i];\n      p.load(p.startco).add(off);\n      \n      p[0] = Math.min(Math.max(p[0], 0), 1);\n      p[1] = Math.min(Math.max(p[1], 0), 1);\n    }\n    \n    this.update();\n    this.redraw();\n  }\n  \n  transform_mpos(x, y){ \n    var r = this.uidata.canvas.getClientRects()[0];\n    \n    x -= parseInt(r.left);\n    y -= parseInt(r.top);\n    \n    var trans = this.uidata.draw_trans;\n    \n    x = x/trans[0] - trans[1][0];\n    y = -y/trans[0] - trans[1][1];\n    \n    return [x, y];\n  }\n  \n  on_mousemove(e) {\n    //console.log(\"bspline mmove\");\n    \n    if (e.isTouch && this.uidata.transforming) {\n      e.preventDefault();\n    }\n    \n    var mpos = this.transform_mpos(e.x, e.y);\n    var x=mpos[0], y = mpos[1];\n    \n    if (this.uidata.transforming) {\n      this.do_transform(x, y);\n      this.doSave();\n    } else {\n      this.do_highlight(x, y);\n    }\n  }\n  \n  on_mouseup(e) {\n    console.log(\"bspline mup\");\n\n    this.uidata.transforming = false;\n    this.fastmode = false;\n    this.update();\n    \n    window.redraw_all();\n  }\n  \n  on_keydown(e) {\n    console.log(e.keyCode);\n    \n    switch (e.keyCode) {\n      case 88: //xkeey\n      case 46: //delete\n        console.log(this.points.highlight);\n        if (this.points.highlight != undefined) {\n          this.points.remove(this.points.highlight);\n          this.recalc = 1;\n          \n          this.points.highlight = undefined;\n          this.update();\n          \n          if (this._save_hook !== undefined) {\n            this._save_hook();\n          }\n          \n          redraw_all();\n        }\n        break;\n    }\n  }\n  \n  draw(canvas, g, draw_trans) {\n    g.save();\n\n    this.uidata.canvas = canvas;\n    this.uidata.g = g;\n    this.uidata.draw_trans = draw_trans;\n    \n    let sz = draw_trans[0], pan = draw_trans[1];\n    g.lineWidth *= 3.0;\n    \n    for (var ssi=0; ssi<2; ssi++) {\n      break; //uncomment to draw basis functions\n      for (var si=0; si<this.points.length; si++) {\n        g.beginPath();\n        \n        var f = 0;\n        for (var i=0; i<steps; i++, f += df) {\n          var totbasis = 0;\n          \n          for (var j=0; j<this.points.length; j++) {\n            totbasis += this.basis(f, j);\n          }\n          \n          var val = this.basis(f, si);\n          \n          if (ssi)\n            val /= (totbasis == 0 ? 1 : totbasis);\n          \n          (i==0 ? g.moveTo : g.lineTo).call(g, f, ssi ? val : val*0.5, w, w);\n        }\n        \n        var color, alpha = this.points[si] === this.points.highlight ? 1.0 : 0.7;\n        \n        if (ssi) {\n          color = \"rgba(105, 25, 5,\"+alpha+\")\";\n        } else {\n          color = \"rgba(25, 145, 45,\"+alpha+\")\";\n        }\n        g.strokeStyle = color;\n        g.stroke();\n      }\n    }\n   \n    g.lineWidth /= 3.0;\n    \n    let w = 0.03;\n    \n    for (let p of this.points) {  \n      g.beginPath();\n      \n      if (p === this.points.highlight) {\n        g.fillStyle = \"green\";\n      } else if (p.flag & CurveFlags.SELECT) {\n        g.fillStyle = \"red\";\n      } else {\n        g.fillStyle = \"orange\";\n      }\n      \n      g.rect(p.sco[0]-w/2, p.sco[1]-w/2, w, w);\n      \n      g.fill();\n    }\n    \n    g.restore();\n  }\n}\n\nclass CustomCurve extends CurveTypeData {\n  constructor(type) {\n    super(CurveTypes.CUSTOM);\n    \n    this.equation = \"x\";\n  }\n  \n  toJSON() {\n    let ret = super.toJSON();\n    \n    return Object.assign(ret, {\n      equation : this.equation\n    });\n  }\n\n  loadJSON(obj) {\n    super.loadJSON(obj);\n    \n    if (obj.equation !== undefined) {\n      this.equation = obj.equation;\n    }\n    \n    return this;\n  }\n  \n  get hasGUI() {\n    return this.uidata !== undefined;\n  }\n  \n  makeGUI(dom, gui, canvas, g, draw_transform) {\n    this.uidata = {\n      dom        : dom,\n      gui        : gui,\n      canvas     : canvas,\n      g          : g,\n      draw_trans : draw_transform,\n    };\n    \n    let text = document.createElement(\"input\");\n    text.type = \"text\";\n    text.value = this.equation;\n    \n    this.uidata.textbox = text;\n    \n    text.addEventListener(\"change\", (e) => {\n      this.equation = text.value;\n      this.update();\n      this.redraw();\n      this.doSave();\n    });\n    \n    dom.appendChild(text);\n  }\n\n  killGUI(dom, gui, canvas, g, draw_transform) {\n    if (this.uidata !== undefined) {\n      this.uidata.textbox.remove();\n    }\n    \n    this.uidata = undefined;\n  }\n  \n  evaluate(s) {\n    let sin = Math.sin, cos = Math.cos, pi = Math.PI, PI = Math.PI,\n        e = Math.E, E = Math.E, tan = Math.tan, abs = Math.abs,\n        floor = Math.floor, ceil = Math.ceil, acos = Math.acos,\n        asin = Math.asin, atan = Math.atan, cosh = Math.cos,\n        sinh = Math.sinh, log = Math.log, pow = Math.pow,\n        exp = Math.exp, sqrt = Math.sqrt, cbrt = Math.cbrt, \n        min = Math.min, max = Math.max;\n        \n    try {\n      let x = s;\n      let ret = eval(this.equation);\n      \n      this._haserror = false;\n      \n      return ret;\n    } catch (error) {\n      this._haserror = true;\n      console.log(\"ERROR!\");\n      return 0.0;\n    }\n  }\n\n  derivative(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.evaluate(s) - this.evaluate(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.evaluate(s+df) - this.evaluate(s)) / df;\n    } else {\n      return (this.evaluate(s+df) - this.evaluate(s-df)) / (2 * df);\n    }\n  }\n\n  derivative2(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.derivative(s) - this.derivative(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.derivative(s+df) - this.derivative(s)) / df;\n    } else {\n      return (this.derivative(s+df) - this.derivative(s-df)) / (2 * df);\n    }\n  }\n\n  inverse(y) {\n    let steps = 9;\n    let ds = 1.0 / steps, s = 0.0;\n    let best = undefined;\n    let ret = undefined;\n    \n    for (let i=0; i<steps; i++, s += ds) {\n      let s1 = s, s2 = s+ds;\n      \n      let mid;\n      \n      for (let j=0; j<11; j++) {\n        let y1 = this.evaluate(s1);\n        let y2 = this.evaluate(s2);\n        mid = (s1+s2)*0.5;\n        \n        if (Math.abs(y1-y) < Math.abs(y2-y)) {\n          s2 = mid;\n        } else {\n          s1 = mid;\n        }\n      }\n      \n      let ymid = this.evaluate(mid);\n      \n      if (best === undefined || Math.abs(y - ymid) < best) {\n        best = Math.abs(y - ymid);\n        ret = mid;\n      }\n    }\n    \n    return ret === undefined ? 0.0 : ret;\n  }\n\n  onActive(parent, draw_transform) {\n  }\n  \n  onInactive(parent, draw_transform) {\n  }\n  \n  reset() {\n\n  }\n\n  destroy() {\n  }\n  \n  update() {\n    \n  }\n  \n  draw(canvas, g, draw_transform) {\n    g.save();\n    if (this._haserror) {\n\n      g.fillStyle = g.strokeStyle = \"rgba(255, 50, 0, 0.25)\";\n      g.beginPath();\n      g.rect(0, 0, 1, 1);\n      g.fill();\n\n      g.beginPath();\n      g.moveTo(0, 0);\n      g.lineTo(1, 1);\n      g.moveTo(0, 1);\n      g.lineTo(1, 0);\n\n      g.lineWidth *= 3;\n      g.stroke();\n\n      g.restore();\n      return;\n    }\n    \n    g.restore();\n  }\n}\n\n\nclass GuassianCurve extends CurveTypeData {\n  constructor(type) {\n    super(CurveTypes.GUASSIAN);\n    \n    this.height = 1.0;\n    this.offset = 1.0;\n    this.deviation = 0.3; //standard deviation\n  }\n  \n  toJSON() {\n    let ret = super.toJSON();\n    \n    return Object.assign(ret, {\n      height    : this.height,\n      offset    : this.offset,\n      deviation : this.deviation\n    });\n  }\n\n  loadJSON(obj) {\n    super.loadJSON(obj);\n    \n    this.height = obj.height !== undefined ? obj.height : 1.0;\n    this.offset = obj.offset;\n    this.deviation = obj.deviation;\n    \n    return this;\n  }\n  \n  get hasGUI() {\n    return this.uidata !== undefined;\n  }\n  \n  makeGUI(dom, gui, canvas, g, draw_transform) {\n    this.uidata = {\n      dom        : dom,\n      gui        : gui,\n      canvas     : canvas,\n      g          : g,\n      draw_trans : draw_transform,\n    };\n    \n    this.uidata.hslider = gui.slider(undefined, \"Height\", this.height, \n      -10, 10, 0.0001, false, false, (val) => {this.height = val, this.update(), this.redraw();});\n    this.uidata.oslider = gui.slider(undefined, \"Offset\", this.offset, \n      -2.5, 2.5, 0.0001, false, false, (val) => {this.offset = val, this.update(), this.redraw();});\n    this.uidata.dslider = gui.slider(undefined, \"STD Deviation\", this.deviation, \n      0.0001, 1.25, 0.0001, false, false, (val) => {this.deviation = val, this.update(), this.redraw();});\n\n  }\n\n  killGUI(dom, gui, canvas, g, draw_transform) {\n    if (this.uidata !== undefined) {\n      this.uidata.hslider.remove();\n      this.uidata.oslider.remove();\n      this.uidata.dslider.remove();\n    }\n    \n    this.uidata = undefined;\n  }\n  \n  evaluate(s) {\n    let r = this.height * Math.exp(-((s-this.offset)*(s-this.offset)) / (2*this.deviation*this.deviation));\n    return r;\n  }\n\n  derivative(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.evaluate(s) - this.evaluate(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.evaluate(s+df) - this.evaluate(s)) / df;\n    } else {\n      return (this.evaluate(s+df) - this.evaluate(s-df)) / (2 * df);\n    }\n  }\n\n  derivative2(s) {\n    let df = 0.0001;\n\n    if (s > 1.0 - df*3) {\n      return (this.derivative(s) - this.derivative(s - df)) / df;\n    } else if (s < df*3) {\n      return (this.derivative(s+df) - this.derivative(s)) / df;\n    } else {\n      return (this.derivative(s+df) - this.derivative(s-df)) / (2 * df);\n    }\n  }\n\n  inverse(y) {\n    let steps = 9;\n    let ds = 1.0 / steps, s = 0.0;\n    let best = undefined;\n    let ret = undefined;\n    \n    for (let i=0; i<steps; i++, s += ds) {\n      let s1 = s, s2 = s+ds;\n      \n      let mid;\n      \n      for (let j=0; j<11; j++) {\n        let y1 = this.evaluate(s1);\n        let y2 = this.evaluate(s2);\n        mid = (s1+s2)*0.5;\n        \n        if (Math.abs(y1-y) < Math.abs(y2-y)) {\n          s2 = mid;\n        } else {\n          s1 = mid;\n        }\n      }\n      \n      let ymid = this.evaluate(mid);\n      \n      if (best === undefined || Math.abs(y - ymid) < best) {\n        best = Math.abs(y - ymid);\n        ret = mid;\n      }\n    }\n    \n    return ret === undefined ? 0.0 : ret;\n  }\n\n  onActive(parent, draw_transform) {\n  }\n  \n  onInactive(parent, draw_transform) {\n  }\n  \n  reset() {\n\n  }\n\n  destroy() {\n  }\n  \n  update() {\n    \n  }\n}\nexport const CurveConstructors = {\n  [CurveTypes.BSPLINE]    : BSplineCurve,\n  [CurveTypes.CUSTOM]     : CustomCurve,\n  [CurveTypes.GUASSIAN]   : GuassianCurve\n};\n\nexport class Curve {\n  constructor(setting_id) {\n    this.generators = [];\n    this.setting_id = setting_id;\n    this.uidata = undefined;\n    this._fastmode = false;\n    \n    if (setting_id === undefined) {\n      throw new Error(\"setting_id cannot be undefined\");\n    }\n    \n    for (let k in CurveConstructors) {\n      let gen = new CurveConstructors[k];\n      \n      this.generators.push(gen);\n    }\n    \n    this.generators.active = this.generators[0];\n  }\n  \n  redraw() {\n    if (this._redraw_hook !== undefined) {\n      this._redraw_hook();\n    }\n  }\n  \n  /*\n  new isolation strategy I'm trying.  Instead of keeping reference\n  to CurveWidget in Curve and CurveDataType, I'll have CurveWidget feed\n  in special callback functions.  \n  \n  this is necessary for redrawing and auto saving.\n  */\n  setRedrawHook(cb) {\n    for (let gen of this.generators) {\n      gen.setRedrawHook(cb);\n    }\n    \n    this._redraw_hook = cb;\n  }\n  \n  doSave() {\n    if (this._save_hook) {\n      this._save_hook();\n    }\n  }\n  \n  setSaveHook(cb) {\n    this._save_hook = cb;\n    \n    for (let gen of this.generators) {\n      gen.setSaveHook(cb);\n    }\n    \n    return this;\n  }\n  \n  get fastmode() {\n    return this._fastmode;\n  }\n  \n  set fastmode(val) {\n    this._fastmode = val;\n    \n    for (let gen of this.generators) {\n      gen.fastmode = val;\n    }\n  }\n  \n  toJSON() {\n    let ret = {\n      is_new_curve     : true,\n      setting_id       : this.setting_id,\n      generators       : [],\n      version          : CURVE_VERSION,\n      active_generator : this.generators.indexOf(this.generators.active)\n    };\n    \n    for (let gen of this.generators) {\n      ret.generators.push(gen.toJSON());\n    }\n    \n    ret;//return Object.assign(super.toJSON(), ret);\n  }\n  \n  getGenerator(type) {\n    for (let gen of this.generators) {\n      if (gen.type === type) {\n        return gen;\n      }\n    }\n    \n    throw new Error(\"Unknown generator \" + type + \".\");\n  }\n  \n  switchGenerator(type) {\n    let gen = this.getGenerator(type);\n    \n    if (gen !== this.generators.active) {\n      let old = this.generators.active;\n\n      this.generators.active = gen;\n      \n      if (this.uidata !== undefined) {\n        let ud = this.uidata;\n        old.killGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n      }\n      \n      old.onInactive(this);\n      gen.onActive(this);\n      \n      if (this.uidata !== undefined) {\n        let ud = this.uidata;\n        gen.makeGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n      }\n    }\n    \n    return gen;\n  }\n  \n  destroy() {\n    if (this.uidata !== undefined) {\n      let ud = this.uidata;\n      \n      this.killGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n      \n      for (let gen of this.generators) {\n        gen.destroy();\n      }\n    }\n    \n    return this;\n  }\n  \n  loadJSON(obj) {\n    if (obj.is_new_curve === undefined) {\n      let hasGUI = this.uidata !== undefined;\n      let olduidata = this.uidata;\n      \n      if (hasGUI) {\n        let ud = olduidata;\n        this.killGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n      }\n\n      let gen = this.switchGenerator(CurveTypes.BSPLINE);\n      \n      this.generators.active = gen;\n      \n      obj.type = CurveTypes.BSPLINE;\n      \n      gen.reset();\n      gen.loadJSON(obj);\n      \n      if (hasGUI) {\n        let ud = olduidata;\n        this.makeGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n      }\n\n      this.update();\n      this.redraw();\n      \n      return this;\n    }\n    \n    let hasGUI = this.uidata !== undefined;\n    let olduidata = this.uidata;\n    \n    if (hasGUI) {\n      let ud = olduidata;\n      this.killGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n    }\n    \n    if (this.setting_id === undefined) {\n      console.warn(\"Warning, setting setting_id in Curve.loadJSON(); you forgot to pass it to the constructor\");\n      this.setting_id = obj.setting_id;\n    }\n    \n    for (let gen of obj.generators) {\n      if (!(gen.type in CurveConstructors)) {\n        throw new Error(\"Bad generator type \" + gen.type);\n        //console.warn(\"Bad generator type\", gen.type, gen);\n        continue;\n      }\n      \n      this.getGenerator(gen.type).loadJSON(gen).update();\n    }\n    \n    this.generators.active = this.generators[obj.active_generator];\n\n    if (hasGUI) {\n      let ud = olduidata;\n      this.makeGUI(ud.dom, ud.gui, ud.canvas, ud.g, ud.draw_trans);\n    }\n    \n    this.update();\n    this.redraw();\n    \n    return this;\n  }\n  \n  evaluate(s) {\n    return this.generators.active.evaluate(s);\n  }\n  \n  derivative(s) {\n    return this.generators.active.derivative(s);\n  }\n  \n  derivative2(s) {\n    return this.generators.active.derivative2(s);\n  }\n  \n  inverse(s) {\n    return this.generators.active.inverse(s);\n  }\n  \n  reset() {\n    this.generators.active.reset();\n  }\n  \n  update() {\n    return this.generators.active.update();\n  }\n  \n  destroy_all_settings() {\n    delete localStorage[this.setting_id];\n    \n    return this;\n  }\n  \n  makeGUI(dom, gui, canvas, g, draw_transform) {\n    this.uidata = {\n      dom        : dom,\n      gui        : gui,\n      canvas     : canvas,\n      g          : g,\n      draw_trans : draw_transform\n    };\n\n    if (this.generators.active.hasGUI) {\n      this.generators.active.killGUI(dom, gui, canvas, g, draw_transform);\n    }\n    \n    let uinames = {};\n    for (let k in CurveTypes) {\n      let v = CurveTypes[k];\n\n      k = k[0].toUpperCase() + k.slice(1, k.length).toLowerCase();\n      k = k.replace(/_/g, \" \");\n\n      uinames[k] = v;\n    }\n\n    //listenum(path, name, enummap, defaultval, callback)\n    this.uidata.listenum = gui.listenum(undefined, \"Type\", uinames, this.generators.active.type, (type) => {\n      this.switchGenerator(type);\n      this.doSave();\n      this.redraw();\n    });\n    \n    this.generators.active.makeGUI(dom, gui, canvas, g, draw_transform);\n    \n    return this;\n  }\n  \n  get hasGUI() {\n    return this.uidata !== undefined;\n  }\n\n  killGUI(dom, gui, canvas, g, draw_transform) {\n    this.uidata.listenum.remove();\n\n    for (let gen of this.generators) {\n      this.generators.active.killGUI(dom, gui, canvas, g, draw_transform);\n    }\n    \n    this.uidata = undefined;\n    \n    return this;\n  }\n  \n  draw(canvas, g, draw_transform) {\n    if (this.uidata === undefined) {\n      return;\n    }\n    \n    this.uidata.canvas = canvas;\n    this.uidata.g = g;\n    this.uidata.draw_trans = draw_transform;\n    \n    var w=canvas.width, h=canvas.height;\n    \n    g.save();\n    \n    let sz = draw_transform[0], pan = draw_transform[1];\n    \n    g.beginPath();\n    g.moveTo(-1, 0);\n    g.lineTo(1, 0);\n    g.strokeStyle = \"red\";\n    g.stroke();\n    \n    g.beginPath();\n    g.moveTo(0, -1);\n    g.lineTo(0, 1);\n    g.strokeStyle = \"green\";\n    g.stroke();\n    \n    //g.rect(0, 0, 1, 1);\n    //g.fillStyle = \"rgb(50, 50, 50)\";\n    //g.fill();\n    \n    var f=0, steps=64;\n    var df = 1/(steps-1);\n    var w = 6.0/sz;\n    \n    let curve = this.generators.active;\n    \n    g.beginPath();\n    for (var i=0; i<steps; i++, f += df) {\n      var val = curve.evaluate(f);\n      \n      (i==0 ? g.moveTo : g.lineTo).call(g, f, val, w, w);\n    }\n    \n    g.strokeStyle = \"grey\";\n    g.stroke();\n    \n    if (this.overlay_curvefunc !== undefined) {\n      g.beginPath();\n      f = 0.0;\n      \n      for (var i=0; i<steps; i++, f += df) {\n        var val = this.overlay_curvefunc(f);\n        \n        (i==0 ? g.moveTo : g.lineTo).call(g, f, val, w, w);\n      }\n      \n      g.strokeStyle = \"green\";\n      g.stroke();\n    }\n    \n    this.generators.active.draw(canvas, g, draw_transform);\n    \n    g.restore();\n    return this;\n  }\n}\n\nexport class CurveWidget {\n  constructor(setting_id) {\n    this.curve = new Curve(setting_id);\n    this.setting_id = setting_id;\n    \n    this._closed = false;\n    this.mpos = [0, 0];\n    \n    this.domparent = undefined;\n    this.canvas = undefined;\n    this.g = undefined;\n    \n    this.overlay_curvefunc = undefined;\n    \n    this.curve.setSaveHook(this.save.bind(this));\n    this.curve.setRedrawHook(this.redraw.bind(this));\n  }\n  \n  redraw() {\n    this.draw();\n  }\n  \n  save() {\n    //console.warn(\"Temporarily disabled curve saving!\");\n    localStorage[this.setting_id] = JSON.stringify(this.curve);\n    //window[this.setting_id.toUpperCase()] = this.curve;\n  }\n      \n  //default_preset is optional, undefined\n  load(default_preset) {\n    if (this.setting_id in localStorage) {\n      this.curve.loadJSON(JSON.parse(localStorage[this.setting_id]));\n    } else if (default_preset !== undefined) {\n      this.curve.loadJSON(default_preset);\n    }\n    \n    this.curve.update();\n    this.draw();\n  }\n  \n  bind(dom, gui) {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = 200;\n    this.canvas.height = 200;\n    this.g = this.canvas.getContext(\"2d\");\n    \n    this.gui = gui;\n    this.domparent = dom;\n    \n    this.canvas[\"class\"] = \"closed\";\n    this.canvas.style[\"class\"] = \"closed\";\n    \n    dom.appendChild(this.canvas);\n    \n    this.curve.makeGUI(dom, gui, this.canvas, this.g, this.draw_transform());\n  }\n  \n  draw_transform(g) {\n    var sz = Math.min(this.canvas.width, this.canvas.height);\n    sz *= 0.8;\n    \n    var pan = [0.1, -1.1];\n    \n    if (g != undefined) {\n      g.lineWidth /= sz;\n      g.scale(sz, -sz);\n      g.translate(pan[0], pan[1]);\n    }\n    \n    return [sz, pan];\n  }\n  \n  get closed() {\n    return this._closed;\n  }\n  \n  set closed(val) {\n    //this.canvas.style[\"visibility\"] = val ? \"collapse\" : \"visible\"\n    if (val && !this._closed) {\n      this.curve.killGUI(this.domparent, this.gui, this.canvas, this.g, this.draw_transform());\n      this.canvas.remove();\n    } else if (!val && this._closed) {\n      this.domparent.appendChild(this.canvas);\n      this.curve.makeGUI(this.domparent, this.gui, this.canvas, this.g, this.draw_transform());\n      this.redraw();\n    }\n    \n    this._closed = val;\n  }\n  \n  draw() {\n    if (this.canvas === undefined) {\n      return;\n    }\n    \n    var g = this.g;\n    var w=this.canvas.width, h=this.canvas.height;\n    \n    g.clearRect(0, 0, w, h);\n    \n    g.fillStyle = \"rgb(50, 50, 50)\";\n    g.beginPath();\n    g.rect(0, 0, w, h);\n    g.fill();\n    \n    g.save();\n    \n    var trans = this.draw_transform(g);\n    \n    //XXX draw min/max bounds here\n    g.strokeStyle = \"rgb(100,100,100)\";\n    g.beginPath();\n    g.rect(0, 0, 1, 1);\n    g.stroke();\n    \n    this.curve.draw(this.canvas, this.g, trans);\n    \n    g.restore();\n  }\n}\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_curvewidget.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1740,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1741,
    "kind": "variable",
    "name": "bin_cache",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~bin_cache",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1742,
    "kind": "variable",
    "name": "eval2_rets",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~eval2_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1743,
    "kind": "variable",
    "name": "CURVE_VERSION",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CURVE_VERSION",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CURVE_VERSION}",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1744,
    "kind": "function",
    "name": "bez3",
    "memberof": "scripts/ui_curvewidget.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_curvewidget.js~bez3",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      },
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1745,
    "kind": "function",
    "name": "bez4",
    "memberof": "scripts/ui_curvewidget.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_curvewidget.js~bez4",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      },
      {
        "name": "d",
        "types": [
          "*"
        ]
      },
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1746,
    "kind": "function",
    "name": "binomial",
    "memberof": "scripts/ui_curvewidget.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_curvewidget.js~binomial",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{binomial}",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "params": [
      {
        "name": "n",
        "types": [
          "*"
        ]
      },
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1747,
    "kind": "variable",
    "name": "TangentModes",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~TangentModes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{TangentModes}",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "{\"SMOOTH\": number, \"BREAK\": number}"
      ]
    }
  },
  {
    "__docId__": 1748,
    "kind": "variable",
    "name": "CurveTypes",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurveTypes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CurveTypes}",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "type": {
      "types": [
        "{\"BSPLINE\": number, \"CUSTOM\": number, \"GUASSIAN\": number}"
      ]
    }
  },
  {
    "__docId__": 1749,
    "kind": "class",
    "name": "CurveTypeData",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 1750,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true
  },
  {
    "__docId__": 1751,
    "kind": "member",
    "name": "type",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#type",
    "access": "public",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1752,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"type\": *}"
      ]
    }
  },
  {
    "__docId__": 1753,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1755,
    "kind": "method",
    "name": "redraw",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#redraw",
    "access": "public",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1756,
    "kind": "method",
    "name": "setRedrawHook",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#setRedrawHook",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1757,
    "kind": "member",
    "name": "_redraw_hook",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#_redraw_hook",
    "access": "private",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1758,
    "kind": "method",
    "name": "doSave",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#doSave",
    "access": "public",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1759,
    "kind": "method",
    "name": "setSaveHook",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#setSaveHook",
    "access": "public",
    "description": null,
    "lineNumber": 107,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1760,
    "kind": "member",
    "name": "_save_hook",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#_save_hook",
    "access": "private",
    "description": null,
    "lineNumber": 108,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1761,
    "kind": "get",
    "name": "hasGUI",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#hasGUI",
    "access": "public",
    "description": null,
    "lineNumber": 112,
    "undocument": true,
    "type": null
  },
  {
    "__docId__": 1762,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 116,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1763,
    "kind": "method",
    "name": "killGUI",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#killGUI",
    "access": "public",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1764,
    "kind": "method",
    "name": "evaluate",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#evaluate",
    "access": "public",
    "description": null,
    "lineNumber": 123,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1765,
    "kind": "method",
    "name": "derivative",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#derivative",
    "access": "public",
    "description": null,
    "lineNumber": 127,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1766,
    "kind": "method",
    "name": "derivative2",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#derivative2",
    "access": "public",
    "description": null,
    "lineNumber": 139,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1767,
    "kind": "method",
    "name": "inverse",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#inverse",
    "access": "public",
    "description": null,
    "lineNumber": 151,
    "undocument": true,
    "params": [
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1768,
    "kind": "method",
    "name": "onActive",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#onActive",
    "access": "public",
    "description": null,
    "lineNumber": 185,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1769,
    "kind": "method",
    "name": "onInactive",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#onInactive",
    "access": "public",
    "description": null,
    "lineNumber": 188,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1770,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#reset",
    "access": "public",
    "description": null,
    "lineNumber": 191,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1771,
    "kind": "method",
    "name": "destroy",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 195,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1772,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#update",
    "access": "public",
    "description": null,
    "lineNumber": 198,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1773,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ui_curvewidget.js~CurveTypeData",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveTypeData#draw",
    "access": "public",
    "description": null,
    "lineNumber": 202,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1774,
    "kind": "variable",
    "name": "CurveFlags",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurveFlags",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CurveFlags}",
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "type": {
      "types": [
        "{\"SELECT\": number}"
      ]
    }
  },
  {
    "__docId__": 1775,
    "kind": "class",
    "name": "CurvePoint",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurvePoint",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CurvePoint}",
    "description": null,
    "lineNumber": 210,
    "undocument": true,
    "interface": false,
    "extends": [
      "Vector2"
    ]
  },
  {
    "__docId__": 1776,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 211,
    "undocument": true
  },
  {
    "__docId__": 1777,
    "kind": "member",
    "name": "deg",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#deg",
    "access": "public",
    "description": null,
    "lineNumber": 214,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1778,
    "kind": "member",
    "name": "rco",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#rco",
    "access": "public",
    "description": null,
    "lineNumber": 215,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1779,
    "kind": "member",
    "name": "sco",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#sco",
    "access": "public",
    "description": null,
    "lineNumber": 216,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1780,
    "kind": "member",
    "name": "startco",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#startco",
    "access": "public",
    "description": null,
    "lineNumber": 219,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1781,
    "kind": "member",
    "name": "eid",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#eid",
    "access": "public",
    "description": null,
    "lineNumber": 220,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1782,
    "kind": "member",
    "name": "flag",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#flag",
    "access": "public",
    "description": null,
    "lineNumber": 221,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1783,
    "kind": "member",
    "name": "tangent",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#tangent",
    "access": "public",
    "description": null,
    "lineNumber": 223,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1784,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#copy",
    "access": "public",
    "description": null,
    "lineNumber": 226,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1785,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 235,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"0\": *, \"1\": *, \"eid\": *, \"flag\": *, \"deg\": *, \"tangent\": *}"
      ]
    }
  },
  {
    "__docId__": 1786,
    "kind": "method",
    "name": "fromJSON",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurvePoint.fromJSON",
    "access": "public",
    "description": null,
    "lineNumber": 246,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1787,
    "kind": "method",
    "name": "basis",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#basis",
    "access": "public",
    "description": null,
    "lineNumber": 257,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      },
      {
        "name": "kprev",
        "types": [
          "*"
        ]
      },
      {
        "name": "knext",
        "types": [
          "*"
        ]
      },
      {
        "name": "is_end",
        "types": [
          "*"
        ]
      },
      {
        "name": "totp",
        "types": [
          "*"
        ]
      },
      {
        "name": "pi",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1789,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/ui_curvewidget.js~CurvePoint",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurvePoint#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 302,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1790,
    "kind": "class",
    "name": "BSplineCurve",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "interface": false,
    "extends": [
      "CurveTypeData"
    ],
    "ignore": true
  },
  {
    "__docId__": 1791,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 316,
    "undocument": true
  },
  {
    "__docId__": 1792,
    "kind": "member",
    "name": "fastmode",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#fastmode",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1793,
    "kind": "member",
    "name": "points",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#points",
    "access": "public",
    "description": null,
    "lineNumber": 320,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1794,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#length",
    "access": "public",
    "description": null,
    "lineNumber": 321,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1795,
    "kind": "member",
    "name": "_ps",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#_ps",
    "access": "private",
    "description": null,
    "lineNumber": 323,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1796,
    "kind": "member",
    "name": "hermite",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#hermite",
    "access": "public",
    "description": null,
    "lineNumber": 324,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1798,
    "kind": "member",
    "name": "deg",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#deg",
    "access": "public",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1799,
    "kind": "member",
    "name": "recalc",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#recalc",
    "access": "public",
    "description": null,
    "lineNumber": 328,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1800,
    "kind": "member",
    "name": "basis_tables",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#basis_tables",
    "access": "public",
    "description": null,
    "lineNumber": 329,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1801,
    "kind": "member",
    "name": "eidgen",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#eidgen",
    "access": "public",
    "description": null,
    "lineNumber": 330,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1810,
    "kind": "method",
    "name": "remove",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#remove",
    "access": "public",
    "description": null,
    "lineNumber": 345,
    "undocument": true,
    "params": [
      {
        "name": "p",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1812,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#add",
    "access": "public",
    "description": null,
    "lineNumber": 352,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1815,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#update",
    "access": "public",
    "description": null,
    "lineNumber": 372,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1818,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 431,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1819,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 448,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1823,
    "kind": "member",
    "name": "hightlight",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#hightlight",
    "access": "public",
    "description": null,
    "lineNumber": 455,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1826,
    "kind": "member",
    "name": "mpos",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#mpos",
    "access": "public",
    "description": null,
    "lineNumber": 458,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1828,
    "kind": "method",
    "name": "basis",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#basis",
    "access": "public",
    "description": null,
    "lineNumber": 471,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      },
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1829,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#reset",
    "access": "public",
    "description": null,
    "lineNumber": 492,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1833,
    "kind": "method",
    "name": "regen_hermite",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#regen_hermite",
    "access": "public",
    "description": null,
    "lineNumber": 506,
    "undocument": true,
    "params": [
      {
        "name": "steps",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1835,
    "kind": "method",
    "name": "regen_basis",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#regen_basis",
    "access": "public",
    "description": null,
    "lineNumber": 543,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1838,
    "kind": "method",
    "name": "_basis",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#_basis",
    "access": "private",
    "description": null,
    "lineNumber": 586,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      },
      {
        "name": "i",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1839,
    "kind": "method",
    "name": "evaluate",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#evaluate",
    "access": "public",
    "description": null,
    "lineNumber": 632,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1840,
    "kind": "method",
    "name": "_evaluate",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#_evaluate",
    "access": "private",
    "description": null,
    "lineNumber": 660,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1841,
    "kind": "method",
    "name": "_evaluate2",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#_evaluate2",
    "access": "private",
    "description": null,
    "lineNumber": 701,
    "undocument": true,
    "params": [
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1842,
    "kind": "get",
    "name": "hasGUI",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#hasGUI",
    "access": "public",
    "description": null,
    "lineNumber": 731,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1843,
    "kind": "method",
    "name": "on_touchstart",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_touchstart",
    "access": "public",
    "description": null,
    "lineNumber": 735,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1844,
    "kind": "method",
    "name": "on_touchmove",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_touchmove",
    "access": "public",
    "description": null,
    "lineNumber": 751,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1845,
    "kind": "method",
    "name": "on_touchend",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_touchend",
    "access": "public",
    "description": null,
    "lineNumber": 769,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1846,
    "kind": "method",
    "name": "on_touchcancel",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_touchcancel",
    "access": "public",
    "description": null,
    "lineNumber": 782,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1847,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 786,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1848,
    "kind": "member",
    "name": "uidata",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#uidata",
    "access": "public",
    "description": null,
    "lineNumber": 787,
    "undocument": true,
    "type": {
      "types": [
        "{\"start_mpos\": *, \"transpoints\": *, \"dom\": *, \"gui\": *, \"canvas\": *, \"g\": *, \"transforming\": *, \"draw_trans\": *}"
      ]
    }
  },
  {
    "__docId__": 1849,
    "kind": "member",
    "name": "button",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#button",
    "access": "public",
    "description": null,
    "lineNumber": 814,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1850,
    "kind": "method",
    "name": "killGUI",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#killGUI",
    "access": "public",
    "description": null,
    "lineNumber": 838,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1852,
    "kind": "method",
    "name": "start_transform",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#start_transform",
    "access": "public",
    "description": null,
    "lineNumber": 861,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1853,
    "kind": "method",
    "name": "on_mousedown",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_mousedown",
    "access": "public",
    "description": null,
    "lineNumber": 872,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1855,
    "kind": "method",
    "name": "do_highlight",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#do_highlight",
    "access": "public",
    "description": null,
    "lineNumber": 915,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1856,
    "kind": "method",
    "name": "do_transform",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#do_transform",
    "access": "public",
    "description": null,
    "lineNumber": 937,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1857,
    "kind": "method",
    "name": "transform_mpos",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#transform_mpos",
    "access": "public",
    "description": null,
    "lineNumber": 953,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 1858,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 967,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1859,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 985,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1861,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 995,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1863,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ui_curvewidget.js~BSplineCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~BSplineCurve#draw",
    "access": "public",
    "description": null,
    "lineNumber": 1019,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_trans",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1864,
    "kind": "class",
    "name": "CustomCurve",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CustomCurve",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1086,
    "undocument": true,
    "interface": false,
    "extends": [
      "CurveTypeData"
    ],
    "ignore": true
  },
  {
    "__docId__": 1865,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1087,
    "undocument": true
  },
  {
    "__docId__": 1866,
    "kind": "member",
    "name": "equation",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#equation",
    "access": "public",
    "description": null,
    "lineNumber": 1090,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 1867,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1093,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1868,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1101,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1870,
    "kind": "get",
    "name": "hasGUI",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#hasGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1111,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1871,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1115,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1872,
    "kind": "member",
    "name": "uidata",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#uidata",
    "access": "public",
    "description": null,
    "lineNumber": 1116,
    "undocument": true,
    "type": {
      "types": [
        "{\"dom\": *, \"gui\": *, \"canvas\": *, \"g\": *, \"draw_trans\": *}"
      ]
    }
  },
  {
    "__docId__": 1874,
    "kind": "method",
    "name": "killGUI",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#killGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1140,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1876,
    "kind": "method",
    "name": "evaluate",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#evaluate",
    "access": "public",
    "description": null,
    "lineNumber": 1148,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1877,
    "kind": "member",
    "name": "_haserror",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#_haserror",
    "access": "private",
    "description": null,
    "lineNumber": 1161,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1879,
    "kind": "method",
    "name": "derivative",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#derivative",
    "access": "public",
    "description": null,
    "lineNumber": 1171,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1880,
    "kind": "method",
    "name": "derivative2",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#derivative2",
    "access": "public",
    "description": null,
    "lineNumber": 1183,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1881,
    "kind": "method",
    "name": "inverse",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#inverse",
    "access": "public",
    "description": null,
    "lineNumber": 1195,
    "undocument": true,
    "params": [
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1882,
    "kind": "method",
    "name": "onActive",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#onActive",
    "access": "public",
    "description": null,
    "lineNumber": 1229,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1883,
    "kind": "method",
    "name": "onInactive",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#onInactive",
    "access": "public",
    "description": null,
    "lineNumber": 1232,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1884,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#reset",
    "access": "public",
    "description": null,
    "lineNumber": 1235,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1885,
    "kind": "method",
    "name": "destroy",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 1239,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1886,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#update",
    "access": "public",
    "description": null,
    "lineNumber": 1242,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1887,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ui_curvewidget.js~CustomCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CustomCurve#draw",
    "access": "public",
    "description": null,
    "lineNumber": 1246,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1888,
    "kind": "class",
    "name": "GuassianCurve",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1273,
    "undocument": true,
    "interface": false,
    "extends": [
      "CurveTypeData"
    ],
    "ignore": true
  },
  {
    "__docId__": 1889,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1274,
    "undocument": true
  },
  {
    "__docId__": 1890,
    "kind": "member",
    "name": "height",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#height",
    "access": "public",
    "description": null,
    "lineNumber": 1277,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1891,
    "kind": "member",
    "name": "offset",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#offset",
    "access": "public",
    "description": null,
    "lineNumber": 1278,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1892,
    "kind": "member",
    "name": "deviation",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#deviation",
    "access": "public",
    "description": null,
    "lineNumber": 1279,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1893,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1282,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1894,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1292,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1898,
    "kind": "get",
    "name": "hasGUI",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#hasGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1302,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1899,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1306,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1900,
    "kind": "member",
    "name": "uidata",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#uidata",
    "access": "public",
    "description": null,
    "lineNumber": 1307,
    "undocument": true,
    "type": {
      "types": [
        "{\"dom\": *, \"gui\": *, \"canvas\": *, \"g\": *, \"draw_trans\": *}"
      ]
    }
  },
  {
    "__docId__": 1901,
    "kind": "method",
    "name": "killGUI",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#killGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1324,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1903,
    "kind": "method",
    "name": "evaluate",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#evaluate",
    "access": "public",
    "description": null,
    "lineNumber": 1334,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1904,
    "kind": "method",
    "name": "derivative",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#derivative",
    "access": "public",
    "description": null,
    "lineNumber": 1339,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1905,
    "kind": "method",
    "name": "derivative2",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#derivative2",
    "access": "public",
    "description": null,
    "lineNumber": 1351,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1906,
    "kind": "method",
    "name": "inverse",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#inverse",
    "access": "public",
    "description": null,
    "lineNumber": 1363,
    "undocument": true,
    "params": [
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1907,
    "kind": "method",
    "name": "onActive",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#onActive",
    "access": "public",
    "description": null,
    "lineNumber": 1397,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1908,
    "kind": "method",
    "name": "onInactive",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#onInactive",
    "access": "public",
    "description": null,
    "lineNumber": 1400,
    "undocument": true,
    "params": [
      {
        "name": "parent",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1909,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#reset",
    "access": "public",
    "description": null,
    "lineNumber": 1403,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1910,
    "kind": "method",
    "name": "destroy",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 1407,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1911,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_curvewidget.js~GuassianCurve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~GuassianCurve#update",
    "access": "public",
    "description": null,
    "lineNumber": 1410,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1912,
    "kind": "variable",
    "name": "CurveConstructors",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurveConstructors",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CurveConstructors}",
    "description": null,
    "lineNumber": 1414,
    "undocument": true,
    "type": {
      "types": [
        "{\"undefined\": *}"
      ]
    }
  },
  {
    "__docId__": 1913,
    "kind": "class",
    "name": "Curve",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~Curve",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{Curve}",
    "description": null,
    "lineNumber": 1420,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1914,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1421,
    "undocument": true
  },
  {
    "__docId__": 1915,
    "kind": "member",
    "name": "generators",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#generators",
    "access": "public",
    "description": null,
    "lineNumber": 1422,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1916,
    "kind": "member",
    "name": "setting_id",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#setting_id",
    "access": "public",
    "description": null,
    "lineNumber": 1423,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1917,
    "kind": "member",
    "name": "uidata",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#uidata",
    "access": "public",
    "description": null,
    "lineNumber": 1424,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1918,
    "kind": "member",
    "name": "_fastmode",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#_fastmode",
    "access": "private",
    "description": null,
    "lineNumber": 1425,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1919,
    "kind": "method",
    "name": "redraw",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#redraw",
    "access": "public",
    "description": null,
    "lineNumber": 1440,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1920,
    "kind": "method",
    "name": "setRedrawHook",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#setRedrawHook",
    "access": "public",
    "description": null,
    "lineNumber": 1453,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1921,
    "kind": "member",
    "name": "_redraw_hook",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#_redraw_hook",
    "access": "private",
    "description": null,
    "lineNumber": 1458,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1922,
    "kind": "method",
    "name": "doSave",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#doSave",
    "access": "public",
    "description": null,
    "lineNumber": 1461,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1923,
    "kind": "method",
    "name": "setSaveHook",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#setSaveHook",
    "access": "public",
    "description": null,
    "lineNumber": 1467,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1924,
    "kind": "member",
    "name": "_save_hook",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#_save_hook",
    "access": "private",
    "description": null,
    "lineNumber": 1468,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1925,
    "kind": "get",
    "name": "fastmode",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#fastmode",
    "access": "public",
    "description": null,
    "lineNumber": 1477,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1926,
    "kind": "set",
    "name": "fastmode",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#fastmode",
    "access": "public",
    "description": null,
    "lineNumber": 1481,
    "undocument": true
  },
  {
    "__docId__": 1928,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1489,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1929,
    "kind": "method",
    "name": "getGenerator",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#getGenerator",
    "access": "public",
    "description": null,
    "lineNumber": 1505,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1930,
    "kind": "method",
    "name": "switchGenerator",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#switchGenerator",
    "access": "public",
    "description": null,
    "lineNumber": 1515,
    "undocument": true,
    "params": [
      {
        "name": "type",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1931,
    "kind": "method",
    "name": "destroy",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 1540,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1932,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1554,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1934,
    "kind": "method",
    "name": "evaluate",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#evaluate",
    "access": "public",
    "description": null,
    "lineNumber": 1620,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1935,
    "kind": "method",
    "name": "derivative",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#derivative",
    "access": "public",
    "description": null,
    "lineNumber": 1624,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1936,
    "kind": "method",
    "name": "derivative2",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#derivative2",
    "access": "public",
    "description": null,
    "lineNumber": 1628,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1937,
    "kind": "method",
    "name": "inverse",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#inverse",
    "access": "public",
    "description": null,
    "lineNumber": 1632,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1938,
    "kind": "method",
    "name": "reset",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#reset",
    "access": "public",
    "description": null,
    "lineNumber": 1636,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1939,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#update",
    "access": "public",
    "description": null,
    "lineNumber": 1640,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1940,
    "kind": "method",
    "name": "destroy_all_settings",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#destroy_all_settings",
    "access": "public",
    "description": null,
    "lineNumber": 1644,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1941,
    "kind": "method",
    "name": "makeGUI",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#makeGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1650,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1943,
    "kind": "get",
    "name": "hasGUI",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#hasGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1685,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1944,
    "kind": "method",
    "name": "killGUI",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#killGUI",
    "access": "public",
    "description": null,
    "lineNumber": 1689,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      },
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1946,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ui_curvewidget.js~Curve",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~Curve#draw",
    "access": "public",
    "description": null,
    "lineNumber": 1701,
    "undocument": true,
    "params": [
      {
        "name": "canvas",
        "types": [
          "*"
        ]
      },
      {
        "name": "g",
        "types": [
          "*"
        ]
      },
      {
        "name": "draw_transform",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1947,
    "kind": "class",
    "name": "CurveWidget",
    "memberof": "scripts/ui_curvewidget.js",
    "static": true,
    "longname": "scripts/ui_curvewidget.js~CurveWidget",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_curvewidget.js",
    "importStyle": "{CurveWidget}",
    "description": null,
    "lineNumber": 1769,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 1948,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1770,
    "undocument": true
  },
  {
    "__docId__": 1949,
    "kind": "member",
    "name": "curve",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#curve",
    "access": "public",
    "description": null,
    "lineNumber": 1771,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1950,
    "kind": "member",
    "name": "setting_id",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#setting_id",
    "access": "public",
    "description": null,
    "lineNumber": 1772,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1951,
    "kind": "member",
    "name": "_closed",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#_closed",
    "access": "private",
    "description": null,
    "lineNumber": 1774,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1952,
    "kind": "member",
    "name": "mpos",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#mpos",
    "access": "public",
    "description": null,
    "lineNumber": 1775,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 1953,
    "kind": "member",
    "name": "domparent",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#domparent",
    "access": "public",
    "description": null,
    "lineNumber": 1777,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1954,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 1778,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1955,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#g",
    "access": "public",
    "description": null,
    "lineNumber": 1779,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1956,
    "kind": "member",
    "name": "overlay_curvefunc",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#overlay_curvefunc",
    "access": "public",
    "description": null,
    "lineNumber": 1781,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1957,
    "kind": "method",
    "name": "redraw",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#redraw",
    "access": "public",
    "description": null,
    "lineNumber": 1787,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1958,
    "kind": "method",
    "name": "save",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#save",
    "access": "public",
    "description": null,
    "lineNumber": 1791,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1959,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#load",
    "access": "public",
    "description": null,
    "lineNumber": 1798,
    "undocument": true,
    "params": [
      {
        "name": "default_preset",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1960,
    "kind": "method",
    "name": "bind",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#bind",
    "access": "public",
    "description": null,
    "lineNumber": 1809,
    "undocument": true,
    "params": [
      {
        "name": "dom",
        "types": [
          "*"
        ]
      },
      {
        "name": "gui",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1963,
    "kind": "member",
    "name": "gui",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#gui",
    "access": "public",
    "description": null,
    "lineNumber": 1815,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1965,
    "kind": "method",
    "name": "draw_transform",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#draw_transform",
    "access": "public",
    "description": null,
    "lineNumber": 1826,
    "undocument": true,
    "params": [
      {
        "name": "g",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 1966,
    "kind": "get",
    "name": "closed",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#closed",
    "access": "public",
    "description": null,
    "lineNumber": 1841,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1967,
    "kind": "set",
    "name": "closed",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#closed",
    "access": "public",
    "description": null,
    "lineNumber": 1845,
    "undocument": true
  },
  {
    "__docId__": 1969,
    "kind": "method",
    "name": "draw",
    "memberof": "scripts/ui_curvewidget.js~CurveWidget",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_curvewidget.js~CurveWidget#draw",
    "access": "public",
    "description": null,
    "lineNumber": 1859,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1970,
    "kind": "file",
    "name": "scripts/ui_listbox.js",
    "content": "\"use strict\";\n\nimport * as util from './util.js';\nimport * as vectormath from './vectormath.js';\nimport * as ui_base from './ui_base.js';\nimport * as events from './events.js';\nimport * as simple_toolsys from './simple_toolsys.js';\nimport * as toolprop from './toolprop.js';\n\nimport {TableFrame} from './ui_table.js';\nimport {Container, ColumnFrame, RowFrame} from './ui.js';\nimport {keymap} from './events.js';\n\nlet EnumProperty = toolprop.EnumProperty,\n  PropTypes = toolprop.PropTypes;\n\nlet UIBase = ui_base.UIBase,\n  PackFlags = ui_base.PackFlags,\n  IconSheets = ui_base.IconSheets;\n\nfunction getpx(css) {\n  return parseFloat(css.trim().replace(\"px\", \"\"))\n}\n\nclass ListItem extends RowFrame {\n  constructor() {\n    super();\n\n    let highlight = () => {\n      console.log(\"listitem mouseover\");\n      this.highlight = true;\n      this.setBackground();\n    };\n\n    let unhighlight = () => {\n      console.log(\"listitem mouseleave\");\n      this.highlight = false;\n      this.setBackground();\n    };\n\n    this.addEventListener(\"mouseover\", highlight);\n    this.addEventListener(\"mousein\", highlight);\n\n    this.addEventListener(\"mouseleave\", unhighlight);\n    this.addEventListener(\"mouseout\", unhighlight);\n    this.addEventListener(\"blur\", unhighlight);\n\n    this.addEventListener(\"click\", (e) => {\n      console.log(\"click!\");\n      if (this.onclick) {\n        this.onclick();\n      }\n    });\n\n    let style = document.createElement(\"style\");\n    style.textContent = `\n      .listitem {\n        -moz-user-focus: normal;\n        moz-user-focus: normal;\n        user-focus: normal;\n      }\n    `;\n\n    this.shadowRoot.prepend(style);\n  }\n\n  init() {\n    super.init();\n\n    this.setAttribute(\"class\", \"listitem\");\n    this.style[\"width\"] = \"100%\";\n    this.setCSS();\n  }\n\n  setBackground() {\n    if (this.highlight) {\n      this.background = this.getDefault(\"ListHighlight\");\n    } else if (this.is_active) {\n      this.background = this.getDefault(\"ListActive\");\n    } else {\n      this.background = this.getDefault(\"DefaultPanelBG\");\n    }\n  }\n\n  static define() {return {\n    tagname : \"listitem-x\",\n    style : \"listbox\"\n  }}\n}\nUIBase.register(ListItem);\n\nclass ListBox extends Container {\n  constructor() {\n    super();\n\n    this.items = [];\n    this.idmap = {};\n    this.items.active = undefined;\n    this.highlight = false;\n    this.is_active = false;\n\n    let style = document.createElement(\"style\");\n    style.textContent = `\n      .listbox {\n        -moz-user-focus: normal;\n        moz-user-focus: normal;\n        user-focus: normal;\n      }\n    `;\n    this.shadow.prepend(style);\n\n    this.onkeydown = (e) => {\n      console.log(\"yay\", e.keyCode);\n\n      switch (e.keyCode) {\n        case keymap[\"Up\"]:\n        case keymap[\"Down\"]:\n          if (this.items.length == 0)\n            return;\n\n          if (this.items.active === undefined) {\n            this.setActive(this.items[0]);\n            return;\n          }\n\n          let i = this.items.indexOf(this.items.active);\n          let dir = e.keyCode == keymap[\"Up\"] ? -1 : 1;\n\n          i = Math.max(Math.min(i+dir, this.items.length-1), 0);\n          this.setActive(this.items[i]);\n\n          break;\n      }\n    };\n\n    //this.addEventListener(\"keydown\", on_keydown);\n\n    //this._table =  this.table();\n  }\n\n  setCSS() {\n    super.setCSS();\n  }\n\n  init() {\n    super.init();\n\n    this.setCSS();\n\n    this.style[\"width\"] = this.getDefault(\"width\") + \"px\";\n    this.style[\"height\"] = this.getDefault(\"height\") + \"px\";\n    this.style[\"overflow\"] = \"scroll\";\n\n    //this.setAttribute(\"class\", \"listbox\");\n    //this.setAttribute(\"tabindex\", 0);\n    //this.tabIndex = 0;\n  }\n\n  addItem(name, id) {\n    let item = document.createElement(\"listitem-x\");\n\n    item._id = id === undefined ? this.items.length : id;\n    this.idmap[item._id] = item;\n\n    //item.addEventListener(\"keydown\", this.onkeydown);\n    this.tabIndex = 1;\n    this.setAttribute(\"tabindex\", 1);\n\n    this.add(item);\n    this.items.push(item);\n\n    item.label(name);\n    let this2 = this;\n\n    item.onclick = function() {\n      this2.setActive(this);\n      this.setBackground();\n    };\n\n    return item;\n  }\n\n  removeItem(item) {\n    if (typeof item == \"number\") {\n      item = this.idmap[item];\n    }\n\n    item.remove();\n    delete this.idmap[item._id];\n    this.items.remove(item);\n  }\n\n  setActive(item) {\n    if (typeof item == \"number\") {\n      item = this.idmap[item];\n    }\n\n    console.log(\"set active!\");\n\n    if (item === this.items.active) {\n      return;\n    }\n\n    if (this.items.active !== undefined) {\n      this.items.active.highlight = false;\n      this.items.active.is_active = false;\n      this.items.active.setBackground();\n    }\n\n    item.is_active = true;\n    this.items.active = item;\n\n    if (item !== undefined) {\n      item.setBackground();\n      item.scrollIntoViewIfNeeded();\n    }\n\n    if (this.onchange) {\n      this.onchange(item._id, item);\n    }\n  }\n\n  clear() {\n\n  }\n\n  static define() {return {\n    tagname : \"listbox-x\",\n    style : \"listbox\"\n  }}\n}\nUIBase.register(ListBox);\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_listbox.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 1971,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_listbox.js",
    "static": true,
    "longname": "scripts/ui_listbox.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_listbox.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1972,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_listbox.js",
    "static": true,
    "longname": "scripts/ui_listbox.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_listbox.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1973,
    "kind": "function",
    "name": "getpx",
    "memberof": "scripts/ui_listbox.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_listbox.js~getpx",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_listbox.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "params": [
      {
        "name": "css",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 1974,
    "kind": "class",
    "name": "ListItem",
    "memberof": "scripts/ui_listbox.js",
    "static": true,
    "longname": "scripts/ui_listbox.js~ListItem",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_listbox.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~RowFrame"
    ],
    "ignore": true
  },
  {
    "__docId__": 1975,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListItem#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 26,
    "undocument": true
  },
  {
    "__docId__": 1976,
    "kind": "member",
    "name": "highlight",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListItem#highlight",
    "access": "public",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1978,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListItem#init",
    "access": "public",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1979,
    "kind": "method",
    "name": "setBackground",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListItem#setBackground",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1980,
    "kind": "member",
    "name": "background",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListItem#background",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1983,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_listbox.js~ListItem",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_listbox.js~ListItem.define",
    "access": "public",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1984,
    "kind": "class",
    "name": "ListBox",
    "memberof": "scripts/ui_listbox.js",
    "static": true,
    "longname": "scripts/ui_listbox.js~ListBox",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_listbox.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~Container"
    ],
    "ignore": true
  },
  {
    "__docId__": 1985,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 93,
    "undocument": true
  },
  {
    "__docId__": 1986,
    "kind": "member",
    "name": "items",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#items",
    "access": "public",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 1987,
    "kind": "member",
    "name": "idmap",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#idmap",
    "access": "public",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 1988,
    "kind": "member",
    "name": "highlight",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#highlight",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1989,
    "kind": "member",
    "name": "is_active",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#is_active",
    "access": "public",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 1990,
    "kind": "member",
    "name": "onkeydown",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#onkeydown",
    "access": "public",
    "description": null,
    "lineNumber": 112,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1991,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 141,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1992,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#init",
    "access": "public",
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1993,
    "kind": "method",
    "name": "addItem",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#addItem",
    "access": "public",
    "description": null,
    "lineNumber": 159,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 1994,
    "kind": "member",
    "name": "tabIndex",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 1995,
    "kind": "method",
    "name": "removeItem",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#removeItem",
    "access": "public",
    "description": null,
    "lineNumber": 183,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1996,
    "kind": "method",
    "name": "setActive",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#setActive",
    "access": "public",
    "description": null,
    "lineNumber": 193,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 1997,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_listbox.js~ListBox#clear",
    "access": "public",
    "description": null,
    "lineNumber": 223,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 1998,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_listbox.js~ListBox",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_listbox.js~ListBox.define",
    "access": "public",
    "description": null,
    "lineNumber": 227,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 1999,
    "kind": "file",
    "name": "scripts/ui_menu.js",
    "content": "\"use strict\";\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as events from './events.js';\r\nimport * as simple_toolsys from './simple_toolsys.js';\r\nimport * as toolprop from './toolprop.js';\r\nimport {Button} from \"./ui_widgets.js\";\r\nimport {DomEventTypes} from './events.js';\r\n\r\nlet EnumProperty = toolprop.EnumProperty,\r\n  PropTypes = toolprop.PropTypes;\r\n\r\nlet UIBase = ui_base.UIBase,\r\n  PackFlags = ui_base.PackFlags,\r\n  IconSheets = ui_base.IconSheets;\r\n\r\nfunction getpx(css) {\r\n  return parseFloat(css.trim().replace(\"px\", \"\"))\r\n}\r\n\r\nexport class Menu extends UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.items = [];\r\n\r\n    this.itemindex = 0;\r\n    this.closed = false;\r\n    this.started = false;\r\n    this.activeItem = undefined;\r\n\r\n    //we have to make a container for any submenus to\r\n    this.container = document.createElement(\"span\");\r\n    this.container.style[\"display\"] = \"flex\";\r\n\r\n    //this.container.style[\"background-color\"] = \"red\";\r\n    this.container.setAttribute(\"class\", \"menucon\");\r\n\r\n    this.dom = document.createElement(\"ul\");\r\n    this.dom.setAttribute(\"class\", \"menu\");\r\n    /*\r\n              place-items: start start;\r\n              flex-wrap : nowrap;\r\n              align-content : start;\r\n              place-content : start;\r\n              justify-content : start;\r\n\r\n              align-items : start;\r\n              place-items : start;\r\n              justify-items : start;\r\n    */\r\n    let style = document.createElement(\"style\");\r\n    style.textContent = `\r\n        .menucon {\r\n          position:absolute;\r\n          float:left;\r\n          \r\n          display: block;\r\n          -moz-user-focus: normal;\r\n        }\r\n        \r\n        ul.menu {\r\n          display : block;\r\n          \r\n          margin : 0px;\r\n          padding : 0px;\r\n          border-style : solid;\r\n          border-width : 1px;\r\n          border-color: grey;\r\n          -moz-user-focus: normal;\r\n          background-color: ${this.getDefault(\"MenuBG\")};\r\n        }\r\n        \r\n        .menuitem {\r\n          display : block;\r\n          \r\n          list-style-type:none;\r\n          -moz-user-focus: normal;\r\n          \r\n          margin : 0;\r\n          padding : 0px;\r\n          padding-right: 2px;\r\n          padding-left: 4px;\r\n          padding-top : 0px;\r\n          padding-bottom : 0px;\r\n          font : ${ui_base.getFont(this)};\r\n          background-color: ${this.getDefault(\"MenuBG\")};\r\n        }\r\n        \r\n        .menuitem:focus {\r\n          background-color: rgba(155, 220, 255, 1.0);\r\n          -moz-user-focus: normal;\r\n        }\r\n      `;\r\n\r\n    this.dom.setAttribute(\"tabindex\", -1);\r\n\r\n    //let's have the menu wrangler handle key events\r\n\r\n    this.container.addEventListener(\"mouseleave\", (e) => {\r\n      console.log(\"menu out\");\r\n      this.close();\r\n    }, false);\r\n\r\n    //this.container.appendChild(this.dom);\r\n\r\n    this.shadow.appendChild(style);\r\n    this.shadow.appendChild(this.container);\r\n  }\r\n\r\n  float(x, y, zindex=undefined) {\r\n    console.log(\"menu test!\");\r\n\r\n    let dpi = this.getDPI();\r\n    let rect = this.dom.getClientRects();\r\n    let maxx = this.getWinWidth()-10;\r\n    let maxy = this.getWinHeight()-10;\r\n\r\n    console.log(rect.length > 0 ? rect[0] : undefined)\r\n\r\n    if (rect.length > 0) {\r\n      rect = rect[0];\r\n      console.log(y + rect.height);\r\n      if (y + rect.height > maxy) {\r\n        console.log(\"greater\");\r\n        y = maxy - rect.height - 1;\r\n      }\r\n\r\n      if (x + rect.width > maxx) {\r\n        console.log(\"greater\");\r\n        x = maxx - rect.width - 1;\r\n      }\r\n    }\r\n\r\n    super.float(x, y, 50);\r\n  }\r\n\r\n  click() {\r\n    if (this.activeItem == undefined)\r\n      return;\r\n\r\n    if (this.activeItem !== undefined && this.activeItem._isMenu)\r\n    //ignore\r\n      return;\r\n\r\n    if (this.onselect) {\r\n      try {\r\n        console.log(this.activeItem._id, \"-----\");\r\n        this.onselect(this.activeItem._id);\r\n      } catch (error) {\r\n        util.print_stack(error);\r\n        console.log(\"Error in menu callback\");\r\n      }\r\n    }\r\n\r\n    console.log(\"menu select\");\r\n    this.close();\r\n  }\r\n\r\n  _ondestroy() {\r\n    if (this.started) {\r\n      menuWrangler.popMenu(this);\r\n\r\n      if (this.onclose) {\r\n        this.onclose();\r\n      }\r\n    }\r\n  }\r\n\r\n  close() {\r\n    //XXX\r\n    //return;\r\n    if (this.closed) {\r\n      return;\r\n    }\r\n\r\n    if (this.started) {\r\n      menuWrangler.popMenu(this);\r\n    }\r\n\r\n    this.closed = true;\r\n    this.started = false;\r\n\r\n    //if (this._popup.parentNode !== undefined) {\r\n    //  this._popup.remove();\r\n    //}\r\n\r\n    this.remove();\r\n    this.dom.remove();\r\n\r\n    if (this.onclose) {\r\n      this.onclose(this);\r\n    }\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"menu-x\"\r\n  };}\r\n\r\n  start_fancy(prepend, setActive=true) {\r\n    return this.startFancy(prepend, setActive);\r\n  }\r\n\r\n  startFancy(prepend, setActive=true) {\r\n    console.log(\"menu fancy start\");\r\n\r\n    let dom2 = document.createElement(\"div\");\r\n    //let dom2 = document.createElement(\"div\");\r\n\r\n    this.dom.setAttribute(\"class\", \"menu\");\r\n    dom2.setAttribute(\"class\", \"menu\");\r\n\r\n    let sbox = document.createElement(\"textbox-x\");\r\n\r\n    dom2.appendChild(sbox);\r\n    dom2.appendChild(this.dom);\r\n\r\n    dom2.style[\"height\"] = \"300px\";\r\n    this.dom.style[\"height\"] = \"300px\";\r\n    this.dom.style[\"overflow\"] = \"scroll\";\r\n\r\n    if (prepend) {\r\n      this.container.prepend(dom2);\r\n    } else {\r\n      this.container.appendChild(dom2);\r\n    }\r\n\r\n    sbox.focus();\r\n    sbox.onchange = () => {\r\n      let t = sbox.text.trim().toLowerCase();\r\n\r\n      console.log(\"applying search\", t);\r\n\r\n      for (let item of this.items) {\r\n        item.remove();\r\n      }\r\n\r\n      for (let item of this.items) {\r\n        let ok = t == \"\";\r\n        ok = ok || item.innerHTML.toLowerCase().search(t) >= 0;\r\n\r\n        if (ok) {\r\n          this.dom.appendChild(item);\r\n        }\r\n        //item.hidden = !ok;\r\n      }\r\n    }\r\n\r\n    sbox.addEventListener(\"keydown\", (e) => {\r\n      console.log(e.keyCode);\r\n      switch (e.keyCode) {\r\n        case 27: //escape key\r\n          this.close();\r\n          break;\r\n        case 13: //enter key\r\n          this.click(this.activeItem);\r\n          this.close();\r\n          break;\r\n      }\r\n    });\r\n\r\n    if (!setActive)\r\n      return;\r\n  }\r\n\r\n  start(prepend=false, setActive=true) {\r\n    this.started = true;\r\n    this.focus();\r\n    menuWrangler.pushMenu(this);\r\n\r\n    if (this.items.length > 10) {\r\n      return this.start_fancy(prepend, setActive);\r\n    }\r\n\r\n    if (prepend) {\r\n      this.container.prepend(this.dom);\r\n    } else {\r\n      this.container.appendChild(this.dom);\r\n    }\r\n\r\n    if (!setActive)\r\n      return;\r\n\r\n    window.setTimeout(() => {\r\n      //select first child\r\n      //TODO: cache last child entry\r\n\r\n      if (this.activeItem === undefined) {\r\n        this.activeItem = this.dom.childNodes[0];\r\n      }\r\n\r\n      if (this.activeItem === undefined) {\r\n        return;\r\n      }\r\n\r\n      this.activeItem.focus();\r\n    }, 0);\r\n  }\r\n\r\n  addItemExtra(text, id=undefined, hotkey, icon=-1, add=true) {\r\n    let dom = document.createElement(\"span\");\r\n\r\n    dom.style[\"display\"] = \"inline-flex\";\r\n\r\n    let icon_div;\r\n\r\n    if (1) { //icon >= 0) {\r\n      icon_div = ui_base.makeIconDiv(icon, IconSheets.SMALL);\r\n    } else {\r\n      let tilesize = ui_base.iconmanager.getTileSize(IconSheets.SMALL);\r\n\r\n      //tilesize *= window.devicePixelRatio;\r\n\r\n      icon_div = document.createElement(\"span\");\r\n      icon_div.style[\"padding\"] = icon_div.style[\"margin\"] = \"0px\";\r\n      icon_div.style[\"width\"] = tilesize + \"px\";\r\n      icon_div.style[\"height\"] = tilesize + \"px\";\r\n    }\r\n\r\n    icon_div.style[\"display\"] = \"inline-flex\";\r\n    icon_div.style[\"margin-right\"] = \"1px\";\r\n    icon_div.style[\"align\"] = \"left\";\r\n\r\n    let span = document.createElement(\"span\");\r\n\r\n    //stupid css doesn't get width right. . .\r\n    span.style[\"font\"] = ui_base.getFont(this, undefined, \"MenuText\");\r\n\r\n    let dpi = this.getDPI();\r\n    let tsize = this.getDefault(\"MenuText\").size;\r\n    //XXX proportional font fail\r\n\r\n    //XXX stupid!\r\n    let canvas = document.createElement(\"canvas\");\r\n    let g = canvas.getContext(\"2d\");\r\n\r\n    g.font = span.style[\"font\"];\r\n\r\n    let rect = span.getClientRects();\r\n\r\n    let twid = Math.ceil(g.measureText(text).width);\r\n    let hwid;\r\n    if (hotkey) {\r\n      g.font = ui_base.getFont(this, undefined, \"HotkeyText\");\r\n      hwid = Math.ceil(g.measureText(hotkey).width);\r\n      twid += hwid + 8;\r\n    }\r\n\r\n    //let twid = Math.ceil(text.trim().length * tsize / dpi);\r\n\r\n    span.innerText = text;\r\n\r\n    span.style[\"word-wrap\"] = \"none\";\r\n    span.style[\"white-space\"] = \"pre\";\r\n    span.style[\"overflow\"] = \"hidden\";\r\n    span.style[\"text-overflow\"] = \"clip\";\r\n\r\n    span.style[\"width\"] = ~~(twid) + \"px\";\r\n    span.style[\"padding\"] = \"0px\";\r\n    span.style[\"margin\"] = \"0px\";\r\n\r\n    dom.style[\"width\"] = \"100%\";\r\n\r\n    dom.appendChild(icon_div);\r\n    dom.appendChild(span);\r\n\r\n    if (hotkey) {\r\n      let hotkey_span = document.createElement(\"span\");\r\n      hotkey_span.innerText = hotkey;\r\n      hotkey_span.style[\"margin-left\"] = \"0px\";\r\n      hotkey_span.style[\"margin-right\"] = \"0px\";\r\n      hotkey_span.style[\"margin\"] = \"0px\";\r\n      hotkey_span.style[\"padding\"] = \"0px\";\r\n\r\n      let al = \"right\";\r\n\r\n      hotkey_span.style[\"font\"] = ui_base.getFont(this, undefined, \"HotkeyText\");\r\n      hotkey_span.style[\"color\"] = this.getDefault(\"HotkeyTextColor\");\r\n\r\n      //hotkey_span.style[\"width\"] = ~~((hwid + 7)) + \"px\";\r\n      hotkey_span.style[\"width\"] = \"100%\";\r\n\r\n      hotkey_span.style[\"text-align\"] = al;\r\n      hotkey_span.style[\"flex-align\"] = al;\r\n      //hotkey_span.style[\"display\"] = \"inline\";\r\n      hotkey_span.style[\"float\"] = \"right\";\r\n      hotkey_span[\"flex-wrap\"] = \"nowrap\";\r\n\r\n      dom.appendChild(hotkey_span);\r\n    }\r\n\r\n    return this.addItem(dom, id, add);\r\n  }\r\n\r\n  //item can be menu or text\r\n  addItem(item, id, add=true) {\r\n    id = id === undefined ? item : id;\r\n\r\n    if (typeof item == \"string\" || item instanceof String) {\r\n      let dom = document.createElement(\"dom\");\r\n      dom.textContent = item;\r\n      item = dom;\r\n      //return this.addItemExtra(item, id);\r\n    }\r\n\r\n    let li = document.createElement(\"li\");\r\n\r\n    li.setAttribute(\"tabindex\", this.itemindex++);\r\n    li.setAttribute(\"class\", \"menuitem\");\r\n\r\n    li.style[\"margin-top\"] = \"10px\";\r\n\r\n    if (item instanceof Menu) {\r\n      console.log(\"submenu!\");\r\n\r\n      let dom = this.addItemExtra(\"\"+item.title, id, \"\", -1, false);\r\n\r\n      //dom = document.createElement(\"div\");\r\n      //dom.innerText = \"\"+item.title;\r\n\r\n      //dom.style[\"display\"] = \"inline-block\";\r\n      li.style[\"width\"] = \"100%\"\r\n      li.appendChild(dom);\r\n\r\n      li._isMenu = true;\r\n      li._menu = item;\r\n\r\n      item.hidden = false;\r\n      item.container = this.container;\r\n    } else {\r\n      li._isMenu = false;\r\n      li.appendChild(item);\r\n    }\r\n\r\n    li._id = id;\r\n\r\n    this.items.push(li);\r\n\r\n    if (add) {\r\n      li.addEventListener(\"click\", (e) => {\r\n        //console.log(\"menu click!\");\r\n\r\n        if (this.activeItem !== undefined && this.activeItem._isMenu) {\r\n          //console.log(\"menu ignore\");\r\n          //ignore\r\n          return;\r\n        }\r\n\r\n        this.click();\r\n      });\r\n\r\n      li.addEventListener(\"blur\", (e) => {\r\n        //console.log(\"blur\", li.getAttribute(\"tabindex\"));\r\n        if (this.activeItem && !this.activeItem._isMenu) {\r\n          this.activeItem = undefined;\r\n        }\r\n      });\r\n\r\n      let onfocus = (e) => {\r\n        if (this.activeItem !== undefined && this.activeItem._isMenu) {\r\n          let active = this.activeItem;\r\n\r\n          window.setTimeout(() => {\r\n            if (this.activeItem && this.activeItem !== active) {\r\n              active._menu.close();\r\n            }\r\n          }, 10);\r\n        }\r\n        if (li._isMenu) {\r\n          li._menu.onselect = (item) => {\r\n            //console.log(\"submenu select\", item);\r\n            this.onselect(item);\r\n            this.close();\r\n          };\r\n\r\n          li._menu.start(false, false);\r\n        }\r\n\r\n        this.activeItem = li;\r\n      };\r\n\r\n      li.addEventListener(\"touchend\", (e) => {\r\n        onfocus(e);\r\n\r\n        if (this.activeItem !== undefined && this.activeItem._isMenu) {\r\n          console.log(\"menu ignore\");\r\n          //ignore\r\n          return;\r\n        }\r\n\r\n        this.click();\r\n      });\r\n\r\n      li.addEventListener(\"focus\", (e) => {\r\n        onfocus(e);\r\n      })\r\n\r\n      li.addEventListener(\"touchmove\", (e) => {\r\n        //console.log(\"menu touchmove\");\r\n        onfocus(e);\r\n        li.focus();\r\n      });\r\n\r\n      li.addEventListener(\"mouseenter\", (e) => {\r\n        //console.log(\"menu mouse enter\");\r\n        li.focus();\r\n      });\r\n\r\n      this.dom.appendChild(li);\r\n    }\r\n\r\n    return li;\r\n  }\r\n\r\n  seperator() {\r\n    let li = document.createElement(\"li\");\r\n    let span = document.createElement(\"hr\");\r\n\r\n    //span.textContent = \"--\"\r\n    //span.style[\"textcolor\"] = span.style[\"color\"] = \"grey\";\r\n\r\n    li.setAttribute(\"class\", \"menuitem\");\r\n    li.appendChild(span);\r\n\r\n    this.dom.appendChild(li);\r\n\r\n    return this;\r\n  }\r\n\r\n  menu(title) {\r\n    let ret = document.createElement(\"menu-x\");\r\n\r\n    ret.setAttribute(\"title\", title);\r\n    this.addItem(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  calcSize() {\r\n\r\n  }\r\n}\r\n\r\nMenu.SEP = Symbol(\"menu seperator\");\r\nUIBase.register(Menu);\r\n\r\nexport class DropBox extends Button {\r\n  constructor() {\r\n    super();\r\n\r\n    this.r = 5;\r\n    this._menu = undefined;\r\n    this._auto_depress = false;\r\n    //this.prop = new ui_base.EnumProperty(undefined, {}, \"\", \"\", 0);\r\n\r\n    this._onpress = this._onpress.bind(this);\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n    this.updateWidth();\r\n  }\r\n\r\n  setCSS() {\r\n    //do not call parent classes's setCSS here\r\n  }\r\n\r\n  updateWidth() {\r\n    //let ret = super.updateWidth(10);\r\n    let dpi = this.getDPI();\r\n\r\n    let ts = this.getDefault(\"DefaultText\").size;\r\n    let tw = ui_base.measureText(this, this._genLabel()).width/dpi + 8;\r\n    tw = ~~tw;\r\n\r\n    tw += 15;\r\n\r\n    if (!this.getAttribute(\"simple\")) {\r\n      tw += 35;\r\n    }\r\n\r\n    if (tw != this._last_w) {\r\n      this._last_w = tw;\r\n      this.dom.style[\"width\"] = tw + \"px\";\r\n      this.style[\"width\"] = tw + \"px\";\r\n      this.width = tw;\r\n\r\n      this.overrideDefault(\"defaultWidth\", tw);\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n\r\n  updateDataPath() {\r\n    if (!this.ctx || !this.hasAttribute(\"datapath\")) {\r\n      return;\r\n    }\r\n\r\n    let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\r\n    let val = this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\r\n\r\n    if (val === undefined) {\r\n      this.disabled = true;\r\n      return;\r\n    } else {\r\n      this.disabled = false;\r\n    }\r\n\r\n    if (this.prop !== undefined) {\r\n      prop = this.prop;\r\n    }\r\n\r\n    let name = prop.ui_value_names[prop.keys[val]];\r\n    if (name != this.getAttribute(\"name\")) {\r\n      this.setAttribute(\"name\", name);\r\n      this.updateName();\r\n    }\r\n\r\n    //console.log(name, val);\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n\r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.updateDataPath();\r\n    }\r\n  }\r\n\r\n  _build_menu() {\r\n    let prop = this.prop;\r\n\r\n    if (this.prop === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (this._menu !== undefined && this._menu.parentNode !== undefined) {\r\n      this._menu.remove();\r\n    }\r\n\r\n    let menu = this._menu = document.createElement(\"menu-x\");\r\n    menu.setAttribute(\"title\", name);\r\n\r\n    menu._dropbox = this;\r\n\r\n    let valmap = {};\r\n    let enummap = prop.values;\r\n    let iconmap = prop.iconmap;\r\n    let uimap = prop.ui_value_names;\r\n\r\n    //console.log(\"   UIMAP\", uimap);\r\n\r\n    for (let k in enummap) {\r\n      let uk = k;\r\n\r\n      valmap[enummap[k]] = k;\r\n\r\n      if (uimap !== undefined && k in uimap) {\r\n        uk = uimap[k];\r\n      }\r\n\r\n      //menu.addItem(k, enummap[k], \":\");\r\n      if (iconmap && iconmap[k]) {\r\n        menu.addItemExtra(uk, enummap[k], undefined, iconmap[k]);\r\n      } else {\r\n        menu.addItem(uk, enummap[k]);\r\n      }\r\n    }\r\n\r\n    menu.onselect = (id) => {\r\n      //console.log(\"dropbox select\");\r\n      this._pressed = false;\r\n      this._redraw();\r\n      //console.trace(\"got click!\", id, \":::\");\r\n\r\n      this._menu = undefined;\r\n      this.prop.setValue(id);\r\n\r\n      this.setAttribute(\"name\", this.prop.ui_value_names[valmap[id]]);\r\n      if (this.onselect !== undefined) {\r\n        this.onselect(id);\r\n      }\r\n\r\n      if (this.hasAttribute(\"datapath\") && this.ctx) {\r\n        console.log(\"setting data api value\", id, this.getAttribute(\"datapath\"));\r\n        this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), id);\r\n      }\r\n    };\r\n  }\r\n\r\n  _onpress(e) {\r\n    if (this._menu !== undefined) {\r\n      this._menu.close();\r\n      this._menu = undefined;\r\n      return;\r\n    }\r\n\r\n    this._build_menu();\r\n\r\n    console.log(\"menu dropbox click\", this._menu);\r\n\r\n    if (this._menu === undefined) {\r\n      return;\r\n    }\r\n\r\n    this._menu._dropbox = this;\r\n    this.dom._background = this.getDefault(\"BoxDepressed\");\r\n    this._background = this.getDefault(\"BoxDepressed\");\r\n    this._redraw();\r\n    this._pressed = true;\r\n    this.setCSS();\r\n\r\n    let onclose = this._menu.onclose;\r\n    this._menu.onclose = () => {\r\n      this._pressed = false;\r\n      this._redraw();\r\n\r\n      let menu = this._menu;\r\n      if (menu) {\r\n        this._menu = undefined;\r\n        menu._dropbox = undefined;\r\n      }\r\n\r\n      if (onclose) {\r\n        onclose.call(menu);\r\n      }\r\n    }\r\n\r\n    let menu = this._menu;\r\n    let screen = this.getScreen();\r\n\r\n    let dpi = this.getDPI();\r\n\r\n    let x = e.x, y = e.y;\r\n    let rects = this.dom.getClientRects();\r\n\r\n    x = rects[0].x;\r\n    y = rects[0].y + Math.ceil(rects[0].height);\r\n\r\n    let con = this._popup = screen.popup(x, y);\r\n    con.noMarginsOrPadding();\r\n\r\n    con.add(menu);\r\n\r\n    menu.start();\r\n  }\r\n\r\n  _redraw() {\r\n    if (this.getAttribute(\"simple\")) {\r\n      if (this._highlight) {\r\n        ui_base.drawRoundBox(this, this.dom, this.g, undefined, undefined, 2);\r\n      }\r\n\r\n      if (this._focus) {\r\n        ui_base.drawRoundBox(this, this.dom, this.g, undefined, undefined, 2, \"stroke\");\r\n      }\r\n\r\n      this._draw_text();\r\n      return;\r\n    }\r\n\r\n    super._redraw(false);\r\n\r\n    let g = this.g;\r\n    let w = this.dom.width, h = this.dom.height;\r\n    let dpi = this.getDPI();\r\n\r\n    let p = 10*dpi;\r\n    let p2 = 4*dpi;\r\n\r\n\r\n    //*\r\n    let bg = this.getDefault(\"dropTextBG\");\r\n    if (bg !== undefined) {\r\n      g.fillStyle = bg;\r\n\r\n      g.beginPath();\r\n      g.rect(p2, p2, this.dom.width - p2 - h, this.dom.height - p2 * 2);\r\n      g.fill();\r\n    }\r\n    //*/\r\n\r\n    g.fillStyle = \"rgba(50, 50, 50, 0.2)\";\r\n    g.strokeStyle = \"rgba(50, 50, 50, 0.8)\";\r\n    g.beginPath();\r\n    /*\r\n    g.moveTo(w-p, p);\r\n    g.lineTo(w-(p+h*0.25), h-p);\r\n    g.lineTo(w-(p+h*0.5), p);\r\n    g.closePath();\r\n    //*/\r\n\r\n    let sz = 0.3;\r\n    g.moveTo(w-h*0.5-p, p);\r\n    g.lineTo(w-p, p);\r\n    g.moveTo(w-h*0.5-p, p+sz*h/3);\r\n    g.lineTo(w-p, p+sz*h/3);\r\n    g.moveTo(w-h*0.5-p, p+sz*h*2/3);\r\n    g.lineTo(w-p, p+sz*h*2/3);\r\n\r\n    g.lineWidth = 1;\r\n    g.stroke();\r\n\r\n    this._draw_text();\r\n  }\r\n\r\n  set menu(val) {\r\n    this._menu = val;\r\n\r\n    if (val !== undefined) {\r\n      this._name = val.title;\r\n      this.updateName();\r\n    }\r\n  }\r\n\r\n  get menu() {\r\n    return this._menu;\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"dropbox-x\",\r\n    style   : \"dropbox\"\r\n  };}\r\n}\r\n\r\nUIBase.register(DropBox);\r\n\r\nexport class MenuWrangler {\r\n  constructor() {\r\n    this.screen = undefined;\r\n    this.menustack = [];\r\n\r\n  }\r\n\r\n  get menu() {\r\n    return this.menustack.length > 0 ? this.menustack[this.menustack.length-1] : undefined;\r\n  }\r\n\r\n  pushMenu(menu) {\r\n    this.menustack.push(menu);\r\n  }\r\n\r\n  popMenu(menu) {\r\n    return this.menustack.pop();\r\n  }\r\n\r\n  endMenus() {\r\n    for (let menu of this.menustack) {\r\n      menu.close();\r\n    }\r\n\r\n    this.menustack = [];\r\n  }\r\n\r\n  on_keydown(e) {\r\n    if (this.menu === undefined) {\r\n      return;\r\n    }\r\n\r\n    console.log(\"key\", e.keyCode);\r\n    let menu = this.menu;\r\n\r\n    switch (e.keyCode) {\r\n      case 37: //left\r\n      case 39: //right\r\n        if (menu._dropbox) {\r\n          let dropbox = menu._dropbox;\r\n\r\n          if (e.keyCode === 37) {\r\n            dropbox = dropbox.previousElementSibling;\r\n          } else {\r\n            dropbox = dropbox.nextElementSibling;\r\n          }\r\n\r\n          if (dropbox !== undefined && dropbox instanceof DropBox) {\r\n            this.endMenus();\r\n            dropbox._onpress(e);\r\n          }\r\n        }\r\n        break;\r\n      case 38: //up\r\n      case 40: //down\r\n        let item = menu.activeItem;\r\n        if (!item) {\r\n          item = menu.items[0];\r\n        }\r\n\r\n        if (!item) {\r\n          return;\r\n        }\r\n\r\n        let item2;\r\n        let i = menu.items.indexOf(item);\r\n\r\n        if (e.keyCode == 38) {\r\n          i = (i - 1 + menu.items.length) % menu.items.length;\r\n        } else {\r\n          i = (i + 1) % menu.items.length;\r\n        }\r\n\r\n        item2 = menu.items[i];\r\n\r\n        if (item2) {\r\n          menu.activeItem = item2;\r\n\r\n          item.blur();\r\n          item2.focus();\r\n        }\r\n        break;\r\n      case 13: //return key\r\n      case 32: //space key\r\n        menu.click(menu.activeItem);\r\n        break;\r\n      case 27: //escape key\r\n        menu.close();\r\n        break;\r\n    }\r\n  }\r\n  \r\n  on_mousemove(e) {\r\n    if (this.menu === undefined || this.screen === undefined) {\r\n      return;\r\n    }\r\n\r\n    let screen = this.screen;\r\n    let x = e.pageX, y = e.pageY;\r\n\r\n    let element = screen.pickElement(x, y);\r\n\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    console.log(element.tagName);\r\n    if (element instanceof DropBox && element.menu !== this.menu) {\r\n      //destroy entire menu stack\r\n      this.endMenus();\r\n\r\n      //start new menu\r\n      element._onpress(e);\r\n    }\r\n  }\r\n}\r\n\r\nexport let menuWrangler = new MenuWrangler();\r\n\r\nexport function startMenuEventWrangling(screen) {\r\n  for (let k in DomEventTypes) {\r\n    if (menuWrangler[k] === undefined) {\r\n      continue;\r\n    }\r\n\r\n    let dom = k.search(\"key\") >= 0 ? window : document.body;\r\n    dom.addEventListener(DomEventTypes[k], menuWrangler[k].bind(menuWrangler), false)\r\n  }\r\n\r\n  menuWrangler.screen = screen;\r\n}\r\n\r\nexport function setWranglerScreen(screen) {\r\n  menuWrangler.screen = screen;\r\n}\r\n\r\nexport function getWranglerScreen() {\r\n  return menuWrangler.screen;\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_menu.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2000,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2001,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2002,
    "kind": "function",
    "name": "getpx",
    "memberof": "scripts/ui_menu.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~getpx",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "params": [
      {
        "name": "css",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2003,
    "kind": "class",
    "name": "Menu",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~Menu",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{Menu}",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2004,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 24,
    "undocument": true
  },
  {
    "__docId__": 2005,
    "kind": "member",
    "name": "items",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#items",
    "access": "public",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2006,
    "kind": "member",
    "name": "itemindex",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#itemindex",
    "access": "public",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2007,
    "kind": "member",
    "name": "closed",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#closed",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2008,
    "kind": "member",
    "name": "started",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#started",
    "access": "public",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2009,
    "kind": "member",
    "name": "activeItem",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#activeItem",
    "access": "public",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2010,
    "kind": "member",
    "name": "container",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#container",
    "access": "public",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2011,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_menu.js~Menu",
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#dom",
    "access": "public",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2012,
    "kind": "method",
    "name": "float",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#float",
    "access": "public",
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "zindex",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2013,
    "kind": "method",
    "name": "click",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#click",
    "access": "public",
    "description": null,
    "lineNumber": 140,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2014,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 162,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2015,
    "kind": "method",
    "name": "close",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#close",
    "access": "public",
    "description": null,
    "lineNumber": 172,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2018,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~Menu.define",
    "access": "public",
    "description": null,
    "lineNumber": 198,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2019,
    "kind": "method",
    "name": "start_fancy",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#start_fancy",
    "access": "public",
    "description": null,
    "lineNumber": 202,
    "undocument": true,
    "params": [
      {
        "name": "prepend",
        "types": [
          "*"
        ]
      },
      {
        "name": "setActive",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2020,
    "kind": "method",
    "name": "startFancy",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#startFancy",
    "access": "public",
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "params": [
      {
        "name": "prepend",
        "types": [
          "*"
        ]
      },
      {
        "name": "setActive",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2021,
    "kind": "method",
    "name": "start",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#start",
    "access": "public",
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "params": [
      {
        "name": "prepend",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      },
      {
        "name": "setActive",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2024,
    "kind": "method",
    "name": "addItemExtra",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#addItemExtra",
    "access": "public",
    "description": null,
    "lineNumber": 302,
    "undocument": true,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "hotkey",
        "types": [
          "*"
        ]
      },
      {
        "name": "icon",
        "optional": true,
        "types": [
          "*"
        ]
      },
      {
        "name": "add",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2025,
    "kind": "method",
    "name": "addItem",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#addItem",
    "access": "public",
    "description": null,
    "lineNumber": 398,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "add",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2028,
    "kind": "method",
    "name": "seperator",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#seperator",
    "access": "public",
    "description": null,
    "lineNumber": 517,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2029,
    "kind": "method",
    "name": "menu",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#menu",
    "access": "public",
    "description": null,
    "lineNumber": 532,
    "undocument": true,
    "params": [
      {
        "name": "title",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2030,
    "kind": "method",
    "name": "calcSize",
    "memberof": "scripts/ui_menu.js~Menu",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~Menu#calcSize",
    "access": "public",
    "description": null,
    "lineNumber": 541,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2031,
    "kind": "class",
    "name": "DropBox",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~DropBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{DropBox}",
    "description": null,
    "lineNumber": 549,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_widgets.js~Button"
    ]
  },
  {
    "__docId__": 2032,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 550,
    "undocument": true
  },
  {
    "__docId__": 2033,
    "kind": "member",
    "name": "r",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#r",
    "access": "public",
    "description": null,
    "lineNumber": 553,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2034,
    "kind": "member",
    "name": "_menu",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_menu",
    "access": "private",
    "description": null,
    "lineNumber": 554,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2035,
    "kind": "member",
    "name": "_auto_depress",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_auto_depress",
    "access": "private",
    "description": null,
    "lineNumber": 555,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2037,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#init",
    "access": "public",
    "description": null,
    "lineNumber": 561,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2038,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 566,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2039,
    "kind": "method",
    "name": "updateWidth",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#updateWidth",
    "access": "public",
    "description": null,
    "lineNumber": 570,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2040,
    "kind": "member",
    "name": "_last_w",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_last_w",
    "access": "private",
    "description": null,
    "lineNumber": 585,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2041,
    "kind": "member",
    "name": "width",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#width",
    "access": "public",
    "description": null,
    "lineNumber": 588,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2042,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 599,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2043,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 608,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2045,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#update",
    "access": "public",
    "description": null,
    "lineNumber": 627,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2046,
    "kind": "method",
    "name": "_build_menu",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_build_menu",
    "access": "private",
    "description": null,
    "lineNumber": 635,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2047,
    "kind": "member",
    "name": "_pressed",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_pressed",
    "access": "private",
    "description": null,
    "lineNumber": 677,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2049,
    "kind": "method",
    "name": "_onpress",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_onpress",
    "access": "private",
    "description": null,
    "lineNumber": 696,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2051,
    "kind": "member",
    "name": "_background",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_background",
    "access": "private",
    "description": null,
    "lineNumber": 713,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2055,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 753,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2056,
    "kind": "set",
    "name": "menu",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#menu",
    "access": "public",
    "description": null,
    "lineNumber": 812,
    "undocument": true
  },
  {
    "__docId__": 2058,
    "kind": "member",
    "name": "_name",
    "memberof": "scripts/ui_menu.js~DropBox",
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#_name",
    "access": "private",
    "description": null,
    "lineNumber": 816,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2059,
    "kind": "get",
    "name": "menu",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~DropBox#menu",
    "access": "public",
    "description": null,
    "lineNumber": 821,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2060,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_menu.js~DropBox",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~DropBox.define",
    "access": "public",
    "description": null,
    "lineNumber": 825,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2061,
    "kind": "class",
    "name": "MenuWrangler",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~MenuWrangler",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{MenuWrangler}",
    "description": null,
    "lineNumber": 833,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2062,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 834,
    "undocument": true
  },
  {
    "__docId__": 2063,
    "kind": "member",
    "name": "screen",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#screen",
    "access": "public",
    "description": null,
    "lineNumber": 835,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2064,
    "kind": "member",
    "name": "menustack",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#menustack",
    "access": "public",
    "description": null,
    "lineNumber": 836,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2065,
    "kind": "get",
    "name": "menu",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#menu",
    "access": "public",
    "description": null,
    "lineNumber": 840,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2066,
    "kind": "method",
    "name": "pushMenu",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#pushMenu",
    "access": "public",
    "description": null,
    "lineNumber": 844,
    "undocument": true,
    "params": [
      {
        "name": "menu",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2067,
    "kind": "method",
    "name": "popMenu",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#popMenu",
    "access": "public",
    "description": null,
    "lineNumber": 848,
    "undocument": true,
    "params": [
      {
        "name": "menu",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2068,
    "kind": "method",
    "name": "endMenus",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#endMenus",
    "access": "public",
    "description": null,
    "lineNumber": 852,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2070,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 860,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2071,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/ui_menu.js~MenuWrangler",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_menu.js~MenuWrangler#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 925,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2072,
    "kind": "variable",
    "name": "menuWrangler",
    "memberof": "scripts/ui_menu.js",
    "static": true,
    "longname": "scripts/ui_menu.js~menuWrangler",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{menuWrangler}",
    "description": null,
    "lineNumber": 950,
    "undocument": true,
    "type": {
      "types": [
        "scripts/ui_menu.js~MenuWrangler"
      ]
    }
  },
  {
    "__docId__": 2073,
    "kind": "function",
    "name": "startMenuEventWrangling",
    "memberof": "scripts/ui_menu.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~startMenuEventWrangling",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{startMenuEventWrangling}",
    "description": null,
    "lineNumber": 952,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2074,
    "kind": "function",
    "name": "setWranglerScreen",
    "memberof": "scripts/ui_menu.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~setWranglerScreen",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{setWranglerScreen}",
    "description": null,
    "lineNumber": 965,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2075,
    "kind": "function",
    "name": "getWranglerScreen",
    "memberof": "scripts/ui_menu.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_menu.js~getWranglerScreen",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_menu.js",
    "importStyle": "{getWranglerScreen}",
    "description": null,
    "lineNumber": 969,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2076,
    "kind": "file",
    "name": "scripts/ui_noteframe.js",
    "content": "import * as util from './util.js';\r\nimport * as ui from './ui.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport {Icons, css2color, color2css} from './ui_base.js';\r\n\r\nlet UIBase = ui_base.UIBase;\r\n\r\nexport class Note extends ui_base.UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    let style = document.createElement(\"style\");\r\n\r\n    this._noteid = undefined;\r\n    this.height = 20;\r\n\r\n    style.textContent = `\r\n    .notex {\r\n      display : flex;\r\n      flex-direction : row;\r\n      flex-wrap : nowrap;\r\n      height : {this.height}px;\r\n      padding : 0px;\r\n      margin : 0px;\r\n    }\r\n    `;\r\n\r\n    this.dom = document.createElement(\"div\");\r\n    this.dom.setAttribute(\"class\", \"notex\");\r\n    this.color = \"red\";\r\n\r\n    this.shadow.appendChild(style);\r\n    this.shadow.append(this.dom);\r\n    this.setLabel(\"\");\r\n  }\r\n\r\n  setLabel(s) {\r\n    let color = this.color;\r\n    if (this.mark === undefined) {\r\n      this.mark = document.createElement(\"div\");\r\n      this.mark.style[\"display\"] = \"flex\";\r\n      this.mark.style[\"flex-direction\"] = \"row\";\r\n      this.mark.style[\"flex-wrap\"] = \"nowrap\";\r\n\r\n      //this.mark.style[\"width\"]\r\n      let sheet = 0;\r\n\r\n      let size = ui_base.iconmanager.getTileSize(sheet);\r\n\r\n      this.mark.style[\"width\"] = \"\" + size + \"px\";\r\n      this.mark.style[\"height\"] = \"\" + size + \"px\";\r\n\r\n      this.dom.appendChild(this.mark);\r\n\r\n      this.ntext = document.createElement(\"div\");\r\n      this.ntext.style[\"display\"] = \"inline-flex\";\r\n      this.ntext.style[\"flex-wrap\"] = \"nowrap\";\r\n\r\n      this.dom.appendChild(this.ntext);\r\n\r\n      ui_base.iconmanager.setCSS(Icons.NOTE_EXCL, this.mark, sheet);\r\n\r\n      //this.mark.style[\"margin\"] = this.ntext.style[\"margin\"] = \"0px\"\r\n      //this.mark.style[\"padding\"] = this.ntext.style[\"padding\"] = \"0px\"\r\n      //this.mark.style[\"background-color\"] = color;\r\n    }\r\n\r\n    let mark = this.mark, ntext = this.ntext;\r\n    //mark.innerText = \"!\";\r\n    ntext.innerText = \" \" + s;\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.setAttribute(\"class\", \"notex\");\r\n\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"flex-wrap\"] = \"nowrap\";\r\n    this.style[\"flex-direction\"] = \"row\";\r\n    this.style[\"border-radius\"] = \"7px\";\r\n    this.style[\"padding\"] = \"2px\";\r\n\r\n    this.style[\"color\"] = this.getDefault(\"NoteText\").color;\r\n    let clr = css2color(this.color);\r\n    clr = color2css([clr[0], clr[1], clr[2], 0.25]);\r\n\r\n    this.style[\"background-color\"] = clr;\r\n    this.setCSS();\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"note-x\"\r\n  }}\r\n}\r\nUIBase.register(Note);\r\n\r\nexport class ProgBarNote extends Note {\r\n  constructor() {\r\n    super();\r\n\r\n    this._percent = 0.0;\r\n    this.barWidth = 100;\r\n\r\n    let bar = this.bar = document.createElement(\"div\");\r\n    bar.style[\"display\"] = \"flex\";\r\n    bar.style[\"flex-direction\"] = \"row\";\r\n    bar.style[\"width\"] = this.barWidth + \"px\";\r\n    bar.style[\"height\"] = this.height + \"px\";\r\n    bar.style[\"background-color\"] = this.getDefault(\"ProgressBarBG\");\r\n    bar.style[\"border-radius\"] = \"12px\";\r\n    bar.style[\"align-items\"] = \"center\";\r\n    bar.style[\"padding\"] = bar.style[\"margin\"] = \"0px\";\r\n\r\n    let bar2 = this.bar2 = document.createElement(\"div\");\r\n    let w = 50.0;\r\n\r\n    bar2.style[\"display\"] = \"flex\";\r\n    bar2.style[\"flex-direction\"] = \"row\";\r\n    bar2.style[\"height\"] = this.height + \"px\";\r\n    bar2.style[\"background-color\"] = this.getDefault(\"ProgressBar\");\r\n    bar2.style[\"border-radius\"] = \"12px\";\r\n    bar2.style[\"align-items\"] = \"center\";\r\n    bar2.style[\"padding\"] = bar2.style[\"margin\"] = \"0px\";\r\n\r\n    this.bar.appendChild(bar2);\r\n    this.dom.appendChild(this.bar);\r\n  }\r\n\r\n  setCSS() {\r\n    super.setCSS();\r\n\r\n    let w = ~~(this.percent * this.barWidth + 0.5);\r\n\r\n    this.bar2.style[\"width\"] = w + \"px\";\r\n  }\r\n\r\n  set percent(val) {\r\n    this._percent = val;\r\n    this.setCSS();\r\n  }\r\n\r\n  get percent() {\r\n    return this._percent;\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"note-progress-x\"\r\n  }}\r\n}\r\nUIBase.register(ProgBarNote);\r\n\r\nexport class NoteFrame extends ui.RowFrame {\r\n  constructor() {\r\n    super();\r\n    this._h = 20;\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.noMarginsOrPadding();\r\n\r\n    noteframes.push(this);\r\n    this.background = this.getDefault(\"NoteBG\");\r\n  }\r\n\r\n  setCSS() {\r\n    super.setCSS();\r\n\r\n    this.style[\"width\"] = \"min-contents\";\r\n    this.style[\"height\"] = this._h + \"px\";\r\n  }\r\n\r\n  _ondestroy() {\r\n    if (noteframes.indexOf(this) >= 0) {\r\n      noteframes.remove(this)\r\n    }\r\n\r\n    super._ondestroy();\r\n  }\r\n\r\n  progbarNote(msg, percent, color=\"rgba(255,0,0,0.2)\", timeout=700, id=msg) {\r\n    let note;\r\n\r\n    for (let child of this.children) {\r\n      if (child._noteid === id) {\r\n        note = child;\r\n        break;\r\n      }\r\n    }\r\n\r\n    let f = (100.0*Math.min(percent, 1.0)).toFixed(1);\r\n\r\n    if (note === undefined) {\r\n      note = this.addNote(msg, color, -1, \"note-progress-x\");\r\n      note._noteid = id;\r\n    }\r\n\r\n    //note.setLabel(msg + \" \" + f + \"%\");\r\n    note.percent = percent;\r\n\r\n    if (percent >= 1.0) {\r\n      //note.setLabel(msg + \" \" + f + \"%\");\r\n\r\n      window.setTimeout(() => {\r\n        note.remove();\r\n      }, timeout);\r\n    }\r\n\r\n    return note;\r\n  }\r\n\r\n  addNote(msg, color=\"rgba(255,0,0,0.2)\", timeout=1200, tagname=\"note-x\") {\r\n    //let note = document.createElement(\"note-x\");\r\n\r\n    //note.ctx = this.ctx;\r\n    //note.background = \"red\";\r\n    //note.dom.innerText = msg;\r\n\r\n    //this._add(note);\r\n\r\n    let note = document.createElement(tagname);\r\n\r\n    note.color = color;\r\n    note.setLabel(msg);\r\n\r\n    note.style[\"text-align\"] = \"center\";\r\n\r\n    note.style[\"font\"] = ui_base.getFont(note, \"NoteText\");\r\n    note.style[\"color\"] = this.getDefault(\"NoteText\").color;\r\n\r\n    this.add(note);\r\n\r\n    this.noMarginsOrPadding();\r\n    note.noMarginsOrPadding();\r\n\r\n    //this.dom.style[\"position\"] = \"absolute\";\r\n    //this.style[\"position\"] = \"absolute\";\r\n    //note.style[\"position\"] = \"absolute\";\r\n\r\n    note.style[\"height\"] = this._h + \"px\";\r\n    note.height = this._h;\r\n\r\n\r\n    if (timeout != -1) {\r\n      window.setTimeout(() => {\r\n        console.log(\"remove!\");\r\n        note.remove();\r\n      }, timeout);\r\n    }\r\n\r\n    //this.appendChild(note);\r\n    return note;\r\n\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"noteframe-x\"\r\n  }}\r\n}\r\nUIBase.register(NoteFrame);\r\n\r\nexport function getNoteFrames(screen) {\r\n  let ret = [];\r\n\r\n  let rec = (n) => {\r\n\r\n    if (n instanceof NoteFrame) {\r\n      ret.push(n);\r\n    }\r\n\r\n    if (n.childNodes !== undefined) {\r\n      for (let node of n.childNodes) {\r\n        rec(node);\r\n      }\r\n    }\r\n\r\n    if (n instanceof ui_base.UIBase && n.shadow !== undefined && n.shadow.childNodes) {\r\n      for (let node of n.shadow.childNodes) {\r\n        rec(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  rec(screen);\r\n  return ret;\r\n}\r\n\r\nexport let noteframes = [];\r\n\r\nexport function progbarNote(screen, msg, percent, color, timeout) {\r\n  noteframes = getNoteFrames(screen);\r\n\r\n  for (let frame of noteframes) {\r\n    try {\r\n      frame.progbarNote(msg, percent, color, timeout);\r\n    } catch (error) {\r\n      print_stack(error);\r\n      console.log(\"bad notification frame\");\r\n    }\r\n  }\r\n}\r\n\r\nexport function sendNote(screen, msg, color, timeout=1000) {\r\n  noteframes = getNoteFrames(screen);\r\n\r\n  console.log(noteframes.length);\r\n\r\n  for (let frame of noteframes) {\r\n    console.log(frame);\r\n\r\n    try {\r\n      frame.addNote(msg, color, timeout);\r\n    } catch (error) {\r\n      print_stack(error);\r\n      console.log(\"bad notification frame\");\r\n    }\r\n  }\r\n}\r\n\r\nwindow._sendNote = sendNote;\r\n\r\nexport function error(screen, msg, timeout=1000) {\r\n  return sendNote(screen, msg, ui_base.color2css([1.0, 0.0, 0.0, 1.0]), timeout);\r\n}\r\n\r\nexport function warning(screen, msg, timeout=1000) {\r\n  return sendNote(screen, msg, ui_base.color2css([0.78, 0.78, 0.2, 1.0]), timeout);\r\n}\r\n\r\nexport function message(screen, msg, timeout=1000) {\r\n  return sendNote(screen, msg, ui_base.color2css([0.4, 1.0, 0.5, 1.0]), timeout);\r\n}\r\n\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_noteframe.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2077,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_noteframe.js",
    "static": true,
    "longname": "scripts/ui_noteframe.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2078,
    "kind": "class",
    "name": "Note",
    "memberof": "scripts/ui_noteframe.js",
    "static": true,
    "longname": "scripts/ui_noteframe.js~Note",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{Note}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui_base.js~ui_base.UIBase"
    ]
  },
  {
    "__docId__": 2079,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_noteframe.js~Note",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 9,
    "undocument": true
  },
  {
    "__docId__": 2080,
    "kind": "member",
    "name": "_noteid",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#_noteid",
    "access": "private",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2081,
    "kind": "member",
    "name": "height",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#height",
    "access": "public",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2082,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#dom",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2083,
    "kind": "member",
    "name": "color",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#color",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2084,
    "kind": "method",
    "name": "setLabel",
    "memberof": "scripts/ui_noteframe.js~Note",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#setLabel",
    "access": "public",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2085,
    "kind": "member",
    "name": "mark",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#mark",
    "access": "public",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2086,
    "kind": "member",
    "name": "ntext",
    "memberof": "scripts/ui_noteframe.js~Note",
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#ntext",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2087,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_noteframe.js~Note",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~Note#init",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2088,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_noteframe.js~Note",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~Note.define",
    "access": "public",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2089,
    "kind": "class",
    "name": "ProgBarNote",
    "memberof": "scripts/ui_noteframe.js",
    "static": true,
    "longname": "scripts/ui_noteframe.js~ProgBarNote",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{ProgBarNote}",
    "description": null,
    "lineNumber": 98,
    "undocument": true,
    "interface": false,
    "extends": [
      "Note"
    ]
  },
  {
    "__docId__": 2090,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true
  },
  {
    "__docId__": 2091,
    "kind": "member",
    "name": "_percent",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#_percent",
    "access": "private",
    "description": null,
    "lineNumber": 102,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2092,
    "kind": "member",
    "name": "barWidth",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#barWidth",
    "access": "public",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2093,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2094,
    "kind": "set",
    "name": "percent",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#percent",
    "access": "public",
    "description": null,
    "lineNumber": 138,
    "undocument": true
  },
  {
    "__docId__": 2096,
    "kind": "get",
    "name": "percent",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#percent",
    "access": "public",
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2097,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~ProgBarNote#init",
    "access": "public",
    "description": null,
    "lineNumber": 147,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2098,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_noteframe.js~ProgBarNote",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~ProgBarNote.define",
    "access": "public",
    "description": null,
    "lineNumber": 151,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2099,
    "kind": "class",
    "name": "NoteFrame",
    "memberof": "scripts/ui_noteframe.js",
    "static": true,
    "longname": "scripts/ui_noteframe.js~NoteFrame",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{NoteFrame}",
    "description": null,
    "lineNumber": 157,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ui.RowFrame"
    ]
  },
  {
    "__docId__": 2100,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 158,
    "undocument": true
  },
  {
    "__docId__": 2101,
    "kind": "member",
    "name": "_h",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#_h",
    "access": "private",
    "description": null,
    "lineNumber": 160,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2102,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#init",
    "access": "public",
    "description": null,
    "lineNumber": 163,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2103,
    "kind": "member",
    "name": "background",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#background",
    "access": "public",
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2104,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 172,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2105,
    "kind": "method",
    "name": "_ondestroy",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#_ondestroy",
    "access": "private",
    "description": null,
    "lineNumber": 179,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2106,
    "kind": "method",
    "name": "progbarNote",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#progbarNote",
    "access": "public",
    "description": null,
    "lineNumber": 187,
    "undocument": true,
    "params": [
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "percent",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "rgba(255,0,0,0.2)",
        "defaultValue": "rgba(255,0,0,0.2)"
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 700,
        "defaultValue": "700"
      },
      {
        "name": "id",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "msg",
        "defaultValue": "msg"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2107,
    "kind": "method",
    "name": "addNote",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_noteframe.js~NoteFrame#addNote",
    "access": "public",
    "description": null,
    "lineNumber": 218,
    "undocument": true,
    "params": [
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "rgba(255,0,0,0.2)",
        "defaultValue": "rgba(255,0,0,0.2)"
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1200,
        "defaultValue": "1200"
      },
      {
        "name": "tagname",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "note-x",
        "defaultValue": "note-x"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2108,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_noteframe.js~NoteFrame",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~NoteFrame.define",
    "access": "public",
    "description": null,
    "lineNumber": 262,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2109,
    "kind": "function",
    "name": "getNoteFrames",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~getNoteFrames",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{getNoteFrames}",
    "description": null,
    "lineNumber": 268,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2110,
    "kind": "variable",
    "name": "noteframes",
    "memberof": "scripts/ui_noteframe.js",
    "static": true,
    "longname": "scripts/ui_noteframe.js~noteframes",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{noteframes}",
    "description": null,
    "lineNumber": 294,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2111,
    "kind": "function",
    "name": "progbarNote",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~progbarNote",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{progbarNote}",
    "description": null,
    "lineNumber": 296,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "percent",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2112,
    "kind": "function",
    "name": "sendNote",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~sendNote",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{sendNote}",
    "description": null,
    "lineNumber": 309,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "color",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2113,
    "kind": "function",
    "name": "error",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~error",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{error}",
    "description": null,
    "lineNumber": 328,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2114,
    "kind": "function",
    "name": "warning",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~warning",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{warning}",
    "description": null,
    "lineNumber": 332,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2115,
    "kind": "function",
    "name": "message",
    "memberof": "scripts/ui_noteframe.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_noteframe.js~message",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_noteframe.js",
    "importStyle": "{message}",
    "description": null,
    "lineNumber": 336,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "msg",
        "types": [
          "*"
        ]
      },
      {
        "name": "timeout",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1000,
        "defaultValue": "1000"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2116,
    "kind": "file",
    "name": "scripts/ui_table.js",
    "content": "//bind module to global var to get at it in console.\n//\n//note that require has an api for handling circular\n//module refs, in such cases do not use these vars.\n\nimport {Container} from \"./ui.js\";\n\nvar _ui = undefined;\n\nimport * as util from './util.js';\nimport * as vectormath from './util.js';\nimport * as ui_curvewidget from './ui_curvewidget.js';\nimport * as ui_base from './ui_base.js';\nimport * as ui_widgets from './ui_widgets.js';\nimport * as toolprop from './toolprop.js';\n\nlet PropFlags = toolprop.PropFlags;\nlet PropSubTypes = toolprop.PropSubTypes;\n\nlet EnumProperty = toolprop.EnumProperty;\n\nlet Vector2 = vectormath.Vector2,\n  UIBase = ui_base.UIBase,\n  PackFlags = ui_base.PackFlags,\n  PropTypes = toolprop.PropTypes;\n\nexport const SimpleContext = ui_base.SimpleContext;\nexport const DataPathError = ui_base.DataPathError;\n\nvar list = function list(iter) {\n  let ret = [];\n\n  for (let item of iter) {\n    ret.push(item);\n  }\n\n  return ret;\n}\n\nexport class TableRow extends Container {\n  constructor() {\n    super();\n\n    this.dom.remove();\n    this.dom = document.createElement(\"tr\");\n\n    //kind of dumb, but this.dom doesn't live within this element itself, bleh\n    //this.shadow.appendChild(this.dom);\n    this.dom.setAttribute(\"class\", \"containerx\");\n  }\n\n  static define() {return {\n    tagname : \"tablerow-x\"\n  };}\n\n  _add(child) {\n    child.ctx = this.ctx;\n    child.parentWidget = this;\n\n    let td = document.createElement(\"td\");\n    td.appendChild(child);\n\n    this.dom.appendChild(td);\n    child.onadd();\n  }\n};\nUIBase.register(TableRow);\n\nexport class TableFrame extends Container {\n  constructor() {\n    super();\n\n    this.dom = document.createElement(\"table\");\n    this.shadow.appendChild(this.dom);\n    this.dom.setAttribute(\"class\", \"containerx\");\n\n    //this.dom.style[\"display\"] = \"block\";\n  }\n\n  update() {\n    this.style[\"display\"] = \"inline-block\";\n    super.update();\n  }\n\n  _add(child) {\n    child.ctx = this.ctx;\n    child.parentWidget = this;\n    this.dom.appendChild(child);\n    child.onadd();\n  }\n\n  row() {\n    let tr = document.createElement(\"tr\");\n    let cls = \"table-tr\";\n\n    tr.setAttribute(\"class\", cls);\n    this.dom.appendChild(tr);\n    let this2 = this;\n\n    function maketd() {\n      let td = document.createElement(\"td\");\n      tr.appendChild(td);\n\n      td.style[\"margin\"] = tr.style[\"margin\"];\n      td.style[\"padding\"] = tr.style[\"padding\"];\n\n      let container = document.createElement(\"rowframe-x\");\n\n      container.ctx = this2.ctx;\n      container.setAttribute(\"class\", cls);\n      td.setAttribute(\"class\", cls);\n\n      //let div2 = document.createElement(\"div\");\n      //div2.setAttribute(\"class\", cls);\n      //div2.innerHTML = \"sdfsdf\";\n\n      //td.appendChild(div2);\n      td.appendChild(container);\n\n      return container;\n    }\n\n    //hrm wish I could subclass html elements easier\n    let ret = {\n      _tr : tr,\n\n      style : tr.style,\n\n      focus : function(args) {\n        tr.focus(args);\n      },\n\n      blur : function(args) {\n        tr.blur(args);\n      },\n\n      remove : () => {\n        tr.remove();\n      },\n\n      addEventListener : function(type, cb, arg) {\n        tr.addEventListener(type, cb, arg);\n      },\n\n      removeEventListener : function(type, cb, arg) {\n        tr.removeEventListener(type, cb, arg);\n      },\n\n      setAttribute : function(attr, val) {\n        if (attr == \"class\") {\n          cls = val;\n        }\n\n        tr.setAttribute(attr, val);\n      },\n\n      clear : function() {\n        for (let node of list(tr.childNodes)) {\n          tr.removeChild(node);\n        }\n      }\n    };\n\n    function makefunc(f) {\n      ret[f] = function() {\n        let container = maketd();\n\n        container.background = tr.style[\"background-color\"]; //\"rgba(0,0,0,0)\";\n        return container[f].apply(container, arguments);\n      }\n    }\n\n    let _bg = \"\";\n\n    //need to implement proper proxy here!\n    Object.defineProperty(ret, \"tabIndex\", {\n      set : function(f) {\n        tr.tabIndex = f;\n      },\n\n      get : function(f) {\n        return tr.tabIndex;\n      }\n    });\n\n    Object.defineProperty(ret, \"background\", {\n      set : function(bg) {\n        _bg = bg;\n        tr.style[\"background-color\"] = bg;\n\n        for (let node of tr.childNodes) {\n          if (node.childNodes.length > 0) {\n            node.childNodes[0].background = bg;\n            node.style[\"background-color\"] = bg;\n          }\n        }\n      }, get : function() {\n        return _bg;\n      }\n    });\n\n    /*\n    Object.defineProperty(ret, \"class\", {\n      set(bg) {\n        tr.class = bg;\n      }\n    });//*/\n\n    ret.cell = () => {\n      let container = maketd();\n      container.background = tr.style[\"background-color\"];\n      return container;\n    };\n    \n    //makefunc(\"cell\");\n    makefunc(\"label\");\n    makefunc(\"tool\");\n    makefunc(\"prop\");\n    makefunc(\"pathlabel\");\n    makefunc(\"button\");\n    makefunc(\"iconbutton\");\n    makefunc(\"textbox\");\n    makefunc(\"col\");\n    makefunc(\"row\");\n    makefunc(\"table\");\n    makefunc(\"listenum\");\n    makefunc(\"check\");\n\n    return ret;\n  }\n\n  update() {\n    super.update();\n  }\n\n  clear() {\n    super.clear();\n    for (let child of list(this.dom.childNodes)) {\n      child.remove();\n    }\n  }\n\n  static define() {return {\n    tagname : \"tableframe-x\"\n  };}\n}\nUIBase.register(TableFrame);\n\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_table.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2117,
    "kind": "variable",
    "name": "_ui",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~_ui",
    "access": "private",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2118,
    "kind": "variable",
    "name": "PropFlags",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~PropFlags",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2119,
    "kind": "variable",
    "name": "PropSubTypes",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~PropSubTypes",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2120,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2121,
    "kind": "variable",
    "name": "Vector2",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~Vector2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2122,
    "kind": "variable",
    "name": "SimpleContext",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~SimpleContext",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_table.js",
    "importStyle": "{SimpleContext}",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2123,
    "kind": "variable",
    "name": "DataPathError",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~DataPathError",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_table.js",
    "importStyle": "{DataPathError}",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2124,
    "kind": "function",
    "name": "list",
    "memberof": "scripts/ui_table.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_table.js~list",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_table.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "params": [
      {
        "name": "iter",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2125,
    "kind": "class",
    "name": "TableRow",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~TableRow",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_table.js",
    "importStyle": "{TableRow}",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~Container"
    ]
  },
  {
    "__docId__": 2126,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_table.js~TableRow",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableRow#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 41,
    "undocument": true
  },
  {
    "__docId__": 2127,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_table.js~TableRow",
    "static": false,
    "longname": "scripts/ui_table.js~TableRow#dom",
    "access": "public",
    "description": null,
    "lineNumber": 45,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2128,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_table.js~TableRow",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_table.js~TableRow.define",
    "access": "public",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2129,
    "kind": "method",
    "name": "_add",
    "memberof": "scripts/ui_table.js~TableRow",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableRow#_add",
    "access": "private",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2130,
    "kind": "class",
    "name": "TableFrame",
    "memberof": "scripts/ui_table.js",
    "static": true,
    "longname": "scripts/ui_table.js~TableFrame",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_table.js",
    "importStyle": "{TableFrame}",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~Container"
    ]
  },
  {
    "__docId__": 2131,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 70,
    "undocument": true
  },
  {
    "__docId__": 2132,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_table.js~TableFrame",
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#dom",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2133,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#update",
    "access": "public",
    "description": null,
    "lineNumber": 80,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2134,
    "kind": "method",
    "name": "_add",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#_add",
    "access": "private",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [
      {
        "name": "child",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2135,
    "kind": "method",
    "name": "row",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#row",
    "access": "public",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2136,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#update",
    "access": "public",
    "description": null,
    "lineNumber": 232,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2137,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_table.js~TableFrame#clear",
    "access": "public",
    "description": null,
    "lineNumber": 236,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2138,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_table.js~TableFrame",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_table.js~TableFrame.define",
    "access": "public",
    "description": null,
    "lineNumber": 243,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2139,
    "kind": "file",
    "name": "scripts/ui_tabs.js",
    "content": "\"use strict\";\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as events from './events.js';\r\nimport * as ui from './ui.js';\r\n\r\nlet UIBase = ui_base.UIBase, \r\n    PackFlags = ui_base.PackFlags,\r\n    IconSheets = ui_base.IconSheets;\r\n\r\nexport let tab_idgen = 1;\r\nlet debug = false;\r\n\r\nfunction getpx(css) {\r\n  return parseFloat(css.trim().replace(\"px\", \"\"))\r\n}\r\n\r\nexport class TabItem {\r\n  constructor(name, id, tooltip=\"\") {\r\n    this.name = name;\r\n    this.id = id;\r\n    this.tooltip = tooltip;\r\n    \r\n    this.size = [0, 0];\r\n    this.pos = [0, 0];\r\n  }\r\n}\r\n\r\nexport class ModalTabMove extends events.EventHandler {\r\n  constructor(tab, tbar, dom) {\r\n    super();\r\n    \r\n    this.dom = dom;\r\n    this.tab = tab;\r\n    this.tbar = tbar;\r\n    \r\n    this.mpos = undefined;\r\n  }\r\n  \r\n  finish() {\r\n    if (debug) if (debug) console.log(\"finish\");\r\n    \r\n    this.tbar.tool = undefined;\r\n    this.popModal(this.dom);\r\n    this.tbar.update(true);\r\n  }\r\n  \r\n  on_mousedown(e) {\r\n    if (debug) console.log(\"yay\");\r\n    \r\n    this.finish();\r\n  }\r\n  \r\n  on_touchstart(e) {\r\n    this.finish();\r\n  }\r\n  \r\n  on_touchend(e) {\r\n    this.finish();\r\n  }\r\n  \r\n  on_mouseup(e) {\r\n    this.finish();\r\n  }\r\n  \r\n  on_mousemove(e) {\r\n    if (debug) console.log(\"SFSDFSD\");\r\n    return this._on_move(e, e.x, e.y);\r\n  }\r\n  \r\n  on_touchmove(e) {\r\n    if (e.touches.length == 0)\r\n      return;\r\n    \r\n    let x = e.touches[0].pageX;\r\n    let y = e.touches[0].pageY;\r\n    \r\n    return this._on_move(e, x, y);\r\n  }\r\n  \r\n  _on_move(e, x, y) {\r\n    let r = this.tbar.getClientRects()[0];\r\n    let dpi = UIBase.getDPI();\r\n\r\n    if (r === undefined) {\r\n      //element was removed during/before move\r\n      this.finish();\r\n      return;\r\n    }\r\n\r\n    x -= r.x;\r\n    y -= r.y;\r\n    \r\n    let dx, dy;\r\n    \r\n    x *= dpi;\r\n    y *= dpi;\r\n    \r\n    if (this.mpos === undefined) {\r\n      this.mpos = [0, 0];\r\n      dx = dy = 0;\r\n    } else {\r\n      dx = x - this.mpos[0];\r\n      dy = y - this.mpos[1];\r\n    }\r\n    \r\n    if (debug) console.log(x, y, dx, dy);\r\n    \r\n    let tab = this.tab, tbar = this.tbar;\r\n    let axis = tbar.horiz ? 0 : 1;\r\n    \r\n    if (tbar.horiz) {\r\n      tab.pos[0] += dx;\r\n    } else {\r\n      tab.pos[1] += dy;\r\n    }\r\n    \r\n    let ti = tbar.tabs.indexOf(tab);\r\n    let next = ti < tbar.tabs.length-1 ? tbar.tabs[ti+1] : undefined;\r\n    let prev = ti > 0 ? tbar.tabs[ti-1] : undefined;\r\n    \r\n    if (next !== undefined && tab.pos[axis] > next.pos[axis]) {\r\n      tbar.swapTabs(tab, next);\r\n    } else if (prev !== undefined && tab.pos[axis] < prev.pos[axis]+prev.size[axis]*0.5) {\r\n      tbar.swapTabs(tab, prev);\r\n    }\r\n    \r\n    tbar.update(true);\r\n    \r\n    this.mpos[0] = x;\r\n    this.mpos[1] = y;\r\n  }\r\n  \r\n  on_keydown(e) {\r\n    if (debug) console.log(e.keyCode);\r\n    \r\n    switch (e.keyCode) {\r\n      case 27: //escape\r\n      case 32: //space\r\n      case 13: //enter\r\n      case 9: //tab\r\n        this.finish();\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport class TabBar extends UIBase {\r\n  constructor() {\r\n    super();\r\n    \r\n    let style = document.createElement(\"style\");\r\n    let canvas = document.createElement(\"canvas\");\r\n    \r\n    this.tabs = [];\r\n    this.tabs.active = undefined;\r\n    this.tabs.highlight = undefined;\r\n\r\n    this._last_bgcolor = undefined;\r\n\r\n    canvas.style[\"width\"] = \"145px\";\r\n    canvas.style[\"height\"] = \"45px\";\r\n    \r\n    this.r = 5;\r\n    \r\n    this.canvas = canvas;\r\n    this.g = canvas.getContext(\"2d\");\r\n    \r\n    style.textContent = `\r\n    `;\r\n    \r\n    this.shadow.appendChild(style);\r\n    this.shadow.appendChild(canvas);\r\n    \r\n    this._last_dpi = undefined;\r\n    this._last_pos = undefined;\r\n    \r\n    this.horiz = true;\r\n    this.onchange = undefined;\r\n    \r\n    let mx, my;\r\n    \r\n    let do_element = (e) => {\r\n      for (let tab of this.tabs) {\r\n        let ok;\r\n\r\n        if (this.horiz) {\r\n          ok = mx >= tab.pos[0] && mx <= tab.pos[0] + tab.size[0];\r\n        } else {\r\n          ok = my >= tab.pos[1] && my <= tab.pos[1] + tab.size[1];\r\n        }\r\n        \r\n        if (ok && this.tabs.highlight !== tab) {\r\n          this.tabs.highlight = tab;\r\n          this.update(true);\r\n        }\r\n      }\r\n    }\r\n    \r\n    let do_mouse = (e) => {\r\n      let r = this.canvas.getClientRects()[0];\r\n      \r\n      mx = e.x - r.x;\r\n      my = e.y - r.y;\r\n      \r\n      let dpi = this.getDPI();\r\n      \r\n      mx *= dpi;\r\n      my *= dpi;\r\n      \r\n      do_element(e);\r\n    }\r\n    \r\n    let do_touch = (e) => {\r\n      let r = this.canvas.getClientRects()[0];\r\n      \r\n      if (debug) console.log(e.touches);\r\n      \r\n      mx = e.touches[0].pageX - r.x;\r\n      my = e.touches[0].pageY - r.y;\r\n      \r\n      let dpi = this.getDPI();\r\n      \r\n      mx *= dpi;\r\n      my *= dpi;\r\n      \r\n      do_element(e);\r\n    }\r\n    \r\n    this.canvas.addEventListener(\"mousemove\", (e) => {\r\n      if (debug) console.log(\"yay\");\r\n      \r\n      let r = this.canvas.getClientRects()[0];\r\n      do_mouse(e);\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }, false);\r\n    \r\n    this.canvas.addEventListener(\"touchstart\", (e) => {\r\n      if (e.touches.length == 0) {\r\n        return;\r\n      }\r\n      \r\n      do_touch(e);\r\n      \r\n      let ht = this.tabs.highlight;\r\n      \r\n      if (ht !== undefined && this.tool === undefined) {\r\n        this.setActive(ht);\r\n\r\n        let edom = this.getScreen();\r\n        let tool = new ModalTabMove(ht, this, edom);\r\n        this.tool = tool;\r\n        \r\n        tool.pushModal(edom, false);\r\n      }\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }, false);\r\n    \r\n    this.canvas.addEventListener(\"mousedown\", (e) => {\r\n      do_mouse(e);\r\n\r\n      if (debug) console.log(\"mdown\");\r\n\r\n      if (e.button !== 0) {\r\n        return;\r\n      }\r\n      \r\n      let ht = this.tabs.highlight;\r\n      \r\n      if (ht !== undefined && this.tool === undefined) {\r\n        this.setActive(ht);\r\n\r\n        if (this.ctx === undefined) {\r\n          return;\r\n        }\r\n        \r\n        let edom = this.getScreen();\r\n        let tool = new ModalTabMove(ht, this, edom);\r\n        this.tool = tool;\r\n        \r\n        tool.pushModal(edom, false);\r\n      }\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }, false);\r\n  }\r\n  \r\n  getTab(name) {\r\n    for (let tab of this.tabs) {\r\n      if (tab.name === name)\r\n        return tab;\r\n    }\r\n    \r\n    return undefined;\r\n  }\r\n  \r\n  saveData() {\r\n    let taborder = [];\r\n    \r\n    for (let tab of this.tabs) {\r\n      taborder.push(tab.name);\r\n    }\r\n    \r\n    let act = this.tabs.active !== undefined ? this.tabs.active.name : \"null\";\r\n    \r\n    return {\r\n      taborder : taborder,\r\n      active : act\r\n    };\r\n  }\r\n  \r\n  loadData(obj) {\r\n    if (!obj.taborder) {\r\n      return;\r\n    }\r\n    \r\n    let tabs = this.tabs;\r\n    let active = undefined;\r\n    let ntabs = [];\r\n\r\n    ntabs.active = undefined;\r\n    ntabs.highlight = undefined;\r\n\r\n    for (let tname of obj.taborder) {\r\n      let tab = this.getTab(tname);\r\n      \r\n      if (tab === undefined) {\r\n        continue;\r\n      }\r\n      \r\n      if (tab.name === obj.active) {\r\n        active = tab;\r\n      }\r\n      \r\n      ntabs.push(tab);\r\n    }\r\n    \r\n    for (let tab of tabs) {\r\n      if (ntabs.indexOf(tab) < 0) {\r\n        ntabs.push(tab);\r\n      }\r\n    }\r\n\r\n    this.tabs = ntabs;\r\n\r\n    if (active !== undefined) {\r\n      this.setActive(active);\r\n    } else {\r\n      this.setActive(this.tabs[0]);\r\n    }\r\n\r\n    this.update(true);\r\n    \r\n    return this;\r\n  }\r\n  \r\n  static setDefault(e) {\r\n    e.setAttribute(\"bar_pos\", \"top\");\r\n    e.updatePos(true);\r\n    \r\n    return e;\r\n  }\r\n  \r\n  swapTabs(a, b) {\r\n    let tabs = this.tabs;\r\n    \r\n    let ai = tabs.indexOf(a);\r\n    let bi = tabs.indexOf(b);\r\n    \r\n    tabs[ai] = b;\r\n    tabs[bi] = a;\r\n    \r\n    this.update(true);\r\n  }\r\n  \r\n  addTab(name, id, tooltip=\"\") {\r\n    let tab = new TabItem(name, id, tooltip);\r\n    this.tabs.push(tab);\r\n    this.update(true);\r\n    \r\n    if (this.tabs.length == 1) {\r\n      this.setActive(this.tabs[0]);\r\n    }\r\n\r\n    return tab;\r\n  }\r\n  \r\n  updatePos(force_update=false) {\r\n    let pos = this.getAttribute(\"bar_pos\");\r\n    \r\n    if (pos != this._last_pos || force_update) {\r\n      this._last_pos = pos;\r\n      \r\n      this.horiz = pos == \"top\" || pos == \"bottom\";\r\n      if (debug) console.log(\"tab bar position update\", this.horiz);\r\n\r\n      if (this.horiz) {\r\n        this.style[\"width\"] = \"100%\";\r\n        delete this.style[\"height\"];\r\n      } else {\r\n        this.style[\"height\"] = \"100%\";\r\n        delete this.style[\"width\"];\r\n      }\r\n      \r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  updateDPI(force_update=false) {\r\n    let dpi = this.getDPI();\r\n    \r\n    if (dpi !== this._last_dpi) {\r\n      if (debug) console.log(\"DPI update!\");\r\n      this._last_dpi = dpi;\r\n      \r\n      this.updateCanvas(true);\r\n    }\r\n  }\r\n  \r\n  updateCanvas(force_update=false) {\r\n    let canvas = this.canvas;\r\n     \r\n    let dpi = this.getDPI();\r\n    \r\n    let rwidth = getpx(this.canvas.style[\"width\"]);\r\n    let rheight = getpx(this.canvas.style[\"height\"]);\r\n    \r\n    let width = Math.ceil(rwidth*dpi);\r\n    let height = Math.ceil(rheight*dpi);\r\n    \r\n    let update = force_update;\r\n    if (this.horiz) {\r\n      update = update || canvas.width != width;\r\n    } else {\r\n      update = update || canvas.height != height;\r\n    }\r\n    \r\n    if (update) {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      \r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  _layout() {\r\n    let g = this.g;\r\n    \r\n    if (debug) console.log(\"tab layout\");\r\n    \r\n    let dpi = this.getDPI();\r\n    let tsize = this.getDefault(\"TabText\").size*1;\r\n    \r\n    g.font = ui_base.getFont(this, tsize, \"TabText\");\r\n    \r\n    let axis = this.horiz ? 0 : 1;\r\n    \r\n    let pad = 4*dpi + Math.ceil(tsize*dpi*0.25);\r\n    let x = pad;\r\n    let y = 0;\r\n    \r\n    let h = tsize*dpi + Math.ceil(tsize*dpi*0.5);\r\n    \r\n    for (let tab of this.tabs) {\r\n      let w = g.measureText(tab.name).width//*dpi;\r\n      \r\n      //don't interfere with tab dragging\r\n      let bad = this.tool !== undefined && tab === this.tabs.active;\r\n      \r\n      if (!bad) {\r\n        tab.pos[axis] = x;\r\n        tab.pos[axis^1] = y;\r\n      }\r\n      \r\n      //tab.size = [0, 0];\r\n      tab.size[axis] = w+pad*2;\r\n      tab.size[axis^1] = h;\r\n      \r\n      x += w + pad*2;\r\n    }\r\n    \r\n    if (this.horiz) {\r\n      this.canvas.style[\"width\"] = Math.ceil(x/dpi + pad/dpi) + \"px\";\r\n      this.canvas.style[\"height\"] = Math.ceil(h/dpi) + \"px\";\r\n    } else {\r\n      this.canvas.style[\"height\"] = Math.ceil(x/dpi + pad/dpi) + \"px\";\r\n      this.canvas.style[\"width\"] = Math.ceil(h/dpi) + \"px\";\r\n    }\r\n    \r\n    //this.canvas.width = x;\r\n  }\r\n  \r\n  setActive(tab) {\r\n    let update = tab !== this.tabs.active;\r\n    this.tabs.active = tab;\r\n    \r\n    if (update) {\r\n      if (this.onchange)\r\n        this.onchange(tab);\r\n      \r\n      this.update(true);\r\n    }\r\n  }\r\n  \r\n  _redraw() {\r\n    let g = this.g;\r\n    let bgcolor = this.getDefault(\"DefaultPanelBG\");\r\n    \r\n    if (debug) console.log(\"tab draw\");\r\n    \r\n    g.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    \r\n    g.beginPath();\r\n    g.rect(0, 0, this.canvas.width, this.canvas.height);\r\n    g.fillStyle = bgcolor;\r\n    g.fill();\r\n    \r\n    let dpi = this.getDPI();\r\n    let tsize = this.getDefault(\"TabText\").size;\r\n    \r\n    g.font = ui_base.getFont(this, tsize, \"TabText\");\r\n    tsize *= dpi;\r\n    \r\n    g.lineWidth = 2;\r\n    g.strokeStyle = this.getDefault(\"TabStrokeStyle1\");\r\n      \r\n    let r = this.r;\r\n    this._layout();\r\n    let tab;\r\n\r\n    for (tab of this.tabs) {\r\n      if (tab === this.tabs.active)\r\n        continue;\r\n\r\n      let x = tab.pos[0], y = tab.pos[1];\r\n      let w = tab.size[0], h = tab.size[1];\r\n      let tw = g.measureText(tab.name).width;\r\n      \r\n      let x2 = x + (tab.size[this.horiz^1]-tw)*0.5;\r\n      let y2 = y + tsize*1.0;\r\n      \r\n      g.beginPath();\r\n      g.rect(x, y, w, h);\r\n      g.fillStyle = this.getDefault(\"TabInactive\");\r\n      g.fill();\r\n        \r\n      if (tab === this.tabs.highlight) {\r\n        let p = 2;\r\n        \r\n        g.beginPath();\r\n        g.rect(x+p, y+p, w-p*2, h-p*2);\r\n        g.fillStyle = this.getDefault(\"TabHighlight\");\r\n        g.fill();\r\n      }\r\n        \r\n      g.fillStyle = this.getDefault(\"TabText\").color;\r\n      \r\n      if (!this.horiz) {\r\n        let x3 = 0, y3 = y2;\r\n        \r\n        g.save();\r\n        g.translate(x3, y3);\r\n        g.rotate(Math.PI/2);\r\n        g.translate(x3-tsize, -y3-tsize*0.5);\r\n      }\r\n      \r\n      g.fillText(tab.name, x2, y2);\r\n      \r\n      if (!this.horiz) {\r\n        g.restore();\r\n      }\r\n      \r\n      if (tab !== this.tabs[this.tabs.length-1]) {\r\n        g.beginPath();\r\n        g.moveTo(x+w, h-5);\r\n        g.lineTo(x+w, 5);\r\n        g.strokeStyle = this.getDefault(\"TabStrokeStyle2\");\r\n        g.stroke();\r\n      }\r\n    }\r\n    \r\n    let th = tsize;\r\n    \r\n    //draw active tab\r\n    tab = this.tabs.active;\r\n    if (tab === undefined) {\r\n      return;\r\n    } else {\r\n      let x = tab.pos[0], y = tab.pos[1];\r\n      let w = tab.size[0], h = tab.size[1];\r\n      let tw = g.measureText(tab.name).width;\r\n      \r\n      let x2 = x + (tab.size[this.horiz^1]-tw)*0.5;\r\n      let y2 = y + tsize*1.0;\r\n      \r\n      g.beginPath();\r\n      g.rect(x, y, w, h);\r\n      g.fillStyle = bgcolor;\r\n      g.fill();\r\n      \r\n      if (!this.horiz) {\r\n        let x3 = 0, y3 = y2;\r\n        \r\n        g.save();\r\n        g.translate(x3, y3);\r\n        g.rotate(Math.PI/2);\r\n        g.translate(-x3-tsize, -y3-tsize*0.5);\r\n      }\r\n      \r\n      g.fillStyle = this.getDefault(\"TabText\").color;\r\n      g.fillText(tab.name, x2, y2);\r\n\r\n      if (!this.horiz) {\r\n        g.restore();\r\n      }\r\n      \r\n      if (tab === this.tabs.active) {\r\n        /*\r\n        let x = !this.horiz ? tab.y : tab.x;\r\n        let y = !this.horiz ? tab.x : tab.y;\r\n        let w = !this.horiz ? tab.size[1] : tab.size[0];\r\n        let h = !this.horiz ? tab.size[0] : tab.size[1];\r\n        \r\n        if (!this.horiz) {\r\n          //g.save();\r\n          //g.translate(0, y);\r\n          //g.rotate(Math.PI/16);\r\n          //g.translate(0, -y);\r\n        }//*/\r\n        \r\n        g.beginPath();\r\n        if (this.horiz) {\r\n          g.moveTo(0, h);\r\n          g.lineTo(x-r, h);\r\n          g.lineTo(x, h-r);\r\n          g.lineTo(x, r);\r\n          g.lineTo(x+r, 0);\r\n          g.lineTo(x+w-r, 0);\r\n          g.lineTo(x+w, r);\r\n          g.lineTo(x+w, h-r);\r\n          g.lineTo(x+w+r, h);\r\n          g.lineTo(this.canvas.width, h);\r\n        } else {\r\n          g.moveTo(w, 0);\r\n          g.lineTo(w, y-r);\r\n          g.lineTo(w-r, y);\r\n          g.lineTo(r, y);\r\n          g.lineTo(0, y+r);\r\n          g.lineTo(0, y+h-r);\r\n          g.lineTo(r, y+h);\r\n          g.lineTo(w-r, y+h);\r\n          g.lineTo(w, y+h+r);\r\n          \r\n          g.lineTo(w, this.canvas.height);\r\n        }\r\n        \r\n        let cw = this.horiz ? this.canvas.width : this.canvas.height;\r\n        \r\n        g.stroke();\r\n        \r\n\r\n        if (!this.horiz) {\r\n          //g.restore();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updateStyle() {\r\n    if (this._last_bgcolor != this.getDefault(\"DefaultPanelBG\")) {\r\n      this._last_bgcolor = this.getDefault(\"DefaultPanelBG\");\r\n\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  update(force_update=false) {\r\n    super.update();\r\n\r\n    this.updateStyle();\r\n    this.updatePos(force_update);\r\n    this.updateDPI(force_update);\r\n    this.updateCanvas(force_update);\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"tabbar-x\"\r\n  };}\r\n}\r\nUIBase.register(TabBar);\r\n\r\nexport class TabContainer extends UIBase {\r\n  constructor() {\r\n    super();\r\n    \r\n    this.dom = document.createElement(\"ul\");\r\n    this.dom.setAttribute(\"class\", `_tab_ul_${this._id}`);\r\n    \r\n    this.tbar = document.createElement(\"tabbar-x\");\r\n    this.tbar.setAttribute(\"class\", \"_tbar_\" + this._id);\r\n    this.tbar.constructor.setDefault(this.tbar);\r\n    \r\n    this._remakeStyle();\r\n    this.shadow.appendChild(this.dom);\r\n\r\n    this.tabs = {};\r\n    \r\n    this._last_horiz = undefined;\r\n    this._last_bar_pos = undefined;\r\n    this._tab = undefined;\r\n\r\n    let li = document.createElement(\"li\");\r\n    li.setAttribute(\"class\", `_tab_li_${this._id}`);\r\n    li.appendChild(this.tbar);\r\n    this.dom.appendChild(li);\r\n\r\n    this.tbar.onchange = (tab) => {\r\n      if (this._tab) {\r\n        this._tab.remove();\r\n      }\r\n      \r\n      this._tab = this.tabs[tab.id];\r\n      //this._tab = document.createElement(\"div\");\r\n      //this._tab.innerText = \"SDfdsfsdyay\";\r\n      \r\n      let li = document.createElement(\"li\");\r\n      li.style[\"background-color\"] = this.getDefault(\"DefaultPanelBG\");\r\n      li.setAttribute(\"class\", `_tab_li_${this._id}`);\r\n      li.appendChild(this._tab);\r\n      \r\n      //XXX why is this necassary?\r\n      //this._tab.style[\"margin-left\"] = \"40px\";\r\n      this.dom.appendChild(li);\r\n\r\n      if (this.onchange) {\r\n        this.onchange(tab);\r\n      }\r\n    }\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n    this.background = this.getDefault(\"DefaultPanelBG\");\r\n  }\r\n\r\n  static setDefault(e) {\r\n    e.setAttribute(\"bar_pos\", \"top\");\r\n    \r\n    return e;\r\n  }\r\n  \r\n  _remakeStyle() {\r\n    let horiz = this.tbar.horiz;\r\n    let display = \"flex\";\r\n    let flexDir = !horiz ? \"row\" : \"column\";\r\n    let bgcolor = this.__background; //this.getDefault(\"DefaultPanelBG\");\r\n\r\n    //display = \"inline\" //XXX\r\n    let style = document.createElement(\"style\");\r\n    style.textContent = `\r\n      ._tab_ul_${this._id} {\r\n        list-style-type : none;\r\n        display : ${display};\r\n        flex-direction : ${flexDir};\r\n        margin : 0px;\r\n        padding : 0px;\r\n        ${!horiz ? \"vertical-align : top;\" : \"\"}\r\n      }\r\n      \r\n      ._tab_li_${this._id} {\r\n        display : ${display};\r\n        flex-direction : ${flexDir};\r\n        margin : 0px;\r\n        padding : 0px;\r\n        align-self : flex-start;\r\n        ${!horiz ? \"vertical-align : top;\" : \"\"}\r\n      }\r\n      \r\n      ._tbar_${this._id} {\r\n        list-style-type : none;\r\n        align-self : flex-start;\r\n        background-color : ${bgcolor};\r\n        flex-direction : ${flexDir};\r\n        ${!horiz ? \"vertical-align : top;\" : \"\"}\r\n      }\r\n    `;\r\n    \r\n    if (this._style)\r\n      this._style.remove();\r\n    this._style = style;\r\n    \r\n    this.shadow.prepend(style);\r\n  }\r\n\r\n  tab(name, id=undefined, tooltip=undefined) {\r\n    if (id === undefined) {\r\n      id = tab_idgen++;\r\n    }\r\n    \r\n    let col = document.createElement(\"colframe-x\");\r\n\r\n    this.tabs[id] = col;\r\n\r\n    col.ctx = this.ctx;\r\n    col._tab = this.tbar.addTab(name, id, tooltip);\r\n\r\n    //let cls = this.tbar.horiz ? ui.ColumnFrame : ui.RowFrame;\r\n\r\n    col.parentWidget = this;\r\n    col.setCSS();\r\n\r\n    if (this._tab === undefined) {\r\n      this.setActive(col);\r\n    }\r\n\r\n    return col;\r\n  }\r\n\r\n  setActive(tab) {\r\n    this.tbar.setActive(tab._tab);\r\n  }\r\n\r\n  updateBarPos() {\r\n    let barpos = this.getAttribute(\"bar_pos\");\r\n    \r\n    if (barpos !== this._last_bar_pos) {\r\n      console.log(\"position update!\", barpos);\r\n      \r\n      this.horiz = barpos == \"top\" || barpos == \"bottom\";\r\n      this._last_bar_pos = barpos;\r\n      \r\n      this.tbar.setAttribute(\"bar_pos\", barpos);\r\n      this.tbar.update(true);\r\n      this.update();\r\n    }\r\n  }\r\n  \r\n  updateHoriz() {\r\n    let horiz = this.tbar.horiz;\r\n    \r\n    if (this._last_horiz !== horiz) {\r\n      this._last_horiz = horiz;\r\n      this._remakeStyle();\r\n    }\r\n  }\r\n  \r\n  update() {\r\n    super.update();\r\n    \r\n    if (this._tab !== undefined) {\r\n      this._tab.update();\r\n    }\r\n    \r\n    this.updateHoriz();\r\n    this.updateBarPos();\r\n    this.tbar.update();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"tabcontainer-x\"\r\n  };}\r\n}\r\n\r\nUIBase.register(TabContainer);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_tabs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2140,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2141,
    "kind": "variable",
    "name": "tab_idgen",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~tab_idgen",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": "{tab_idgen}",
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2142,
    "kind": "variable",
    "name": "debug",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~debug",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2143,
    "kind": "function",
    "name": "getpx",
    "memberof": "scripts/ui_tabs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_tabs.js~getpx",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "css",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2144,
    "kind": "class",
    "name": "TabItem",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~TabItem",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": "{TabItem}",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2145,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 21,
    "undocument": true
  },
  {
    "__docId__": 2146,
    "kind": "member",
    "name": "name",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#name",
    "access": "public",
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2147,
    "kind": "member",
    "name": "id",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#id",
    "access": "public",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2148,
    "kind": "member",
    "name": "tooltip",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#tooltip",
    "access": "public",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2149,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#size",
    "access": "public",
    "description": null,
    "lineNumber": 26,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 2150,
    "kind": "member",
    "name": "pos",
    "memberof": "scripts/ui_tabs.js~TabItem",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabItem#pos",
    "access": "public",
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 2151,
    "kind": "class",
    "name": "ModalTabMove",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~ModalTabMove",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": "{ModalTabMove}",
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/events.js~events.EventHandler"
    ]
  },
  {
    "__docId__": 2152,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 32,
    "undocument": true
  },
  {
    "__docId__": 2153,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#dom",
    "access": "public",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2154,
    "kind": "member",
    "name": "tab",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#tab",
    "access": "public",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2155,
    "kind": "member",
    "name": "tbar",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#tbar",
    "access": "public",
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2156,
    "kind": "member",
    "name": "mpos",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#mpos",
    "access": "public",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2157,
    "kind": "method",
    "name": "finish",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#finish",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2158,
    "kind": "method",
    "name": "on_mousedown",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_mousedown",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2159,
    "kind": "method",
    "name": "on_touchstart",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_touchstart",
    "access": "public",
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2160,
    "kind": "method",
    "name": "on_touchend",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_touchend",
    "access": "public",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2161,
    "kind": "method",
    "name": "on_mouseup",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_mouseup",
    "access": "public",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2162,
    "kind": "method",
    "name": "on_mousemove",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_mousemove",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2163,
    "kind": "method",
    "name": "on_touchmove",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_touchmove",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2164,
    "kind": "method",
    "name": "_on_move",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#_on_move",
    "access": "private",
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2166,
    "kind": "method",
    "name": "on_keydown",
    "memberof": "scripts/ui_tabs.js~ModalTabMove",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~ModalTabMove#on_keydown",
    "access": "public",
    "description": null,
    "lineNumber": 136,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2167,
    "kind": "class",
    "name": "TabBar",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~TabBar",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": "{TabBar}",
    "description": null,
    "lineNumber": 150,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2168,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 151,
    "undocument": true
  },
  {
    "__docId__": 2169,
    "kind": "member",
    "name": "tabs",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#tabs",
    "access": "public",
    "description": null,
    "lineNumber": 157,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2170,
    "kind": "member",
    "name": "_last_bgcolor",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#_last_bgcolor",
    "access": "private",
    "description": null,
    "lineNumber": 161,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2171,
    "kind": "member",
    "name": "r",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#r",
    "access": "public",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2172,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 168,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2173,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#g",
    "access": "public",
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2174,
    "kind": "member",
    "name": "_last_dpi",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#_last_dpi",
    "access": "private",
    "description": null,
    "lineNumber": 177,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2175,
    "kind": "member",
    "name": "_last_pos",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#_last_pos",
    "access": "private",
    "description": null,
    "lineNumber": 178,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2176,
    "kind": "member",
    "name": "horiz",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#horiz",
    "access": "public",
    "description": null,
    "lineNumber": 180,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2177,
    "kind": "member",
    "name": "onchange",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#onchange",
    "access": "public",
    "description": null,
    "lineNumber": 181,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2178,
    "kind": "member",
    "name": "tool",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#tool",
    "access": "public",
    "description": null,
    "lineNumber": 256,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2180,
    "kind": "method",
    "name": "getTab",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#getTab",
    "access": "public",
    "description": null,
    "lineNumber": 295,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2181,
    "kind": "method",
    "name": "saveData",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#saveData",
    "access": "public",
    "description": null,
    "lineNumber": 304,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"taborder\": *, \"active\": *}"
      ]
    }
  },
  {
    "__docId__": 2182,
    "kind": "method",
    "name": "loadData",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#loadData",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2184,
    "kind": "method",
    "name": "setDefault",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_tabs.js~TabBar.setDefault",
    "access": "public",
    "description": null,
    "lineNumber": 364,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2185,
    "kind": "method",
    "name": "swapTabs",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#swapTabs",
    "access": "public",
    "description": null,
    "lineNumber": 371,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2186,
    "kind": "method",
    "name": "addTab",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#addTab",
    "access": "public",
    "description": null,
    "lineNumber": 383,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "types": [
          "*"
        ]
      },
      {
        "name": "tooltip",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2187,
    "kind": "method",
    "name": "updatePos",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#updatePos",
    "access": "public",
    "description": null,
    "lineNumber": 395,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2190,
    "kind": "method",
    "name": "updateDPI",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#updateDPI",
    "access": "public",
    "description": null,
    "lineNumber": 416,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2192,
    "kind": "method",
    "name": "updateCanvas",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#updateCanvas",
    "access": "public",
    "description": null,
    "lineNumber": 427,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2193,
    "kind": "method",
    "name": "_layout",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#_layout",
    "access": "private",
    "description": null,
    "lineNumber": 453,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2194,
    "kind": "method",
    "name": "setActive",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#setActive",
    "access": "public",
    "description": null,
    "lineNumber": 500,
    "undocument": true,
    "params": [
      {
        "name": "tab",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2195,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 512,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2196,
    "kind": "method",
    "name": "updateStyle",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#updateStyle",
    "access": "public",
    "description": null,
    "lineNumber": 676,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2198,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabBar#update",
    "access": "public",
    "description": null,
    "lineNumber": 684,
    "undocument": true,
    "params": [
      {
        "name": "force_update",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": false,
        "defaultValue": "false"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2199,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_tabs.js~TabBar",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_tabs.js~TabBar.define",
    "access": "public",
    "description": null,
    "lineNumber": 693,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2200,
    "kind": "class",
    "name": "TabContainer",
    "memberof": "scripts/ui_tabs.js",
    "static": true,
    "longname": "scripts/ui_tabs.js~TabContainer",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_tabs.js",
    "importStyle": "{TabContainer}",
    "description": null,
    "lineNumber": 699,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2201,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 700,
    "undocument": true
  },
  {
    "__docId__": 2202,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#dom",
    "access": "public",
    "description": null,
    "lineNumber": 703,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2203,
    "kind": "member",
    "name": "tbar",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#tbar",
    "access": "public",
    "description": null,
    "lineNumber": 706,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2204,
    "kind": "member",
    "name": "tabs",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#tabs",
    "access": "public",
    "description": null,
    "lineNumber": 713,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 2205,
    "kind": "member",
    "name": "_last_horiz",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#_last_horiz",
    "access": "private",
    "description": null,
    "lineNumber": 715,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2206,
    "kind": "member",
    "name": "_last_bar_pos",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#_last_bar_pos",
    "access": "private",
    "description": null,
    "lineNumber": 716,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2207,
    "kind": "member",
    "name": "_tab",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#_tab",
    "access": "private",
    "description": null,
    "lineNumber": 717,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2209,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#init",
    "access": "public",
    "description": null,
    "lineNumber": 748,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2210,
    "kind": "member",
    "name": "background",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#background",
    "access": "public",
    "description": null,
    "lineNumber": 750,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2211,
    "kind": "method",
    "name": "setDefault",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_tabs.js~TabContainer.setDefault",
    "access": "public",
    "description": null,
    "lineNumber": 753,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2212,
    "kind": "method",
    "name": "_remakeStyle",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#_remakeStyle",
    "access": "private",
    "description": null,
    "lineNumber": 759,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2213,
    "kind": "member",
    "name": "_style",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#_style",
    "access": "private",
    "description": null,
    "lineNumber": 797,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2214,
    "kind": "method",
    "name": "tab",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#tab",
    "access": "public",
    "description": null,
    "lineNumber": 802,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "id",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      },
      {
        "name": "tooltip",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2215,
    "kind": "method",
    "name": "setActive",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#setActive",
    "access": "public",
    "description": null,
    "lineNumber": 826,
    "undocument": true,
    "params": [
      {
        "name": "tab",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2216,
    "kind": "method",
    "name": "updateBarPos",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#updateBarPos",
    "access": "public",
    "description": null,
    "lineNumber": 830,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2217,
    "kind": "member",
    "name": "horiz",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#horiz",
    "access": "public",
    "description": null,
    "lineNumber": 836,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2219,
    "kind": "method",
    "name": "updateHoriz",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#updateHoriz",
    "access": "public",
    "description": null,
    "lineNumber": 845,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2221,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_tabs.js~TabContainer#update",
    "access": "public",
    "description": null,
    "lineNumber": 854,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2222,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_tabs.js~TabContainer",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_tabs.js~TabContainer.define",
    "access": "public",
    "description": null,
    "lineNumber": 866,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2223,
    "kind": "file",
    "name": "scripts/ui_theme.js",
    "content": "import * as util from \"./util.js\";\r\nimport {Vector3, Vector4} from './vectormath.js';\r\n\r\nexport function parsepx(css) {\r\n  return parseFloat(css.trim().replace(\"px\", \"\"))\r\n}\r\n\r\nexport function color2css(c, alpha_override) {\r\n  let r = ~~(c[0]*255);\r\n  let g = ~~(c[1]*255);\r\n  let b = ~~(c[2]*255);\r\n  let a = c.length < 4 ? 1.0 : c[3];\r\n\r\n  a = alpha_override !== undefined ? alpha_override : a;\r\n\r\n  if (c.length == 3 && alpha_override === undefined) {\r\n    return `rgb(${r},${g},${b})`;\r\n  } else {\r\n    return `rgba(${r},${g},${b}, ${a})`;\r\n  }\r\n}\r\nwindow.color2css = color2css;\r\n\r\nlet css2color_rets = util.cachering.fromConstructor(Vector4, 64);\r\nlet cmap = {\r\n  red : [1, 0, 0, 1],\r\n  green : [0, 1, 0, 1],\r\n  blue : [0, 0, 1, 1],\r\n  yellow : [1, 1, 0, 1],\r\n  white : [1, 1, 1, 1],\r\n  black : [0, 0, 0, 1],\r\n  grey : [0.7, 0.7, 0.7, 1],\r\n  teal : [0, 1, 1, 1],\r\n  orange : [1,0.55,0.25,1],\r\n  brown  : [0.7, 0.4, 0.3, 1]\r\n};\r\n\r\nexport function css2color(color) {\r\n  let ret = css2color_rets.next();\r\n\r\n  if (color in cmap) {\r\n    return ret.load(cmap[color]);\r\n  }\r\n\r\n  color = color.replace(\"rgba\", \"\").replace(\"rgb\", \"\").replace(/[\\(\\)]/g, \"\").trim().split(\",\")\r\n\r\n  for (let i=0; i<color.length; i++) {\r\n    ret[i] = parseFloat(color[i]);\r\n    if (i < 3) {\r\n      ret[i] /= 255;\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nwindow.css2color = css2color\r\n\r\n\r\nexport class CSSFont {\r\n  constructor(args) {\r\n    this.size = args.size;\r\n    this.font = args.font;\r\n    this.style = args.style !== undefined ? args.style : \"normal\";\r\n    this.weight = args.weight !== undefined ? args.weight : \"normal\";\r\n    this.variant = args.variant !== undefined ? args.variant : \"normal\";\r\n    this.color = args.color;\r\n  }\r\n\r\n  copyTo(b) {\r\n    b.size = this.size;\r\n    b.font = this.font;\r\n    b.style = this.style;\r\n    b.color = this.color;\r\n  }\r\n\r\n  copy() {\r\n    return new CSSFont(this);\r\n  }\r\n\r\n  genCSS(size=this.size) {\r\n    return `${this.style} ${this.variant} ${this.weight} ${size}px ${this.font}`;\r\n  }\r\n\r\n  hash() {\r\n    return this.genCSS + \":\" + this.size + \":\" + this.color;\r\n  }\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_theme.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2224,
    "kind": "function",
    "name": "parsepx",
    "memberof": "scripts/ui_theme.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_theme.js~parsepx",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": "{parsepx}",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "params": [
      {
        "name": "css",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2225,
    "kind": "function",
    "name": "color2css",
    "memberof": "scripts/ui_theme.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_theme.js~color2css",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": "{color2css}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "c",
        "types": [
          "*"
        ]
      },
      {
        "name": "alpha_override",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2226,
    "kind": "variable",
    "name": "css2color_rets",
    "memberof": "scripts/ui_theme.js",
    "static": true,
    "longname": "scripts/ui_theme.js~css2color_rets",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2227,
    "kind": "variable",
    "name": "cmap",
    "memberof": "scripts/ui_theme.js",
    "static": true,
    "longname": "scripts/ui_theme.js~cmap",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "{\"red\": *, \"green\": *, \"blue\": *, \"yellow\": *, \"white\": *, \"black\": *, \"grey\": *, \"teal\": *, \"orange\": *, \"brown\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2228,
    "kind": "function",
    "name": "css2color",
    "memberof": "scripts/ui_theme.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_theme.js~css2color",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": "{css2color}",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "color",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2229,
    "kind": "class",
    "name": "CSSFont",
    "memberof": "scripts/ui_theme.js",
    "static": true,
    "longname": "scripts/ui_theme.js~CSSFont",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_theme.js",
    "importStyle": "{CSSFont}",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2230,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true
  },
  {
    "__docId__": 2231,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#size",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2232,
    "kind": "member",
    "name": "font",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#font",
    "access": "public",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2233,
    "kind": "member",
    "name": "style",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#style",
    "access": "public",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2234,
    "kind": "member",
    "name": "weight",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#weight",
    "access": "public",
    "description": null,
    "lineNumber": 65,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2235,
    "kind": "member",
    "name": "variant",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#variant",
    "access": "public",
    "description": null,
    "lineNumber": 66,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2236,
    "kind": "member",
    "name": "color",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#color",
    "access": "public",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2237,
    "kind": "method",
    "name": "copyTo",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#copyTo",
    "access": "public",
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2238,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#copy",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2239,
    "kind": "method",
    "name": "genCSS",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#genCSS",
    "access": "public",
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2240,
    "kind": "method",
    "name": "hash",
    "memberof": "scripts/ui_theme.js~CSSFont",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_theme.js~CSSFont#hash",
    "access": "public",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2241,
    "kind": "file",
    "name": "scripts/ui_widgets.js",
    "content": "\"use strict\";\r\n\r\nimport * as util from './util.js';\r\nimport * as vectormath from './vectormath.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as events from './events.js';\r\nimport * as simple_toolsys from './simple_toolsys.js';\r\nimport * as toolprop from './toolprop.js';\r\nimport {DataPathError} from './simple_controller.js';\r\nimport {Vector3, Vector4, Quat, Matrix4} from './vectormath.js';\r\n\r\nlet keymap = events.keymap;\r\n\r\nlet EnumProperty = toolprop.EnumProperty,\r\n    PropTypes = toolprop.PropTypes;\r\n\r\nlet UIBase = ui_base.UIBase, \r\n    PackFlags = ui_base.PackFlags,\r\n    IconSheets = ui_base.IconSheets;\r\n\r\nlet parsepx = ui_base.parsepx;\r\n\r\n//use .setAttribute(\"linear\") to disable nonlinear sliding\r\nexport class Button extends UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    let dpi = this.getDPI();\r\n\r\n    this._last_update_key = \"\";\r\n\r\n    this._name = \"\";\r\n    this._namePad = undefined;\r\n\r\n    this._last_w = 0;\r\n    this._last_h = 0;\r\n\r\n    this._last_dpi = dpi;\r\n\r\n    this._lastw = undefined;\r\n    this._lasth = undefined;\r\n\r\n    this.dom = document.createElement(\"canvas\");\r\n    this.g = this.dom.getContext(\"2d\");\r\n\r\n    this.dom.setAttribute(\"class\", \"canvas1\");\r\n    this.dom.tabIndex = 0;\r\n\r\n    this._last_bg = undefined;\r\n\r\n    this.addEventListener(\"keydown\", (e) => {\r\n      if (this.disabled) return;\r\n\r\n      console.log(e.keyCode);\r\n\r\n      switch (e.keyCode) {\r\n        case 27: //escape\r\n          this.blur();\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          break;\r\n        case 32: //spacebar\r\n        case 13: //enter\r\n          this.click();\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          break;\r\n      }\r\n    });\r\n\r\n    this.addEventListener(\"focusin\", () => {\r\n      if (this.disabled) return;\r\n\r\n      this._focus = 1;\r\n      this._redraw();\r\n      this.focus();\r\n      //console.log(\"focus2\");\r\n    });\r\n\r\n    this.addEventListener(\"blur\", () => {\r\n      if (this.disabled) return;\r\n\r\n      this._focus = 0;\r\n      this._redraw();\r\n      //console.log(\"blur2\");\r\n    });\r\n\r\n    this._last_disabled = false;\r\n    this._auto_depress = true;\r\n\r\n    let style = document.createElement(\"style\");\r\n    style.textContent = `.canvas1 {\r\n      -moz-user-focus: normal;\r\n      moz-user-focus: normal;\r\n      user-focus: normal;\r\n      padding : 0px;\r\n      margin : 0px;\r\n    }\r\n    `;\r\n\r\n    this.shadow.appendChild(style);\r\n    let form = this._div = document.createElement(\"div\");\r\n\r\n    form.style[\"tabindex\"] = 4;\r\n    form.tabIndex = 4;\r\n    form.setAttribute(\"type\", \"hidden\");\r\n    form.type =\"hidden\";\r\n    form.style[\"-moz-user-focus\"] = \"normal\";\r\n    form.setAttribute(\"class\", \"canvas1\");\r\n    form.style[\"padding\"] = form.style[\"margin\"] = \"0px\";\r\n\r\n    form.appendChild(this.dom);\r\n\r\n    this.shadow.appendChild(form);\r\n  }\r\n\r\n  get tabIndex() {\r\n    return this._div.tabIndex;\r\n  }\r\n\r\n  set tabIndex(val) {\r\n    this._div.tabIndex = val;\r\n  }\r\n\r\n  get boxpad() {\r\n    throw new Error(\"Button.boxpad is deprecated\");\r\n    return this.getDefault(\"BoxMargin\");\r\n  }\r\n\r\n  click() {\r\n    if (this._onpress) {\r\n      let rect = this.getClientRects();\r\n      let x = rect.x + rect.width*0.5;\r\n      let y = rect.y + rect.height*0.5;\r\n\r\n      let e = {x : x, y : y, stopPropagation : () => {}, preventDefault : () => {}};\r\n\r\n      this._onpress(e);\r\n    }\r\n\r\n    super.click();\r\n  }\r\n  set boxpad(val) {\r\n      throw new Error(\"Deprecated call to Button.boxpad setter\");\r\n\r\n    //console.warn(\"Deprecated call to Button.boxpad setter\");\r\n    //this.overrideDefault(\"BoxMargin\", val);\r\n  }\r\n\r\n  init() {\r\n    let dpi = this.getDPI();\r\n\r\n    //set default dimensions\r\n    let width = ~~(this.getDefault(\"defaultWidth\"));\r\n    let height = ~~(this.getDefault(\"defaultHeight\"));\r\n    \r\n    this.dom.style[\"width\"] = width + \"px\";\r\n    this.dom.style[\"height\"] = height + \"px\";\r\n    this.dom.style[\"padding\"] = this.dom.style[\"margin\"] = \"0px\";\r\n\r\n    this.dom.width = Math.ceil(width*dpi); //parsepx(this.dom.style[\"width\"])*dpi;\r\n    this.dom.height = Math.ceil(parsepx(this.dom.style[\"height\"])*dpi);\r\n\r\n    this._name = undefined;\r\n    this.updateName();\r\n\r\n    this.bindEvents();\r\n    this._redraw();\r\n  }\r\n  \r\n  setAttribute(key, val) {\r\n    super.setAttribute(key, val);\r\n    \r\n    if (key == \"name\") {\r\n      this.updateName();\r\n      this.updateWidth();\r\n    }\r\n  }\r\n\r\n  get r() {\r\n    return this.getDefault(\"BoxRadius\");\r\n  }\r\n\r\n  set r(val) {\r\n    this.overrideDefault(\"BoxRadius\", val);\r\n  }\r\n\r\n  bindEvents() {\r\n    let press_gen = 0;\r\n\r\n    let press = (e) => {\r\n        console.log(\"button press\", this._pressed);\r\n\r\n        if (this.disabled) return;\r\n        if (this._pressed) return;\r\n\r\n        this._pressed = true;\r\n\r\n        if (this._onpress) {\r\n          this._onpress(this);\r\n        }\r\n        \r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n    \r\n    let depress = (e) => {\r\n        console.log(\"button depress\");\r\n\r\n        if (this._auto_depress) {\r\n          this._pressed = false;\r\n\r\n          if (this.disabled) return;\r\n\r\n          this._redraw();\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        if (e.type == \"mouseup\" && e.button) {\r\n          return;\r\n        }\r\n\r\n        if (e.type.startsWith(\"touch\") && this.onclick) {\r\n          this.onclick(this);\r\n        }\r\n    }\r\n    \r\n    this.addEventListener(\"mousedown\", press, {captured : true, passive : false});\r\n\r\n    this.addEventListener(\"touchstart\", press, {captured : true, passive : false});\r\n    this.addEventListener(\"touchend\", depress);\r\n    this.addEventListener(\"touchcancel\", depress);\r\n\r\n    this.addEventListener(\"mouseup\", depress);\r\n\r\n    this.addEventListener(\"mouseover\", (e) => {\r\n      if (this.disabled)\r\n        return;\r\n      \r\n      this._highlight = true;\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    })\r\n    \r\n    this.addEventListener(\"mouseout\", (e) => {\r\n      if (this.disabled)\r\n        return;\r\n      \r\n      this._highlight = false;\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    })\r\n  }\r\n\r\n  updateDisabled() {\r\n    if (this._last_disabled != this.disabled) {\r\n      this._last_disabled = this.disabled;\r\n\r\n      //setTimeout(() => {\r\n        this.dom._background = this.getDefault(\"BoxBG\");\r\n\r\n        this._repos_canvas();\r\n        this._redraw();\r\n        console.log(\"disabled update!\", this.disabled, this.style[\"background-color\"]);\r\n      //}, 100);\r\n    }\r\n  }\r\n\r\n  updateDefaultSize() {\r\n    let width = ~~(this.getDefault(\"defaultWidth\"));\r\n    let height = ~~(this.getDefault(\"defaultHeight\"));\r\n\r\n    let size = this.getDefault(\"DefaultText\").size;\r\n    size *= 1.33;\r\n\r\n    height = ~~Math.max(height, size);\r\n    height = height + \"px\";\r\n\r\n    if (height !== this.style[\"height\"]) {\r\n      this.style[\"height\"] = height;\r\n      this.dom.style[\"height\"] = height;\r\n    }\r\n\r\n    return; //XXX\r\n    if (width !== this._last_w || height !== this._last_h) {\r\n      console.log(\"update default width\");\r\n\r\n      this._last_w = width;\r\n      this._last_h = height;\r\n\r\n      let dpi = this.getDPI();\r\n\r\n      this.dom.style[\"width\"] = width + \"px\";\r\n      this.dom.style[\"height\"] = height + \"px\";\r\n\r\n      this.dom.width = Math.ceil(width*dpi); //parsepx(this.dom.style[\"width\"])*dpi;\r\n      this.dom.height = Math.ceil(parsepx(this.dom.style[\"height\"])*dpi);\r\n\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  _calcUpdateKey() {\r\n    let ret = this.getDefault(\"BoxBG\") + \":\" + this.getDefault(\"BoxHighlight\") + \":\";\r\n    ret += this.style[\"background-color\"] + \":\";\r\n    ret += this.getDefault(\"BoxRadius\") + \":\" + this.getDefault(\"BoxMargin\") + \":\";\r\n    ret += this.getAttribute(\"name\") + \":\";\r\n\r\n    return ret;\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n\r\n    if (this.description !== undefined && this.title != this.description) {\r\n      this.title = this.description;\r\n    }\r\n\r\n    this.updateDefaultSize();\r\n    this.updateWidth();\r\n    this.updateDPI();\r\n    this.updateName();\r\n    this.updateDisabled();\r\n\r\n    if (this.background !== this._last_bg) {\r\n      this._last_bg = this.background;\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n\r\n    let key = this._calcUpdateKey();\r\n    if (key !== this._last_update_key) {\r\n      this._last_update_key = key;\r\n\r\n      this.setCSS();\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  setCSS() {\r\n    super.setCSS();\r\n\r\n    let name = this._name;\r\n    if (name === undefined) {\r\n      return;\r\n    }\r\n\r\n    let dpi = this.getDPI();\r\n\r\n    let ts = this.getDefault(\"DefaultText\").size;\r\n    let tw = ui_base.measureText(this, this._genLabel()).width/dpi + 8;\r\n\r\n    if (this._namePad !== undefined) {\r\n      tw += this._namePad;\r\n    }\r\n\r\n    let w = this.getDefault(\"numslider_width\") / dpi;\r\n\r\n    w = Math.max(w, tw);\r\n    w = ~~w;\r\n    this.dom.style[\"width\"] = w+\"px\";\r\n  }\r\n\r\n  updateName() {\r\n    let name = this.getAttribute(\"name\");\r\n    \r\n    if (name !== this._name) {\r\n      this._name = name;\r\n\r\n      this.setCSS();\r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  updateWidth(w_add=0) {\r\n    return;\r\n    let dpi = this.getDPI();\r\n    \r\n    let pack = this.packflag;\r\n    \r\n    if (this.parentNode !== undefined && (this.packflag & PackFlags.INHERIT_WIDTH)) {\r\n      let p = this.parentNode;\r\n      \r\n      if (this._lastw != p.clientWidth + w_add) {\r\n        //console.log(p.clientWidth+w_add);\r\n        \r\n        this.dom.style[\"width\"] = Math.ceil(p.clientWidth+w_add) + \"px\";\r\n        this._lastw = p.clientWidth + w_add;\r\n        \r\n        this._repos_canvas();\r\n      }\r\n    }\r\n  }\r\n  \r\n  _repos_canvas() {\r\n    let dpi = this.getDPI();\r\n\r\n    this.dom.width = Math.floor(0.5+parsepx(this.dom.style[\"width\"])*dpi);\r\n    this.dom.height = Math.floor(0.5+parsepx(this.dom.style[\"height\"])*dpi);\r\n  }\r\n  \r\n  updateDPI() {\r\n    let dpi = this.getDPI();\r\n    \r\n    if (this._last_dpi != dpi) {\r\n      //console.log(\"update dpi\", dpi);\r\n      \r\n      this._last_dpi = dpi;\r\n      \r\n      this.g.font = undefined; //reset font\r\n\r\n      this.setCSS();\r\n      this._repos_canvas();        \r\n      this._redraw();\r\n    }\r\n    \r\n    if (this.style[\"background-color\"]) {\r\n      this.dom._background = this.style[\"background-color\"];\r\n      this.style[\"background-color\"] = \"\";\r\n    }\r\n    \r\n    //console.log(\">\", this.dom.style[\"background-color\"], \"-----\");\r\n    //console.log(\"width:\", this.clientWidth)\r\n  }\r\n  \r\n  _genLabel() {\r\n    let text = \"\" + this._name;\r\n    \r\n    return text;\r\n  }\r\n  \r\n  _redraw(draw_text=true) {\r\n    //console.log(\"button draw\");\r\n    \r\n    let dpi = this.getDPI();\r\n    if (this._highlight) {\r\n      this.dom._background = this.getDefault(\"BoxHighlight\");\r\n    } else if (this._pressed) {\r\n      this.dom._background = this.getDefault(\"BoxDepressed\");\r\n    } else {\r\n      this.dom._background = this.getDefault(\"BoxBG\");\r\n    }\r\n\r\n    ui_base.drawRoundBox(this, this.dom, this.g);\r\n    \r\n    if (this._focus) {\r\n      let w = this.dom.width, h = this.dom.height;\r\n      let p = 1/dpi;\r\n      \r\n      //XXX remove this.g.translate lines after refactoring drawRoundBox, see comment in ui_base.js\r\n      this.g.translate(p, p);\r\n      let lw = this.g.lineWidth;\r\n      this.g.lineWidth = 2*dpi;\r\n      ui_base.drawRoundBox(this, this.dom, this.g, w-p*2, h-p*2, this.r, \"stroke\", this.getDefault(\"BoxHighlight\"));\r\n      this.g.lineWidth = lw;\r\n      this.g.translate(-p, -p);       \r\n    }\r\n    \r\n    if (draw_text) {\r\n      this._draw_text();\r\n    }\r\n  }\r\n  \r\n  _draw_text() {\r\n    let dpi = this.getDPI();\r\n    \r\n    let pad = this.getDefault(\"BoxMargin\") * dpi;\r\n    let ts = this.getDefault(\"DefaultText\").size;\r\n    \r\n    let text = this._genLabel();\r\n    \r\n    //console.log(text, \"text\", this._name);\r\n    \r\n    let tw = ui_base.measureText(this, text).width;\r\n    let cx = (this.dom.width - tw)*0.5;\r\n    let cy = ts*dpi;\r\n\r\n    let g = this.g;\r\n    ui_base.drawText(this, ~~cx, ~~cy, text, this.dom, g);\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"button-x\",\r\n    style : \"button\"\r\n  };}\r\n}\r\nUIBase.register(Button);\r\n\r\nexport class ValueButtonBase extends Button {\r\n  constructor() {\r\n    super();\r\n  }\r\n  \r\n  get value() {\r\n    return this._value;\r\n  }\r\n  \r\n  set value(val) {\r\n    this._value = val;\r\n    \r\n    if (this.ctx && this.hasAttribute(\"datapath\")) {\r\n      this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), this._value);\r\n    }\r\n  }\r\n  \r\n  updateDataPath() {\r\n    if (!this.hasAttribute(\"datapath\")) return;\r\n    if (this.ctx === undefined) return;\r\n    \r\n    let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\r\n    let val =  this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\r\n\r\n    if (val === undefined) {\r\n      this.disabled = true;\r\n      return;\r\n    } else {\r\n      if (this.disabled) {\r\n        this._redraw();\r\n      }\r\n\r\n      this.disabled = false;\r\n    }\r\n\r\n    if (val != this._value) {\r\n      this._value = val;\r\n      this.updateWidth();\r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  update() {\r\n    this.updateDataPath();\r\n    \r\n    super.update();\r\n  }\r\n}\r\n\r\n//use .setAttribute(\"linear\") to disable nonlinear sliding\r\nexport class NumSlider extends ValueButtonBase {\r\n  constructor() {\r\n    super();\r\n      \r\n    this._name = \"\";\r\n    this._step = 0.1;\r\n    this._value = 0.0;\r\n\r\n    this._redraw();\r\n  }\r\n  \r\n  swapWithTextbox() {\r\n    let tbox = document.createElement(\"textbox-x\");\r\n    tbox.text = this.value.toFixed(5);\r\n    tbox.select();\r\n    \r\n    this.parentNode.insertBefore(tbox, this);\r\n    //this.remove();\r\n    this.hidden = true;\r\n    //this.dom.hidden = true;\r\n    \r\n    let finish = (ok) => {\r\n      tbox.remove();\r\n      this.hidden = false;\r\n      \r\n      if (ok) {\r\n        let val = parseFloat(tbox.text);\r\n        \r\n        if (isNaN(val)) {\r\n          console.log(\"EEK!\");\r\n          this.flash(ui_base.ErrorColors.ERROR);\r\n        } else {\r\n          this.setValue(val);\r\n          \r\n          if (this.onchange) {\r\n            this.onchange(this);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    tbox.addEventListener(\"keydown\", (e) => {\r\n      console.log(e.keyCode);\r\n      switch (e.keyCode) {\r\n        case 27: //escape\r\n          finish(false);\r\n          break;\r\n        case 13: //enter\r\n          finish(true);\r\n          break;\r\n      }\r\n    });\r\n    \r\n    tbox.focus();\r\n    \r\n    //this.shadow.appendChild(tbox);\r\n    return;\r\n  }\r\n  \r\n  bindEvents() {\r\n    let onmousedown = (e) => {\r\n      if (this.disabled) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        return;\r\n      }\r\n      \r\n      if (e.button == 0 && e.shiftKey) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        this.swapWithTextbox();\r\n      } else if (e.button == 0) {\r\n        this.dragStart(e);\r\n        \r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n    }\r\n    \r\n    this.addEventListener(\"dblclick\", (e) => {\r\n      if (this.disabled) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        return;\r\n      }\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      this.swapWithTextbox();\r\n    });\r\n    \r\n    this.addEventListener(\"mousedown\", (e) => {\r\n      if (this.disabled) return;\r\n      onmousedown(e);\r\n    });\r\n    \r\n    this.addEventListener(\"touchstart\", (e) => {\r\n      if (this.disabled) return;\r\n      console.log(e)\r\n      \r\n      e.x = e.touches[0].screenX;\r\n      e.y = e.touches[0].screenY;\r\n      \r\n      this.dragStart(e);\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }, {passive : false});\r\n    \r\n    //this.addEventListener(\"touchstart\", (e) => {\r\n    //  console.log(e);\r\n    //});\r\n    \r\n    this.addEventListener(\"mouseover\", (e) => {\r\n      if (this.disabled) return;\r\n      \r\n      this.dom._background = this.getDefault(\"BoxHighlight\");\r\n      this._repos_canvas();\r\n      this._redraw();\r\n      //console.log(\"mouse enter\");\r\n    })\r\n    \r\n    this.addEventListener(\"mouseout\", (e) => {\r\n      if (this.disabled) return;\r\n\r\n      this.dom._background = this.getDefault(\"BoxBG\");\r\n      this._repos_canvas();\r\n      this._redraw();\r\n      //console.log(\"mouse leave!\");\r\n    })\r\n  }\r\n  \r\n  doRange() {\r\n    if (this.hasAttribute(\"min\")) {\r\n      let min = this.getAttribute(\"min\");\r\n      this.value = Math.max(this.value, min);\r\n    }\r\n    \r\n    if (this.hasAttribute(\"max\")) {\r\n      let max = this.getAttribute(\"max\");\r\n      this.value = Math.min(this.value, max);\r\n    }\r\n  }\r\n  \r\n  setValue(value, fire_onchange=true) {\r\n    this.value = value;\r\n    this.doRange();\r\n\r\n    if (this.hasAttribute(\"is_int\"))\r\n      this.value = Math.floor(this.value);\r\n\r\n    if (fire_onchange && this.onchange) {\r\n      this.onchange(this.value);\r\n    }\r\n    \r\n    this._redraw();\r\n  }\r\n  \r\n  dragStart(e) {\r\n    if (this.disabled) return;\r\n\r\n    let last_background = this.dom._background;\r\n    let cancel;\r\n    \r\n    let startvalue = this.value;\r\n    let value = startvalue;\r\n    \r\n    let startx = e.x, starty = e.y;\r\n    \r\n    this.dom._background = this.getDefault(\"BoxDepressed\");\r\n    let fire = () => {\r\n      if (this.onchange) {\r\n        this.onchange(this);\r\n      }\r\n    }\r\n\r\n\r\n    let handlers = {\r\n      on_keydown: (e) => {\r\n        switch (e.keyCode) {\r\n          case 27: //escape key\r\n            cancel(true);\r\n          case 13: //enter key\r\n            cancel(false);\r\n            break;\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      },\r\n\r\n      on_mousemove: (e) => {\r\n        if (this.disabled) return;\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        let dx = e.x - startx;\r\n        startx = e.x;\r\n\r\n        if (e.shiftKey) {\r\n          dx *= 0.1;\r\n        }\r\n\r\n        value += dx * this._step * 0.1;\r\n\r\n        let dvalue = value - startvalue;\r\n        let dsign = Math.sign(dvalue);\r\n\r\n        if (!this.hasAttribute(\"linear\")) {\r\n          dvalue = Math.pow(Math.abs(dvalue), 1.333) * dsign;\r\n        }\r\n\r\n        this.value = startvalue + dvalue;\r\n        this.doRange();\r\n\r\n        /*\r\n        if (e.shiftKey) {\r\n          dx *= 0.1;\r\n          this.value = startvalue2 + dx*0.1*this._step;\r\n          startvalue3 = this.value;\r\n        } else {\r\n          startvalue2 = this.value;\r\n          this.value = startvalue3 + dx*0.1*this._step;\r\n        }*/\r\n\r\n        this.updateWidth();\r\n        this._redraw();\r\n        fire();\r\n      },\r\n\r\n      on_mouseup: (e) => {\r\n        cancel(false);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      },\r\n\r\n      on_mouseout: (e) => {\r\n        console.log(\"leave\");\r\n        last_background = this.getDefault(\"BoxBG\");\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      },\r\n\r\n      on_mouseover: (e) => {\r\n        console.log(\"over\");\r\n        last_background = this.getDefault(\"BoxHighlight\");\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      },\r\n\r\n      on_mousedown : (e) => {\r\n        this.popModal();\r\n      },\r\n    };\r\n    \r\n    //events.pushModal(this.getScreen(), handlers);\r\n    this.pushModal(handlers);\r\n\r\n    cancel = (restore_value) => {\r\n      if (restore_value) {\r\n        this.value = startvalue;\r\n        this.updateWidth();\r\n        fire();\r\n      }\r\n      \r\n      this.dom._background = last_background; //ui_base.getDefault(\"BoxBG\");\r\n      this._redraw();\r\n      \r\n      console.trace(\"end\");\r\n      \r\n      this.popModal();\r\n    }\r\n    \r\n    /*\r\n    cancel = (restore_value) => {\r\n      if (restore_value) {\r\n        this.value = startvalue;\r\n        this.updateWidth();\r\n        fire();\r\n      }\r\n      \r\n      this.dom._background = last_background; //ui_base.getDefault(\"BoxBG\");\r\n      this._redraw();\r\n      \r\n      console.trace(\"end\");\r\n      \r\n      window.removeEventListener(\"keydown\", keydown, true);\r\n      window.removeEventListener(\"mousemove\", mousemove, {captured : true, passive : false});\r\n      \r\n      window.removeEventListener(\"touchend\", touchend, true);\r\n      window.removeEventListener(\"touchmove\", touchmove, {captured : true, passive : false});\r\n      window.removeEventListener(\"touchcancel\", touchcancel, true);\r\n      window.removeEventListener(\"mouseup\", mouseup, true);\r\n      \r\n      this.removeEventListener(\"mouseover\", mouseover, true);\r\n      this.removeEventListener(\"mouseout\", mouseout, true);\r\n    }\r\n    \r\n    window.addEventListener(\"keydown\", keydown, true);\r\n    window.addEventListener(\"mousemove\", mousemove, true);\r\n    window.addEventListener(\"touchend\", touchend, true);\r\n    window.addEventListener(\"touchmove\", touchmove, {captured : true, passive : false});\r\n    window.addEventListener(\"touchcancel\", touchcancel, true);\r\n    window.addEventListener(\"mouseup\", mouseup, true);\r\n\r\n    this.addEventListener(\"mouseover\", mouseover, true);\r\n    this.addEventListener(\"mouseout\", mouseout, true);\r\n    //*/\r\n  }\r\n  \r\n  updateName() {\r\n    let name = this.getAttribute(\"name\");\r\n    \r\n    if (name !== this._name) {\r\n      this._name = name;\r\n      let dpi = this.getDPI();\r\n      \r\n      let ts = this.getDefault(\"DefaultText\").size;\r\n      let tw = ui_base.measureText(this, this._genLabel(), this.dom, this.g).width/dpi + ts*2;\r\n      \r\n      let w = this.getDefault(\"numslider_width\");\r\n      \r\n      w = Math.max(w, tw);\r\n      this.dom.style[\"width\"] = w+\"px\";\r\n      \r\n      this._repos_canvas();\r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  _genLabel() {\r\n    let val = this.value;\r\n    let text;\r\n\r\n    if (val === undefined) {\r\n      text = \"error\";\r\n    } else {\r\n      val = val === undefined ? 0.0 : val;\r\n      val = val.toFixed(3);\r\n\r\n      text = val;\r\n      if (this._name) {\r\n        text = this._name + \": \" + text;\r\n      }\r\n    }\r\n\r\n    return text;\r\n  }\r\n  \r\n  _redraw() {\r\n    let g = this.g;\r\n    let canvas = this.dom;\r\n\r\n    //console.log(\"numslider draw\");\r\n    \r\n    let dpi = this.getDPI();\r\n    let disabled = this.disabled; //this.hasAttribute(\"disabled\");\r\n    \r\n    ui_base.drawRoundBox(this, this.dom, this.g, undefined, undefined,\r\n      undefined, undefined, disabled ? this.getDefault(\"DisabledBG\") : undefined);\r\n    \r\n    let r = this.getDefault(\"BoxRadius\") * dpi;\r\n    let pad = this.getDefault(\"BoxMargin\") * dpi;\r\n    let ts = this.getDefault(\"DefaultText\").size;\r\n    \r\n    //if (this.value !== undefined) {\r\n    let text = this._genLabel();\r\n   \r\n    let tw = ui_base.measureText(this, text, this.dom, this.g).width;\r\n    let cx = this.dom.width/2 - tw/2;\r\n    let cy = this.dom.height/2;\r\n    \r\n    ui_base.drawText(this, cx, cy + ts/2, text, this.dom, this.g);\r\n    //}\r\n    \r\n    g.fillStyle = \"rgba(0,0,0,0.1)\";\r\n    \r\n    let d = 7, w=canvas.width, h=canvas.height;\r\n    let sz = 10*dpi;\r\n    \r\n    g.beginPath();\r\n    g.moveTo(d, h*0.5);\r\n    g.lineTo(d+sz, h*0.5 + sz*0.5);\r\n    g.lineTo(d+sz, h*0.5 - sz*0.5);\r\n    \r\n    g.moveTo(w-d, h*0.5);\r\n    g.lineTo(w-sz-d, h*0.5 + sz*0.5);\r\n    g.lineTo(w-sz-d, h*0.5 - sz*0.5);\r\n    \r\n    g.fill();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"numslider-x\",\r\n    style : \"numslider\"\r\n  };}\r\n}\r\nUIBase.register(NumSlider);\r\n\r\nexport class Check extends UIBase {\r\n  constructor() {\r\n    super();\r\n    \r\n    this._checked = false;\r\n    this._highlight = false;\r\n    this._focus = false;\r\n\r\n    let shadow = this.shadow;\r\n    \r\n    //let form = document.createElement(\"form\");\r\n    \r\n    let span = document.createElement(\"span\");\r\n    span.setAttribute(\"class\", \"checkx\");\r\n\r\n    span.style[\"display\"] = \"flex\";\r\n    span.style[\"flex-direction\"] = \"row\";\r\n    span.style[\"margin\"] = span.style[\"padding\"] = \"0px\";\r\n    //span.style[\"background\"] = ui_base.iconmanager.getCSS(1);\r\n\r\n    let sheet = 0;\r\n    let size = ui_base.iconmanager.getTileSize(0);\r\n\r\n    let check = this.canvas = document.createElement(\"canvas\");\r\n    this.g = check.getContext(\"2d\");\r\n\r\n    check.setAttribute(\"id\", check._id);\r\n    check.setAttribute(\"name\", check._id);\r\n\r\n    /*\r\n    let doblur = () => {\r\n      this.blur();\r\n    };\r\n    check.addEventListener(\"mousedown\", doblur);\r\n    check.addEventListener(\"mouseup\", doblur);\r\n    check.addEventListener(\"touchstart\", doblur);\r\n    check.addEventListener(\"touchend\", doblur);\r\n    //*/\r\n\r\n    let mdown = (e) => {\r\n      this._highlight = false;\r\n      this.checked = !this.checked;\r\n    };\r\n\r\n    let mup = (e) => {\r\n      this._highlight = false;\r\n      this.blur();\r\n      this._redraw();\r\n    };\r\n\r\n    let mover = (e) => {\r\n      this._highlight = true;\r\n      this._redraw();\r\n    };\r\n\r\n    let mleave = (e) => {\r\n      this._highlight = false;\r\n      this._redraw();\r\n    };\r\n\r\n    span.addEventListener(\"mouseover\", mover);\r\n    span.addEventListener(\"mousein\", mover);\r\n    span.addEventListener(\"mouseleave\", mleave);\r\n    span.addEventListener(\"mouseout\", mleave);\r\n    this.addEventListener(\"blur\", (e) => {\r\n      this._highlight = this._focus = false;\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"focusin\", (e) => {\r\n      this._focus = true;\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"focus\", (e) => {\r\n      this._focus = true;\r\n      this._redraw();\r\n    });\r\n\r\n\r\n    span.addEventListener(\"mousedown\", mdown);\r\n    span.addEventListener(\"touchstart\", mdown);\r\n    span.addEventListener(\"mouseup\", mup);\r\n    span.addEventListener(\"touchend\", mup);\r\n\r\n    this.addEventListener(\"keydown\", (e) => {\r\n      switch (e.keyCode) {\r\n        case keymap[\"Escape\"]:\r\n          this._highlight = undefined;\r\n          this._redraw();\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n\r\n          this.blur();\r\n          break;\r\n        case keymap[\"Enter\"]:\r\n        case keymap[\"Space\"]:\r\n          this.checked = !this.checked;\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          break;\r\n      }\r\n    });\r\n    this.checkbox = check;\r\n\r\n    span.appendChild(check);\r\n\r\n    let label = this._label = document.createElement(\"label\");\r\n    label.setAttribute(\"class\", \"checkx\");\r\n    span.setAttribute(\"class\", \"checkx\");\r\n\r\n    let side = this.getDefault(\"CheckSide\");\r\n    if (side === \"right\") {\r\n      span.prepend(label);\r\n    } else {\r\n      span.appendChild(label);\r\n    }\r\n\r\n    shadow.appendChild(span);\r\n  }\r\n\r\n  init() {\r\n    this.tabIndex = 1;\r\n    this.setAttribute(\"class\", \"checkx\");\r\n\r\n\r\n    let style = document.createElement(\"style\");\r\n    //let style = this.cssStyleTag();\r\n\r\n    let color = this.getDefault(\"FocusOutline\");\r\n\r\n    style.textContent = `\r\n      .checkx:focus {\r\n        outline : none;\r\n      }\r\n    `;\r\n\r\n    //document.body.prepend(style);\r\n    this.prepend(style);\r\n  }\r\n\r\n  get disabled() {\r\n    return super.disabled;\r\n  }\r\n\r\n  set disabled(val) {\r\n    super.disabled = val;\r\n    this._redraw();\r\n  }\r\n\r\n  setCSS() {\r\n    this._label.style[\"font\"] = this.getDefault(\"DefaultText\").genCSS();\r\n    this._label.style[\"color\"] = this.getDefault(\"DefaultText\").color;\r\n\r\n    super.setCSS();\r\n  }\r\n\r\n  updateDataPath() {\r\n    if (!this.hasAttribute(\"datapath\")) {\r\n      return;\r\n    }\r\n\r\n    let val = this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\r\n\r\n    if (val === undefined) {\r\n      this.disabled = true;\r\n      return;\r\n    } else {\r\n      this.disabled = false;\r\n    }\r\n\r\n    val = !!val;\r\n\r\n    if (!!this._checked != !!val) {\r\n      this._checked = val;\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  _repos_canvas() {\r\n    if (this.canvas === undefined)\r\n      return;\r\n\r\n    let r = this.canvas.getClientRects()[0];\r\n\r\n    if (r === undefined) {\r\n      return;\r\n    }\r\n\r\n  }\r\n\r\n  _redraw() {\r\n    if (this.canvas === undefined)\r\n      return;\r\n\r\n    let canvas = this.canvas, g = this.g;\r\n    let dpi = UIBase.getDPI();\r\n    let tilesize = ui_base.iconmanager.getTileSize(0);\r\n    let pad = this.getDefault(\"BoxMargin\");\r\n\r\n    let csize = tilesize + pad*2;\r\n\r\n    canvas.style[\"margin\"] = \"2px\";\r\n    canvas.style[\"width\"] = csize + \"px\";\r\n    canvas.style[\"height\"] = csize + \"px\";\r\n\r\n    csize = ~~(csize*dpi + 0.5);\r\n    tilesize = ~~(tilesize*dpi + 0.5);\r\n\r\n    canvas.width = csize;\r\n    canvas.height = csize;\r\n\r\n    g.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    g.beginPath();\r\n    g.rect(0, 0, canvas.width, canvas.height);\r\n    g.fill();\r\n\r\n    let color;\r\n\r\n    if (!this._checked && this._highlight) {\r\n      color = this.getDefault(\"BoxHighlight\");\r\n    }\r\n\r\n    ui_base.drawRoundBox(this, canvas, g, undefined, undefined, undefined, undefined, color);\r\n    if (this._checked) {\r\n      //canvasDraw(elem, canvas, g, icon, x=0, y=0, sheet=0) {\r\n      let x=(csize-tilesize)*0.5, y=(csize-tilesize)*0.5;\r\n      ui_base.iconmanager.canvasDraw(this, canvas, g, ui_base.Icons.LARGE_CHECK, x, y);\r\n    }\r\n\r\n    if (this._focus) {\r\n      color = this.getDefault(\"FocusOutline\");\r\n      g.lineWidth *= dpi;\r\n      ui_base.drawRoundBox(this, canvas, g, undefined, undefined, undefined, \"stroke\", color);\r\n    }\r\n  }\r\n\r\n  set checked(v) {\r\n    if (!!this._checked != !!v) {\r\n      this._checked = v;\r\n      //this.dom.checked = v;\r\n      this._redraw();\r\n\r\n      if (this.onclick) {\r\n        this.onclick(v);\r\n      }\r\n      if (this.onchange) {\r\n        this.onchange(v);\r\n      }\r\n\r\n      if (this.hasAttribute(\"datapath\")) {\r\n        this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), this._checked);\r\n      }\r\n    }\r\n  }\r\n  \r\n  get checked() {\r\n    return this._checked;\r\n  }\r\n\r\n  updateDPI() {\r\n    let dpi = UIBase.getDPI();\r\n\r\n    if (dpi !== this._last_dpi) {\r\n      this._last_dpi = dpi;\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n\r\n    this.title = this.description;\r\n    this.updateDPI();\r\n\r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.updateDataPath();\r\n    }\r\n\r\n    let updatekey = this.getDefault(\"DefaultText\").hash();\r\n\r\n    if (updatekey !== this._updatekey) {\r\n      this._updatekey = updatekey;\r\n      this.setCSS();\r\n    }\r\n  }\r\n  \r\n  get label() {\r\n    return this._label.textContent;\r\n  }\r\n  \r\n  set label(l) {\r\n    this._label.textContent = l;\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"check-x\",\r\n    style   : \"checkbox\"\r\n  };}\r\n}\r\nUIBase.register(Check);\r\n\r\nexport class IconCheck extends Button {\r\n  constructor() {\r\n    super();\r\n\r\n    this._checked = undefined;\r\n\r\n    this._drawCheck = true;\r\n    this._icon = -1;\r\n    this._icon_pressed = undefined;\r\n    this.iconsheet = ui_base.IconSheets.LARGE;\r\n  }\r\n\r\n  updateDefaultSize() {\r\n\r\n  }\r\n\r\n  _calcUpdateKey() {\r\n    return super._calcUpdateKey() + \":\" + this._icon;\r\n  }\r\n\r\n  get drawCheck() {\r\n    return this._drawCheck;\r\n  }\r\n\r\n  set drawCheck(val) {\r\n    this._drawCheck = val;\r\n    this._redraw();\r\n  }\r\n\r\n  get icon() {\r\n    return this._icon;\r\n  }\r\n  \r\n  set icon(val) {\r\n    this._icon = val;\r\n    this._repos_canvas();\r\n    this._redraw();\r\n  }\r\n  \r\n  get checked() {\r\n    return this._checked;\r\n  }\r\n  \r\n  set checked(val) {\r\n    if (!!val != !!this._checked) {\r\n      this._checked = val;\r\n      this._redraw();\r\n\r\n      if (this.onchange) {\r\n        this.onchange(val);\r\n      }\r\n    }\r\n  }\r\n  \r\n  updateDataPath() {\r\n    if (!this.hasAttribute(\"datapath\") || !this.ctx) {\r\n      return;\r\n    }\r\n\r\n    if (this._icon < 0) {\r\n      let rdef;\r\n      try {\r\n        rdef = this.ctx.api.resolvePath(this.ctx, this.getAttribute(\"datapath\"));\r\n      } catch(error) {\r\n        if (error instanceof DataPathError) {\r\n          return;\r\n        } else {\r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      if (rdef !== undefined && rdef.prop) {\r\n        let icon, title;\r\n\r\n        //console.log(\"SUBKEY\", rdef.subkey, rdef.prop.iconmap);\r\n\r\n        if (rdef.subkey && (rdef.prop.type == PropTypes.FLAG || rdef.prop.type == PropTypes.ENUM)) {\r\n          icon = rdef.prop.iconmap[rdef.subkey];\r\n          title = rdef.prop.descriptions[rdef.subkey];\r\n\r\n          if (title === undefined && rdef.subkey.length > 0) {\r\n            title = rdef.subkey;\r\n            title = title[0].toUpperCase() + title.slice(1, title.length).toLowerCase();\r\n          }\r\n        } else {\r\n          icon = rdef.prop.icon;\r\n          title = rdef.prop.description;\r\n        }\r\n\r\n        if (icon !== undefined && icon !== this.icon)\r\n          this.icon = icon;\r\n        if (title !== undefined)\r\n          this.description = title;\r\n      }\r\n    }\r\n\r\n    let val = this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\r\n\r\n    if (val === undefined) {\r\n      this.disabled = true;\r\n      return;\r\n    } else {\r\n      this.disabled = false;\r\n    }\r\n\r\n    val = !!val;\r\n\r\n    if (val != !!this._checked) {\r\n      this._checked = val;\r\n      this._redraw();\r\n    }\r\n  }\r\n  \r\n  update() {\r\n    if (this.description !== undefined && this.title != this.description) {\r\n      this.title = this.description;\r\n    }\r\n    \r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.updateDataPath();\r\n    }\r\n    \r\n    super.update();\r\n  }\r\n\r\n  _getsize() {\r\n      let margin = this.getDefault(\"BoxMargin\");\r\n      return ui_base.iconmanager.getTileSize(this.iconsheet) + margin*2;\r\n  }\r\n  \r\n  _repos_canvas() {\r\n    this.dom.style[\"width\"] = this._getsize() + \"px\";\r\n    this.dom.style[\"height\"] = this._getsize() + \"px\";\r\n\r\n    if (this._div !== undefined) {\r\n      this._div.style[\"width\"] = this._getsize() + \"px\";\r\n      this._div.style[\"height\"] = this._getsize() + \"px\";\r\n    }\r\n\r\n    super._repos_canvas();\r\n  }\r\n\r\n  set icon(f) {\r\n    this._icon = f;\r\n    this._redraw();\r\n  }\r\n  \r\n  get icon() {\r\n    return this._icon;\r\n  }\r\n  \r\n  _onpress() {\r\n    this.checked ^= 1;\r\n    \r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), this.checked);\r\n    }\r\n\r\n    console.log(\"click!\", this.checked);\r\n    this._redraw();\r\n  }\r\n  \r\n  _redraw() {\r\n    this._repos_canvas();\r\n    \r\n    //this.dom._background = this._checked ? this.getDefault(\"BoxDepressed\") : this.getDefault(\"BoxBG\");\r\n    if (this._checked) {\r\n      this._highlight = false;\r\n    }\r\n\r\n    //\r\n    let pressed = this._pressed;\r\n    this._pressed = this._checked;\r\n    super._redraw(false);\r\n    this._pressed = pressed;\r\n\r\n    let icon = this._icon;\r\n    \r\n    if (this._checked && this._icon_pressed !== undefined) {\r\n      icon = this._icon_pressed;\r\n    }\r\n\r\n    let tsize = ui_base.iconmanager.getTileSize(this.iconsheet);\r\n    let size = this._getsize();\r\n    let off = size > tsize ? (size - tsize)*0.5 : 0.0;\r\n\r\n    this.g.save();\r\n    this.g.translate(off, off);\r\n    ui_base.iconmanager.canvasDraw(this, this.dom, this.g, icon, undefined, undefined, this.iconsheet);\r\n\r\n    if (this.drawCheck) {\r\n      let icon2 = this._checked ? ui_base.Icons.CHECKED : ui_base.Icons.UNCHECKED;\r\n      ui_base.iconmanager.canvasDraw(this, this.dom, this.g, icon2, undefined, undefined, this.iconsheet);\r\n    }\r\n\r\n    this.g.restore();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"iconcheck-x\",\r\n    style   : \"iconcheck\"\r\n  };}\r\n}\r\n\r\nUIBase.register(IconCheck);\r\n\r\nexport class IconButton extends Button {\r\n  constructor() {\r\n    super();\r\n\r\n    this._icon = 0;\r\n    this._icon_pressed = undefined;\r\n    this.iconsheet = ui_base.Icons.LARGE;\r\n  }\r\n\r\n  updateDefaultSize() {\r\n\r\n  }\r\n\r\n  _calcUpdateKey() {\r\n    return super._calcUpdateKey() + \":\" + this._icon;\r\n  }\r\n\r\n  get icon() {\r\n    return this._icon;\r\n  }\r\n  \r\n  set icon(val) {\r\n    this._icon = val;\r\n    this._repos_canvas();\r\n    this._redraw();\r\n  }\r\n  \r\n  update() {\r\n    if (this.description !== undefined && this.title != this.description) {\r\n      this.title = this.description;\r\n    }\r\n\r\n    super.update();\r\n  }\r\n\r\n  _getsize() {\r\n    let margin = this.getDefault(\"BoxMargin\");\r\n\r\n    return ui_base.iconmanager.getTileSize(this.iconsheet) + margin*2;\r\n  }\r\n  \r\n  _repos_canvas() {\r\n    this.dom.style[\"height\"] = this._getsize() + \"px\";\r\n    this.dom.style[\"width\"] = this._getsize() + \"px\";\r\n\r\n    super._repos_canvas();\r\n  }\r\n  \r\n  _redraw() {\r\n    this._repos_canvas();\r\n    \r\n    //this.dom._background = this._checked ? this.getDefault(\"BoxDepressed\") : this.getDefault(\"BoxBG\");\r\n    //\r\n    super._redraw(false);\r\n\r\n    let icon = this._icon;\r\n    \r\n    if (this._checked && this._icon_pressed !== undefined) {\r\n      icon = this._icon_pressed;\r\n    }\r\n\r\n    let tsize = ui_base.iconmanager.getTileSize(this.iconsheet);\r\n    let size = this._getsize();\r\n\r\n    let dpi = UIBase.getDPI();\r\n    let off = size > tsize ? (size - tsize)*0.5*dpi : 0.0;\r\n\r\n    this.g.save();\r\n    this.g.translate(off, off);\r\n    ui_base.iconmanager.canvasDraw(this, this.dom, this.g, icon, undefined, undefined, this.iconsheet);\r\n    this.g.restore();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"iconbutton-x\",\r\n    style : \"iconbutton\",\r\n  };}\r\n}\r\n\r\nUIBase.register(IconButton);\r\n\r\nexport class Check1 extends Button {\r\n  constructor() {\r\n    super();\r\n    \r\n    this._namePad = 40;\r\n    this._value = undefined;\r\n  }\r\n  \r\n  _redraw() {\r\n    //console.log(\"button draw\");\r\n    \r\n    let dpi = this.getDPI();\r\n    \r\n    let box = 40;\r\n    ui_base.drawRoundBox(this, this.dom, this.g, box);\r\n\r\n    let r = this.getDefault(\"BoxRadius\") * dpi;\r\n    let pad = this.getDefault(\"BoxMargin\") * dpi;\r\n    let ts = this.getDefault(\"DefaultText\").size;\r\n    \r\n    let text = this._genLabel();\r\n    \r\n    //console.log(text, \"text\", this._name);\r\n    \r\n    let tw = ui_base.measureText(this, text, this.dom, this.g).width;\r\n    let cx = this.dom.width/2 - tw/2;\r\n    let cy = this.dom.height/2;\r\n    \r\n    ui_base.drawText(this, box, cy + ts/2, text, this.dom, this.g);\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"check1-x\"\r\n  };}\r\n}\r\n\r\nUIBase.register(Check1);\r\n\r\nexport class TextBox extends UIBase {\r\n  constructor() {\r\n    super();\r\n    \r\n    this.addEventListener(\"focusin\", () => {\r\n      this._focus = 1;\r\n      this.dom.focus();\r\n    });\r\n\r\n    this.addEventListener(\"blur\", () => {\r\n      this._focus = 0;\r\n    });\r\n    \r\n    let margin = Math.ceil(3 * this.getDPI());\r\n    \r\n    this._had_error = false;\r\n    \r\n    this.decimalPlaces = 4;\r\n\r\n    this.dom = document.createElement(\"input\");\r\n\r\n    this.dom.tabIndex = 0;\r\n    this.dom.setAttribute(\"tabindex\", 0);\r\n    this.dom.setAttribute(\"tab-index\", 0);\r\n    this.dom.style[\"margin\"] = margin + \"px\";\r\n    this.dom.style[\"width\"] = \"min-contents\";\r\n\r\n    this.dom.setAttribute(\"type\", \"textbox\");\r\n    this.dom.onchange = (e) => {\r\n      this._change(this.dom.value);\r\n    }\r\n\r\n    this.radix = 16;\r\n    \r\n    this.dom.oninput = (e) => {\r\n      this._change(this.dom.value);\r\n    }\r\n    \r\n    this.shadow.appendChild(this.dom);\r\n  }\r\n\r\n  get tabIndex() {\r\n    return this.dom.tabIndex;\r\n  }\r\n\r\n  set tabIndex(val) {\r\n    this.dom.tabIndex = val;\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.style[\"display\"] = \"flex\";\r\n    this.style[\"width\"] = \"min-content\";\r\n\r\n    this.setCSS();\r\n  }\r\n\r\n  setCSS() {\r\n    super.setCSS();\r\n\r\n    if (this.style[\"font\"]) {\r\n      this.dom.style[\"font\"] = this.style[\"font\"];\r\n    }\r\n\r\n//    for (let k of this.style) {\r\n  //    this.dom.style[k] = this.style[k];\r\n   // }\r\n\r\n    this.dom.style[\"width\"] = this.style[\"width\"];\r\n  }\r\n\r\n  updateDataPath() {\r\n    if (!this.ctx || !this.hasAttribute(\"datapath\")) {\r\n      return;\r\n    }\r\n    if (this._focus || this._flashtimer !== undefined || (this._had_error && this._focus)) {\r\n      return;\r\n    }\r\n    \r\n    let val = this.getPathValue(this.ctx, this.getAttribute(\"datapath\"));\r\n    if (val === undefined || val === null) {\r\n      this.disabled = true;\r\n      return;\r\n    } else {\r\n      this.disabled = false;\r\n    }\r\n\r\n\r\n    let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\r\n    \r\n    let text = this.text;\r\n\r\n    function myToFixed(s, n) {\r\n      s = s.toFixed(n);\r\n\r\n      while (s.endsWith('0')) {\r\n        s = s.slice(0, s.length-1);\r\n      }\r\n      if (s.endsWith(\"\\.\")) {\r\n        s = s.slice(0, s.length-1);\r\n      }\r\n\r\n      return s;\r\n    }\r\n\r\n    if (prop !== undefined && (prop.type == PropTypes.INT || prop.type == PropTypes.FLOAT)) {\r\n      let is_int = prop.type == PropTypes.INT;\r\n      \r\n      if (is_int) {\r\n        this.radix = prop.radix;\r\n        text = val.toString(this.radix);\r\n        \r\n        if (this.radix == 2) {\r\n          text = \"0b\" + text;\r\n        } else if (this.radix == 16) {\r\n          text += \"h\";\r\n        }\r\n      } else {\r\n        text = myToFixed(val, this.decimalPlaces);\r\n      }\r\n    } else if (prop !== undefined && prop.type == PropTypes.STRING) {\r\n      text = val;\r\n    }\r\n    \r\n    if (this.text != text) {\r\n      this.text = text;\r\n    }\r\n  }\r\n  \r\n  update() {\r\n    super.update();\r\n\r\n    if (this.hasAttribute(\"datapath\")) {\r\n      this.updateDataPath();\r\n    }\r\n\r\n    this.setCSS();\r\n  }\r\n  \r\n  select() {\r\n    this.dom.select();\r\n    //return this.dom.select.apply(this, arguments);\r\n  }\r\n  \r\n  focus() {\r\n    return this.dom.focus();\r\n  }\r\n  \r\n  blur() {\r\n    return this.dom.blur();\r\n  }\r\n  \r\n  static define() {return {\r\n    tagname : \"textbox-x\"\r\n  };}\r\n  \r\n  get text() {\r\n    return this.dom.value;\r\n  }\r\n  \r\n  set text(value) {\r\n    this.dom.value = value;\r\n  }\r\n  \r\n  _prop_update(prop, text) {\r\n    if ((prop.type == PropTypes.INT || prop.type == PropTypes.FLOAT)) {\r\n      let val = parseFloat(this.text);\r\n      \r\n      if (!toolprop.isNumber(this.text.trim())) {\r\n        this.flash(ui_base.ErrorColors.ERROR, this.dom);\r\n        this.focus();\r\n        this.dom.focus();\r\n        this._had_error = true;\r\n      } else {\r\n        if (this._had_error) {\r\n          this.flash(ui_base.ErrorColors.OK, this.dom);\r\n        }\r\n        \r\n        this._had_error = false;\r\n        this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), val);\r\n      }\r\n    } else if (prop.type == PropTypes.STRING) {\r\n      this.setPathValue(this.ctx, this.getAttribute(\"datapath\"), this.text);\r\n    }\r\n  }\r\n\r\n   \r\n  _change(text) {\r\n    //console.log(\"onchange\", this.ctx, this, this.dom.__proto__, this.hasFocus);\r\n    //console.log(\"onchange\", this._focus);\r\n    \r\n    if (this.hasAttribute(\"datapath\") && this.ctx !== undefined) {\r\n      let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\r\n      //console.log(prop);\r\n      if (prop) {\r\n        this._prop_update(prop, text);\r\n      }\r\n    }\r\n    \r\n    if (this.onchange) {\r\n      this.onchange(text);\r\n    }\r\n  }\r\n}\r\n\r\nUIBase.register(TextBox);\r\n\r\nexport function checkForTextBox(screen, x, y) {\r\n  let elem = screen.pickElement(x, y, undefined, undefined, TextBox);\r\n  //console.log(elem);\r\n  if (elem && elem.tagName === \"TEXTBOX-X\") {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_widgets.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2242,
    "kind": "variable",
    "name": "keymap",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~keymap",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2243,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2244,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2245,
    "kind": "variable",
    "name": "parsepx",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~parsepx",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2246,
    "kind": "class",
    "name": "Button",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~Button",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{Button}",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2247,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 25,
    "undocument": true
  },
  {
    "__docId__": 2248,
    "kind": "member",
    "name": "_last_update_key",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_update_key",
    "access": "private",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2249,
    "kind": "member",
    "name": "_name",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_name",
    "access": "private",
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2250,
    "kind": "member",
    "name": "_namePad",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_namePad",
    "access": "private",
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2251,
    "kind": "member",
    "name": "_last_w",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_w",
    "access": "private",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2252,
    "kind": "member",
    "name": "_last_h",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_h",
    "access": "private",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2253,
    "kind": "member",
    "name": "_last_dpi",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_dpi",
    "access": "private",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2254,
    "kind": "member",
    "name": "_lastw",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_lastw",
    "access": "private",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2255,
    "kind": "member",
    "name": "_lasth",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_lasth",
    "access": "private",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2256,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#dom",
    "access": "public",
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2257,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#g",
    "access": "public",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2258,
    "kind": "member",
    "name": "_last_bg",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_bg",
    "access": "private",
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2259,
    "kind": "member",
    "name": "_focus",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_focus",
    "access": "private",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2261,
    "kind": "member",
    "name": "_last_disabled",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_last_disabled",
    "access": "private",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2262,
    "kind": "member",
    "name": "_auto_depress",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_auto_depress",
    "access": "private",
    "description": null,
    "lineNumber": 89,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2263,
    "kind": "get",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 117,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2264,
    "kind": "set",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 121,
    "undocument": true
  },
  {
    "__docId__": 2265,
    "kind": "get",
    "name": "boxpad",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#boxpad",
    "access": "public",
    "description": null,
    "lineNumber": 125,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2266,
    "kind": "method",
    "name": "click",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#click",
    "access": "public",
    "description": null,
    "lineNumber": 130,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2267,
    "kind": "set",
    "name": "boxpad",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#boxpad",
    "access": "public",
    "description": null,
    "lineNumber": 143,
    "undocument": true
  },
  {
    "__docId__": 2268,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#init",
    "access": "public",
    "description": null,
    "lineNumber": 150,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2270,
    "kind": "method",
    "name": "setAttribute",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#setAttribute",
    "access": "public",
    "description": null,
    "lineNumber": 171,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2271,
    "kind": "get",
    "name": "r",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#r",
    "access": "public",
    "description": null,
    "lineNumber": 180,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2272,
    "kind": "set",
    "name": "r",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#r",
    "access": "public",
    "description": null,
    "lineNumber": 184,
    "undocument": true
  },
  {
    "__docId__": 2273,
    "kind": "method",
    "name": "bindEvents",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#bindEvents",
    "access": "public",
    "description": null,
    "lineNumber": 188,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2274,
    "kind": "member",
    "name": "_pressed",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_pressed",
    "access": "private",
    "description": null,
    "lineNumber": 197,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2276,
    "kind": "member",
    "name": "_highlight",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_highlight",
    "access": "private",
    "description": null,
    "lineNumber": 242,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2278,
    "kind": "method",
    "name": "updateDisabled",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#updateDisabled",
    "access": "public",
    "description": null,
    "lineNumber": 257,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2280,
    "kind": "method",
    "name": "updateDefaultSize",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#updateDefaultSize",
    "access": "public",
    "description": null,
    "lineNumber": 271,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2283,
    "kind": "method",
    "name": "_calcUpdateKey",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_calcUpdateKey",
    "access": "private",
    "description": null,
    "lineNumber": 306,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2284,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#update",
    "access": "public",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2285,
    "kind": "member",
    "name": "title",
    "memberof": "scripts/ui_widgets.js~Button",
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#title",
    "access": "public",
    "description": null,
    "lineNumber": 319,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2288,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 344,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2289,
    "kind": "method",
    "name": "updateName",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#updateName",
    "access": "public",
    "description": null,
    "lineNumber": 368,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2291,
    "kind": "method",
    "name": "updateWidth",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#updateWidth",
    "access": "public",
    "description": null,
    "lineNumber": 380,
    "undocument": true,
    "params": [
      {
        "name": "w_add",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 0,
        "defaultValue": "0"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2293,
    "kind": "method",
    "name": "_repos_canvas",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_repos_canvas",
    "access": "private",
    "description": null,
    "lineNumber": 400,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2294,
    "kind": "method",
    "name": "updateDPI",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#updateDPI",
    "access": "public",
    "description": null,
    "lineNumber": 407,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2296,
    "kind": "method",
    "name": "_genLabel",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_genLabel",
    "access": "private",
    "description": null,
    "lineNumber": 431,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2297,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 437,
    "undocument": true,
    "params": [
      {
        "name": "draw_text",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2298,
    "kind": "method",
    "name": "_draw_text",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Button#_draw_text",
    "access": "private",
    "description": null,
    "lineNumber": 469,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2299,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~Button",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~Button.define",
    "access": "public",
    "description": null,
    "lineNumber": 487,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2300,
    "kind": "class",
    "name": "ValueButtonBase",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~ValueButtonBase",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{ValueButtonBase}",
    "description": null,
    "lineNumber": 494,
    "undocument": true,
    "interface": false,
    "extends": [
      "Button"
    ]
  },
  {
    "__docId__": 2301,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 495,
    "undocument": true
  },
  {
    "__docId__": 2302,
    "kind": "get",
    "name": "value",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#value",
    "access": "public",
    "description": null,
    "lineNumber": 499,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2303,
    "kind": "set",
    "name": "value",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#value",
    "access": "public",
    "description": null,
    "lineNumber": 503,
    "undocument": true
  },
  {
    "__docId__": 2304,
    "kind": "member",
    "name": "_value",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#_value",
    "access": "private",
    "description": null,
    "lineNumber": 504,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2305,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 511,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2306,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 519,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2309,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~ValueButtonBase",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~ValueButtonBase#update",
    "access": "public",
    "description": null,
    "lineNumber": 536,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2310,
    "kind": "class",
    "name": "NumSlider",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~NumSlider",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{NumSlider}",
    "description": null,
    "lineNumber": 544,
    "undocument": true,
    "interface": false,
    "extends": [
      "ValueButtonBase"
    ]
  },
  {
    "__docId__": 2311,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 545,
    "undocument": true
  },
  {
    "__docId__": 2312,
    "kind": "member",
    "name": "_name",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#_name",
    "access": "private",
    "description": null,
    "lineNumber": 548,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2313,
    "kind": "member",
    "name": "_step",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#_step",
    "access": "private",
    "description": null,
    "lineNumber": 549,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2314,
    "kind": "member",
    "name": "_value",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#_value",
    "access": "private",
    "description": null,
    "lineNumber": 550,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2315,
    "kind": "method",
    "name": "swapWithTextbox",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#swapWithTextbox",
    "access": "public",
    "description": null,
    "lineNumber": 555,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2316,
    "kind": "member",
    "name": "hidden",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#hidden",
    "access": "public",
    "description": null,
    "lineNumber": 562,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2318,
    "kind": "method",
    "name": "bindEvents",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#bindEvents",
    "access": "public",
    "description": null,
    "lineNumber": 603,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2319,
    "kind": "method",
    "name": "doRange",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#doRange",
    "access": "public",
    "description": null,
    "lineNumber": 679,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2320,
    "kind": "member",
    "name": "value",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#value",
    "access": "public",
    "description": null,
    "lineNumber": 682,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2322,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 691,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "fire_onchange",
        "optional": true,
        "types": [
          "boolean"
        ],
        "defaultRaw": true,
        "defaultValue": "true"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2325,
    "kind": "method",
    "name": "dragStart",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#dragStart",
    "access": "public",
    "description": null,
    "lineNumber": 705,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2328,
    "kind": "method",
    "name": "updateName",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#updateName",
    "access": "public",
    "description": null,
    "lineNumber": 860,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2330,
    "kind": "method",
    "name": "_genLabel",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#_genLabel",
    "access": "private",
    "description": null,
    "lineNumber": 880,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2331,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~NumSlider#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 899,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2332,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~NumSlider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~NumSlider.define",
    "access": "public",
    "description": null,
    "lineNumber": 942,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2333,
    "kind": "class",
    "name": "Check",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~Check",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{Check}",
    "description": null,
    "lineNumber": 949,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2334,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 950,
    "undocument": true
  },
  {
    "__docId__": 2335,
    "kind": "member",
    "name": "_checked",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_checked",
    "access": "private",
    "description": null,
    "lineNumber": 953,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2336,
    "kind": "member",
    "name": "_highlight",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_highlight",
    "access": "private",
    "description": null,
    "lineNumber": 954,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2337,
    "kind": "member",
    "name": "_focus",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_focus",
    "access": "private",
    "description": null,
    "lineNumber": 955,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2338,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#g",
    "access": "public",
    "description": null,
    "lineNumber": 973,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2349,
    "kind": "member",
    "name": "checkbox",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#checkbox",
    "access": "public",
    "description": null,
    "lineNumber": 1050,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2350,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#init",
    "access": "public",
    "description": null,
    "lineNumber": 1068,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2351,
    "kind": "member",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 1069,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2352,
    "kind": "get",
    "name": "disabled",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 1088,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2353,
    "kind": "set",
    "name": "disabled",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 1092,
    "undocument": true
  },
  {
    "__docId__": 2354,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1097,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2355,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 1104,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2359,
    "kind": "method",
    "name": "_repos_canvas",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_repos_canvas",
    "access": "private",
    "description": null,
    "lineNumber": 1126,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2360,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 1138,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2361,
    "kind": "set",
    "name": "checked",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#checked",
    "access": "public",
    "description": null,
    "lineNumber": 1185,
    "undocument": true
  },
  {
    "__docId__": 2363,
    "kind": "get",
    "name": "checked",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#checked",
    "access": "public",
    "description": null,
    "lineNumber": 1204,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2364,
    "kind": "method",
    "name": "updateDPI",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#updateDPI",
    "access": "public",
    "description": null,
    "lineNumber": 1208,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2365,
    "kind": "member",
    "name": "_last_dpi",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_last_dpi",
    "access": "private",
    "description": null,
    "lineNumber": 1212,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2366,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#update",
    "access": "public",
    "description": null,
    "lineNumber": 1217,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2367,
    "kind": "member",
    "name": "title",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#title",
    "access": "public",
    "description": null,
    "lineNumber": 1220,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2368,
    "kind": "member",
    "name": "_updatekey",
    "memberof": "scripts/ui_widgets.js~Check",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#_updatekey",
    "access": "private",
    "description": null,
    "lineNumber": 1230,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2369,
    "kind": "get",
    "name": "label",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#label",
    "access": "public",
    "description": null,
    "lineNumber": 1235,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2370,
    "kind": "set",
    "name": "label",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check#label",
    "access": "public",
    "description": null,
    "lineNumber": 1239,
    "undocument": true
  },
  {
    "__docId__": 2371,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~Check",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~Check.define",
    "access": "public",
    "description": null,
    "lineNumber": 1243,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2372,
    "kind": "class",
    "name": "IconCheck",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~IconCheck",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{IconCheck}",
    "description": null,
    "lineNumber": 1250,
    "undocument": true,
    "interface": false,
    "extends": [
      "Button"
    ]
  },
  {
    "__docId__": 2373,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1251,
    "undocument": true
  },
  {
    "__docId__": 2374,
    "kind": "member",
    "name": "_checked",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_checked",
    "access": "private",
    "description": null,
    "lineNumber": 1254,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2375,
    "kind": "member",
    "name": "_drawCheck",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_drawCheck",
    "access": "private",
    "description": null,
    "lineNumber": 1256,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2376,
    "kind": "member",
    "name": "_icon",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_icon",
    "access": "private",
    "description": null,
    "lineNumber": 1257,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2377,
    "kind": "member",
    "name": "_icon_pressed",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_icon_pressed",
    "access": "private",
    "description": null,
    "lineNumber": 1258,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2378,
    "kind": "member",
    "name": "iconsheet",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#iconsheet",
    "access": "public",
    "description": null,
    "lineNumber": 1259,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2379,
    "kind": "method",
    "name": "updateDefaultSize",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#updateDefaultSize",
    "access": "public",
    "description": null,
    "lineNumber": 1262,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2380,
    "kind": "method",
    "name": "_calcUpdateKey",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_calcUpdateKey",
    "access": "private",
    "description": null,
    "lineNumber": 1266,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2381,
    "kind": "get",
    "name": "drawCheck",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#drawCheck",
    "access": "public",
    "description": null,
    "lineNumber": 1270,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2382,
    "kind": "set",
    "name": "drawCheck",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#drawCheck",
    "access": "public",
    "description": null,
    "lineNumber": 1274,
    "undocument": true
  },
  {
    "__docId__": 2384,
    "kind": "get",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1279,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2385,
    "kind": "set",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1283,
    "undocument": true
  },
  {
    "__docId__": 2387,
    "kind": "get",
    "name": "checked",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#checked",
    "access": "public",
    "description": null,
    "lineNumber": 1289,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2388,
    "kind": "set",
    "name": "checked",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#checked",
    "access": "public",
    "description": null,
    "lineNumber": 1293,
    "undocument": true
  },
  {
    "__docId__": 2390,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 1304,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2392,
    "kind": "member",
    "name": "description",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#description",
    "access": "public",
    "description": null,
    "lineNumber": 1342,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2393,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 1349,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2396,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#update",
    "access": "public",
    "description": null,
    "lineNumber": 1363,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2397,
    "kind": "member",
    "name": "title",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#title",
    "access": "public",
    "description": null,
    "lineNumber": 1365,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2398,
    "kind": "method",
    "name": "_getsize",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_getsize",
    "access": "private",
    "description": null,
    "lineNumber": 1375,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2399,
    "kind": "method",
    "name": "_repos_canvas",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_repos_canvas",
    "access": "private",
    "description": null,
    "lineNumber": 1380,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2400,
    "kind": "set",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1392,
    "undocument": true
  },
  {
    "__docId__": 2402,
    "kind": "get",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1397,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2403,
    "kind": "method",
    "name": "_onpress",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_onpress",
    "access": "private",
    "description": null,
    "lineNumber": 1401,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2405,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 1412,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2406,
    "kind": "member",
    "name": "_highlight",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_highlight",
    "access": "private",
    "description": null,
    "lineNumber": 1417,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2407,
    "kind": "member",
    "name": "_pressed",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconCheck#_pressed",
    "access": "private",
    "description": null,
    "lineNumber": 1422,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2409,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~IconCheck",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~IconCheck.define",
    "access": "public",
    "description": null,
    "lineNumber": 1448,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2410,
    "kind": "class",
    "name": "IconButton",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~IconButton",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{IconButton}",
    "description": null,
    "lineNumber": 1456,
    "undocument": true,
    "interface": false,
    "extends": [
      "Button"
    ]
  },
  {
    "__docId__": 2411,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1457,
    "undocument": true
  },
  {
    "__docId__": 2412,
    "kind": "member",
    "name": "_icon",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_icon",
    "access": "private",
    "description": null,
    "lineNumber": 1460,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2413,
    "kind": "member",
    "name": "_icon_pressed",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_icon_pressed",
    "access": "private",
    "description": null,
    "lineNumber": 1461,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2414,
    "kind": "member",
    "name": "iconsheet",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#iconsheet",
    "access": "public",
    "description": null,
    "lineNumber": 1462,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2415,
    "kind": "method",
    "name": "updateDefaultSize",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#updateDefaultSize",
    "access": "public",
    "description": null,
    "lineNumber": 1465,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2416,
    "kind": "method",
    "name": "_calcUpdateKey",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_calcUpdateKey",
    "access": "private",
    "description": null,
    "lineNumber": 1469,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2417,
    "kind": "get",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1473,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2418,
    "kind": "set",
    "name": "icon",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#icon",
    "access": "public",
    "description": null,
    "lineNumber": 1477,
    "undocument": true
  },
  {
    "__docId__": 2420,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#update",
    "access": "public",
    "description": null,
    "lineNumber": 1483,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2421,
    "kind": "member",
    "name": "title",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#title",
    "access": "public",
    "description": null,
    "lineNumber": 1485,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2422,
    "kind": "method",
    "name": "_getsize",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_getsize",
    "access": "private",
    "description": null,
    "lineNumber": 1491,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2423,
    "kind": "method",
    "name": "_repos_canvas",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_repos_canvas",
    "access": "private",
    "description": null,
    "lineNumber": 1497,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2424,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~IconButton#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 1504,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2425,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~IconButton",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~IconButton.define",
    "access": "public",
    "description": null,
    "lineNumber": 1529,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2426,
    "kind": "class",
    "name": "Check1",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~Check1",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{Check1}",
    "description": null,
    "lineNumber": 1537,
    "undocument": true,
    "interface": false,
    "extends": [
      "Button"
    ]
  },
  {
    "__docId__": 2427,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~Check1",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check1#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1538,
    "undocument": true
  },
  {
    "__docId__": 2428,
    "kind": "member",
    "name": "_namePad",
    "memberof": "scripts/ui_widgets.js~Check1",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check1#_namePad",
    "access": "private",
    "description": null,
    "lineNumber": 1541,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2429,
    "kind": "member",
    "name": "_value",
    "memberof": "scripts/ui_widgets.js~Check1",
    "static": false,
    "longname": "scripts/ui_widgets.js~Check1#_value",
    "access": "private",
    "description": null,
    "lineNumber": 1542,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2430,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets.js~Check1",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~Check1#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 1545,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2431,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~Check1",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~Check1.define",
    "access": "public",
    "description": null,
    "lineNumber": 1568,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2432,
    "kind": "class",
    "name": "TextBox",
    "memberof": "scripts/ui_widgets.js",
    "static": true,
    "longname": "scripts/ui_widgets.js~TextBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{TextBox}",
    "description": null,
    "lineNumber": 1575,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2433,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1576,
    "undocument": true
  },
  {
    "__docId__": 2434,
    "kind": "member",
    "name": "_focus",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#_focus",
    "access": "private",
    "description": null,
    "lineNumber": 1580,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2436,
    "kind": "member",
    "name": "_had_error",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#_had_error",
    "access": "private",
    "description": null,
    "lineNumber": 1590,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2437,
    "kind": "member",
    "name": "decimalPlaces",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#decimalPlaces",
    "access": "public",
    "description": null,
    "lineNumber": 1592,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2438,
    "kind": "member",
    "name": "dom",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#dom",
    "access": "public",
    "description": null,
    "lineNumber": 1594,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2439,
    "kind": "member",
    "name": "radix",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#radix",
    "access": "public",
    "description": null,
    "lineNumber": 1607,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2440,
    "kind": "get",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 1616,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2441,
    "kind": "set",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 1620,
    "undocument": true
  },
  {
    "__docId__": 2442,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#init",
    "access": "public",
    "description": null,
    "lineNumber": 1624,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2443,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1633,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2444,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 1647,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2445,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 1657,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2449,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#update",
    "access": "public",
    "description": null,
    "lineNumber": 1705,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2450,
    "kind": "method",
    "name": "select",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#select",
    "access": "public",
    "description": null,
    "lineNumber": 1715,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2451,
    "kind": "method",
    "name": "focus",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#focus",
    "access": "public",
    "description": null,
    "lineNumber": 1720,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2452,
    "kind": "method",
    "name": "blur",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#blur",
    "access": "public",
    "description": null,
    "lineNumber": 1724,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2453,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~TextBox.define",
    "access": "public",
    "description": null,
    "lineNumber": 1728,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2454,
    "kind": "get",
    "name": "text",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#text",
    "access": "public",
    "description": null,
    "lineNumber": 1732,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2455,
    "kind": "set",
    "name": "text",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#text",
    "access": "public",
    "description": null,
    "lineNumber": 1736,
    "undocument": true
  },
  {
    "__docId__": 2456,
    "kind": "method",
    "name": "_prop_update",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#_prop_update",
    "access": "private",
    "description": null,
    "lineNumber": 1740,
    "undocument": true,
    "params": [
      {
        "name": "prop",
        "types": [
          "*"
        ]
      },
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2459,
    "kind": "method",
    "name": "_change",
    "memberof": "scripts/ui_widgets.js~TextBox",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets.js~TextBox#_change",
    "access": "private",
    "description": null,
    "lineNumber": 1763,
    "undocument": true,
    "params": [
      {
        "name": "text",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2460,
    "kind": "function",
    "name": "checkForTextBox",
    "memberof": "scripts/ui_widgets.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets.js~checkForTextBox",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets.js",
    "importStyle": "{checkForTextBox}",
    "description": null,
    "lineNumber": 1783,
    "undocument": true,
    "params": [
      {
        "name": "screen",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2461,
    "kind": "file",
    "name": "scripts/ui_widgets2.js",
    "content": "\"use strict\";\r\n\r\nimport * as util from './util.js';\r\nimport * as ui_base from './ui_base.js';\r\nimport * as events from './events.js';\r\nimport * as simple_toolsys from './simple_toolsys.js';\r\nimport {pushModalLight, popModalLight} from './simple_events.js';\r\nimport * as toolprop from './toolprop.js';\r\nimport {DataPathError} from './simple_controller.js';\r\nimport {Vector2, Vector3, Vector4, Quat, Matrix4} from './vectormath.js';\r\nimport {RowFrame, ColumnFrame} from \"./ui.js\";\r\n\r\nlet keymap = events.keymap;\r\n\r\nlet EnumProperty = toolprop.EnumProperty,\r\n  PropTypes = toolprop.PropTypes;\r\n\r\nlet UIBase = ui_base.UIBase,\r\n  PackFlags = ui_base.PackFlags,\r\n  IconSheets = ui_base.IconSheets;\r\n\r\nlet parsepx = ui_base.parsepx;\r\n\r\nexport class NumSliderSimple extends UIBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.canvas = document.createElement(\"canvas\");\r\n    this.g = this.canvas.getContext(\"2d\");\r\n\r\n    this.canvas.style[\"width\"] = \"100%\";\r\n    this.canvas.style[\"height\"] = this.getDefault(\"defaultHeight\") + \"px\";\r\n    this.canvas.style[\"pointer-events\"] = \"none\";\r\n\r\n    this.highlight = false;\r\n    this.isInt = false;\r\n\r\n    this.shadow.appendChild(this.canvas);\r\n    this.range = [0, 1];\r\n    this.step = 0.1;\r\n    this._value = 0.5;\r\n    this._focus = false;\r\n\r\n    this.modal = undefined;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  set value(val) {\r\n    val = Math.min(Math.max(val, this.range[0]), this.range[1]);\r\n\r\n    if (this.isInt) {\r\n      val = Math.floor(val);\r\n    }\r\n\r\n    if (this._value !== val) {\r\n      this._value = val;\r\n      this._redraw();\r\n\r\n      if (this.onchange) {\r\n        this.onchange(val);\r\n      }\r\n\r\n      if (this.getAttribute(\"datapath\")) {\r\n        let path = this.getAttribute(\"datapath\");\r\n        this.setPathValue(this.ctx, path, this._value);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateDataPath() {\r\n    let path = this.getAttribute(\"datapath\");\r\n\r\n    if (!path) {\r\n      return;\r\n    }\r\n\r\n    let val = this.getPathValue(this.ctx, path);\r\n\r\n    if (this.isInt) {\r\n      val = Math.floor(val);\r\n    }\r\n\r\n    if (val !== this._value) {\r\n      let prop = this.getPathMeta(this.ctx, path);\r\n      this.isInt = prop.type === PropTypes.INT;\r\n\r\n      if (prop.range !== undefined) {\r\n        this.range[0] = prop.range[0];\r\n        this.range[1] = prop.range[1];\r\n      }\r\n\r\n\r\n      console.log(\"updating numsplider simple value\");\r\n      this.value = val;\r\n    }\r\n  }\r\n\r\n  _setFromMouse(e) {\r\n    let rect = this.getClientRects()[0];\r\n    if (rect === undefined) {\r\n      return;\r\n    }\r\n\r\n    let x = e.x - rect.left;\r\n    let dpi = UIBase.getDPI();\r\n    let co = this._getButtonPos();\r\n\r\n    let val = this._invertButtonX(x*dpi);\r\n    this.value = val;\r\n  }\r\n\r\n  _startModal(e) {\r\n    if (e !== undefined) {\r\n      this._setFromMouse(e);\r\n    }\r\n    let dom = window;\r\n    let evtargs = {capture : false};\r\n\r\n    if (this.modal) {\r\n      console.warn(\"Double call to _startModal!\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"start simple numslider modal\");\r\n\r\n    let end = () => {\r\n      console.log(\"end simple numslider modal\");\r\n\r\n      if (this._modal === undefined) {\r\n        console.warn(\"end called twiced\");\r\n        return;\r\n      }\r\n\r\n      popModalLight(this._modal);\r\n\r\n      this._modal = undefined;\r\n      this.modal = undefined;\r\n    };\r\n\r\n    this.modal = {\r\n      mousemove : (e) => {\r\n        this._setFromMouse(e);\r\n      },\r\n\r\n      mouseover : (e) => {},\r\n      mouseout : (e) => {},\r\n      mouseleave : (e) => {},\r\n      mouseenter : (e) => {},\r\n      blur : (e) => {},\r\n      focus : (e) => {},\r\n\r\n      mouseup: (e) => {\r\n        end();\r\n      },\r\n\r\n      keydown : (e) => {\r\n        switch (e.keyCode) {\r\n          case keymap[\"Enter\"]:\r\n          case keymap[\"Space\"]:\r\n          case keymap[\"Escape\"]:\r\n            end();\r\n        }\r\n      }\r\n    };\r\n\r\n    function makefunc(f) {\r\n      return (e) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        return f(e);\r\n      }\r\n    }\r\n\r\n    for (let k in this.modal) {\r\n      this.modal[k] = makefunc(this.modal[k]);\r\n    }\r\n    this._modal = pushModalLight(this.modal);\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    if (!this.hasAttribute(\"tab-index\")) {\r\n      this.setAttribute(\"tab-index\", 0);\r\n    }\r\n\r\n    this.updateSize();\r\n\r\n    this.addEventListener(\"keydown\", (e) => {\r\n      console.log(\"yay keydown\", e.keyCode);\r\n      let dt = this.range[1] > this.range[0] ? 1 : -1;\r\n\r\n      switch (e.keyCode) {\r\n        case keymap[\"Left\"]:\r\n        case keymap[\"Right\"]:\r\n          let fac = this.step;\r\n\r\n          if (e.shiftKey) {\r\n            fac *= 0.1;\r\n          }\r\n\r\n          if (this.isInt) {\r\n            fac = Math.max(fac, 1);\r\n          }\r\n\r\n          this.value += e.keyCode === keymap[\"Left\"] ? -dt*fac : dt*fac;\r\n\r\n          break;\r\n      }\r\n    });\r\n\r\n    this.addEventListener(\"focusin\", () => {\r\n      if (this.disabled) return;\r\n\r\n      this._focus = 1;\r\n      this._redraw();\r\n      this.focus();\r\n      //console.log(\"focus2\");\r\n    });\r\n\r\n    this.addEventListener(\"mousedown\", (e) => {\r\n      this._startModal(e);\r\n    });\r\n\r\n    this.addEventListener(\"mousein\", (e) => {\r\n      console.log(\"mouse in\");\r\n      this.setHighlight(e);\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"mouseout\", (e) => {\r\n      console.log(\"mouse out\");\r\n      this.highlight = false;\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"mouseover\", (e) => {\r\n      console.log(\"mouse over\");\r\n      this.setHighlight(e);\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"mousemove\", (e) => {\r\n      this.setHighlight(e);\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"mouseleave\", (e) => {\r\n      console.log(\"mouse leave\");\r\n      this.highlight = false;\r\n      this._redraw();\r\n    });\r\n    this.addEventListener(\"blur\", (e) => {\r\n      console.log(\"blur\");\r\n      this._focus = 0;\r\n      this.highlight = false;\r\n      this._redraw();\r\n    });\r\n\r\n    this.setCSS();\r\n  }\r\n\r\n  setHighlight(e) {\r\n    this.highlight =  this.isOverButton(e) ? 2 : 1;\r\n  }\r\n\r\n  _redraw() {\r\n    let g = this.g, canvas = this.canvas;\r\n    let w = canvas.width, h = canvas.height;\r\n    let dpi = UIBase.getDPI();\r\n\r\n    let color = this.getDefault(\"BoxBG\");\r\n    let sh = ~~(this.getDefault(\"SlideHeight\")*dpi + 0.5);\r\n\r\n    g.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    //console.log(color)\r\n    g.fillStyle = color;\r\n\r\n    let y = (h - sh)*0.5;\r\n\r\n    //export function drawRoundBox(elem, canvas, g, width, height, r=undefined,\r\n    //                             op=\"fill\", color=undefined, margin=undefined, no_clear=false) {\r\n\r\n    let r = this.getDefault(\"BoxRadius\");\r\n    r = 3;\r\n\r\n    g.translate(0, y);\r\n    ui_base.drawRoundBox(this, this.canvas, g, w, sh, r, \"fill\", color, undefined, true);\r\n    g.translate(0, -y);\r\n\r\n    //g.beginPath();\r\n    //g.rect(0, y, w, sh);\r\n    //g.fill();\r\n\r\n    if (this.highlight === 1) {\r\n      color = this.getDefault(\"BoxHighlight\");\r\n    } else {\r\n      color = this.getDefault(\"BoxBorder\");\r\n    }\r\n    g.strokeStyle = color;\r\n    g.stroke();\r\n\r\n    let co = this._getButtonPos();\r\n\r\n    g.beginPath();\r\n\r\n    if (this.highlight === 2) {\r\n      color = this.getDefault(\"BoxHighlight\");\r\n    } else {\r\n      color = this.getDefault(\"BoxBorder\");\r\n    }\r\n\r\n    g.arc(co[0], co[1], co[2], -Math.PI, Math.PI);\r\n    g.fill();\r\n\r\n    g.strokeStyle = color;\r\n    g.stroke();\r\n\r\n    g.beginPath();\r\n    g.setLineDash([4, 4]);\r\n\r\n    if (this._focus) {\r\n      g.strokeStyle = this.getDefault(\"BoxHighlight\");\r\n      g.arc(co[0], co[1], co[2] - 4, -Math.PI, Math.PI);\r\n      g.stroke();\r\n    }\r\n\r\n    g.setLineDash([]);\r\n  }\r\n\r\n  isOverButton(e) {\r\n    let x = e.x, y = e.y;\r\n    let rect = this.getClientRects()[0];\r\n\r\n    if (!rect) {\r\n      return false;\r\n    }\r\n\r\n    x -= rect.left;\r\n    y -= rect.top;\r\n\r\n    let co = this._getButtonPos();\r\n\r\n    let dpi = UIBase.getDPI();\r\n    let dv = new Vector2([co[0]/dpi-x, co[1]/dpi-y]);\r\n    let dis = dv.vectorLength();\r\n\r\n    //console.log(\"dis\", dis.toFixed(3));\r\n    return dis < co[2]/dpi;\r\n  }\r\n\r\n  _invertButtonX(x) {\r\n    let w = this.canvas.width;\r\n    let dpi = UIBase.getDPI();\r\n    let sh = ~~(this.getDefault(\"SlideHeight\")*dpi + 0.5);\r\n    let boxw = this.canvas.height - 4;\r\n    let w2 = w - boxw;\r\n\r\n    x = (x - boxw*0.5) / w2;\r\n    x = x*(this.range[1] - this.range[0]) + this.range[0];\r\n\r\n    return x;\r\n  }\r\n\r\n  _getButtonPos() {\r\n    let w = this.canvas.width;\r\n    let dpi = UIBase.getDPI();\r\n    let sh = ~~(this.getDefault(\"SlideHeight\")*dpi + 0.5);\r\n    let x = this._value;\r\n    x = (x - this.range[0]) / (this.range[1] - this.range[0]);\r\n    let boxw = this.canvas.height - 4;\r\n    let w2 = w - boxw;\r\n\r\n    //console.log(x, this.range);\r\n\r\n    x = x*w2 + boxw*0.5;\r\n\r\n    return [x, boxw*0.5, boxw*0.5];\r\n  }\r\n  setCSS() {\r\n    super.setCSS();\r\n\r\n    this.canvas.style[\"width\"] = \"100%\"\r\n    this.canvas.style[\"min-width\"] = this.getDefault(\"DefaultWidth\") + \"px\";\r\n    this.style[\"min-width\"] = this.getDefault(\"DefaultWidth\") + \"px\";\r\n    this._redraw();\r\n  }\r\n\r\n  updateSize() {\r\n    if (this.canvas === undefined) {\r\n      return;\r\n    }\r\n\r\n    let rect = this.getClientRects()[0];\r\n\r\n    if (rect === undefined) {\r\n      return;\r\n    }\r\n\r\n    let dpi = UIBase.getDPI();\r\n    let w = ~~(rect.width*dpi), h = ~~(rect.height*dpi);\r\n    let canvas = this.canvas;\r\n\r\n    if (w !== canvas.width || h !== canvas.height) {\r\n      //console.log(\"canvas size update\", w, h);\r\n      this.canvas.width = w;\r\n      this.canvas.height = h;\r\n      this.setCSS();\r\n      this._redraw();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n\r\n    if (this.getAttribute(\"tab-index\") !== this.tabIndex) {\r\n      this.tabIndex = this.getAttribute(\"tab-index\");\r\n    }\r\n\r\n    this.updateSize();\r\n    this.updateDataPath();\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"numslider-simple-base-x\",\r\n    style : \"numslider_simple\"\r\n  }}\r\n}\r\nUIBase.register(NumSliderSimple);\r\n\r\nexport class NumSliderSimple2 extends ColumnFrame {\r\n  constructor() {\r\n    super();\r\n\r\n    this._value = undefined;\r\n    this._name = undefined;\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n\r\n    this.slider = document.createElement(\"numslider-simple-base-x\");\r\n\r\n    if (this.hasAttribute(\"title\")) {\r\n      this._name = this.hasAttribute(\"title\");\r\n    } else {\r\n      this._name = \"slider\";\r\n    }\r\n\r\n    this.l = this.label(this._name);\r\n    this.l.font = \"TitleText\";\r\n    this.l.overrideClass(\"numslider\", \"numslider_simpled\");\r\n\r\n    let strip = this.row();\r\n    strip.add(this.slider);\r\n\r\n    this.textbox = strip.textbox(this.getAttribute(\"datapath\"));\r\n    this.textbox.style[\"width\"] = \"\" + this.getDefault(\"TextBoxWidth\") + \"px\";\r\n    this.textbox.setCSS();\r\n\r\n    this.slider.onchange = (val) => {\r\n      this.textbox.update();\r\n    }\r\n  }\r\n\r\n  updateName() {\r\n    let name = this.getAttribute(\"title\");\r\n\r\n    if (!name && this.hasAttribute(\"datapath\")) {\r\n      let prop = this.getPathMeta(this.ctx, this.getAttribute(\"datapath\"));\r\n\r\n      if (prop) {\r\n        name = prop.uiname;\r\n      }\r\n    }\r\n\r\n    if (!name) {\r\n      name = \"[error]\";\r\n    }\r\n\r\n    if (name !== this._name) {\r\n      this._name = name;\r\n      this.l.text = name;\r\n    }\r\n  }\r\n\r\n  update() {\r\n    super.update();\r\n\r\n    this.updateName();\r\n    this.slider.setAttribute(\"datapath\", this.getAttribute(\"datapath\"));\r\n    this.textbox.setAttribute(\"datapath\", this.getAttribute(\"datapath\"));\r\n  }\r\n\r\n  setCSS() {\r\n    super.setCSS();\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"numslider-simple-x\",\r\n    style : \"numslider_simple\"\r\n  }}\r\n}\r\nUIBase.register(NumSliderSimple2);\r\n\r\nexport class VectorPanel extends ColumnFrame {\r\n  constructor() {\r\n    super();\r\n\r\n    this.range = [-1e17, 1e17];\r\n\r\n    this.name = \"\";\r\n\r\n    this.isInt = false;\r\n    this.axes = \"XYZW\";\r\n    this.value = new Vector3();\r\n    this.sliders = [];\r\n  }\r\n\r\n  init() {\r\n    super.init();\r\n    this.rebuild();\r\n    this.setCSS();\r\n\r\n    this.background = this.getDefault(\"InnerPanelBG\");\r\n    this.style[\"padding\"] = \"5px\";\r\n  }\r\n\r\n  rebuild() {\r\n    this.clear();\r\n\r\n    console.log(\"rebuilding\");\r\n\r\n    if (this.name) {\r\n      this.label(this.name);\r\n    }\r\n\r\n    this.sliders = [];\r\n\r\n    for (let i=0; i<this.value.length; i++) {\r\n      //inpath, name, defaultval, min, max, step, is_int, do_redraw, callback, packflag = 0) {\r\n\r\n      let slider = this.slider(undefined, this.axes[i], this.value[i], this.range[0], this.range[1], 0.001, this.isInt);\r\n      slider.axis = i;\r\n      let this2 = this;\r\n\r\n      slider.onchange = function(e) {\r\n        this2.value[this.axis] = this.value;\r\n\r\n        if (this2.hasAttribute(\"datapath\")) {\r\n          this2.setPathValue(this2.ctx, this2.getAttribute(\"datapath\"), this2.value);\r\n        }\r\n\r\n        if (this2.onchange) {\r\n          this2.onchange(this2.value);\r\n        }\r\n      }\r\n\r\n      this.sliders.push(slider);\r\n    }\r\n\r\n    this.setCSS();\r\n  }\r\n\r\n  setValue(value) {\r\n    if (!value) {\r\n      return;\r\n    }\r\n\r\n    if (value.length !== this.value.length) {\r\n      switch (value) {\r\n        case 2:\r\n          this.value = new Vector2(value);\r\n          break;\r\n        case 3:\r\n          this.value = new Vector3(value);\r\n          break;\r\n        default:\r\n          this.value = new Vector4(value);\r\n          break;\r\n      }\r\n\r\n      this.rebuild();\r\n    } else {\r\n      this.value.load(value);\r\n    }\r\n\r\n    if (this.onchange) {\r\n      this.onchange(this.value);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  updateDataPath() {\r\n    if (!this.hasAttribute(\"datapath\")) {\r\n      return;\r\n    }\r\n\r\n    let path = this.getAttribute(\"datapath\");\r\n\r\n    let val = this.getPathValue(this.ctx, path);\r\n    if (val === undefined) {\r\n      this.disabled = true;\r\n      return;\r\n    }\r\n\r\n\r\n    let meta = this.getPathMeta(this.ctx, path);\r\n    let name = meta.uiname !== undefined ? meta.uiname : meta.name;\r\n    if (this.hasAttribute(\"name\")) {\r\n      name = this.getAttribute(\"name\");\r\n    }\r\n\r\n    if (name && name !== this.name) {\r\n      this.name = name;\r\n      this.rebuild();\r\n      return;\r\n    }\r\n\r\n    this.disabled = false;\r\n\r\n    if (val.length !== this.value.length) {\r\n      //we do this to avoid copying a subclass.\r\n      //this.value should always be of a base Vector type.\r\n      this.value = meta.prop.getValue().copy().load(val);\r\n      this.rebuild();\r\n    } else {\r\n      if (this.value.vectorDistance(val) > 0) {\r\n        this.value.load(val);\r\n\r\n        for (let i=0; i<this.value.length; i++) {\r\n          this.sliders[i].setValue(val[i], false);\r\n          this.sliders[i]._redraw();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  update() {\r\n    super.update();\r\n    this.updateDataPath();\r\n  }\r\n\r\n  static define() {return {\r\n    tagname : \"vector-panel-x\"\r\n  }}\r\n}\r\nUIBase.register(VectorPanel);\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/ui_widgets2.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2462,
    "kind": "variable",
    "name": "keymap",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~keymap",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2463,
    "kind": "variable",
    "name": "EnumProperty",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~EnumProperty",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2464,
    "kind": "variable",
    "name": "UIBase",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~UIBase",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 18,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2465,
    "kind": "variable",
    "name": "parsepx",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~parsepx",
    "access": "public",
    "export": false,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2466,
    "kind": "class",
    "name": "NumSliderSimple",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": "{NumSliderSimple}",
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "interface": false,
    "extends": [
      "UIBase"
    ]
  },
  {
    "__docId__": 2467,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 25,
    "undocument": true
  },
  {
    "__docId__": 2468,
    "kind": "member",
    "name": "canvas",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#canvas",
    "access": "public",
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2469,
    "kind": "member",
    "name": "g",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#g",
    "access": "public",
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2470,
    "kind": "member",
    "name": "highlight",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#highlight",
    "access": "public",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2471,
    "kind": "member",
    "name": "isInt",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#isInt",
    "access": "public",
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2472,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#range",
    "access": "public",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    }
  },
  {
    "__docId__": 2473,
    "kind": "member",
    "name": "step",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#step",
    "access": "public",
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2474,
    "kind": "member",
    "name": "_value",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_value",
    "access": "private",
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2475,
    "kind": "member",
    "name": "_focus",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_focus",
    "access": "private",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2476,
    "kind": "member",
    "name": "modal",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#modal",
    "access": "public",
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2477,
    "kind": "get",
    "name": "value",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#value",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2478,
    "kind": "set",
    "name": "value",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#value",
    "access": "public",
    "description": null,
    "lineNumber": 51,
    "undocument": true
  },
  {
    "__docId__": 2480,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2483,
    "kind": "method",
    "name": "_setFromMouse",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_setFromMouse",
    "access": "private",
    "description": null,
    "lineNumber": 101,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2485,
    "kind": "method",
    "name": "_startModal",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_startModal",
    "access": "private",
    "description": null,
    "lineNumber": 115,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2486,
    "kind": "member",
    "name": "_modal",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_modal",
    "access": "private",
    "description": null,
    "lineNumber": 139,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2490,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#init",
    "access": "public",
    "description": null,
    "lineNumber": 184,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2497,
    "kind": "method",
    "name": "setHighlight",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#setHighlight",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2499,
    "kind": "method",
    "name": "_redraw",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_redraw",
    "access": "private",
    "description": null,
    "lineNumber": 267,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2500,
    "kind": "method",
    "name": "isOverButton",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#isOverButton",
    "access": "public",
    "description": null,
    "lineNumber": 332,
    "undocument": true,
    "params": [
      {
        "name": "e",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2501,
    "kind": "method",
    "name": "_invertButtonX",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_invertButtonX",
    "access": "private",
    "description": null,
    "lineNumber": 353,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2502,
    "kind": "method",
    "name": "_getButtonPos",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#_getButtonPos",
    "access": "private",
    "description": null,
    "lineNumber": 366,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 2503,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 381,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2504,
    "kind": "method",
    "name": "updateSize",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#updateSize",
    "access": "public",
    "description": null,
    "lineNumber": 390,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2505,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#update",
    "access": "public",
    "description": null,
    "lineNumber": 414,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2506,
    "kind": "member",
    "name": "tabIndex",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple#tabIndex",
    "access": "public",
    "description": null,
    "lineNumber": 418,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2507,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple.define",
    "access": "public",
    "description": null,
    "lineNumber": 425,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2508,
    "kind": "class",
    "name": "NumSliderSimple2",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": "{NumSliderSimple2}",
    "description": null,
    "lineNumber": 432,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ColumnFrame"
    ]
  },
  {
    "__docId__": 2509,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 433,
    "undocument": true
  },
  {
    "__docId__": 2510,
    "kind": "member",
    "name": "_value",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#_value",
    "access": "private",
    "description": null,
    "lineNumber": 436,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2511,
    "kind": "member",
    "name": "_name",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#_name",
    "access": "private",
    "description": null,
    "lineNumber": 437,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2512,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#init",
    "access": "public",
    "description": null,
    "lineNumber": 440,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2513,
    "kind": "member",
    "name": "slider",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#slider",
    "access": "public",
    "description": null,
    "lineNumber": 443,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2516,
    "kind": "member",
    "name": "l",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#l",
    "access": "public",
    "description": null,
    "lineNumber": 451,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2517,
    "kind": "member",
    "name": "textbox",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#textbox",
    "access": "public",
    "description": null,
    "lineNumber": 458,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2518,
    "kind": "method",
    "name": "updateName",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#updateName",
    "access": "public",
    "description": null,
    "lineNumber": 467,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2520,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#update",
    "access": "public",
    "description": null,
    "lineNumber": 488,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2521,
    "kind": "method",
    "name": "setCSS",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2#setCSS",
    "access": "public",
    "description": null,
    "lineNumber": 496,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2522,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets2.js~NumSliderSimple2",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets2.js~NumSliderSimple2.define",
    "access": "public",
    "description": null,
    "lineNumber": 500,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string, \"style\": string}"
      ]
    }
  },
  {
    "__docId__": 2523,
    "kind": "class",
    "name": "VectorPanel",
    "memberof": "scripts/ui_widgets2.js",
    "static": true,
    "longname": "scripts/ui_widgets2.js~VectorPanel",
    "access": "public",
    "export": true,
    "importPath": "./scripts/ui_widgets2.js",
    "importStyle": "{VectorPanel}",
    "description": null,
    "lineNumber": 507,
    "undocument": true,
    "interface": false,
    "extends": [
      "scripts/ui.js~ColumnFrame"
    ]
  },
  {
    "__docId__": 2524,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 508,
    "undocument": true
  },
  {
    "__docId__": 2525,
    "kind": "member",
    "name": "range",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#range",
    "access": "public",
    "description": null,
    "lineNumber": 511,
    "undocument": true,
    "type": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 2526,
    "kind": "member",
    "name": "name",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#name",
    "access": "public",
    "description": null,
    "lineNumber": 513,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2527,
    "kind": "member",
    "name": "isInt",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#isInt",
    "access": "public",
    "description": null,
    "lineNumber": 515,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2528,
    "kind": "member",
    "name": "axes",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#axes",
    "access": "public",
    "description": null,
    "lineNumber": 516,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2529,
    "kind": "member",
    "name": "value",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#value",
    "access": "public",
    "description": null,
    "lineNumber": 517,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2530,
    "kind": "member",
    "name": "sliders",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#sliders",
    "access": "public",
    "description": null,
    "lineNumber": 518,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2531,
    "kind": "method",
    "name": "init",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#init",
    "access": "public",
    "description": null,
    "lineNumber": 521,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2532,
    "kind": "member",
    "name": "background",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#background",
    "access": "public",
    "description": null,
    "lineNumber": 526,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2533,
    "kind": "method",
    "name": "rebuild",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#rebuild",
    "access": "public",
    "description": null,
    "lineNumber": 530,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2535,
    "kind": "method",
    "name": "setValue",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#setValue",
    "access": "public",
    "description": null,
    "lineNumber": 566,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2539,
    "kind": "method",
    "name": "updateDataPath",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#updateDataPath",
    "access": "public",
    "description": null,
    "lineNumber": 596,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2540,
    "kind": "member",
    "name": "disabled",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#disabled",
    "access": "public",
    "description": null,
    "lineNumber": 605,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2544,
    "kind": "method",
    "name": "update",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/ui_widgets2.js~VectorPanel#update",
    "access": "public",
    "description": null,
    "lineNumber": 640,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2545,
    "kind": "method",
    "name": "define",
    "memberof": "scripts/ui_widgets2.js~VectorPanel",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/ui_widgets2.js~VectorPanel.define",
    "access": "public",
    "description": null,
    "lineNumber": 645,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"tagname\": string}"
      ]
    }
  },
  {
    "__docId__": 2546,
    "kind": "file",
    "name": "scripts/units.js",
    "content": "import * as util from './util.js';\r\nimport {Vector2, Vector3, Vector4, Quat, Matrix4} from './vectormath.js';\r\n\r\n/*\r\nall units convert to meters\r\n*/\r\n\r\nfunction normString(s) {\r\n  //remove all whitespace\r\n  s = s.replace(/ /g, \"\").replace(/\\t/g, \"\");\r\n  return s.toLowerCase();\r\n}\r\n\r\nexport const Units = [];\r\n\r\nexport class Unit {\r\n  static getUnit(name) {\r\n    for (let cls of Units) {\r\n      if (cls.unitDefine().name === name) {\r\n        return cls;\r\n      }\r\n    }\r\n  }\r\n\r\n  static register(cls) {\r\n    Units.push(cls);\r\n  }\r\n\r\n  //subclassed static methods start here\r\n  static unitDefine() {return {\r\n    name    : \"\",\r\n    uiname  : \"\",\r\n    type    : \"\", //e.g. distance\r\n    icon    : -1,\r\n    pattern : undefined //a re literal to validate strings\r\n  }}\r\n\r\n  static parse(string) {\r\n\r\n  }\r\n\r\n  static validate(string) {\r\n    string = normString(string);\r\n    let def = this.unitDefine();\r\n\r\n    let m = string.match(def.pattern);\r\n    if (!m)\r\n      return false;\r\n\r\n    return m[0] === string;\r\n  }\r\n\r\n  //convert to internal units,\r\n  //e.g. meters for distance\r\n  static toInternal(value) {\r\n\r\n  }\r\n\r\n  static fromInternal(value) {\r\n\r\n  }\r\n\r\n  static buildString(value, decimals=2) {\r\n\r\n  }\r\n}\r\n\r\nexport class MeterUnit extends Unit {\r\n  static unitDefine() {return {\r\n    name    : \"meter\",\r\n    uiname  : \"Meter\",\r\n    type    : \"distance\",\r\n    icon    : -1,\r\n    pattern : /\\d+(\\.\\d*)?m/\r\n  }}\r\n\r\n  static parse(string) {\r\n    string = normString(string);\r\n    if (string.endsWith(\"m\")) {\r\n      string = string.slice(0, string.length-1);\r\n    }\r\n\r\n    return parseFloat(string);\r\n  }\r\n\r\n  //convert to internal units,\r\n  //e.g. meters for distance\r\n  static toInternal(value) {\r\n    return value;\r\n  }\r\n\r\n  static fromInternal(value) {\r\n    return value;\r\n  }\r\n\r\n  static buildString(value, decimals=2) {\r\n    return \"\" + value + \" m\";\r\n  }\r\n}\r\n\r\nUnit.register(MeterUnit);\r\n\r\nexport class InchUnit extends Unit {\r\n  static unitDefine() {return {\r\n    name    : \"inch\",\r\n    uiname  : \"Inch\",\r\n    type    : \"distance\",\r\n    icon    : -1,\r\n    pattern : /\\d+(\\.\\d*)?in/\r\n  }}\r\n\r\n  static parse(string) {\r\n\r\n  }\r\n\r\n  //convert to internal units,\r\n  //e.g. meters for distance\r\n  static toInternal(value) {\r\n    return value*0.0254;\r\n  }\r\n\r\n  static fromInternal(value) {\r\n    return value/0.0254;\r\n  }\r\n\r\n  static buildString(value, decimals=2) {\r\n    return \"\" + value.toFixed(decimals) + \"in\";\r\n  }\r\n}\r\nUnit.register(InchUnit);\r\n\r\nlet foot_re = /((\\d+(\\.\\d*)?ft)(\\d+(\\.\\d*)?in)?)|(\\d+(\\.\\d*)?in)/\r\n\r\nexport class FootUnit extends Unit {\r\n  static unitDefine() {return {\r\n    name    : \"foot\",\r\n    uiname  : \"Foot\",\r\n    type    : \"distance\",\r\n    icon    : -1,\r\n    pattern : foot_re\r\n  }}\r\n\r\n  static parse(string) {\r\n    string = normString(string);\r\n    let i = string.search(\"ft\");\r\n    let parts = [];\r\n    let vft=0.0, vin=0.0;\r\n\r\n    if (i >= 0) {\r\n      parts = string.split(\"ft\");\r\n      let j = parts[1].search(\"in\");\r\n\r\n      if (j >= 0) {\r\n        parts = [parts[0]].concat(parts[1].split(\"in\"));\r\n        vin = parseFloat(parts[1]);\r\n      }\r\n\r\n      vft = parseFloat(parts[0]);\r\n    } else {\r\n      string = string.replace(/in/g, \"\");\r\n      vin = parseFloat(string);\r\n    }\r\n\r\n    return vin/12.0 + vft;\r\n  }\r\n\r\n  //convert to internal units,\r\n  //e.g. meters for distance\r\n  static toInternal(value) {\r\n    return value*0.3048;\r\n  }\r\n\r\n  static fromInternal(value) {\r\n    return value/0.3048;\r\n  }\r\n\r\n  static buildString(value, decimals=2) {\r\n    let vft = ~~(value / 12);\r\n    let vin = value % 12;\r\n\r\n    if (vft === 0.0) {\r\n      return vin.toFixed(decimals) + \" in\";\r\n    }\r\n\r\n    let s = \"\" + vft + \" ft\";\r\n    if (vin !== 0.0) {\r\n      s += \" \" + vin.toFixed(decimals) + \" in\";\r\n    }\r\n\r\n    return s;\r\n  }\r\n}\r\nUnit.register(FootUnit);\r\n\r\n\r\nexport class MileUnit extends Unit {\r\n  static unitDefine() {return {\r\n    name    : \"mile\",\r\n    uiname  : \"Mile\",\r\n    type    : \"distance\",\r\n    icon    : -1,\r\n    pattern : /\\d+(\\.\\d+)?miles/\r\n  }}\r\n\r\n  static parse(string) {\r\n    string = normString(string);\r\n    string = string.replace(/miles/, \"\");\r\n    return parseFloat(string);\r\n  }\r\n\r\n  //convert to internal units,\r\n  //e.g. meters for distance\r\n  static toInternal(value) {\r\n    return value*1609.34;\r\n  }\r\n\r\n  static fromInternal(value) {\r\n    return value/1609.34;\r\n  }\r\n\r\n  static buildString(value, decimals=3) {\r\n    return \"\"+value.toFixed(decimals) + \" miles\";\r\n  }\r\n}\r\nUnit.register(MileUnit);\r\n\r\nexport function setBaseUnit(unit) {\r\n  Unit.baseUnit = unit;\r\n}\r\nexport function setMetric(val) {\r\n  Unit.isMetric = val;\r\n}\r\n\r\nUnit.isMetric = true;\r\nUnit.baseUnit = \"meter\";\r\n\r\nexport function parseValue(string) {\r\n  let base = Unit.getUnit(Unit.baseUnit);\r\n\r\n  for (let unit of Units) {\r\n    let def = unit.unitDefine();\r\n\r\n    if (unit.validate(string)) {\r\n      let value = unit.parse(string);\r\n\r\n      value = unit.toInternal(value);\r\n      return base.fromInternal(value);\r\n    }\r\n  }\r\n}\r\n\r\nexport function convert(value, unita, unitb) {\r\n  unita = Unit.getUnit(unita);\r\n  unitb = Unit.getUnit(unitb);\r\n\r\n  return unitb.fromInternal(unita.toInternal(value));\r\n}\r\n\r\n/**\r\n *\r\n * @param value Note: is not converted to internal unit\r\n * @param unit: Unit to use, should be a string referencing unit type, see unitDefine().name\r\n * @returns {*}\r\n */\r\nexport function buildString(value, unit=Unit.baseUnit) {\r\n  unit = Unit.getUnit(unit);\r\n  return unit.buildString(value);\r\n}\r\nwindow._parseValueTest = parseValue;\r\nwindow._buildStringTest = buildString;\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/units.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2547,
    "kind": "function",
    "name": "normString",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~normString",
    "access": "public",
    "export": false,
    "importPath": "./scripts/units.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2548,
    "kind": "variable",
    "name": "Units",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~Units",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{Units}",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2549,
    "kind": "class",
    "name": "Unit",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~Unit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{Unit}",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2550,
    "kind": "method",
    "name": "getUnit",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.getUnit",
    "access": "public",
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2551,
    "kind": "method",
    "name": "register",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.register",
    "access": "public",
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2552,
    "kind": "method",
    "name": "unitDefine",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.unitDefine",
    "access": "public",
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": *, \"uiname\": *, \"type\": *, \"icon\": *, \"pattern\": *}"
      ]
    }
  },
  {
    "__docId__": 2553,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.parse",
    "access": "public",
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2554,
    "kind": "method",
    "name": "validate",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.validate",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2555,
    "kind": "method",
    "name": "toInternal",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.toInternal",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2556,
    "kind": "method",
    "name": "fromInternal",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.fromInternal",
    "access": "public",
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2557,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/units.js~Unit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~Unit.buildString",
    "access": "public",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "decimals",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 2,
        "defaultValue": "2"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2558,
    "kind": "class",
    "name": "MeterUnit",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~MeterUnit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{MeterUnit}",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "interface": false,
    "extends": [
      "Unit"
    ]
  },
  {
    "__docId__": 2559,
    "kind": "method",
    "name": "unitDefine",
    "memberof": "scripts/units.js~MeterUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MeterUnit.unitDefine",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": string, \"uiname\": string, \"type\": string, \"icon\": *, \"pattern\": *}"
      ]
    }
  },
  {
    "__docId__": 2560,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/units.js~MeterUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MeterUnit.parse",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2561,
    "kind": "method",
    "name": "toInternal",
    "memberof": "scripts/units.js~MeterUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MeterUnit.toInternal",
    "access": "public",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2562,
    "kind": "method",
    "name": "fromInternal",
    "memberof": "scripts/units.js~MeterUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MeterUnit.fromInternal",
    "access": "public",
    "description": null,
    "lineNumber": 92,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2563,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/units.js~MeterUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MeterUnit.buildString",
    "access": "public",
    "description": null,
    "lineNumber": 96,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "decimals",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 2,
        "defaultValue": "2"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2564,
    "kind": "class",
    "name": "InchUnit",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~InchUnit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{InchUnit}",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "interface": false,
    "extends": [
      "Unit"
    ]
  },
  {
    "__docId__": 2565,
    "kind": "method",
    "name": "unitDefine",
    "memberof": "scripts/units.js~InchUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~InchUnit.unitDefine",
    "access": "public",
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": string, \"uiname\": string, \"type\": string, \"icon\": *, \"pattern\": *}"
      ]
    }
  },
  {
    "__docId__": 2566,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/units.js~InchUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~InchUnit.parse",
    "access": "public",
    "description": null,
    "lineNumber": 112,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2567,
    "kind": "method",
    "name": "toInternal",
    "memberof": "scripts/units.js~InchUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~InchUnit.toInternal",
    "access": "public",
    "description": null,
    "lineNumber": 118,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2568,
    "kind": "method",
    "name": "fromInternal",
    "memberof": "scripts/units.js~InchUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~InchUnit.fromInternal",
    "access": "public",
    "description": null,
    "lineNumber": 122,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2569,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/units.js~InchUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~InchUnit.buildString",
    "access": "public",
    "description": null,
    "lineNumber": 126,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "decimals",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 2,
        "defaultValue": "2"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2570,
    "kind": "variable",
    "name": "foot_re",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~foot_re",
    "access": "public",
    "export": false,
    "importPath": "./scripts/units.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 132,
    "undocument": true,
    "type": {
      "types": [
        "undefined"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2571,
    "kind": "class",
    "name": "FootUnit",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~FootUnit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{FootUnit}",
    "description": null,
    "lineNumber": 134,
    "undocument": true,
    "interface": false,
    "extends": [
      "Unit"
    ]
  },
  {
    "__docId__": 2572,
    "kind": "method",
    "name": "unitDefine",
    "memberof": "scripts/units.js~FootUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~FootUnit.unitDefine",
    "access": "public",
    "description": null,
    "lineNumber": 135,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": string, \"uiname\": string, \"type\": string, \"icon\": *, \"pattern\": *}"
      ]
    }
  },
  {
    "__docId__": 2573,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/units.js~FootUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~FootUnit.parse",
    "access": "public",
    "description": null,
    "lineNumber": 143,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2574,
    "kind": "method",
    "name": "toInternal",
    "memberof": "scripts/units.js~FootUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~FootUnit.toInternal",
    "access": "public",
    "description": null,
    "lineNumber": 169,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2575,
    "kind": "method",
    "name": "fromInternal",
    "memberof": "scripts/units.js~FootUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~FootUnit.fromInternal",
    "access": "public",
    "description": null,
    "lineNumber": 173,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2576,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/units.js~FootUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~FootUnit.buildString",
    "access": "public",
    "description": null,
    "lineNumber": 177,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "decimals",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 2,
        "defaultValue": "2"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2577,
    "kind": "class",
    "name": "MileUnit",
    "memberof": "scripts/units.js",
    "static": true,
    "longname": "scripts/units.js~MileUnit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{MileUnit}",
    "description": null,
    "lineNumber": 196,
    "undocument": true,
    "interface": false,
    "extends": [
      "Unit"
    ]
  },
  {
    "__docId__": 2578,
    "kind": "method",
    "name": "unitDefine",
    "memberof": "scripts/units.js~MileUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MileUnit.unitDefine",
    "access": "public",
    "description": null,
    "lineNumber": 197,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"name\": string, \"uiname\": string, \"type\": string, \"icon\": *, \"pattern\": *}"
      ]
    }
  },
  {
    "__docId__": 2579,
    "kind": "method",
    "name": "parse",
    "memberof": "scripts/units.js~MileUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MileUnit.parse",
    "access": "public",
    "description": null,
    "lineNumber": 205,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2580,
    "kind": "method",
    "name": "toInternal",
    "memberof": "scripts/units.js~MileUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MileUnit.toInternal",
    "access": "public",
    "description": null,
    "lineNumber": 213,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2581,
    "kind": "method",
    "name": "fromInternal",
    "memberof": "scripts/units.js~MileUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MileUnit.fromInternal",
    "access": "public",
    "description": null,
    "lineNumber": 217,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2582,
    "kind": "method",
    "name": "buildString",
    "memberof": "scripts/units.js~MileUnit",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~MileUnit.buildString",
    "access": "public",
    "description": null,
    "lineNumber": 221,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "decimals",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 3,
        "defaultValue": "3"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2583,
    "kind": "function",
    "name": "setBaseUnit",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~setBaseUnit",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{setBaseUnit}",
    "description": null,
    "lineNumber": 227,
    "undocument": true,
    "params": [
      {
        "name": "unit",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2584,
    "kind": "function",
    "name": "setMetric",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~setMetric",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{setMetric}",
    "description": null,
    "lineNumber": 230,
    "undocument": true,
    "params": [
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2585,
    "kind": "function",
    "name": "parseValue",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~parseValue",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{parseValue}",
    "description": null,
    "lineNumber": 237,
    "undocument": true,
    "params": [
      {
        "name": "string",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2586,
    "kind": "function",
    "name": "convert",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~convert",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{convert}",
    "description": null,
    "lineNumber": 252,
    "undocument": true,
    "params": [
      {
        "name": "value",
        "types": [
          "*"
        ]
      },
      {
        "name": "unita",
        "types": [
          "*"
        ]
      },
      {
        "name": "unitb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2587,
    "kind": "function",
    "name": "buildString",
    "memberof": "scripts/units.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/units.js~buildString",
    "access": "public",
    "export": true,
    "importPath": "./scripts/units.js",
    "importStyle": "{buildString}",
    "description": "",
    "lineNumber": 265,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{*}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": "Note: is not converted to internal unit"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "unit:",
        "description": "Unit to use, should be a string referencing unit type, see unitDefine().name"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 2588,
    "kind": "file",
    "name": "scripts/util.js",
    "content": "import './polyfill.js';\r\nimport './struct.js';\r\n\r\nwindow.tm = 0.0;\r\n\r\nvar EmptySlot = {};\r\n\r\nexport function getClassParent(cls) {\r\n  let p = cls.prototype;\r\n\r\n  if (p) p = p.__proto__;\r\n  if (p) p = p.constructor\r\n  ;\r\n  return p;\r\n}\r\n\r\n//make global for debugging purposes in console\r\nwindow._getClassParent = getClassParent;\r\n\r\nexport function list(iterable) {\r\n  let ret = [];\r\n\r\n  for (let item of iterable) {\r\n    ret.push(item);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n/*\r\n* returns all object keys, including\r\n* inherited ones\r\n* */\r\nexport function getAllKeys(obj) {\r\n  let keys = new Set();\r\n\r\n  if (typeof obj !== \"object\") {\r\n    throw new Error(\"must pass an object ot getAllKeys; object was: \" + obj);\r\n  }\r\n\r\n  let p;\r\n\r\n  while (p && p !== Object) {\r\n    for (let k in Object.getOwnPropertyDescriptors(obj)) {\r\n      if (k === \"__proto__\")\r\n        continue;\r\n\r\n      keys.add(k);\r\n    }\r\n\r\n    for (let k of Object.getOwnPropertySymbols(obj)) {\r\n      keys.add(k);\r\n    }\r\n\r\n    p = p.__proto__;\r\n  }\r\n\r\n  let cls = obj.constructor;\r\n  if (!cls)\r\n    return keys;\r\n\r\n  while (cls) {\r\n    let proto = cls.prototype;\r\n    if (!proto) {\r\n      cls = getClassParent(cls);\r\n      continue;\r\n    }\r\n\r\n    for (let k in proto) {\r\n      keys.add(k);\r\n    }\r\n\r\n    for (let k in Object.getOwnPropertyDescriptors(proto)) {\r\n      keys.add(k);\r\n    }\r\n\r\n    cls = getClassParent(cls);\r\n  }\r\n\r\n  return keys;\r\n}\r\n\r\nwindow._getAllKeys = getAllKeys;\r\n\r\nexport function btoa(buf) {\r\n  if (buf instanceof ArrayBuffer) {\r\n    buf = new Uint8Array(buf);\r\n  }\r\n\r\n  if (typeof buf == \"string\" || buf instanceof String) {\r\n    return window.btoa(buf);\r\n  }\r\n\r\n  var ret = \"\";\r\n  for (var i=0; i<buf.length; i++) {\r\n    ret += String.fromCharCode(buf[i]);\r\n  }\r\n\r\n  return btoa(ret);\r\n};\r\n\r\nexport function atob(buf) {\r\n  let data = window.atob(buf);\r\n  let ret = [];\r\n\r\n  for (let i=0; i<data.length; i++) {\r\n    ret.push(data.charCodeAt(i));\r\n  }\r\n\r\n  return new Uint8Array(ret);\r\n}\r\n\r\nexport function time_ms() {\r\n  if (window.performance)\r\n    return window.performance.now();\r\n  else\r\n    return new Date().getMilliseconds();\r\n}\r\n\r\nexport function color2css(c) {\r\n  var ret = c.length == 3 ? \"rgb(\" : \"rgba(\";\r\n  \r\n  for (var i=0; i<3; i++) {\r\n    if (i > 0)\r\n      ret += \",\";\r\n    \r\n    ret += ~~(c[i]*255);\r\n  }\r\n  \r\n  if (c.length == 4)\r\n    ret += \",\" + c[3];\r\n  ret += \")\";\r\n  \r\n  return ret;\r\n}\r\n\r\nexport function merge(obja, objb) {\r\n  return Object.assign({}, obja, objb);\r\n  /*\r\n  var ret = {};\r\n  \r\n  for (var k in obja) {\r\n    ret[k] = obja[k];\r\n  }\r\n  \r\n  for (var k in objb) {\r\n    ret[k] = objb[k];\r\n  }\r\n  \r\n  return ret;\r\n  //*/\r\n};\r\n\r\nexport class cachering extends Array {\r\n  constructor(func, size) {\r\n    super()\r\n    \r\n    this.cur = 0;\r\n    \r\n    for (var i=0; i<size; i++) {\r\n      this.push(func());\r\n    }\r\n  }\r\n  \r\n  static fromConstructor(cls, size) {\r\n    var func = function() {\r\n      return new cls();\r\n    }\r\n    \r\n    return new cachering(func, size);\r\n  }\r\n  \r\n  next() {\r\n    var ret = this[this.cur];\r\n    this.cur = (this.cur+1)%this.length;\r\n    \r\n    return ret;\r\n  }\r\n}\r\n\r\nexport class SetIter {\r\n  constructor(set) {\r\n    this.set = set;\r\n    this.i   = 0;\r\n    this.ret = {done : false, value : undefined};\r\n  }\r\n  \r\n  [Symbol.iterator]() {\r\n    return this;\r\n  }\r\n  \r\n  next() {\r\n    var ret = this.ret;\r\n\r\n    while (this.i < this.set.items.length && this.set.items[this.i] === EmptySlot) {\r\n      this.i++;\r\n    }\r\n    \r\n    if (this.i >= this.set.items.length) {\r\n      ret.done = true;\r\n      ret.value = undefined;\r\n      \r\n      return ret;\r\n    }\r\n    \r\n    \r\n    ret.value = this.set.items[this.i++];\r\n    return ret;\r\n  }\r\n}\r\n\r\n/**\r\n Set\r\n\r\n Stores objects in a set; each object is converted to a value via\r\n a [Symbol.keystr] method, and if that value already exists in the set\r\n then the object is not added.\r\n\r\n\r\n* */\r\nexport class set {\r\n  constructor(input) {\r\n    this.items = [];\r\n    this.keys = {};\r\n    this.freelist = [];\r\n    \r\n    this.length = 0;\r\n    \r\n    if (typeof input == \"string\") {\r\n      input = new String(input);\r\n    }\r\n    \r\n    if (input != undefined) {\r\n      if (Symbol.iterator in input) {\r\n        for (var item of input) {\r\n          this.add(item);\r\n        }\r\n      } else if (\"forEach\" in input) {\r\n        input.forEach(function(item) {\r\n          this.add(item);\r\n        }, this);\r\n      } else if (input instanceof Array) {\r\n        for (var i=0; i<input.length; i++) {\r\n          this.add(input[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  [Symbol.iterator] () {\r\n    return new SetIter(this);\r\n  }\r\n\r\n  clear() {\r\n    this.items.length = 0;\r\n    this.keys = {};\r\n    this.freelist.length = 0;\r\n    this.length = 0;\r\n\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new set();\r\n    for (let item of this) {\r\n      ret.add(item);\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  add(item) {\r\n    var key = item[Symbol.keystr]();\r\n    \r\n    if (key in this.keys) return;\r\n    \r\n    if (this.freelist.length > 0) {\r\n      var i = this.freelist.pop();\r\n      \r\n      this.keys[key] = i;\r\n      this.items[i] = item;\r\n    } else {\r\n      var i = this.items.length;\r\n      \r\n      this.keys[key] = i;\r\n      this.items.push(item);\r\n    }\r\n    \r\n    this.length++;\r\n  }\r\n  \r\n  remove(item, ignore_existence) {\r\n    var key = item[Symbol.keystr]();\r\n    \r\n    if (!(key in this.keys)) {\r\n      if (!ignore_existence) {\r\n        console.trace(\"Warning, item\", item, \"is not in set\");\r\n      }\r\n      return;\r\n    }\r\n    \r\n    var i = this.keys[key];\r\n    this.freelist.push(i);\r\n    this.items[i] = EmptySlot;\r\n    \r\n    delete this.keys[key];\r\n    \r\n    this.length--;\r\n  }\r\n  \r\n  has(item) {\r\n    return item[Symbol.keystr]() in this.keys;\r\n  }\r\n  \r\n  forEach(func, thisvar) {\r\n    for (var i=0; i<this.items.length; i++) {\r\n      var item = this.items[i];\r\n      \r\n      if (item === EmptySlot) \r\n        continue;\r\n        \r\n      thisvar != undefined ? func.call(thisvar, item) : func(item);\r\n    }\r\n  }\r\n}\r\n\r\nexport class HashIter {\r\n  constructor(hash) {\r\n    this.hash = hash;\r\n    this.i = 0;\r\n    this.ret = {done : false, value : undefined};\r\n  }\r\n  \r\n  next() {\r\n    var items = this.hash._items;\r\n    \r\n    if (this.i >= items.length) {\r\n      this.ret.done = true;\r\n      this.ret.value = undefined;\r\n      \r\n      return this.ret;\r\n    }\r\n    \r\n    do {\r\n      this.i += 2;\r\n    } while (this.i < items.length && items[i] === _hash_null);\r\n    \r\n    return this.ret;\r\n  }\r\n}\r\n\r\nvar _hash_null = {};\r\nexport class hashtable {\r\n  constructor() {\r\n    this._items = [];\r\n    this._keys = {};\r\n    this.length = 0;\r\n  }\r\n  \r\n  [Symbol.iterator]() {\r\n    return new HashIter(this);\r\n  }\r\n  \r\n  set(key, val) {\r\n    var key2 = key[Symbol.keystr]();\r\n    \r\n    var i;\r\n    if (!(key2 in this._keys)) {\r\n      i = this._items.length;\r\n      \r\n      try {\r\n        this._items.push(0);\r\n        this._items.push(0);\r\n      } catch(error) {\r\n        console.log(\":::\", this._items.length, key, key2, val)\r\n        throw error;\r\n      }\r\n      \r\n      this._keys[key2] = i;\r\n      this.length++;\r\n    } else {\r\n      i = this._keys[key2];\r\n    }\r\n    \r\n    this._items[i] = key;\r\n    this._items[i+1] = val;\r\n  }\r\n  \r\n  remove(key) {\r\n    var key2 = key[Symbol.keystr]();\r\n    \r\n    if (!(key2 in this._keys)) {\r\n      console.trace(\"Warning, key not in hashtable:\", key, key2);\r\n      return;\r\n    }\r\n    \r\n    var i = this._keys[key2];\r\n    \r\n    this._items[i] = _hash_null;\r\n    this._items[i+1] = _hash_null;\r\n    \r\n    delete this._keys[key2];\r\n    this.length--;\r\n  }\r\n  \r\n  has(key) {\r\n    var key2 = key[Symbol.keystr]();\r\n    \r\n    return key2 in this._keys;\r\n  }\r\n  \r\n  get(key) {\r\n    var key2 = key[Symbol.keystr]();\r\n    \r\n    if (!(key2 in this._keys)) {\r\n      console.trace(\"Warning, item not in hash\", key, key2);\r\n      return undefined;\r\n    }\r\n    \r\n    return this._items[this._keys[key2]+1];\r\n  }\r\n  \r\n  add(key, val) {\r\n    return this.set(key, val);\r\n  }\r\n  \r\n  keys() {\r\n    var ret = [];\r\n    \r\n    for (var i=0; i<this._items.length; i += 2) {\r\n      var key = this._items[i];\r\n      \r\n      if (key !== _hash_null) {\r\n        ret.push(key);\r\n      }\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  values() {\r\n    var ret = [];\r\n    \r\n    for (var i=0; i<this._items.length; i += 2) {\r\n      var item = this._items[i+1];\r\n      \r\n      if (item !== _hash_null) {\r\n        ret.push(item);\r\n      }\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  forEach(cb, thisvar) {\r\n    if (thisvar == undefined)\r\n      thisvar = self;\r\n    \r\n    for (var k in this._keys) {\r\n      var i = this._keys[k];\r\n      \r\n      cb.call(thisvar, k, this._items[i]);\r\n    }\r\n  }\r\n}\r\n\r\nexport class IDGen {\r\n  constructor() {\r\n    this._cur = 1;\r\n  }\r\n\r\n  next() {\r\n    return this._cur++;\r\n  }\r\n\r\n  copy() {\r\n    let ret = new IDGen();\r\n    ret._cur = this._cur;\r\n    return ret;\r\n  }\r\n\r\n  max_cur(id) {\r\n    this._cur = Math.max(this._cur, id+1);\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      _cur : this._cur\r\n    };\r\n  }\r\n\r\n  static fromJSON(obj) {\r\n    var ret = new IDGen();\r\n    ret._cur = obj._cur;\r\n    return ret;\r\n  }\r\n}\r\n\r\nIDGen.STRUCT = `\r\nIDGen {\r\n  _cur : int;\r\n}\r\n`;\r\nnstructjs.manager.add_class(IDGen);\r\n\r\n\r\nfunction get_callstack(err) {\r\n  var callstack = [];\r\n  var isCallstackPopulated = false;\r\n\r\n  var err_was_undefined = err == undefined;\r\n\r\n  if (err == undefined) {\r\n    try {\r\n      _idontexist.idontexist+=0; //doesn't exist- that's the point\r\n    } catch(err1) {\r\n      err = err1;\r\n    }\r\n  }\r\n\r\n  if (err != undefined) {\r\n    if (err.stack) { //Firefox\r\n      var lines = err.stack.split('\\n');\r\n      var len=lines.length;\r\n      for (var i=0; i<len; i++) {\r\n        if (1) {\r\n          lines[i] = lines[i].replace(/@http\\:\\/\\/.*\\//, \"|\")\r\n          var l = lines[i].split(\"|\")\r\n          lines[i] = l[1] + \": \" + l[0]\r\n          lines[i] = lines[i].trim()\r\n          callstack.push(lines[i]);\r\n        }\r\n      }\r\n      \r\n      //Remove call to printStackTrace()\r\n      if (err_was_undefined) {\r\n        //callstack.shift();\r\n      }\r\n      isCallstackPopulated = true;\r\n    }\r\n    else if (window.opera && e.message) { //Opera\r\n      var lines = err.message.split('\\n');\r\n      var len=lines.length;\r\n      for (var i=0; i<len; i++) {\r\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\r\n          var entry = lines[i];\r\n          //Append next line also since it has the file info\r\n          if (lines[i+1]) {\r\n            entry += ' at ' + lines[i+1];\r\n            i++;\r\n          }\r\n          callstack.push(entry);\r\n        }\r\n      }\r\n      //Remove call to printStackTrace()\r\n      if (err_was_undefined) {\r\n        callstack.shift();\r\n      }\r\n      isCallstackPopulated = true;\r\n    }\r\n   }\r\n\r\n    var limit = 24;\r\n    if (!isCallstackPopulated) { //IE and Safari\r\n      var currentFunction = arguments.callee.caller;\r\n      var i = 0;\r\n      while (currentFunction && i < 24) {\r\n        var fn = currentFunction.toString();\r\n        var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\r\n        callstack.push(fname);\r\n        currentFunction = currentFunction.caller;\r\n        \r\n        i++;\r\n      }\r\n    }\r\n  \r\n  return callstack;\r\n}\r\n\r\nexport function print_stack(err) {\r\n  try {\r\n    var cs = get_callstack(err);\r\n  } catch (err2) {\r\n    console.log(\"Could not fetch call stack.\");\r\n    return;\r\n  }\r\n  \r\n  console.log(\"Callstack:\");\r\n  for (var i=0; i<cs.length; i++) {\r\n    console.log(cs[i]);\r\n  }\r\n}\r\n\r\nwindow.get_callstack = get_callstack;\r\nwindow.print_stack = print_stack;\r\n\r\nexport function fetch_file(path) {\r\n    var url = location.origin + \"/\" + path\r\n    \r\n    var req = new XMLHttpRequest(\r\n    );\r\n    \r\n    return new Promise(function(accept, reject) {\r\n      req.open(\"GET\", url)\r\n      req.onreadystatechange = function(e) {\r\n        if (req.status == 200 && req.readyState == 4) {\r\n            accept(req.response);\r\n        } else if (req.status >= 400) {\r\n          reject(req.status, req.statusText);\r\n        }\r\n      }\r\n      req.send();\r\n    });\r\n}\r\n\r\n//from:https://en.wikipedia.org/wiki/Mersenne_Twister\r\nfunction _int32(x) {\r\n  // Get the 31 least significant bits.\r\n  return ~~(((1<<30)-1) & (~~x))\r\n}\r\n\r\nexport class MersenneRandom {\r\n  constructor(seed) {\r\n    // Initialize the index to 0\r\n    this.index = 624;\r\n    this.mt = new Uint32Array(624);\r\n\r\n    this.seed(seed);\r\n  }\r\n\r\n  random() {\r\n    return this.extract_number() / (1<<30);\r\n  }\r\n\r\n  seed(seed) {\r\n    seed = ~~(seed*8192);\r\n\r\n    // Initialize the index to 0\r\n    this.index = 624;\r\n    this.mt.fill(0, 0, this.mt.length);\r\n\r\n    this.mt[0] = seed;  // Initialize the initial state to the seed\r\n\r\n    for (var i=1; i<624; i++) {\r\n      this.mt[i] = _int32(\r\n        1812433253 * (this.mt[i - 1] ^ this.mt[i - 1] >> 30) + i);\r\n    }\r\n  }\r\n\r\n  extract_number() {\r\n    if (this.index >= 624)\r\n      this.twist();\r\n\r\n    var y = this.mt[this.index];\r\n\r\n    // Right shift by 11 bits\r\n    y = y ^ y >> 11;\r\n    // Shift y left by 7 and take the bitwise and of 2636928640\r\n    y = y ^ y << 7 & 2636928640;\r\n    // Shift y left by 15 and take the bitwise and of y and 4022730752\r\n    y = y ^ y << 15 & 4022730752;\r\n    // Right shift by 18 bits\r\n    y = y ^ y >> 18;\r\n\r\n    this.index = this.index + 1;\r\n\r\n    return _int32(y);\r\n  }\r\n\r\n  twist() {\r\n    for (var i=0; i<624; i++) {\r\n      // Get the most significant bit and add it to the less significant\r\n      // bits of the next number\r\n      var y = _int32((this.mt[i] & 0x80000000) +\r\n        (this.mt[(i + 1) % 624] & 0x7fffffff));\r\n      this.mt[i] = this.mt[(i + 397) % 624] ^ y >> 1;\r\n\r\n      if (y % 2 != 0)\r\n        this.mt[i] = this.mt[i] ^ 0x9908b0df;\r\n    }\r\n\r\n    this.index = 0;\r\n  }\r\n}\r\n\r\nvar _mt = new MersenneRandom(0);\r\nexport function random() {\r\n  return _mt.extract_number() / (1<<30);\r\n}\r\n\r\nexport function seed(n) {\r\n//  console.trace(\"seed called\");\r\n  _mt.seed(n);\r\n}\r\n\r\nexport function strhash(str) {\r\n  var hash = 0;\r\n\r\n  for (var i=0; i<str.length; i++) {\r\n    var ch = str.charCodeAt(i);\r\n\r\n    hash = (hash ^ ch);\r\n    hash = hash < 0 ? -hash : hash;\r\n\r\n    hash = (hash*232344 + 4323543) & ((1<<19)-1);\r\n  }\r\n\r\n  return hash;\r\n}\r\n\r\nvar hashsizes = [\r\n  /*2, 5, 11, 19, 37, 67, 127, */223, 383, 653, 1117, 1901, 3251,\r\n   5527, 9397, 15991, 27191, 46229, 78593, 133631, 227177, 38619,\r\n  656587, 1116209, 1897561, 3225883, 5484019, 9322861, 15848867,\r\n  26943089, 45803279, 77865577, 132371489, 225031553\r\n];\r\n\r\nvar FTAKEN=0, FKEY= 1, FVAL= 2, FTOT=3;\r\n\r\nexport class FastHash extends Array {\r\n  constructor() {\r\n    super();\r\n\r\n    this.cursize = 0;\r\n    this.size = hashsizes[this.cursize];\r\n    this.used = 0;\r\n\r\n    this.length = this.size*FTOT;\r\n    this.fill(0, 0, this.length);\r\n  }\r\n\r\n  resize(size) {\r\n    var table = this.slice(0, this.length);\r\n\r\n    this.length = size*FTOT;\r\n    this.size = size;\r\n    this.fill(0, 0, this.length);\r\n\r\n    for (var i=0; i<table.length; i += FTOT) {\r\n      if (!table[i+FTAKEN]) continue;\r\n\r\n      var key = table[i+FKEY], val = table[i+FVAL];\r\n      this.set(key, val);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  get(key) {\r\n    var hash = typeof key == \"string\" ? strhash(key) : key;\r\n    hash = typeof hash == \"object\" ? hash.valueOf() : hash;\r\n\r\n    var probe = 0;\r\n\r\n    var h = (hash + probe) % this.size;\r\n\r\n    var _i = 0;\r\n    while (_i++ < 50000 && this[h*FTOT+FTAKEN]) {\r\n      if (this[h*FTOT+FKEY] ==  key) {\r\n        return this[h*FTOT+FVAL];\r\n      }\r\n\r\n      probe = (probe+1)*2;\r\n      h = (hash + probe) % this.size;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  has(key) {\r\n    var hash = typeof key == \"string\" ? strhash(key) : key;\r\n    hash = typeof hash == \"object\" ? hash.valueOf() : hash;\r\n\r\n    var probe = 0;\r\n\r\n    var h = (hash + probe) % this.size;\r\n\r\n    var _i = 0;\r\n    while (_i++ < 50000 && this[h*FTOT+FTAKEN]) {\r\n      if (this[h*FTOT+FKEY] ==  key) {\r\n        return true;\r\n      }\r\n\r\n      probe = (probe+1)*2;\r\n      h = (hash + probe) % this.size;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  set(key, val) {\r\n    var hash = typeof key == \"string\" ? strhash(key) : key;\r\n    hash = typeof hash == \"object\" ? hash.valueOf() : hash;\r\n\r\n    if (this.used > this.size/3) {\r\n      this.resize(hashsizes[this.cursize++]);\r\n    }\r\n\r\n    var probe = 0;\r\n\r\n    var h = (hash + probe) % this.size;\r\n\r\n    var _i = 0;\r\n    while (_i++ < 50000 && this[h*FTOT+FTAKEN]) {\r\n      if (this[h*FTOT+FKEY] ==  key) {\r\n        this[h*FTOT+FVAL] = val;\r\n        return;\r\n      }\r\n\r\n      probe = (probe+1)*2;\r\n      h = (hash + probe) % this.size;\r\n    }\r\n\r\n    this[h*FTOT+FTAKEN] = 1;\r\n    this[h*FTOT+FKEY] = key;\r\n    this[h*FTOT+FVAL] = val;\r\n\r\n    this.used++;\r\n  }\r\n}\r\n\r\nexport function test_fasthash() {\r\n  var h = new FastHash();\r\n  console.log(\"bleh hash:\", strhash(\"bleh\"));\r\n\r\n  h.set(\"bleh\", 1);\r\n  h.set(\"bleh\", 2);\r\n  h.set(\"bleh\", 3);\r\n\r\n  console.log(h);\r\n\r\n  return h;\r\n};\r\n\r\nexport class ImageReader {\r\n  load_image() {\r\n    let input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    \r\n    let doaccept;\r\n    \r\n    let promise = new Promise((accept, reject) => {\r\n      doaccept = accept;\r\n    });\r\n    \r\n    input.addEventListener(\"change\", function(e) {\r\n      let files = this.files;\r\n      console.log(\"got file\", e, files)\r\n          \r\n      if (files.length == 0) return;\r\n      \r\n      var reader = new FileReader();\r\n      var this2 = this;\r\n      \r\n      reader.onload = (e) => {\r\n        let data = e.target.result;\r\n        let image = new Image();\r\n        \r\n        image.src = data;\r\n        image.onload = (e) => {\r\n          console.log(\"got image\", image.width, image.height);\r\n          \r\n          let canvas = document.createElement(\"canvas\");\r\n          let g = canvas.getContext(\"2d\");\r\n          \r\n          canvas.width = image.width;\r\n          canvas.height = image.height;\r\n          \r\n          g.drawImage(image, 0, 0);\r\n          let idata = g.getImageData(0, 0, image.width, image.height);\r\n          \r\n          doaccept(idata);\r\n        }\r\n      };\r\n      \r\n      reader.readAsDataURL(files[0]);\r\n    });\r\n    \r\n    input.click();\r\n    return promise;\r\n  }\r\n  \r\n  example() {\r\n    this.load_image().then((idata) => {\r\n      console.log(idata);\r\n    });\r\n  }\r\n};\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/util.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2589,
    "kind": "variable",
    "name": "EmptySlot",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~EmptySlot",
    "access": "public",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2590,
    "kind": "function",
    "name": "getClassParent",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~getClassParent",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{getClassParent}",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2591,
    "kind": "function",
    "name": "list",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~list",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{list}",
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [
      {
        "name": "iterable",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2592,
    "kind": "function",
    "name": "getAllKeys",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~getAllKeys",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{getAllKeys}",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2593,
    "kind": "function",
    "name": "btoa",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~btoa",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{btoa}",
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "params": [
      {
        "name": "buf",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2594,
    "kind": "function",
    "name": "atob",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~atob",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{atob}",
    "description": null,
    "lineNumber": 102,
    "undocument": true,
    "params": [
      {
        "name": "buf",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2595,
    "kind": "function",
    "name": "time_ms",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~time_ms",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{time_ms}",
    "description": null,
    "lineNumber": 113,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2596,
    "kind": "function",
    "name": "color2css",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~color2css",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{color2css}",
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "params": [
      {
        "name": "c",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2597,
    "kind": "function",
    "name": "merge",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~merge",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{merge}",
    "description": null,
    "lineNumber": 137,
    "undocument": true,
    "params": [
      {
        "name": "obja",
        "types": [
          "*"
        ]
      },
      {
        "name": "objb",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2598,
    "kind": "class",
    "name": "cachering",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~cachering",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{cachering}",
    "description": null,
    "lineNumber": 154,
    "undocument": true,
    "interface": false,
    "extends": [
      "Array"
    ]
  },
  {
    "__docId__": 2599,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~cachering",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~cachering#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 155,
    "undocument": true
  },
  {
    "__docId__": 2600,
    "kind": "member",
    "name": "cur",
    "memberof": "scripts/util.js~cachering",
    "static": false,
    "longname": "scripts/util.js~cachering#cur",
    "access": "public",
    "description": null,
    "lineNumber": 158,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2601,
    "kind": "method",
    "name": "fromConstructor",
    "memberof": "scripts/util.js~cachering",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~cachering.fromConstructor",
    "access": "public",
    "description": null,
    "lineNumber": 165,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2602,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/util.js~cachering",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~cachering#next",
    "access": "public",
    "description": null,
    "lineNumber": 173,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2604,
    "kind": "class",
    "name": "SetIter",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~SetIter",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{SetIter}",
    "description": null,
    "lineNumber": 181,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2605,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~SetIter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~SetIter#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 182,
    "undocument": true
  },
  {
    "__docId__": 2606,
    "kind": "member",
    "name": "set",
    "memberof": "scripts/util.js~SetIter",
    "static": false,
    "longname": "scripts/util.js~SetIter#set",
    "access": "public",
    "description": null,
    "lineNumber": 183,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2607,
    "kind": "member",
    "name": "i",
    "memberof": "scripts/util.js~SetIter",
    "static": false,
    "longname": "scripts/util.js~SetIter#i",
    "access": "public",
    "description": null,
    "lineNumber": 184,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2608,
    "kind": "member",
    "name": "ret",
    "memberof": "scripts/util.js~SetIter",
    "static": false,
    "longname": "scripts/util.js~SetIter#ret",
    "access": "public",
    "description": null,
    "lineNumber": 185,
    "undocument": true,
    "type": {
      "types": [
        "{\"done\": *, \"value\": *}"
      ]
    }
  },
  {
    "__docId__": 2609,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/util.js~SetIter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~SetIter#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 188,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2610,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/util.js~SetIter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~SetIter#next",
    "access": "public",
    "description": null,
    "lineNumber": 192,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2611,
    "kind": "class",
    "name": "set",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~set",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{set}",
    "description": "Set\n\nStores objects in a set; each object is converted to a value via\na [Symbol.keystr] method, and if that value already exists in the set\nthen the object is not added.",
    "lineNumber": 221,
    "interface": false
  },
  {
    "__docId__": 2612,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 222,
    "undocument": true
  },
  {
    "__docId__": 2613,
    "kind": "member",
    "name": "items",
    "memberof": "scripts/util.js~set",
    "static": false,
    "longname": "scripts/util.js~set#items",
    "access": "public",
    "description": null,
    "lineNumber": 223,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2614,
    "kind": "member",
    "name": "keys",
    "memberof": "scripts/util.js~set",
    "static": false,
    "longname": "scripts/util.js~set#keys",
    "access": "public",
    "description": null,
    "lineNumber": 224,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 2615,
    "kind": "member",
    "name": "freelist",
    "memberof": "scripts/util.js~set",
    "static": false,
    "longname": "scripts/util.js~set#freelist",
    "access": "public",
    "description": null,
    "lineNumber": 225,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2616,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/util.js~set",
    "static": false,
    "longname": "scripts/util.js~set#length",
    "access": "public",
    "description": null,
    "lineNumber": 227,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2617,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 250,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2618,
    "kind": "method",
    "name": "clear",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#clear",
    "access": "public",
    "description": null,
    "lineNumber": 254,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2621,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#copy",
    "access": "public",
    "description": null,
    "lineNumber": 263,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2622,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#add",
    "access": "public",
    "description": null,
    "lineNumber": 272,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2623,
    "kind": "method",
    "name": "remove",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#remove",
    "access": "public",
    "description": null,
    "lineNumber": 292,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      },
      {
        "name": "ignore_existence",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2624,
    "kind": "method",
    "name": "has",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#has",
    "access": "public",
    "description": null,
    "lineNumber": 311,
    "undocument": true,
    "params": [
      {
        "name": "item",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2625,
    "kind": "method",
    "name": "forEach",
    "memberof": "scripts/util.js~set",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~set#forEach",
    "access": "public",
    "description": null,
    "lineNumber": 315,
    "undocument": true,
    "params": [
      {
        "name": "func",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2626,
    "kind": "class",
    "name": "HashIter",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~HashIter",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{HashIter}",
    "description": null,
    "lineNumber": 327,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2627,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~HashIter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~HashIter#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 328,
    "undocument": true
  },
  {
    "__docId__": 2628,
    "kind": "member",
    "name": "hash",
    "memberof": "scripts/util.js~HashIter",
    "static": false,
    "longname": "scripts/util.js~HashIter#hash",
    "access": "public",
    "description": null,
    "lineNumber": 329,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2629,
    "kind": "member",
    "name": "i",
    "memberof": "scripts/util.js~HashIter",
    "static": false,
    "longname": "scripts/util.js~HashIter#i",
    "access": "public",
    "description": null,
    "lineNumber": 330,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2630,
    "kind": "member",
    "name": "ret",
    "memberof": "scripts/util.js~HashIter",
    "static": false,
    "longname": "scripts/util.js~HashIter#ret",
    "access": "public",
    "description": null,
    "lineNumber": 331,
    "undocument": true,
    "type": {
      "types": [
        "{\"done\": *, \"value\": *}"
      ]
    }
  },
  {
    "__docId__": 2631,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/util.js~HashIter",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~HashIter#next",
    "access": "public",
    "description": null,
    "lineNumber": 334,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2633,
    "kind": "variable",
    "name": "_hash_null",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~_hash_null",
    "access": "private",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 352,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2634,
    "kind": "class",
    "name": "hashtable",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~hashtable",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{hashtable}",
    "description": null,
    "lineNumber": 353,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2635,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 354,
    "undocument": true
  },
  {
    "__docId__": 2636,
    "kind": "member",
    "name": "_items",
    "memberof": "scripts/util.js~hashtable",
    "static": false,
    "longname": "scripts/util.js~hashtable#_items",
    "access": "private",
    "description": null,
    "lineNumber": 355,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    }
  },
  {
    "__docId__": 2637,
    "kind": "member",
    "name": "_keys",
    "memberof": "scripts/util.js~hashtable",
    "static": false,
    "longname": "scripts/util.js~hashtable#_keys",
    "access": "private",
    "description": null,
    "lineNumber": 356,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    }
  },
  {
    "__docId__": 2638,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/util.js~hashtable",
    "static": false,
    "longname": "scripts/util.js~hashtable#length",
    "access": "public",
    "description": null,
    "lineNumber": 357,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2639,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 360,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2640,
    "kind": "method",
    "name": "set",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#set",
    "access": "public",
    "description": null,
    "lineNumber": 364,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2641,
    "kind": "method",
    "name": "remove",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#remove",
    "access": "public",
    "description": null,
    "lineNumber": 389,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2642,
    "kind": "method",
    "name": "has",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#has",
    "access": "public",
    "description": null,
    "lineNumber": 406,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2643,
    "kind": "method",
    "name": "get",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#get",
    "access": "public",
    "description": null,
    "lineNumber": 412,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2644,
    "kind": "method",
    "name": "add",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#add",
    "access": "public",
    "description": null,
    "lineNumber": 423,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2645,
    "kind": "method",
    "name": "keys",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#keys",
    "access": "public",
    "description": null,
    "lineNumber": 427,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2646,
    "kind": "method",
    "name": "values",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#values",
    "access": "public",
    "description": null,
    "lineNumber": 441,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2647,
    "kind": "method",
    "name": "forEach",
    "memberof": "scripts/util.js~hashtable",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~hashtable#forEach",
    "access": "public",
    "description": null,
    "lineNumber": 455,
    "undocument": true,
    "params": [
      {
        "name": "cb",
        "types": [
          "*"
        ]
      },
      {
        "name": "thisvar",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2648,
    "kind": "class",
    "name": "IDGen",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~IDGen",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{IDGen}",
    "description": null,
    "lineNumber": 467,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2649,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~IDGen#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 468,
    "undocument": true
  },
  {
    "__docId__": 2650,
    "kind": "member",
    "name": "_cur",
    "memberof": "scripts/util.js~IDGen",
    "static": false,
    "longname": "scripts/util.js~IDGen#_cur",
    "access": "private",
    "description": null,
    "lineNumber": 469,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2651,
    "kind": "method",
    "name": "next",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~IDGen#next",
    "access": "public",
    "description": null,
    "lineNumber": 472,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2652,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~IDGen#copy",
    "access": "public",
    "description": null,
    "lineNumber": 476,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2653,
    "kind": "method",
    "name": "max_cur",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~IDGen#max_cur",
    "access": "public",
    "description": null,
    "lineNumber": 482,
    "undocument": true,
    "params": [
      {
        "name": "id",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2655,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~IDGen#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 486,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"_cur\": *}"
      ]
    }
  },
  {
    "__docId__": 2656,
    "kind": "method",
    "name": "fromJSON",
    "memberof": "scripts/util.js~IDGen",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~IDGen.fromJSON",
    "access": "public",
    "description": null,
    "lineNumber": 492,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2657,
    "kind": "function",
    "name": "get_callstack",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~get_callstack",
    "access": "public",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 507,
    "undocument": true,
    "params": [
      {
        "name": "err",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2658,
    "kind": "function",
    "name": "print_stack",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~print_stack",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{print_stack}",
    "description": null,
    "lineNumber": 580,
    "undocument": true,
    "params": [
      {
        "name": "err",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2659,
    "kind": "function",
    "name": "fetch_file",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~fetch_file",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{fetch_file}",
    "description": null,
    "lineNumber": 597,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2660,
    "kind": "function",
    "name": "_int32",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~_int32",
    "access": "private",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 617,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2661,
    "kind": "class",
    "name": "MersenneRandom",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~MersenneRandom",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{MersenneRandom}",
    "description": null,
    "lineNumber": 622,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2662,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~MersenneRandom",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 623,
    "undocument": true
  },
  {
    "__docId__": 2663,
    "kind": "member",
    "name": "index",
    "memberof": "scripts/util.js~MersenneRandom",
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#index",
    "access": "public",
    "description": null,
    "lineNumber": 625,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2664,
    "kind": "member",
    "name": "mt",
    "memberof": "scripts/util.js~MersenneRandom",
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#mt",
    "access": "public",
    "description": null,
    "lineNumber": 626,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2665,
    "kind": "method",
    "name": "random",
    "memberof": "scripts/util.js~MersenneRandom",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#random",
    "access": "public",
    "description": null,
    "lineNumber": 631,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2666,
    "kind": "method",
    "name": "seed",
    "memberof": "scripts/util.js~MersenneRandom",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#seed",
    "access": "public",
    "description": null,
    "lineNumber": 635,
    "undocument": true,
    "params": [
      {
        "name": "seed",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2668,
    "kind": "method",
    "name": "extract_number",
    "memberof": "scripts/util.js~MersenneRandom",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#extract_number",
    "access": "public",
    "description": null,
    "lineNumber": 650,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2670,
    "kind": "method",
    "name": "twist",
    "memberof": "scripts/util.js~MersenneRandom",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~MersenneRandom#twist",
    "access": "public",
    "description": null,
    "lineNumber": 670,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2672,
    "kind": "variable",
    "name": "_mt",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~_mt",
    "access": "private",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 686,
    "undocument": true,
    "type": {
      "types": [
        "scripts/util.js~MersenneRandom"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2673,
    "kind": "function",
    "name": "random",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~random",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{random}",
    "description": null,
    "lineNumber": 687,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2674,
    "kind": "function",
    "name": "seed",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~seed",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{seed}",
    "description": null,
    "lineNumber": 691,
    "undocument": true,
    "params": [
      {
        "name": "n",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2675,
    "kind": "function",
    "name": "strhash",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~strhash",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{strhash}",
    "description": null,
    "lineNumber": 696,
    "undocument": true,
    "params": [
      {
        "name": "str",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2676,
    "kind": "variable",
    "name": "hashsizes",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~hashsizes",
    "access": "public",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 711,
    "undocument": true,
    "type": {
      "types": [
        "number[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2677,
    "kind": "variable",
    "name": "FTAKEN",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~FTAKEN",
    "access": "public",
    "export": false,
    "importPath": "./scripts/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 718,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2678,
    "kind": "class",
    "name": "FastHash",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~FastHash",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{FastHash}",
    "description": null,
    "lineNumber": 720,
    "undocument": true,
    "interface": false,
    "extends": [
      "Array"
    ]
  },
  {
    "__docId__": 2679,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/util.js~FastHash",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~FastHash#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 721,
    "undocument": true
  },
  {
    "__docId__": 2680,
    "kind": "member",
    "name": "cursize",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#cursize",
    "access": "public",
    "description": null,
    "lineNumber": 724,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2681,
    "kind": "member",
    "name": "size",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#size",
    "access": "public",
    "description": null,
    "lineNumber": 725,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2682,
    "kind": "member",
    "name": "used",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#used",
    "access": "public",
    "description": null,
    "lineNumber": 726,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2683,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#length",
    "access": "public",
    "description": null,
    "lineNumber": 728,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2684,
    "kind": "method",
    "name": "resize",
    "memberof": "scripts/util.js~FastHash",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~FastHash#resize",
    "access": "public",
    "description": null,
    "lineNumber": 732,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2687,
    "kind": "method",
    "name": "get",
    "memberof": "scripts/util.js~FastHash",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~FastHash#get",
    "access": "public",
    "description": null,
    "lineNumber": 749,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2688,
    "kind": "method",
    "name": "has",
    "memberof": "scripts/util.js~FastHash",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~FastHash#has",
    "access": "public",
    "description": null,
    "lineNumber": 770,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2689,
    "kind": "method",
    "name": "set",
    "memberof": "scripts/util.js~FastHash",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~FastHash#set",
    "access": "public",
    "description": null,
    "lineNumber": 791,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "val",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2690,
    "kind": "member",
    "name": "[h * FTOT + FVAL]",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#[h * FTOT + FVAL]",
    "access": "public",
    "description": null,
    "lineNumber": 806,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2691,
    "kind": "member",
    "name": "[h * FTOT + FTAKEN]",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#[h * FTOT + FTAKEN]",
    "access": "public",
    "description": null,
    "lineNumber": 814,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2692,
    "kind": "member",
    "name": "[h * FTOT + FKEY]",
    "memberof": "scripts/util.js~FastHash",
    "static": false,
    "longname": "scripts/util.js~FastHash#[h * FTOT + FKEY]",
    "access": "public",
    "description": null,
    "lineNumber": 815,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2694,
    "kind": "function",
    "name": "test_fasthash",
    "memberof": "scripts/util.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/util.js~test_fasthash",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{test_fasthash}",
    "description": null,
    "lineNumber": 822,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2695,
    "kind": "class",
    "name": "ImageReader",
    "memberof": "scripts/util.js",
    "static": true,
    "longname": "scripts/util.js~ImageReader",
    "access": "public",
    "export": true,
    "importPath": "./scripts/util.js",
    "importStyle": "{ImageReader}",
    "description": null,
    "lineNumber": 835,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2696,
    "kind": "method",
    "name": "load_image",
    "memberof": "scripts/util.js~ImageReader",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~ImageReader#load_image",
    "access": "public",
    "description": null,
    "lineNumber": 836,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2697,
    "kind": "method",
    "name": "example",
    "memberof": "scripts/util.js~ImageReader",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/util.js~ImageReader#example",
    "access": "public",
    "description": null,
    "lineNumber": 883,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2698,
    "kind": "file",
    "name": "scripts/vectormath.js",
    "content": "import * as util from './util.js';\r\nimport './struct.js';\r\n\r\nvar sin=Math.sin, cos=Math.cos, abs=Math.abs, log=Math.log,\r\n    asin=Math.asin, exp=Math.exp, acos=Math.acos, fract=Math.fract,\r\n    sign=Math.sign, tent=Math.tent, atan2=Math.atan2, atan=Math.atan,\r\n    pow=Math.pow, sqrt=Math.sqrt, floor=Math.floor, ceil=Math.ceil,\r\n    min=Math.min, max=Math.max, PI=Math.PI, E=2.718281828459045;\r\n\r\nvar Class = util.Class;\r\nvar M_SQRT2=Math.sqrt(2.0);\r\nvar FLT_EPSILON=2.22e-16;\r\nvar DOT_NORM_SNAP_LIMIT = 0.00000000001;\r\n\r\nvar basic_funcs = {\r\n  equals  : [[\"b\"], \"this[X] == b[X]\", \"&&\"],\r\n  /*dot is made manually so it's safe for acos\r\n  dot     : [[\"b\"], \"this[X]*b[X]\", \"+\"],\r\n   */\r\n  zero    : [[], \"0.0;\"],\r\n  negate  : [[], \"-this[X];\"],\r\n  combine : [[\"b\", \"u\", \"v\"], \"this[X]*u + this[X]*v;\"],\r\n  interp  : [[\"b\", \"t\"], \"this[X] + (b[X] - this[X])*t;\"],\r\n  add    : [[\"b\"], \"this[X] + b[X];\"],\r\n  addFac : [[\"b\", \"F\"], \"this[X] + b[X]*F;\"],\r\n  fract  : [[], \"Math.fract(this[X]);\"],\r\n  sub    : [[\"b\"], \"this[X] - b[X];\"],\r\n  mul    : [[\"b\"], \"this[X] * b[X];\"],\r\n  div    : [[\"b\"], \"this[X] / b[X];\"],\r\n  mulScalar : [[\"b\"], \"this[X] * b;\"],\r\n  divScalar : [[\"b\"], \"this[X] / b;\"],\r\n  addScalar : [[\"b\"], \"this[X] + b;\"],\r\n  subScalar : [[\"b\"], \"this[X] - b;\"],\r\n  ceil      : [[], \"Math.ceil(this[X])\"],\r\n  floor     : [[], \"Math.floor(this[X])\"],\r\n  abs       : [[], \"Math.abs(this[X])\"],\r\n  min       : [[\"b\"], \"Math.min(this[X], b[X])\"],\r\n  max       : [[\"b\"], \"Math.max(this[X], b[X])\"],\r\n  clamp     : [[\"MIN\", \"MAX\"], \"min(max(this[X], MAX), MIN)\"],\r\n};\r\n\r\nfunction bounded_acos(fac) {\r\n  if (fac<=-1.0)\r\n    return Math.pi;\r\n  else \r\n    if (fac>=1.0)\r\n    return 0.0;\r\n  else \r\n    return Math.acos(fac);\r\n}\r\n\r\nfunction saasin(fac) {\r\n  if (fac<=-1.0)\r\n    return -Math.pi/2.0;\r\n  else \r\n    if (fac>=1.0)\r\n    return Math.pi/2.0;\r\n  else \r\n    return Math.asin(fac);\r\n}\r\n\r\nvar $_v3nd_n1_normalizedDot;\r\nvar $_v3nd_n2_normalizedDot;\r\nvar $_v3nd4_n1_normalizedDot4;\r\nvar $_v3nd4_n2_normalizedDot4;\r\n\r\nvar HasCSSMatrix=false;\r\nvar HasCSSMatrixCopy=false;\r\nvar M_SQRT2=Math.sqrt(2.0);\r\nvar FLT_EPSILON=2.22e-16;\r\nfunction internal_matrix() {\r\n  this.m11 = 0.0;\r\n  this.m12 = 0.0;\r\n  this.m13 = 0.0;\r\n  this.m14 = 0.0;\r\n  this.m21 = 0.0;\r\n  this.m22 = 0.0;\r\n  this.m23 = 0.0;\r\n  this.m24 = 0.0;\r\n  this.m31 = 0.0;\r\n  this.m32 = 0.0;\r\n  this.m33 = 0.0;\r\n  this.m34 = 0.0;\r\n  this.m41 = 0.0;\r\n  this.m42 = 0.0;\r\n  this.m43 = 0.0;\r\n  this.m44 = 0.0;\r\n}\r\n\r\nvar lookat_cache_vs3;\r\nvar lookat_cache_vs4;\r\nvar makenormalcache;\r\n\r\nexport class Matrix4 {\r\n  constructor(m) {\r\n    if (HasCSSMatrix)\r\n      this.$matrix = new WebKitCSSMatrix;\r\n    else \r\n      this.$matrix = new internal_matrix();\r\n    this.isPersp = false;\r\n    if (typeof m=='object') {\r\n        if (\"length\" in m&&m.length>=16) {\r\n            this.load(m);\r\n            return ;\r\n        }\r\n        else \r\n          if (m instanceof Matrix4) {\r\n            this.load(m);\r\n            return ;\r\n        }\r\n    }\r\n    this.makeIdentity();\r\n  }\r\n\r\n  clone() {\r\n    return new Matrix4(this);\r\n  }\r\n\r\n  equals(m) {\r\n    let m1 = this.$matrix;\r\n    let m2 = m.$matrix;\r\n\r\n    let ok = 1;\r\n\r\n    ok = ok && m1.m11 == m2.m11;\r\n    ok = ok && m1.m12 == m2.m12;\r\n    ok = ok && m1.m13 == m2.m13;\r\n    ok = ok && m1.m14 == m2.m14;\r\n\r\n    ok = ok && m1.m21 == m2.m21;\r\n    ok = ok && m1.m22 == m2.m22;\r\n    ok = ok && m1.m23 == m2.m23;\r\n    ok = ok && m1.m24 == m2.m24;\r\n\r\n    ok = ok && m1.m31 == m2.m31;\r\n    ok = ok && m1.m32 == m2.m32;\r\n    ok = ok && m1.m33 == m2.m33;\r\n    ok = ok && m1.m34 == m2.m34;\r\n\r\n    ok = ok && m1.m41 == m2.m41;\r\n    ok = ok && m1.m42 == m2.m42;\r\n    ok = ok && m1.m43 == m2.m43;\r\n    ok = ok && m1.m44 == m2.m44;\r\n\r\n    return ok;\r\n  }\r\n\r\n  load() {\r\n    if (arguments.length==1&&typeof arguments[0]=='object') {\r\n        var matrix;\r\n        if (arguments[0] instanceof Matrix4) {\r\n            matrix = arguments[0].$matrix;\r\n            this.isPersp = arguments[0].isPersp;\r\n            this.$matrix.m11 = matrix.m11;\r\n            this.$matrix.m12 = matrix.m12;\r\n            this.$matrix.m13 = matrix.m13;\r\n            this.$matrix.m14 = matrix.m14;\r\n            this.$matrix.m21 = matrix.m21;\r\n            this.$matrix.m22 = matrix.m22;\r\n            this.$matrix.m23 = matrix.m23;\r\n            this.$matrix.m24 = matrix.m24;\r\n            this.$matrix.m31 = matrix.m31;\r\n            this.$matrix.m32 = matrix.m32;\r\n            this.$matrix.m33 = matrix.m33;\r\n            this.$matrix.m34 = matrix.m34;\r\n            this.$matrix.m41 = matrix.m41;\r\n            this.$matrix.m42 = matrix.m42;\r\n            this.$matrix.m43 = matrix.m43;\r\n            this.$matrix.m44 = matrix.m44;\r\n            return this;\r\n        }\r\n        else \r\n          matrix = arguments[0];\r\n        if (\"length\" in matrix&&matrix.length>=16) {\r\n            this.$matrix.m11 = matrix[0];\r\n            this.$matrix.m12 = matrix[1];\r\n            this.$matrix.m13 = matrix[2];\r\n            this.$matrix.m14 = matrix[3];\r\n            this.$matrix.m21 = matrix[4];\r\n            this.$matrix.m22 = matrix[5];\r\n            this.$matrix.m23 = matrix[6];\r\n            this.$matrix.m24 = matrix[7];\r\n            this.$matrix.m31 = matrix[8];\r\n            this.$matrix.m32 = matrix[9];\r\n            this.$matrix.m33 = matrix[10];\r\n            this.$matrix.m34 = matrix[11];\r\n            this.$matrix.m41 = matrix[12];\r\n            this.$matrix.m42 = matrix[13];\r\n            this.$matrix.m43 = matrix[14];\r\n            this.$matrix.m44 = matrix[15];\r\n            return this;\r\n        }\r\n    }\r\n    \r\n    this.makeIdentity();\r\n    \r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    return {isPersp: this.isPersp, items: this.getAsArray()}\r\n  }\r\n\r\n  static fromJSON() {\r\n    var mat=new Matrix4();\r\n    mat.load(json.items);\r\n    mat.isPersp = json.isPersp;\r\n    return mat;\r\n  }\r\n\r\n  getAsArray() {\r\n    return [this.$matrix.m11, this.$matrix.m12, this.$matrix.m13, this.$matrix.m14, this.$matrix.m21, this.$matrix.m22, this.$matrix.m23, this.$matrix.m24, this.$matrix.m31, this.$matrix.m32, this.$matrix.m33, this.$matrix.m34, this.$matrix.m41, this.$matrix.m42, this.$matrix.m43, this.$matrix.m44];\r\n  }\r\n\r\n  getAsFloat32Array() {\r\n    if (HasCSSMatrixCopy) {\r\n        var array=new Float32Array(16);\r\n        this.$matrix.copy(array);\r\n        return array;\r\n    }\r\n    return new Float32Array(this.getAsArray());\r\n  }\r\n\r\n  setUniform(ctx, loc, transpose) {\r\n    if (Matrix4.setUniformArray==undefined) {\r\n        Matrix4.setUniformWebGLArray = new Float32Array(16);\r\n        Matrix4.setUniformArray = new Array(16);\r\n    }\r\n    if (HasCSSMatrixCopy)\r\n      this.$matrix.copy(Matrix4.setUniformWebGLArray);\r\n    else {\r\n      Matrix4.setUniformArray[0] = this.$matrix.m11;\r\n      Matrix4.setUniformArray[1] = this.$matrix.m12;\r\n      Matrix4.setUniformArray[2] = this.$matrix.m13;\r\n      Matrix4.setUniformArray[3] = this.$matrix.m14;\r\n      Matrix4.setUniformArray[4] = this.$matrix.m21;\r\n      Matrix4.setUniformArray[5] = this.$matrix.m22;\r\n      Matrix4.setUniformArray[6] = this.$matrix.m23;\r\n      Matrix4.setUniformArray[7] = this.$matrix.m24;\r\n      Matrix4.setUniformArray[8] = this.$matrix.m31;\r\n      Matrix4.setUniformArray[9] = this.$matrix.m32;\r\n      Matrix4.setUniformArray[10] = this.$matrix.m33;\r\n      Matrix4.setUniformArray[11] = this.$matrix.m34;\r\n      Matrix4.setUniformArray[12] = this.$matrix.m41;\r\n      Matrix4.setUniformArray[13] = this.$matrix.m42;\r\n      Matrix4.setUniformArray[14] = this.$matrix.m43;\r\n      Matrix4.setUniformArray[15] = this.$matrix.m44;\r\n      Matrix4.setUniformWebGLArray.set(Matrix4.setUniformArray);\r\n    }\r\n    ctx.uniformMatrix4fv(loc, transpose, Matrix4.setUniformWebGLArray);\r\n  }\r\n\r\n  makeIdentity() {\r\n    this.$matrix.m11 = 1;\r\n    this.$matrix.m12 = 0;\r\n    this.$matrix.m13 = 0;\r\n    this.$matrix.m14 = 0;\r\n    this.$matrix.m21 = 0;\r\n    this.$matrix.m22 = 1;\r\n    this.$matrix.m23 = 0;\r\n    this.$matrix.m24 = 0;\r\n    this.$matrix.m31 = 0;\r\n    this.$matrix.m32 = 0;\r\n    this.$matrix.m33 = 1;\r\n    this.$matrix.m34 = 0;\r\n    this.$matrix.m41 = 0;\r\n    this.$matrix.m42 = 0;\r\n    this.$matrix.m43 = 0;\r\n    this.$matrix.m44 = 1;\r\n\r\n    //drop isPersp\r\n    this.isPersp = false;\r\n  }\r\n\r\n  transpose() {\r\n    var tmp=this.$matrix.m12;\r\n    this.$matrix.m12 = this.$matrix.m21;\r\n    this.$matrix.m21 = tmp;\r\n    tmp = this.$matrix.m13;\r\n    this.$matrix.m13 = this.$matrix.m31;\r\n    this.$matrix.m31 = tmp;\r\n    tmp = this.$matrix.m14;\r\n    this.$matrix.m14 = this.$matrix.m41;\r\n    this.$matrix.m41 = tmp;\r\n    tmp = this.$matrix.m23;\r\n    this.$matrix.m23 = this.$matrix.m32;\r\n    this.$matrix.m32 = tmp;\r\n    tmp = this.$matrix.m24;\r\n    this.$matrix.m24 = this.$matrix.m42;\r\n    this.$matrix.m42 = tmp;\r\n    tmp = this.$matrix.m34;\r\n    this.$matrix.m34 = this.$matrix.m43;\r\n    this.$matrix.m43 = tmp;\r\n  }\r\n\r\n  invert() {\r\n    if (HasCSSMatrix) {\r\n        this.$matrix = this.$matrix.inverse();\r\n        return ;\r\n    }\r\n    var det=this._determinant4x4();\r\n    if (Math.abs(det)<1e-08)\r\n      return null;\r\n    this._makeAdjoint();\r\n    this.$matrix.m11/=det;\r\n    this.$matrix.m12/=det;\r\n    this.$matrix.m13/=det;\r\n    this.$matrix.m14/=det;\r\n    this.$matrix.m21/=det;\r\n    this.$matrix.m22/=det;\r\n    this.$matrix.m23/=det;\r\n    this.$matrix.m24/=det;\r\n    this.$matrix.m31/=det;\r\n    this.$matrix.m32/=det;\r\n    this.$matrix.m33/=det;\r\n    this.$matrix.m34/=det;\r\n    this.$matrix.m41/=det;\r\n    this.$matrix.m42/=det;\r\n    this.$matrix.m43/=det;\r\n    this.$matrix.m44/=det;\r\n  }\r\n\r\n  translate(x, y, z) {\r\n    if (typeof x=='object'&&\"length\" in x) {\r\n        var t=x;\r\n        x = t[0];\r\n        y = t[1];\r\n        z = t[2];\r\n    }\r\n\r\n    else {\r\n      if (x===undefined)\r\n        x = 0;\r\n      if (y===undefined)\r\n        y = 0;\r\n      if (z===undefined)\r\n        z = 0;\r\n    }\r\n\r\n    if (HasCSSMatrix) {\r\n        this.$matrix = this.$matrix.translate(x, y, z);\r\n        return ;\r\n    }\r\n\r\n    var matrix=new Matrix4();\r\n    matrix.$matrix.m41 = x;\r\n    matrix.$matrix.m42 = y;\r\n    matrix.$matrix.m43 = z;\r\n    this.multiply(matrix);\r\n    return this;\r\n  }\r\n\r\n  scale(x, y, z, w=1.0) {\r\n    if (typeof x=='object'&&\"length\" in x) {\r\n        var t=x;\r\n        x = t[0];\r\n        y = t[1];\r\n        z = t[2];\r\n    } else {\r\n      if (x===undefined)\r\n        x = 1;\r\n\r\n      if (z===undefined) {\r\n          if (y===undefined) {\r\n              y = x;\r\n              z = x;\r\n          } else {\r\n            z = x;\r\n          }\r\n      } else if (y===undefined) {\r\n        y = x;\r\n      }\r\n    }\r\n\r\n    if (HasCSSMatrix) {\r\n        this.$matrix = this.$matrix.scale(x, y, z);\r\n        return ;\r\n    }\r\n    var matrix=new Matrix4();\r\n    matrix.$matrix.m11 = x;\r\n    matrix.$matrix.m22 = y;\r\n    matrix.$matrix.m33 = z;\r\n    matrix.$matrix.m44 = w;\r\n    this.multiply(matrix);\r\n  }\r\n  \r\n  euler_rotate(x, y, z, order) {\r\n    if (order == undefined) \r\n      order = \"xyz\"\r\n    else\r\n      order = order.toLowerCase();\r\n\r\n    if (y === undefined) {\r\n      y = 0.0;\r\n    }\r\n    if (z === undefined) {\r\n      z = 0.0;\r\n    }\r\n\r\n    var xmat = new Matrix4();\r\n    var m = xmat.$matrix;\r\n    \r\n    var c = Math.cos(x), s = Math.sin(x);\r\n    \r\n    m.m22 = c; m.m23 = s;\r\n    m.m32 = -s; m.m33 = c;\r\n    \r\n    var ymat = new Matrix4();\r\n    c = Math.cos(y); s = Math.sin(y);\r\n    var m = ymat.$matrix;\r\n    \r\n    m.m11 = c;  m.m13 = s;\r\n    m.m31 = -s; m.m33 = c;\r\n    \r\n    ymat.multiply(xmat);\r\n\r\n    var zmat = new Matrix4();\r\n    c = Math.cos(z); s = Math.sin(z);\r\n    var m = zmat.$matrix;\r\n    \r\n    m.m11 = c;  m.m12 = -s;\r\n    m.m21 = s;  m.m22 = c;\r\n    \r\n    zmat.multiply(ymat);\r\n    \r\n    //console.log(\"\"+ymat);\r\n    this.preMultiply(zmat);\r\n  }\r\n  \r\n  toString() {\r\n    var s = \"\"\r\n    var m = this.$matrix;\r\n    \r\n    function dec(d) {\r\n      var ret = d.toFixed(3);\r\n      \r\n      if (ret[0] != \"-\") //make room for negative signs\r\n        ret = \" \" + ret\r\n      return ret \r\n    }\r\n    \r\n    s  = dec(m.m11) +\", \" + dec(m.m12) + \", \" + dec(m.m13) + \", \" + dec(m.m14) + \"\\n\";\r\n    s += dec(m.m21) +\", \" + dec(m.m22) + \", \" + dec(m.m23) + \", \" + dec(m.m24) + \"\\n\";\r\n    s += dec(m.m31) +\", \" + dec(m.m32) + \", \" + dec(m.m33) + \", \" + dec(m.m34) + \"\\n\";\r\n    s += dec(m.m41) +\", \" + dec(m.m42) + \", \" + dec(m.m43) + \", \" + dec(m.m44) + \"\\n\";\r\n    \r\n    return s\r\n  }\r\n  \r\n  rotate(angle, x, y, z) {\r\n    if (typeof x=='object'&&\"length\" in x) {\r\n        var t=x;\r\n        x = t[0];\r\n        y = t[1];\r\n        z = t[2];\r\n    }\r\n    else {\r\n      if (arguments.length==1) {\r\n          x = 0;\r\n          y = 0;\r\n          z = 1;\r\n      }\r\n      else \r\n        if (arguments.length==3) {\r\n          this.rotate(angle, 1, 0, 0);\r\n          this.rotate(x, 0, 1, 0);\r\n          this.rotate(y, 0, 0, 1);\r\n          return ;\r\n      }\r\n    }\r\n    if (HasCSSMatrix) {\r\n        this.$matrix = this.$matrix.rotateAxisAngle(x, y, z, angle);\r\n        return ;\r\n    }\r\n    angle/=2;\r\n    var sinA=Math.sin(angle);\r\n    var cosA=Math.cos(angle);\r\n    var sinA2=sinA*sinA;\r\n    var len=Math.sqrt(x*x+y*y+z*z);\r\n    if (len==0) {\r\n        x = 0;\r\n        y = 0;\r\n        z = 1;\r\n    }\r\n    else \r\n      if (len!=1) {\r\n        x/=len;\r\n        y/=len;\r\n        z/=len;\r\n    }\r\n    var mat=new Matrix4();\r\n    if (x==1&&y==0&&z==0) {\r\n        mat.$matrix.m11 = 1;\r\n        mat.$matrix.m12 = 0;\r\n        mat.$matrix.m13 = 0;\r\n        mat.$matrix.m21 = 0;\r\n        mat.$matrix.m22 = 1-2*sinA2;\r\n        mat.$matrix.m23 = 2*sinA*cosA;\r\n        mat.$matrix.m31 = 0;\r\n        mat.$matrix.m32 = -2*sinA*cosA;\r\n        mat.$matrix.m33 = 1-2*sinA2;\r\n        mat.$matrix.m14 = mat.$matrix.m24 = mat.$matrix.m34 = 0;\r\n        mat.$matrix.m41 = mat.$matrix.m42 = mat.$matrix.m43 = 0;\r\n        mat.$matrix.m44 = 1;\r\n    }\r\n    else \r\n      if (x==0&&y==1&&z==0) {\r\n        mat.$matrix.m11 = 1-2*sinA2;\r\n        mat.$matrix.m12 = 0;\r\n        mat.$matrix.m13 = -2*sinA*cosA;\r\n        mat.$matrix.m21 = 0;\r\n        mat.$matrix.m22 = 1;\r\n        mat.$matrix.m23 = 0;\r\n        mat.$matrix.m31 = 2*sinA*cosA;\r\n        mat.$matrix.m32 = 0;\r\n        mat.$matrix.m33 = 1-2*sinA2;\r\n        mat.$matrix.m14 = mat.$matrix.m24 = mat.$matrix.m34 = 0;\r\n        mat.$matrix.m41 = mat.$matrix.m42 = mat.$matrix.m43 = 0;\r\n        mat.$matrix.m44 = 1;\r\n    }\r\n    else \r\n      if (x==0&&y==0&&z==1) {\r\n        mat.$matrix.m11 = 1-2*sinA2;\r\n        mat.$matrix.m12 = 2*sinA*cosA;\r\n        mat.$matrix.m13 = 0;\r\n        mat.$matrix.m21 = -2*sinA*cosA;\r\n        mat.$matrix.m22 = 1-2*sinA2;\r\n        mat.$matrix.m23 = 0;\r\n        mat.$matrix.m31 = 0;\r\n        mat.$matrix.m32 = 0;\r\n        mat.$matrix.m33 = 1;\r\n        mat.$matrix.m14 = mat.$matrix.m24 = mat.$matrix.m34 = 0;\r\n        mat.$matrix.m41 = mat.$matrix.m42 = mat.$matrix.m43 = 0;\r\n        mat.$matrix.m44 = 1;\r\n    }\r\n    else {\r\n      var x2=x*x;\r\n      var y2=y*y;\r\n      var z2=z*z;\r\n      mat.$matrix.m11 = 1-2*(y2+z2)*sinA2;\r\n      mat.$matrix.m12 = 2*(x*y*sinA2+z*sinA*cosA);\r\n      mat.$matrix.m13 = 2*(x*z*sinA2-y*sinA*cosA);\r\n      mat.$matrix.m21 = 2*(y*x*sinA2-z*sinA*cosA);\r\n      mat.$matrix.m22 = 1-2*(z2+x2)*sinA2;\r\n      mat.$matrix.m23 = 2*(y*z*sinA2+x*sinA*cosA);\r\n      mat.$matrix.m31 = 2*(z*x*sinA2+y*sinA*cosA);\r\n      mat.$matrix.m32 = 2*(z*y*sinA2-x*sinA*cosA);\r\n      mat.$matrix.m33 = 1-2*(x2+y2)*sinA2;\r\n      mat.$matrix.m14 = mat.$matrix.m24 = mat.$matrix.m34 = 0;\r\n      mat.$matrix.m41 = mat.$matrix.m42 = mat.$matrix.m43 = 0;\r\n      mat.$matrix.m44 = 1;\r\n    }\r\n    this.multiply(mat);\r\n  }\r\n\r\n  //this is really like the lookAt method, isn't it.\r\n  makeNormalMatrix(normal, up=undefined) {\r\n    let n = makenormalcache.next().load(normal).normalize();\r\n\r\n    if (up === undefined) {\r\n      up = makenormalcache.next().zero();\r\n\r\n      if (Math.abs(n[2]) > 0.95) {\r\n        up[1] = 1.0;\r\n      } else {\r\n        up[2] = 1.0;\r\n      }\r\n    }\r\n\r\n    let x = makenormalcache.next();\r\n    let y = makenormalcache.next();\r\n\r\n    x.load(n).cross(up).normalize();\r\n    y.load(x).cross(n).normalize();\r\n    //y.negate();\r\n\r\n    this.makeIdentity();\r\n    let m = this.$matrix;\r\n\r\n    m.m11 = x[0];\r\n    m.m12 = x[1];\r\n    m.m13 = x[2];\r\n\r\n    m.m21 = y[0];\r\n    m.m22 = y[1];\r\n    m.m23 = y[2];\r\n\r\n    m.m31 = n[0];\r\n    m.m32 = n[1];\r\n    m.m33 = n[2];\r\n    m.m44 = 1.0;\r\n\r\n    return this;\r\n  }\r\n\r\n  preMultiply(mat) {\r\n    var tmp = new Matrix4();\r\n    \r\n    tmp.load(mat);\r\n    tmp.multiply(this);\r\n    \r\n    this.load(tmp);\r\n  }\r\n  \r\n  multiply(mat) {\r\n    if (HasCSSMatrix) {\r\n        this.$matrix = this.$matrix.multiply(mat.$matrix);\r\n        return ;\r\n    }\r\n    \r\n    var m11=(mat.$matrix.m11*this.$matrix.m11+mat.$matrix.m12*this.$matrix.m21+mat.$matrix.m13*this.$matrix.m31+mat.$matrix.m14*this.$matrix.m41);\r\n    var m12=(mat.$matrix.m11*this.$matrix.m12+mat.$matrix.m12*this.$matrix.m22+mat.$matrix.m13*this.$matrix.m32+mat.$matrix.m14*this.$matrix.m42);\r\n    var m13=(mat.$matrix.m11*this.$matrix.m13+mat.$matrix.m12*this.$matrix.m23+mat.$matrix.m13*this.$matrix.m33+mat.$matrix.m14*this.$matrix.m43);\r\n    var m14=(mat.$matrix.m11*this.$matrix.m14+mat.$matrix.m12*this.$matrix.m24+mat.$matrix.m13*this.$matrix.m34+mat.$matrix.m14*this.$matrix.m44);\r\n    var m21=(mat.$matrix.m21*this.$matrix.m11+mat.$matrix.m22*this.$matrix.m21+mat.$matrix.m23*this.$matrix.m31+mat.$matrix.m24*this.$matrix.m41);\r\n    var m22=(mat.$matrix.m21*this.$matrix.m12+mat.$matrix.m22*this.$matrix.m22+mat.$matrix.m23*this.$matrix.m32+mat.$matrix.m24*this.$matrix.m42);\r\n    var m23=(mat.$matrix.m21*this.$matrix.m13+mat.$matrix.m22*this.$matrix.m23+mat.$matrix.m23*this.$matrix.m33+mat.$matrix.m24*this.$matrix.m43);\r\n    var m24=(mat.$matrix.m21*this.$matrix.m14+mat.$matrix.m22*this.$matrix.m24+mat.$matrix.m23*this.$matrix.m34+mat.$matrix.m24*this.$matrix.m44);\r\n    var m31=(mat.$matrix.m31*this.$matrix.m11+mat.$matrix.m32*this.$matrix.m21+mat.$matrix.m33*this.$matrix.m31+mat.$matrix.m34*this.$matrix.m41);\r\n    var m32=(mat.$matrix.m31*this.$matrix.m12+mat.$matrix.m32*this.$matrix.m22+mat.$matrix.m33*this.$matrix.m32+mat.$matrix.m34*this.$matrix.m42);\r\n    var m33=(mat.$matrix.m31*this.$matrix.m13+mat.$matrix.m32*this.$matrix.m23+mat.$matrix.m33*this.$matrix.m33+mat.$matrix.m34*this.$matrix.m43);\r\n    var m34=(mat.$matrix.m31*this.$matrix.m14+mat.$matrix.m32*this.$matrix.m24+mat.$matrix.m33*this.$matrix.m34+mat.$matrix.m34*this.$matrix.m44);\r\n    var m41=(mat.$matrix.m41*this.$matrix.m11+mat.$matrix.m42*this.$matrix.m21+mat.$matrix.m43*this.$matrix.m31+mat.$matrix.m44*this.$matrix.m41);\r\n    var m42=(mat.$matrix.m41*this.$matrix.m12+mat.$matrix.m42*this.$matrix.m22+mat.$matrix.m43*this.$matrix.m32+mat.$matrix.m44*this.$matrix.m42);\r\n    var m43=(mat.$matrix.m41*this.$matrix.m13+mat.$matrix.m42*this.$matrix.m23+mat.$matrix.m43*this.$matrix.m33+mat.$matrix.m44*this.$matrix.m43);\r\n    var m44=(mat.$matrix.m41*this.$matrix.m14+mat.$matrix.m42*this.$matrix.m24+mat.$matrix.m43*this.$matrix.m34+mat.$matrix.m44*this.$matrix.m44);\r\n    this.$matrix.m11 = m11;\r\n    this.$matrix.m12 = m12;\r\n    this.$matrix.m13 = m13;\r\n    this.$matrix.m14 = m14;\r\n    this.$matrix.m21 = m21;\r\n    this.$matrix.m22 = m22;\r\n    this.$matrix.m23 = m23;\r\n    this.$matrix.m24 = m24;\r\n    this.$matrix.m31 = m31;\r\n    this.$matrix.m32 = m32;\r\n    this.$matrix.m33 = m33;\r\n    this.$matrix.m34 = m34;\r\n    this.$matrix.m41 = m41;\r\n    this.$matrix.m42 = m42;\r\n    this.$matrix.m43 = m43;\r\n    this.$matrix.m44 = m44;\r\n  }\r\n\r\n  divide(divisor) {\r\n    this.$matrix.m11/=divisor;\r\n    this.$matrix.m12/=divisor;\r\n    this.$matrix.m13/=divisor;\r\n    this.$matrix.m14/=divisor;\r\n    this.$matrix.m21/=divisor;\r\n    this.$matrix.m22/=divisor;\r\n    this.$matrix.m23/=divisor;\r\n    this.$matrix.m24/=divisor;\r\n    this.$matrix.m31/=divisor;\r\n    this.$matrix.m32/=divisor;\r\n    this.$matrix.m33/=divisor;\r\n    this.$matrix.m34/=divisor;\r\n    this.$matrix.m41/=divisor;\r\n    this.$matrix.m42/=divisor;\r\n    this.$matrix.m43/=divisor;\r\n    this.$matrix.m44/=divisor;\r\n  }\r\n\r\n  ortho(left, right, bottom, top, near, far) {\r\n    console.warn(\"Matrix4.ortho() is deprecated, use .orthographic() instead\");\r\n\r\n    var tx=(left+right)/(left-right);\r\n    var ty=(top+bottom)/(top-bottom);\r\n    var tz=(far+near)/(far-near);\r\n    var matrix=new Matrix4();\r\n    matrix.$matrix.m11 = 2/(left-right);\r\n    matrix.$matrix.m12 = 0;\r\n    matrix.$matrix.m13 = 0;\r\n    matrix.$matrix.m14 = 0;\r\n    matrix.$matrix.m21 = 0;\r\n    matrix.$matrix.m22 = 2/(top-bottom);\r\n    matrix.$matrix.m23 = 0;\r\n    matrix.$matrix.m24 = 0;\r\n    matrix.$matrix.m31 = 0;\r\n    matrix.$matrix.m32 = 0;\r\n    matrix.$matrix.m33 = -2/(far-near);\r\n    matrix.$matrix.m34 = 0;\r\n    matrix.$matrix.m41 = tx;\r\n    matrix.$matrix.m42 = ty;\r\n    matrix.$matrix.m43 = tz;\r\n    matrix.$matrix.m44 = 1;\r\n    this.multiply(matrix);\r\n  }\r\n\r\n  frustum(left, right, bottom, top, near, far) {\r\n    var matrix=new Matrix4();\r\n    var A=(right+left)/(right-left);\r\n    var B=(top+bottom)/(top-bottom);\r\n    var C=-(far+near)/(far-near);\r\n    var D=-(2*far*near)/(far-near);\r\n    matrix.$matrix.m11 = (2*near)/(right-left);\r\n    matrix.$matrix.m12 = 0;\r\n    matrix.$matrix.m13 = 0;\r\n    matrix.$matrix.m14 = 0;\r\n    matrix.$matrix.m21 = 0;\r\n    matrix.$matrix.m22 = 2*near/(top-bottom);\r\n    matrix.$matrix.m23 = 0;\r\n    matrix.$matrix.m24 = 0;\r\n    matrix.$matrix.m31 = A;\r\n    matrix.$matrix.m32 = B;\r\n    matrix.$matrix.m33 = C;\r\n    matrix.$matrix.m34 = -1;\r\n    matrix.$matrix.m41 = 0;\r\n    matrix.$matrix.m42 = 0;\r\n    matrix.$matrix.m43 = D;\r\n    matrix.$matrix.m44 = 0;\r\n    this.isPersp = true;\r\n    this.multiply(matrix);\r\n  }\r\n\r\n  orthographic(scale, aspect, near, far) {\r\n    let mat = new Matrix4();\r\n\r\n    let zscale = far - near;\r\n\r\n    mat.scale(2.0/aspect, 2.0, -1.0/scale/zscale, 1.0/scale);\r\n    mat.translate(0.0, 0.0, 0.5*zscale - near);\r\n\r\n    this.isPersp = true; //we still make use of homogenous divide\r\n    this.multiply(mat);\r\n    return mat;\r\n  }\r\n\r\n  perspective(fovy, aspect, zNear, zFar) {\r\n    var top=Math.tan(fovy*Math.PI/360)*zNear;\r\n    var bottom=-top;\r\n    var left=aspect*bottom;\r\n    var right=aspect*top;\r\n    this.frustum(left, right, bottom, top, zNear, zFar);\r\n  }\r\n\r\n  lookat(pos, target, up) {\r\n    var matrix=new Matrix4();\r\n    \r\n    var vec = lookat_cache_vs3.next().load(pos).sub(target);\r\n    var len = vec.vectorLength();\r\n    vec.normalize();\r\n    \r\n    var zvec = vec;\r\n    var yvec = lookat_cache_vs3.next().load(up).normalize();\r\n    var xvec = lookat_cache_vs3.next().load(yvec).cross(zvec).normalize();\r\n    \r\n    //*\r\n\r\n    matrix.$matrix.m11 = xvec[0];\r\n    matrix.$matrix.m12 = yvec[0];\r\n    matrix.$matrix.m13 = zvec[0];\r\n    matrix.$matrix.m14 = 0;\r\n    matrix.$matrix.m21 = xvec[1];\r\n    matrix.$matrix.m22 = yvec[1];\r\n    matrix.$matrix.m23 = zvec[1];\r\n    matrix.$matrix.m24 = 0;\r\n    matrix.$matrix.m31 = xvec[2];\r\n    matrix.$matrix.m32 = yvec[2];\r\n    matrix.$matrix.m33 = zvec[2];\r\n\r\n    //*\r\n    matrix.$matrix.m11 = xvec[0];\r\n    matrix.$matrix.m12 = xvec[1];\r\n    matrix.$matrix.m13 = xvec[2];\r\n    matrix.$matrix.m14 = 0;\r\n    matrix.$matrix.m21 = yvec[0];\r\n    matrix.$matrix.m22 = yvec[1];\r\n    matrix.$matrix.m23 = yvec[2];\r\n    matrix.$matrix.m24 = 0;\r\n    matrix.$matrix.m31 = zvec[0];\r\n    matrix.$matrix.m32 = zvec[1];\r\n    matrix.$matrix.m33 = zvec[2];\r\n    matrix.$matrix.m34 = 0;\r\n    matrix.$matrix.m41 = pos[0];\r\n    matrix.$matrix.m42 = pos[1];\r\n    matrix.$matrix.m43 = pos[2];\r\n    matrix.$matrix.m44 = 1;\r\n    //*/\r\n  \r\n    this.multiply(matrix);\r\n  }\r\n\r\n  makeRotationOnly() {\r\n    var m = this.$matrix;\r\n    \r\n    m.m41 = m.m42 = m.m43 = 0.0;\r\n    m.m44 = 1.0;\r\n    \r\n    return this;\r\n  }\r\n\r\n  decompose(_translate, _rotate, _scale, _skew, _perspective) {\r\n    if (this.$matrix.m44==0)\r\n      return false;\r\n    \r\n    var translate, rotate, scale, skew, perspective;\r\n    var translate=(_translate==undefined||!(\"length\" in _translate)) ? new Vector3 : _translate;\r\n    var rotate=(_rotate==undefined||!(\"length\" in _rotate)) ? new Vector3 : _rotate;\r\n    var scale=(_scale==undefined||!(\"length\" in _scale)) ? new Vector3 : _scale;\r\n    var skew=(_skew==undefined||!(\"length\" in _skew)) ? new Vector3 : _skew;\r\n    var perspective=(_perspective==undefined||!(\"length\" in _perspective)) ? new Array(4) : _perspective;\r\n    var matrix=new Matrix4(this);\r\n    matrix.divide(matrix.$matrix.m44);\r\n    var perspectiveMatrix=new Matrix4(matrix);\r\n    perspectiveMatrix.$matrix.m14 = 0;\r\n    perspectiveMatrix.$matrix.m24 = 0;\r\n    perspectiveMatrix.$matrix.m34 = 0;\r\n    perspectiveMatrix.$matrix.m44 = 1;\r\n    if (perspectiveMatrix._determinant4x4()==0)\r\n      return false;\r\n      \r\n    if (matrix.$matrix.m14!=0||matrix.$matrix.m24!=0||matrix.$matrix.m34!=0) {\r\n        var rightHandSide=[matrix.$matrix.m14, matrix.$matrix.m24, matrix.$matrix.m34, matrix.$matrix.m44];\r\n        var inversePerspectiveMatrix=new Matrix4(perspectiveMatrix);\r\n        inversePerspectiveMatrix.invert();\r\n        var transposedInversePerspectiveMatrix=new Matrix4(inversePerspectiveMatrix);\r\n        transposedInversePerspectiveMatrix.transpose();\r\n        \r\n        var v4 = new Vector3(rightHandSide);\r\n        v4.multVecMatrix(transposedInversePerspectiveMatrix)\r\n        \r\n        perspective[0] = v4[0];\r\n        perspective[1] = v4[1];\r\n        perspective[2] = v4[2];\r\n        perspective[3] = v4[3];\r\n        \r\n        matrix.$matrix.m14 = matrix.$matrix.m24 = matrix.$matrix.m34 = 0;\r\n        matrix.$matrix.m44 = 1;\r\n    }\r\n    else {\r\n      perspective[0] = perspective[1] = perspective[2] = 0;\r\n      perspective[3] = 1;\r\n    }\r\n    translate[0] = matrix.$matrix.m41;\r\n    matrix.$matrix.m41 = 0;\r\n    translate[1] = matrix.$matrix.m42;\r\n    matrix.$matrix.m42 = 0;\r\n    translate[2] = matrix.$matrix.m43;\r\n    matrix.$matrix.m43 = 0;\r\n    var row0=new Vector3([matrix.$matrix.m11, matrix.$matrix.m12, matrix.$matrix.m13]);\r\n    var row1=new Vector3([matrix.$matrix.m21, matrix.$matrix.m22, matrix.$matrix.m23]);\r\n    var row2=new Vector3([matrix.$matrix.m31, matrix.$matrix.m32, matrix.$matrix.m33]);\r\n    scale[0] = row0.vectorLength();\r\n    row0.div(scale[0]);\r\n    skew[0] = row0.dot(row1);\r\n    row1.combine(row0, 1.0, -skew[0]);\r\n    scale[1] = row1.vectorLength();\r\n    row1.div(scale[1]);\r\n    skew[0]/=scale[1];\r\n    skew[1] = row1.dot(row2);\r\n    row2.combine(row0, 1.0, -skew[1]);\r\n    skew[2] = row1.dot(row2);\r\n    row2.combine(row1, 1.0, -skew[2]);\r\n    scale[2] = row2.vectorLength();\r\n    row2.div(scale[2]);\r\n    skew[1]/=scale[2];\r\n    skew[2]/=scale[2];\r\n    var pdum3=new Vector3(row1);\r\n    pdum3.cross(row2);\r\n    if (row0.dot(pdum3)<0) {\r\n        for (var i=0; i<3; i++) {\r\n            scale[i]*=-1;\r\n            row[0][i]*=-1;\r\n            row[1][i]*=-1;\r\n            row[2][i]*=-1;\r\n        }\r\n    }\r\n    rotate[1] = Math.asin(-row0[2]);\r\n    if (Math.cos(rotate[1])!=0) {\r\n        rotate[0] = Math.atan2(row1[2], row2[2]);\r\n        rotate[2] = Math.atan2(row0[1], row0[0]);\r\n    }\r\n    else {\r\n      rotate[0] = Math.atan2(-row2[0], row1[1]);\r\n      rotate[2] = 0;\r\n    }\r\n    var rad2deg=180/Math.PI;\r\n    rotate[0]*=rad2deg;\r\n    rotate[1]*=rad2deg;\r\n    rotate[2]*=rad2deg;\r\n    return true;\r\n  }\r\n\r\n  _determinant2x2(a, b, c, d) {\r\n    return a*d-b*c;\r\n  }\r\n\r\n  _determinant3x3(a1, a2, a3, b1, b2, b3, c1, c2, c3) {\r\n    return a1*this._determinant2x2(b2, b3, c2, c3)-b1*this._determinant2x2(a2, a3, c2, c3)+c1*this._determinant2x2(a2, a3, b2, b3);\r\n  }\r\n\r\n  _determinant4x4() {\r\n    var a1=this.$matrix.m11;\r\n    var b1=this.$matrix.m12;\r\n    var c1=this.$matrix.m13;\r\n    var d1=this.$matrix.m14;\r\n    var a2=this.$matrix.m21;\r\n    var b2=this.$matrix.m22;\r\n    var c2=this.$matrix.m23;\r\n    var d2=this.$matrix.m24;\r\n    var a3=this.$matrix.m31;\r\n    var b3=this.$matrix.m32;\r\n    var c3=this.$matrix.m33;\r\n    var d3=this.$matrix.m34;\r\n    var a4=this.$matrix.m41;\r\n    var b4=this.$matrix.m42;\r\n    var c4=this.$matrix.m43;\r\n    var d4=this.$matrix.m44;\r\n    return a1*this._determinant3x3(b2, b3, b4, c2, c3, c4, d2, d3, d4)-b1*this._determinant3x3(a2, a3, a4, c2, c3, c4, d2, d3, d4)+c1*this._determinant3x3(a2, a3, a4, b2, b3, b4, d2, d3, d4)-d1*this._determinant3x3(a2, a3, a4, b2, b3, b4, c2, c3, c4);\r\n  }\r\n\r\n  _makeAdjoint() {\r\n    var a1=this.$matrix.m11;\r\n    var b1=this.$matrix.m12;\r\n    var c1=this.$matrix.m13;\r\n    var d1=this.$matrix.m14;\r\n    var a2=this.$matrix.m21;\r\n    var b2=this.$matrix.m22;\r\n    var c2=this.$matrix.m23;\r\n    var d2=this.$matrix.m24;\r\n    var a3=this.$matrix.m31;\r\n    var b3=this.$matrix.m32;\r\n    var c3=this.$matrix.m33;\r\n    var d3=this.$matrix.m34;\r\n    var a4=this.$matrix.m41;\r\n    var b4=this.$matrix.m42;\r\n    var c4=this.$matrix.m43;\r\n    var d4=this.$matrix.m44;\r\n    this.$matrix.m11 = this._determinant3x3(b2, b3, b4, c2, c3, c4, d2, d3, d4);\r\n    this.$matrix.m21 = -this._determinant3x3(a2, a3, a4, c2, c3, c4, d2, d3, d4);\r\n    this.$matrix.m31 = this._determinant3x3(a2, a3, a4, b2, b3, b4, d2, d3, d4);\r\n    this.$matrix.m41 = -this._determinant3x3(a2, a3, a4, b2, b3, b4, c2, c3, c4);\r\n    this.$matrix.m12 = -this._determinant3x3(b1, b3, b4, c1, c3, c4, d1, d3, d4);\r\n    this.$matrix.m22 = this._determinant3x3(a1, a3, a4, c1, c3, c4, d1, d3, d4);\r\n    this.$matrix.m32 = -this._determinant3x3(a1, a3, a4, b1, b3, b4, d1, d3, d4);\r\n    this.$matrix.m42 = this._determinant3x3(a1, a3, a4, b1, b3, b4, c1, c3, c4);\r\n    this.$matrix.m13 = this._determinant3x3(b1, b2, b4, c1, c2, c4, d1, d2, d4);\r\n    this.$matrix.m23 = -this._determinant3x3(a1, a2, a4, c1, c2, c4, d1, d2, d4);\r\n    this.$matrix.m33 = this._determinant3x3(a1, a2, a4, b1, b2, b4, d1, d2, d4);\r\n    this.$matrix.m43 = -this._determinant3x3(a1, a2, a4, b1, b2, b4, c1, c2, c4);\r\n    this.$matrix.m14 = -this._determinant3x3(b1, b2, b3, c1, c2, c3, d1, d2, d3);\r\n    this.$matrix.m24 = this._determinant3x3(a1, a2, a3, c1, c2, c3, d1, d2, d3);\r\n    this.$matrix.m34 = -this._determinant3x3(a1, a2, a3, b1, b2, b3, d1, d2, d3);\r\n    this.$matrix.m44 = this._determinant3x3(a1, a2, a3, b1, b2, b3, c1, c2, c3);\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n    \r\n    this.load(this.mat);\r\n    delete this.mat;\r\n  }\r\n}\r\n\r\nMatrix4.STRUCT = `\r\nmat4 {\r\n  mat      : array(float) | obj.getAsArray();\r\n  isPersp  : int | obj.isPersp;\r\n}\r\n`;\r\nnstructjs.manager.add_class(Matrix4);\r\n\r\nfunction make_norm_safe_dot(cls) {\r\n  var _dot = cls.prototype.dot;\r\n  \r\n  cls.prototype._dot = _dot;\r\n  cls.prototype.dot = function(b) {\r\n    var ret = _dot.call(this, b);\r\n    \r\n    if (ret >= 1.0-DOT_NORM_SNAP_LIMIT && ret <= 1.0+DOT_NORM_SNAP_LIMIT)\r\n      return 1.0;\r\n    if (ret >= -1.0-DOT_NORM_SNAP_LIMIT && ret <= -1.0+DOT_NORM_SNAP_LIMIT)\r\n      return -1.0;\r\n      \r\n    return ret;\r\n  }\r\n}\r\n\r\nexport class BaseVector extends Array {\r\n  constructor() {\r\n    super();\r\n    \r\n    //this.xyzw = this.init_swizzle(4);\r\n    //this.xyz = this.init_swizzle(3);\r\n    //this.xy = this.init_swizzle(2);\r\n  }\r\n\r\n  copy() {\r\n    return new this.constructor(this);\r\n  }\r\n\r\n  load(data) {\r\n    throw new Error(\"Implement me!\");\r\n  }\r\n  \r\n  init_swizzle(size) {\r\n    var ret = {};\r\n    var cls = size == 4 ? Vector4 : (size == 3 ? Vector3 : Vector2);\r\n    \r\n    for (var k in cls.prototype) {\r\n      var v = cls.prototype[k];\r\n      if (typeof v != \"function\" && !(v instanceof Function))\r\n        continue;\r\n      \r\n      ret[k] = v.bind(this);\r\n    }\r\n    \r\n    return ret;\r\n  }\r\n  \r\n  vectorLength() {\r\n    return sqrt(this.dot(this));\r\n  }\r\n  \r\n  normalize() {\r\n    var l = this.vectorLength();\r\n    if (l > 0.00000001) {\r\n      this.mulScalar(1.0/l);\r\n    }\r\n    \r\n    return this;\r\n  }\r\n  \r\n  static inherit(cls, vectorsize) {\r\n    make_norm_safe_dot(cls);\r\n   \r\n    var f;\r\n\r\n    var vectorDotDistance = \"f = function vectorDistance(b) {\\n\";\r\n    for (var i=0; i<vectorsize; i++) {\r\n      vectorDotDistance += \"var d\"+i+\" = this[\"+i+\"]-b[\"+i+\"];\\n\";\r\n    }\r\n    \r\n    vectorDotDistance += \"return (\"\r\n    for (var i=0; i<vectorsize; i++) {\r\n      if (i > 0)\r\n        vectorDotDistance += \" + \";\r\n      vectorDotDistance += \"d\"+i+\"*d\"+i;\r\n    }\r\n    vectorDotDistance += \");\\n\"\r\n    vectorDotDistance += \"};\";\r\n    cls.prototype.vectorDotDistance = eval(vectorDotDistance);\r\n    \r\n    var f;\r\n    var vectorDistance = \"f = function vectorDistance(b) {\\n\";\r\n    for (var i=0; i<vectorsize; i++) {\r\n      vectorDistance += \"var d\"+i+\" = this[\"+i+\"]-b[\"+i+\"];\\n\";\r\n    }\r\n    \r\n    vectorDistance += \"return sqrt(\"\r\n    for (var i=0; i<vectorsize; i++) {\r\n      if (i > 0)\r\n        vectorDistance += \" + \";\r\n      vectorDistance += \"d\"+i+\"*d\"+i;\r\n    }\r\n    vectorDistance += \");\\n\"\r\n    vectorDistance += \"};\";\r\n    cls.prototype.vectorDistance = eval(vectorDistance);\r\n    \r\n    \r\n    for (var k in basic_funcs) {\r\n      var func = basic_funcs[k];\r\n      var args = func[0];\r\n      var line = func[1];\r\n      var f;\r\n      \r\n      var code = \"f = function \" + k + \"(\"\r\n      for (var i=0; i<args.length; i++) {\r\n        if (i > 0)\r\n          code += \", \";\r\n        \r\n        line = line.replace(args[i], args[i].toLowerCase());\r\n        code += args[i].toLowerCase();\r\n      }\r\n      code += \") {\\n\";\r\n\r\n      if (func.length > 2) {\r\n        //make summation\r\n        code += \"return \";\r\n\r\n        for (var i=0; i<vectorsize; i++) {\r\n          if (i > 0)\r\n            code += func[2];\r\n\r\n          code += \"(\" + line.replace(/X/g, \"\"+i) + \")\";\r\n        }\r\n        code += \";\\n\";\r\n      } else {\r\n        for (var i = 0; i < vectorsize; i++) {\r\n          var line2 = line.replace(/X/g, \"\" + i);\r\n          code += \"    this[\" + i + \"] = \" + line2 + \"\\n\";\r\n        }\r\n        code += \"return this;\"\r\n      }\r\n      \r\n      code += \"}\\n\";\r\n      \r\n      //console.log(code);\r\n      var f = eval(code);\r\n      \r\n      cls.prototype[k] = f;\r\n      //console.log(k, f);\r\n    }\r\n  }\r\n}\r\n\r\nexport class Vector4 extends BaseVector {\r\n  constructor(data) {\r\n    super();\r\n    \r\n    if (arguments.length > 1) {\r\n      throw new Error(\"unexpected argument\");\r\n    }\r\n    \r\n    this.length = 4;\r\n    this[0] = this[1] = this[2] = this[3] = 0.0;\r\n    \r\n    if (data != undefined) {\r\n      this.load(data);\r\n    }\r\n  }\r\n\r\n  toCSS() {\r\n    let r = ~~(this[0]*255);\r\n    let g = ~~(this[1]*255);\r\n    let b = ~~(this[2]*255);\r\n    let a = this[3];\r\n    return `rgba(${r},${g},${b},${a})`\r\n  }\r\n  \r\n  loadXYZW(x, y, z, w) {\r\n    this[0] = x;\r\n    this[1] = y;\r\n    this[2] = z;\r\n    this[3] = w;\r\n\r\n    return this;\r\n  }\r\n\r\n  loadXYZ(x, y, z) {\r\n    this[0] = x;\r\n    this[1] = y;\r\n    this[2] = z;\r\n\r\n    return this;\r\n  }\r\n\r\n  load(data) {\r\n    if (data == undefined) \r\n      return this;\r\n    \r\n    this[0] = data[0];\r\n    this[1] = data[1];\r\n    this[2] = data[2];\r\n    this[3] = data[3];\r\n    \r\n    return this;\r\n  }\r\n  \r\n  dot(b) {\r\n    return this[0]*b[0] + this[1]*b[1] + this[2]*b[2] + this[3]*b[3];\r\n  }\r\n\r\n  mulVecQuat(q) {\r\n    var t0=-this[1]*this[0]-this[2]*this[1]-this[3]*this[2];\r\n    var t1=this[0]*this[0]+this[2]*this[2]-this[3]*this[1];\r\n    var t2=this[0]*this[1]+this[3]*this[0]-this[1]*this[2];\r\n    this[2] = this[0]*this[2]+this[1]*this[1]-this[2]*this[0];\r\n    this[0] = t1;\r\n    this[1] = t2;\r\n    t1 = t0*-this[1]+this[0]*this[0]-this[1]*this[3]+this[2]*this[2];\r\n    t2 = t0*-this[2]+this[1]*this[0]-this[2]*this[1]+this[0]*this[3];\r\n    this[2] = t0*-this[3]+this[2]*this[0]-this[0]*this[2]+this[1]*this[1];\r\n    this[0] = t1;\r\n    this[1] = t2;\r\n    \r\n    return this;\r\n  }\r\n\r\n  multVecMatrix(matrix) {\r\n    var x=this[0];\r\n    var y=this[1];\r\n    var z=this[2];\r\n    var w=this[3];\r\n\r\n    this[0] = w*matrix.$matrix.m41+x*matrix.$matrix.m11+y*matrix.$matrix.m21+z*matrix.$matrix.m31;\r\n    this[1] = w*matrix.$matrix.m42+x*matrix.$matrix.m12+y*matrix.$matrix.m22+z*matrix.$matrix.m32;\r\n    this[2] = w*matrix.$matrix.m43+x*matrix.$matrix.m13+y*matrix.$matrix.m23+z*matrix.$matrix.m33;\r\n    this[3] = w*matrix.$matrix.m44+x*matrix.$matrix.m14+y*matrix.$matrix.m24+z*matrix.$matrix.m34;\r\n    \r\n    return this[3];\r\n  }\r\n  \r\n  cross(v) {\r\n    var x = this[1]*v[2] - this[2]*v[1];\r\n    var y = this[2]*v[0] - this[0]*v[2];\r\n    var z = this[0]*v[1] - this[1]*v[0];\r\n    \r\n    this[0] = x;\r\n    this[1] = y;\r\n    this[2] = z;\r\n    \r\n    return this;\r\n  }\r\n  \r\n  preNormalizedAngle(v2) {\r\n    if (this.dot(v2)<0.0) {\r\n        var vec=new Vector4();\r\n        vec[0] = -v2[0];\r\n        vec[1] = -v2[1];\r\n        vec[2] = -v2[2];\r\n        vec[3] = -v2[3];\r\n        return Math.pi-2.0*saasin(vec.vectorDistance(this)/2.0);\r\n    }\r\n    else \r\n      return 2.0*saasin(v2.vectorDistance(this)/2.0);\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.load(this.vec);\r\n    delete this.vec;\r\n  }\r\n};\r\nVector4.STRUCT = `\r\nvec4 {\r\n  vec : array(float) | obj;\r\n}\r\n`;\r\nnstructjs.manager.add_class(Vector4);\r\n\r\n\r\n\r\nvar _v3nd_n1_normalizedDot, _v3nd_n2_normalizedDot;\r\nvar _v3nd4_n1_normalizedDot4, _v3nd4_n2_normalizedDot4;\r\n\r\nexport class Vector3 extends BaseVector {\r\n  constructor(data) {\r\n    super();\r\n    \r\n    if (arguments.length > 1) {\r\n      throw new Error(\"unexpected argument\");\r\n    }\r\n    \r\n    this.length = 3;\r\n    this[0] = this[1] = this[2] = 0.0;\r\n    \r\n    if (data != undefined) {\r\n      this.load(data);\r\n    }\r\n  }\r\n\r\n  toCSS() {\r\n    let r = ~~(this[0]*255);\r\n    let g = ~~(this[1]*255);\r\n    let b = ~~(this[2]*255);\r\n    return `rgb(${r},${g},${b})`\r\n  }\r\n\r\n  loadXYZ(x, y, z) {\r\n    this[0] = x;\r\n    this[1] = y;\r\n    this[2] = z;\r\n\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this[0], this[1], this[2]];\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    return this.load(obj);\r\n  }\r\n  \r\n  initVector3() {\r\n    this.length = 3;\r\n    this[0] = this[1] = this[2] = 0;\r\n    return this;\r\n  }\r\n  \r\n  load(data) {\r\n    if (data == undefined) \r\n      return this;\r\n    \r\n    this[0] = data[0];\r\n    this[1] = data[1];\r\n    this[2] = data[2];\r\n    \r\n    return this;\r\n  }\r\n  \r\n  dot(b) {\r\n    return this[0]*b[0] + this[1]*b[1] + this[2]*b[2];\r\n  }\r\n\r\n  normalizedDot(v) {\r\n    $_v3nd_n1_normalizedDot.load(this);\r\n    $_v3nd_n2_normalizedDot.load(v);\r\n    $_v3nd_n1_normalizedDot.normalize();\r\n    $_v3nd_n2_normalizedDot.normalize();\r\n    return $_v3nd_n1_normalizedDot.dot($_v3nd_n2_normalizedDot);\r\n  }\r\n\r\n  //normalizedDot4\r\n  static normalizedDot4(v1, v2, v3, v4) {\r\n    $_v3nd4_n1_normalizedDot4.load(v2).sub(v1).normalize();\r\n    $_v3nd4_n2_normalizedDot4.load(v4).sub(v3).normalize();\r\n    \r\n    return $_v3nd4_n1_normalizedDot4.dot($_v3nd4_n2_normalizedDot4);\r\n  }\r\n\r\n  multVecMatrix(matrix, ignore_w) {\r\n    if (ignore_w==undefined) {\r\n        ignore_w = false;\r\n    }\r\n    var x=this[0];\r\n    var y=this[1];\r\n    var z=this[2];\r\n    this[0] = matrix.$matrix.m41+x*matrix.$matrix.m11+y*matrix.$matrix.m21+z*matrix.$matrix.m31;\r\n    this[1] = matrix.$matrix.m42+x*matrix.$matrix.m12+y*matrix.$matrix.m22+z*matrix.$matrix.m32;\r\n    this[2] = matrix.$matrix.m43+x*matrix.$matrix.m13+y*matrix.$matrix.m23+z*matrix.$matrix.m33;\r\n    var w=matrix.$matrix.m44+x*matrix.$matrix.m14+y*matrix.$matrix.m24+z*matrix.$matrix.m34;\r\n    if (!ignore_w&&w!=1&&w!=0&&matrix.isPersp) {\r\n        this[0]/=w;\r\n        this[1]/=w;\r\n        this[2]/=w;\r\n    }\r\n    return w;\r\n  }\r\n  \r\n  cross(v) {\r\n    var x = this[1]*v[2] - this[2]*v[1];\r\n    var y = this[2]*v[0] - this[0]*v[2];\r\n    var z = this[0]*v[1] - this[1]*v[0];\r\n    \r\n    this[0] = x;\r\n    this[1] = y;\r\n    this[2] = z;\r\n    \r\n    return this;\r\n  }\r\n\r\n  //axis is optional, 0\r\n  rot2d(A, axis) {\r\n    var x = this[0];\r\n    var y = this[1];\r\n    \r\n    if (axis == 1) {\r\n      this[0] = x * cos(A) + y*sin(A);\r\n      this[1] = y * cos(A) - x*sin(A);\r\n    } else {\r\n      this[0] = x * cos(A) - y*sin(A);\r\n      this[1] = y * cos(A) + x*sin(A);\r\n    }\r\n    \r\n    return this;\r\n  }\r\n \r\n  preNormalizedAngle(v2) {\r\n    if (this.dot(v2)<0.0) {\r\n        var vec=new Vector3();\r\n        vec[0] = -v2[0];\r\n        vec[1] = -v2[1];\r\n        vec[2] = -v2[2];\r\n        return Math.pi-2.0*saasin(vec.vectorDistance(this)/2.0);\r\n    }\r\n    else \r\n      return 2.0*saasin(v2.vectorDistance(this)/2.0);\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.load(this.vec);\r\n    delete this.vec;\r\n  }\r\n}\r\nVector3.STRUCT = `\r\nvec3 {\r\n  vec : array(float) | obj;\r\n}\r\n`;\r\nnstructjs.manager.add_class(Vector3);\r\n\r\nexport class Vector2 extends BaseVector {\r\n  constructor(data) {\r\n    super();\r\n    \r\n    if (arguments.length > 1) {\r\n      throw new Error(\"unexpected argument\");\r\n    }\r\n    \r\n    this.length = 2;\r\n    this[0] = this[1] = 0.0;\r\n    \r\n    if (data != undefined) {\r\n      this.load(data);\r\n    }\r\n  }\r\n\r\n  loadXY(x, y) {\r\n    this[0] = x;\r\n    this[1] = y;\r\n\r\n    return this;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this[0], this[1]];\r\n  }\r\n  \r\n  loadJSON(obj) {\r\n    return this.load(obj);\r\n  }\r\n  \r\n  load(data) {\r\n    if (data == undefined) \r\n      return this;\r\n    \r\n    this[0] = data[0];\r\n    this[1] = data[1];\r\n    \r\n    return this;\r\n  }\r\n  \r\n  //axis is optional, 0\r\n  rot2d(A, axis) {\r\n    var x = this[0];\r\n    var y = this[1];\r\n    \r\n    if (axis == 1) {\r\n      this[0] = x * cos(A) + y*sin(A);\r\n      this[1] = y * cos(A) - x*sin(A);\r\n    } else {\r\n      this[0] = x * cos(A) - y*sin(A);\r\n      this[1] = y * cos(A) + x*sin(A);\r\n    }\r\n    \r\n    return this;\r\n  }\r\n  \r\n  dot(b) {\r\n    return this[0]*b[0] + this[1]*b[1];\r\n  }\r\n\r\n  multVecMatrix(matrix) {\r\n    var x=this[0];\r\n    var y=this[1];\r\n    var w = 1.0;\r\n\r\n    this[0] = w*matrix.$matrix.m41+x*matrix.$matrix.m11+y*matrix.$matrix.m21;\r\n    this[1] = w*matrix.$matrix.m42+x*matrix.$matrix.m12+y*matrix.$matrix.m22;\r\n\r\n    if (matrix.isPersp) {\r\n      let w2 = w*matrix.$matrix.m44+x*matrix.$matrix.m14+y*matrix.$matrix.m24;\r\n\r\n      if (w2 != 0.0) {\r\n        this[0] /= w2;\r\n        this[1] /= w2;\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  mulVecQuat(q) {\r\n    let w = 1.0;\r\n    let z = 0.0;\r\n\r\n    var t0=-this[1]*this[0]-z*this[1]-w*z;\r\n    var t1=this[0]*this[0]+z*z-w*this[1];\r\n    var t2=this[0]*this[1]+w*this[0]-this[1]*z;\r\n\r\n    z = this[0]*z+this[1]*this[1]-z*this[0];\r\n\r\n    this[0] = t1;\r\n    this[1] = t2;\r\n\r\n    t1 = t0*-this[1]+this[0]*this[0]-this[1]*w+z*z;\r\n    t2 = t0*-z+this[1]*this[0]-z*this[1]+this[0]*w;\r\n    z = t0*-w+z*this[0]-this[0]*z+this[1]*this[1];\r\n\r\n    this[0] = t1;\r\n    this[1] = t2;\r\n    \r\n    return this;\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.load(this.vec);\r\n    delete this.vec;\r\n  }\r\n};\r\nVector2.STRUCT = `\r\nvec2 {\r\n  vec : array(float) | obj;\r\n}\r\n`;\r\nnstructjs.manager.add_class(Vector2);\r\n\r\nexport class Quat extends Vector4 {\r\n  makeUnitQuat() {\r\n    this[0] = 1.0;\r\n    this[1] = this[2] = this[3] = 0.0;\r\n  }\r\n\r\n  isZero() {\r\n    return (this[0]==0&&this[1]==0&&this[2]==0&&this[3]==0);\r\n  }\r\n\r\n  mulQuat(qt) {\r\n    var a=this[0]*qt[0]-this[1]*qt[1]-this[2]*qt[2]-this[3]*qt[3];\r\n    var b=this[0]*qt[1]+this[1]*qt[0]+this[2]*qt[3]-this[3]*qt[2];\r\n    var c=this[0]*qt[2]+this[2]*qt[0]+this[3]*qt[1]-this[1]*qt[3];\r\n    this[3] = this[0]*qt[3]+this[3]*qt[0]+this[1]*qt[2]-this[2]*qt[1];\r\n    this[0] = a;\r\n    this[1] = b;\r\n    this[2] = c;\r\n  }\r\n\r\n  conjugate() {\r\n    this[1] = -this[1];\r\n    this[2] = -this[2];\r\n    this[3] = -this[3];\r\n  }\r\n\r\n  dotWithQuat(q2) {\r\n    return this[0]*q2[0]+this[1]*q2[1]+this[2]*q2[2]+this[3]*q2[3];\r\n  }\r\n\r\n  invert() {\r\n    var f= this.dot(this);\r\n    \r\n    if (f==0.0)\r\n      return;\r\n      \r\n    conjugate_qt(q);\r\n    this.mulscalar(1.0/f);\r\n  }\r\n\r\n  sub(q2) {\r\n    var nq2=new Quat();\r\n    \r\n    nq2[0] = -q2[0];\r\n    nq2[1] = q2[1];\r\n    nq2[2] = q2[2];\r\n    nq2[3] = q2[3];\r\n    \r\n    this.mul(nq2);\r\n  }\r\n\r\n  mulScalarWithFactor(fac) {\r\n    var angle=fac*bounded_acos(this[0]);\r\n    var co=Math.cos(angle);\r\n    var si=Math.sin(angle);\r\n    \r\n    this[0] = co;\r\n    \r\n    var last3=Vector3([this[1], this[2], this[3]]);\r\n    last3.normalize();\r\n    last3.mulScalar(si);\r\n    this[1] = last3[0];\r\n    this[2] = last3[1];\r\n    this[3] = last3[2];\r\n    return this;\r\n  }\r\n\r\n  toMatrix(m) {\r\n    if (m == undefined) {\r\n      m=new Matrix4();\r\n    }\r\n    \r\n    var q0=M_SQRT2*this[0];\r\n    var q1=M_SQRT2*this[1];\r\n    var q2=M_SQRT2*this[2];\r\n    var q3=M_SQRT2*this[3];\r\n    var qda=q0*q1;\r\n    var qdb=q0*q2;\r\n    var qdc=q0*q3;\r\n    var qaa=q1*q1;\r\n    var qab=q1*q2;\r\n    var qac=q1*q3;\r\n    var qbb=q2*q2;\r\n    var qbc=q2*q3;\r\n    var qcc=q3*q3;\r\n    m.$matrix.m11 = (1.0-qbb-qcc);\r\n    m.$matrix.m12 = (qdc+qab);\r\n    m.$matrix.m13 = (-qdb+qac);\r\n    m.$matrix.m14 = 0.0;\r\n    m.$matrix.m21 = (-qdc+qab);\r\n    m.$matrix.m22 = (1.0-qaa-qcc);\r\n    m.$matrix.m23 = (qda+qbc);\r\n    m.$matrix.m24 = 0.0;\r\n    m.$matrix.m31 = (qdb+qac);\r\n    m.$matrix.m32 = (-qda+qbc);\r\n    m.$matrix.m33 = (1.0-qaa-qbb);\r\n    m.$matrix.m34 = 0.0;\r\n    m.$matrix.m41 = m.$matrix.m42 = m.$matrix.m43 = 0.0;\r\n    m.$matrix.m44 = 1.0;\r\n    \r\n    return m;\r\n  }\r\n\r\n  matrixToQuat(wmat) {\r\n    var mat=new Matrix4(wmat);\r\n    \r\n    mat.$matrix.m41 = mat.$matrix.m42 = mat.$matrix.m43 = 0;\r\n    mat.$matrix.m44 = 1.0;\r\n    \r\n    var r1=new Vector3([mat.$matrix.m11, mat.$matrix.m12, mat.$matrix.m13]);\r\n    var r2=new Vector3([mat.$matrix.m21, mat.$matrix.m22, mat.$matrix.m23]);\r\n    var r3=new Vector3([mat.$matrix.m31, mat.$matrix.m32, mat.$matrix.m33]);\r\n    \r\n    r1.normalize();\r\n    r2.normalize();\r\n    r3.normalize();\r\n    \r\n    mat.$matrix.m11 = r1[0];\r\n    mat.$matrix.m12 = r1[1];\r\n    mat.$matrix.m13 = r1[2];\r\n    mat.$matrix.m21 = r2[0];\r\n    mat.$matrix.m22 = r2[1];\r\n    mat.$matrix.m23 = r2[2];\r\n    mat.$matrix.m31 = r3[0];\r\n    mat.$matrix.m32 = r3[1];\r\n    mat.$matrix.m33 = r3[2];\r\n    var tr=0.25*(1.0+mat.$matrix.m11+mat.$matrix.m22+mat.$matrix.m33);\r\n    var s=0;\r\n    if (tr>FLT_EPSILON) {\r\n        s = Math.sqrt(tr);\r\n        this[0] = s;\r\n        s = 1.0/(4.0*s);\r\n        this[1] = ((mat.$matrix.m23-mat.$matrix.m32)*s);\r\n        this[2] = ((mat.$matrix.m31-mat.$matrix.m13)*s);\r\n        this[3] = ((mat.$matrix.m12-mat.$matrix.m21)*s);\r\n    }\r\n    else {\r\n      if (mat.$matrix.m11>mat.$matrix.m22&&mat.$matrix.m11>mat.$matrix.m33) {\r\n          s = 2.0*Math.sqrt(1.0+mat.$matrix.m11-mat.$matrix.m22-mat.$matrix.m33);\r\n          this[1] = (0.25*s);\r\n          s = 1.0/s;\r\n          this[0] = ((mat.$matrix.m32-mat.$matrix.m23)*s);\r\n          this[2] = ((mat.$matrix.m21+mat.$matrix.m12)*s);\r\n          this[3] = ((mat.$matrix.m31+mat.$matrix.m13)*s);\r\n      }\r\n      else \r\n        if (mat.$matrix.m22>mat.$matrix.m33) {\r\n          s = 2.0*Math.sqrt(1.0+mat.$matrix.m22-mat.$matrix.m11-mat.$matrix.m33);\r\n          this[2] = (0.25*s);\r\n          s = 1.0/s;\r\n          this[0] = ((mat.$matrix.m31-mat.$matrix.m13)*s);\r\n          this[1] = ((mat.$matrix.m21+mat.$matrix.m12)*s);\r\n          this[3] = ((mat.$matrix.m32+mat.$matrix.m23)*s);\r\n      }\r\n      else {\r\n        s = 2.0*Math.sqrt(1.0+mat.$matrix.m33-mat.$matrix.m11-mat.$matrix.m22);\r\n        this[3] = (0.25*s);\r\n        s = 1.0/s;\r\n        this[0] = ((mat.$matrix.m21-mat.$matrix.m12)*s);\r\n        this[1] = ((mat.$matrix.m31+mat.$matrix.m13)*s);\r\n        this[2] = ((mat.$matrix.m32+mat.$matrix.m23)*s);\r\n      }\r\n    }\r\n    this.normalize();\r\n  }\r\n\r\n  normalize() {\r\n    var len=Math.sqrt(this.dot(this));\r\n    \r\n    if (len!=0.0) {\r\n        this.mulScalar(1.0/len);\r\n    }\r\n    else {\r\n      this[1] = 1.0;\r\n      this[0] = this[2] = this[3] = 0.0;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  axisAngleToQuat(axis, angle) {\r\n    var nor=new Vector3(axis);\r\n    nor.normalize();\r\n\r\n    if (nor.dot(nor) != 0.0) {\r\n        var phi=angle/2.0;\r\n        var si=Math.sin(phi);\r\n        this[0] = Math.cos(phi);\r\n        this[1] = nor[0]*si;\r\n        this[2] = nor[1]*si;\r\n        this[3] = nor[2]*si;\r\n    } else {\r\n      this.makeUnitQuat();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  rotationBetweenVecs(v1, v2) {\r\n    v1 = new Vector3(v1);\r\n    v2 = new Vector3(v2);\r\n    v1.normalize();\r\n    v2.normalize();\r\n    var axis=new Vector3(v1);\r\n    axis.cross(v2);\r\n    var angle=v1.preNormalizedAngle(v2);\r\n    this.axisAngleToQuat(axis, angle);\r\n  }\r\n\r\n  quatInterp(quat2, t) {\r\n    var quat=new Quat();\r\n    var cosom=this[0]*quat2[0]+this[1]*quat2[1]+this[2]*quat2[2]+this[3]*quat2[3];\r\n    if (cosom<0.0) {\r\n        cosom = -cosom;\r\n        quat[0] = -this[0];\r\n        quat[1] = -this[1];\r\n        quat[2] = -this[2];\r\n        quat[3] = -this[3];\r\n    }\r\n    else {\r\n      quat[0] = this[0];\r\n      quat[1] = this[1];\r\n      quat[2] = this[2];\r\n      quat[3] = this[3];\r\n    }\r\n    var omega, sinom, sc1, sc2;\r\n    if ((1.0-cosom)>0.0001) {\r\n        omega = Math.acos(cosom);\r\n        sinom = Math.sin(omega);\r\n        sc1 = Math.sin((1.0-t)*omega)/sinom;\r\n        sc2 = Math.sin(t*omega)/sinom;\r\n    }\r\n    else {\r\n      sc1 = 1.0-t;\r\n      sc2 = t;\r\n    }\r\n    this[0] = sc1*quat[0]+sc2*quat2[0];\r\n    this[1] = sc1*quat[1]+sc2*quat2[1];\r\n    this[2] = sc1*quat[2]+sc2*quat2[2];\r\n    this[3] = sc1*quat[3]+sc2*quat2[3];\r\n    \r\n    return this;\r\n  }\r\n\r\n  loadSTRUCT(reader) {\r\n    reader(this);\r\n\r\n    this.load(this.vec);\r\n    delete this.vec;\r\n  }\r\n};\r\nQuat.STRUCT = `\r\nquat {\r\n  vec : array(float) | obj;\r\n}\r\n`;\r\nnstructjs.manager.add_class(Quat);\r\n\r\n_v3nd4_n1_normalizedDot4 = new Vector3();\r\n_v3nd4_n2_normalizedDot4 = new Vector3();\r\n_v3nd_n1_normalizedDot = new Vector3();\r\n_v3nd_n2_normalizedDot = new Vector3();\r\n\r\nBaseVector.inherit(Vector4, 4);\r\nBaseVector.inherit(Vector3, 3);\r\nBaseVector.inherit(Vector2, 2);\r\n\r\nlookat_cache_vs3 = util.cachering.fromConstructor(Vector3, 64);\r\nlookat_cache_vs4 = util.cachering.fromConstructor(Vector4, 64);\r\nmakenormalcache = util.cachering.fromConstructor(Vector3, 64);\r\n\r\n$_v3nd_n1_normalizedDot = new Vector3();\r\n$_v3nd_n2_normalizedDot = new Vector3();\r\n$_v3nd4_n1_normalizedDot4 = new Vector3();\r\n$_v3nd4_n2_normalizedDot4 = new Vector3();\r\n",
    "static": true,
    "longname": "C:/dev/potreeviewer/scripts/path.ux/scripts/vectormath.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 2699,
    "kind": "variable",
    "name": "sin",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~sin",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2700,
    "kind": "variable",
    "name": "Class",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Class",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2701,
    "kind": "variable",
    "name": "M_SQRT2",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~M_SQRT2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2702,
    "kind": "variable",
    "name": "FLT_EPSILON",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~FLT_EPSILON",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 12,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2703,
    "kind": "variable",
    "name": "DOT_NORM_SNAP_LIMIT",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~DOT_NORM_SNAP_LIMIT",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2704,
    "kind": "variable",
    "name": "basic_funcs",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~basic_funcs",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "{\"equals\": *, \"zero\": *, \"negate\": *, \"combine\": *, \"interp\": *, \"add\": *, \"addFac\": *, \"fract\": *, \"sub\": *, \"mul\": *, \"div\": *, \"mulScalar\": *, \"divScalar\": *, \"addScalar\": *, \"subScalar\": *, \"ceil\": *, \"floor\": *, \"abs\": *, \"min\": *, \"max\": *, \"clamp\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2705,
    "kind": "function",
    "name": "bounded_acos",
    "memberof": "scripts/vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~bounded_acos",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "params": [
      {
        "name": "fac",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2706,
    "kind": "function",
    "name": "saasin",
    "memberof": "scripts/vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~saasin",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [
      {
        "name": "fac",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2707,
    "kind": "variable",
    "name": "HasCSSMatrix",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~HasCSSMatrix",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2708,
    "kind": "variable",
    "name": "HasCSSMatrixCopy",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~HasCSSMatrixCopy",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2709,
    "kind": "variable",
    "name": "M_SQRT2",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~M_SQRT2",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2710,
    "kind": "variable",
    "name": "FLT_EPSILON",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~FLT_EPSILON",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 2711,
    "kind": "function",
    "name": "internal_matrix",
    "memberof": "scripts/vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~internal_matrix",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 2712,
    "kind": "class",
    "name": "Matrix4",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Matrix4",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{Matrix4}",
    "description": null,
    "lineNumber": 94,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 2713,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 95,
    "undocument": true
  },
  {
    "__docId__": 2714,
    "kind": "member",
    "name": "$matrix",
    "memberof": "scripts/vectormath.js~Matrix4",
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#$matrix",
    "access": "public",
    "description": null,
    "lineNumber": 97,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2716,
    "kind": "member",
    "name": "isPersp",
    "memberof": "scripts/vectormath.js~Matrix4",
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#isPersp",
    "access": "public",
    "description": null,
    "lineNumber": 100,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2717,
    "kind": "method",
    "name": "clone",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#clone",
    "access": "public",
    "description": null,
    "lineNumber": 115,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2718,
    "kind": "method",
    "name": "equals",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#equals",
    "access": "public",
    "description": null,
    "lineNumber": 119,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2719,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#load",
    "access": "public",
    "description": null,
    "lineNumber": 148,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2721,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 200,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "{\"isPersp\": *, \"items\": *}"
      ]
    }
  },
  {
    "__docId__": 2722,
    "kind": "method",
    "name": "fromJSON",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~Matrix4.fromJSON",
    "access": "public",
    "description": null,
    "lineNumber": 204,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2723,
    "kind": "method",
    "name": "getAsArray",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#getAsArray",
    "access": "public",
    "description": null,
    "lineNumber": 211,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 2724,
    "kind": "method",
    "name": "getAsFloat32Array",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#getAsFloat32Array",
    "access": "public",
    "description": null,
    "lineNumber": 215,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2725,
    "kind": "method",
    "name": "setUniform",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#setUniform",
    "access": "public",
    "description": null,
    "lineNumber": 224,
    "undocument": true,
    "params": [
      {
        "name": "ctx",
        "types": [
          "*"
        ]
      },
      {
        "name": "loc",
        "types": [
          "*"
        ]
      },
      {
        "name": "transpose",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2726,
    "kind": "method",
    "name": "makeIdentity",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#makeIdentity",
    "access": "public",
    "description": null,
    "lineNumber": 253,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2728,
    "kind": "method",
    "name": "transpose",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#transpose",
    "access": "public",
    "description": null,
    "lineNumber": 275,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2729,
    "kind": "method",
    "name": "invert",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#invert",
    "access": "public",
    "description": null,
    "lineNumber": 296,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2731,
    "kind": "method",
    "name": "translate",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#translate",
    "access": "public",
    "description": null,
    "lineNumber": 323,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2733,
    "kind": "method",
    "name": "scale",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#scale",
    "access": "public",
    "description": null,
    "lineNumber": 353,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      },
      {
        "name": "w",
        "optional": true,
        "types": [
          "number"
        ],
        "defaultRaw": 1,
        "defaultValue": "1"
      }
    ],
    "return": null
  },
  {
    "__docId__": 2735,
    "kind": "method",
    "name": "euler_rotate",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#euler_rotate",
    "access": "public",
    "description": null,
    "lineNumber": 387,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      },
      {
        "name": "order",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2736,
    "kind": "method",
    "name": "toString",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#toString",
    "access": "public",
    "description": null,
    "lineNumber": 430,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2737,
    "kind": "method",
    "name": "rotate",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#rotate",
    "access": "public",
    "description": null,
    "lineNumber": 450,
    "undocument": true,
    "params": [
      {
        "name": "angle",
        "types": [
          "*"
        ]
      },
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2739,
    "kind": "method",
    "name": "makeNormalMatrix",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#makeNormalMatrix",
    "access": "public",
    "description": null,
    "lineNumber": 557,
    "undocument": true,
    "params": [
      {
        "name": "normal",
        "types": [
          "*"
        ]
      },
      {
        "name": "up",
        "optional": true,
        "types": [
          "*"
        ],
        "defaultRaw": "undefined",
        "defaultValue": "undefined"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2740,
    "kind": "method",
    "name": "preMultiply",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#preMultiply",
    "access": "public",
    "description": null,
    "lineNumber": 596,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2741,
    "kind": "method",
    "name": "multiply",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#multiply",
    "access": "public",
    "description": null,
    "lineNumber": 605,
    "undocument": true,
    "params": [
      {
        "name": "mat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2743,
    "kind": "method",
    "name": "divide",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#divide",
    "access": "public",
    "description": null,
    "lineNumber": 645,
    "undocument": true,
    "params": [
      {
        "name": "divisor",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2744,
    "kind": "method",
    "name": "ortho",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#ortho",
    "access": "public",
    "description": null,
    "lineNumber": 664,
    "undocument": true,
    "params": [
      {
        "name": "left",
        "types": [
          "*"
        ]
      },
      {
        "name": "right",
        "types": [
          "*"
        ]
      },
      {
        "name": "bottom",
        "types": [
          "*"
        ]
      },
      {
        "name": "top",
        "types": [
          "*"
        ]
      },
      {
        "name": "near",
        "types": [
          "*"
        ]
      },
      {
        "name": "far",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2745,
    "kind": "method",
    "name": "frustum",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#frustum",
    "access": "public",
    "description": null,
    "lineNumber": 690,
    "undocument": true,
    "params": [
      {
        "name": "left",
        "types": [
          "*"
        ]
      },
      {
        "name": "right",
        "types": [
          "*"
        ]
      },
      {
        "name": "bottom",
        "types": [
          "*"
        ]
      },
      {
        "name": "top",
        "types": [
          "*"
        ]
      },
      {
        "name": "near",
        "types": [
          "*"
        ]
      },
      {
        "name": "far",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2747,
    "kind": "method",
    "name": "orthographic",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#orthographic",
    "access": "public",
    "description": null,
    "lineNumber": 716,
    "undocument": true,
    "params": [
      {
        "name": "scale",
        "types": [
          "*"
        ]
      },
      {
        "name": "aspect",
        "types": [
          "*"
        ]
      },
      {
        "name": "near",
        "types": [
          "*"
        ]
      },
      {
        "name": "far",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2749,
    "kind": "method",
    "name": "perspective",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#perspective",
    "access": "public",
    "description": null,
    "lineNumber": 729,
    "undocument": true,
    "params": [
      {
        "name": "fovy",
        "types": [
          "*"
        ]
      },
      {
        "name": "aspect",
        "types": [
          "*"
        ]
      },
      {
        "name": "zNear",
        "types": [
          "*"
        ]
      },
      {
        "name": "zFar",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2750,
    "kind": "method",
    "name": "lookat",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#lookat",
    "access": "public",
    "description": null,
    "lineNumber": 737,
    "undocument": true,
    "params": [
      {
        "name": "pos",
        "types": [
          "*"
        ]
      },
      {
        "name": "target",
        "types": [
          "*"
        ]
      },
      {
        "name": "up",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2751,
    "kind": "method",
    "name": "makeRotationOnly",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#makeRotationOnly",
    "access": "public",
    "description": null,
    "lineNumber": 784,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2752,
    "kind": "method",
    "name": "decompose",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#decompose",
    "access": "public",
    "description": null,
    "lineNumber": 793,
    "undocument": true,
    "params": [
      {
        "name": "_translate",
        "types": [
          "*"
        ]
      },
      {
        "name": "_rotate",
        "types": [
          "*"
        ]
      },
      {
        "name": "_scale",
        "types": [
          "*"
        ]
      },
      {
        "name": "_skew",
        "types": [
          "*"
        ]
      },
      {
        "name": "_perspective",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 2753,
    "kind": "method",
    "name": "_determinant2x2",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#_determinant2x2",
    "access": "private",
    "description": null,
    "lineNumber": 885,
    "undocument": true,
    "params": [
      {
        "name": "a",
        "types": [
          "*"
        ]
      },
      {
        "name": "b",
        "types": [
          "*"
        ]
      },
      {
        "name": "c",
        "types": [
          "*"
        ]
      },
      {
        "name": "d",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2754,
    "kind": "method",
    "name": "_determinant3x3",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#_determinant3x3",
    "access": "private",
    "description": null,
    "lineNumber": 889,
    "undocument": true,
    "params": [
      {
        "name": "a1",
        "types": [
          "*"
        ]
      },
      {
        "name": "a2",
        "types": [
          "*"
        ]
      },
      {
        "name": "a3",
        "types": [
          "*"
        ]
      },
      {
        "name": "b1",
        "types": [
          "*"
        ]
      },
      {
        "name": "b2",
        "types": [
          "*"
        ]
      },
      {
        "name": "b3",
        "types": [
          "*"
        ]
      },
      {
        "name": "c1",
        "types": [
          "*"
        ]
      },
      {
        "name": "c2",
        "types": [
          "*"
        ]
      },
      {
        "name": "c3",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2755,
    "kind": "method",
    "name": "_determinant4x4",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#_determinant4x4",
    "access": "private",
    "description": null,
    "lineNumber": 893,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2756,
    "kind": "method",
    "name": "_makeAdjoint",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#_makeAdjoint",
    "access": "private",
    "description": null,
    "lineNumber": 913,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2757,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/vectormath.js~Matrix4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Matrix4#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 948,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2758,
    "kind": "function",
    "name": "make_norm_safe_dot",
    "memberof": "scripts/vectormath.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~make_norm_safe_dot",
    "access": "public",
    "export": false,
    "importPath": "./scripts/vectormath.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 964,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 2759,
    "kind": "class",
    "name": "BaseVector",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~BaseVector",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{BaseVector}",
    "description": null,
    "lineNumber": 980,
    "undocument": true,
    "interface": false,
    "extends": [
      "Array"
    ]
  },
  {
    "__docId__": 2760,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 981,
    "undocument": true
  },
  {
    "__docId__": 2761,
    "kind": "method",
    "name": "copy",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#copy",
    "access": "public",
    "description": null,
    "lineNumber": 989,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2762,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#load",
    "access": "public",
    "description": null,
    "lineNumber": 993,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2763,
    "kind": "method",
    "name": "init_swizzle",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#init_swizzle",
    "access": "public",
    "description": null,
    "lineNumber": 997,
    "undocument": true,
    "params": [
      {
        "name": "size",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2764,
    "kind": "method",
    "name": "vectorLength",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#vectorLength",
    "access": "public",
    "description": null,
    "lineNumber": 1012,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2765,
    "kind": "method",
    "name": "normalize",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~BaseVector#normalize",
    "access": "public",
    "description": null,
    "lineNumber": 1016,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2766,
    "kind": "method",
    "name": "inherit",
    "memberof": "scripts/vectormath.js~BaseVector",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~BaseVector.inherit",
    "access": "public",
    "description": null,
    "lineNumber": 1025,
    "undocument": true,
    "params": [
      {
        "name": "cls",
        "types": [
          "*"
        ]
      },
      {
        "name": "vectorsize",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2767,
    "kind": "class",
    "name": "Vector4",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Vector4",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{Vector4}",
    "description": null,
    "lineNumber": 1108,
    "undocument": true,
    "interface": false,
    "extends": [
      "BaseVector"
    ]
  },
  {
    "__docId__": 2768,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1109,
    "undocument": true
  },
  {
    "__docId__": 2769,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/vectormath.js~Vector4",
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#length",
    "access": "public",
    "description": null,
    "lineNumber": 1116,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2770,
    "kind": "member",
    "name": "[0]",
    "memberof": "scripts/vectormath.js~Vector4",
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#[0]",
    "access": "public",
    "description": null,
    "lineNumber": 1117,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2771,
    "kind": "method",
    "name": "toCSS",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#toCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1124,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2772,
    "kind": "method",
    "name": "loadXYZW",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#loadXYZW",
    "access": "public",
    "description": null,
    "lineNumber": 1132,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      },
      {
        "name": "w",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2774,
    "kind": "member",
    "name": "[1]",
    "memberof": "scripts/vectormath.js~Vector4",
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#[1]",
    "access": "public",
    "description": null,
    "lineNumber": 1134,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2775,
    "kind": "member",
    "name": "[2]",
    "memberof": "scripts/vectormath.js~Vector4",
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#[2]",
    "access": "public",
    "description": null,
    "lineNumber": 1135,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2776,
    "kind": "member",
    "name": "[3]",
    "memberof": "scripts/vectormath.js~Vector4",
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#[3]",
    "access": "public",
    "description": null,
    "lineNumber": 1136,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2777,
    "kind": "method",
    "name": "loadXYZ",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#loadXYZ",
    "access": "public",
    "description": null,
    "lineNumber": 1141,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2781,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#load",
    "access": "public",
    "description": null,
    "lineNumber": 1149,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2786,
    "kind": "method",
    "name": "dot",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#dot",
    "access": "public",
    "description": null,
    "lineNumber": 1161,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2787,
    "kind": "method",
    "name": "mulVecQuat",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#mulVecQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1165,
    "undocument": true,
    "params": [
      {
        "name": "q",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2794,
    "kind": "method",
    "name": "multVecMatrix",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#multVecMatrix",
    "access": "public",
    "description": null,
    "lineNumber": 1181,
    "undocument": true,
    "params": [
      {
        "name": "matrix",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2799,
    "kind": "method",
    "name": "cross",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#cross",
    "access": "public",
    "description": null,
    "lineNumber": 1195,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2803,
    "kind": "method",
    "name": "preNormalizedAngle",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#preNormalizedAngle",
    "access": "public",
    "description": null,
    "lineNumber": 1207,
    "undocument": true,
    "params": [
      {
        "name": "v2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2804,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/vectormath.js~Vector4",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector4#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1220,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2805,
    "kind": "class",
    "name": "Vector3",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Vector3",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{Vector3}",
    "description": null,
    "lineNumber": 1239,
    "undocument": true,
    "interface": false,
    "extends": [
      "BaseVector"
    ]
  },
  {
    "__docId__": 2806,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1240,
    "undocument": true
  },
  {
    "__docId__": 2807,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/vectormath.js~Vector3",
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#length",
    "access": "public",
    "description": null,
    "lineNumber": 1247,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2808,
    "kind": "member",
    "name": "[0]",
    "memberof": "scripts/vectormath.js~Vector3",
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#[0]",
    "access": "public",
    "description": null,
    "lineNumber": 1248,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2809,
    "kind": "method",
    "name": "toCSS",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#toCSS",
    "access": "public",
    "description": null,
    "lineNumber": 1255,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 2810,
    "kind": "method",
    "name": "loadXYZ",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#loadXYZ",
    "access": "public",
    "description": null,
    "lineNumber": 1262,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      },
      {
        "name": "z",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2812,
    "kind": "member",
    "name": "[1]",
    "memberof": "scripts/vectormath.js~Vector3",
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#[1]",
    "access": "public",
    "description": null,
    "lineNumber": 1264,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2813,
    "kind": "member",
    "name": "[2]",
    "memberof": "scripts/vectormath.js~Vector3",
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#[2]",
    "access": "public",
    "description": null,
    "lineNumber": 1265,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2814,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1270,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 2815,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1274,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2816,
    "kind": "method",
    "name": "initVector3",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#initVector3",
    "access": "public",
    "description": null,
    "lineNumber": 1278,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2819,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#load",
    "access": "public",
    "description": null,
    "lineNumber": 1284,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2823,
    "kind": "method",
    "name": "dot",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#dot",
    "access": "public",
    "description": null,
    "lineNumber": 1295,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2824,
    "kind": "method",
    "name": "normalizedDot",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#normalizedDot",
    "access": "public",
    "description": null,
    "lineNumber": 1299,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2825,
    "kind": "method",
    "name": "normalizedDot4",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "scripts/vectormath.js~Vector3.normalizedDot4",
    "access": "public",
    "description": null,
    "lineNumber": 1308,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      },
      {
        "name": "v3",
        "types": [
          "*"
        ]
      },
      {
        "name": "v4",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2826,
    "kind": "method",
    "name": "multVecMatrix",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#multVecMatrix",
    "access": "public",
    "description": null,
    "lineNumber": 1315,
    "undocument": true,
    "params": [
      {
        "name": "matrix",
        "types": [
          "*"
        ]
      },
      {
        "name": "ignore_w",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2833,
    "kind": "method",
    "name": "cross",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#cross",
    "access": "public",
    "description": null,
    "lineNumber": 1334,
    "undocument": true,
    "params": [
      {
        "name": "v",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2837,
    "kind": "method",
    "name": "rot2d",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#rot2d",
    "access": "public",
    "description": null,
    "lineNumber": 1347,
    "undocument": true,
    "params": [
      {
        "name": "A",
        "types": [
          "*"
        ]
      },
      {
        "name": "axis",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2842,
    "kind": "method",
    "name": "preNormalizedAngle",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#preNormalizedAngle",
    "access": "public",
    "description": null,
    "lineNumber": 1362,
    "undocument": true,
    "params": [
      {
        "name": "v2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2843,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/vectormath.js~Vector3",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector3#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1374,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2844,
    "kind": "class",
    "name": "Vector2",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Vector2",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{Vector2}",
    "description": null,
    "lineNumber": 1388,
    "undocument": true,
    "interface": false,
    "extends": [
      "BaseVector"
    ]
  },
  {
    "__docId__": 2845,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 1389,
    "undocument": true
  },
  {
    "__docId__": 2846,
    "kind": "member",
    "name": "length",
    "memberof": "scripts/vectormath.js~Vector2",
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#length",
    "access": "public",
    "description": null,
    "lineNumber": 1396,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2847,
    "kind": "member",
    "name": "[0]",
    "memberof": "scripts/vectormath.js~Vector2",
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#[0]",
    "access": "public",
    "description": null,
    "lineNumber": 1397,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2848,
    "kind": "method",
    "name": "loadXY",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#loadXY",
    "access": "public",
    "description": null,
    "lineNumber": 1404,
    "undocument": true,
    "params": [
      {
        "name": "x",
        "types": [
          "*"
        ]
      },
      {
        "name": "y",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2850,
    "kind": "member",
    "name": "[1]",
    "memberof": "scripts/vectormath.js~Vector2",
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#[1]",
    "access": "public",
    "description": null,
    "lineNumber": 1406,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2851,
    "kind": "method",
    "name": "toJSON",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#toJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1411,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "undefined[]"
      ]
    }
  },
  {
    "__docId__": 2852,
    "kind": "method",
    "name": "loadJSON",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#loadJSON",
    "access": "public",
    "description": null,
    "lineNumber": 1415,
    "undocument": true,
    "params": [
      {
        "name": "obj",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2853,
    "kind": "method",
    "name": "load",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#load",
    "access": "public",
    "description": null,
    "lineNumber": 1419,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2856,
    "kind": "method",
    "name": "rot2d",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#rot2d",
    "access": "public",
    "description": null,
    "lineNumber": 1430,
    "undocument": true,
    "params": [
      {
        "name": "A",
        "types": [
          "*"
        ]
      },
      {
        "name": "axis",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2861,
    "kind": "method",
    "name": "dot",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#dot",
    "access": "public",
    "description": null,
    "lineNumber": 1445,
    "undocument": true,
    "params": [
      {
        "name": "b",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2862,
    "kind": "method",
    "name": "multVecMatrix",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#multVecMatrix",
    "access": "public",
    "description": null,
    "lineNumber": 1449,
    "undocument": true,
    "params": [
      {
        "name": "matrix",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2867,
    "kind": "method",
    "name": "mulVecQuat",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#mulVecQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1469,
    "undocument": true,
    "params": [
      {
        "name": "q",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2872,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/vectormath.js~Vector2",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Vector2#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1492,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2873,
    "kind": "class",
    "name": "Quat",
    "memberof": "scripts/vectormath.js",
    "static": true,
    "longname": "scripts/vectormath.js~Quat",
    "access": "public",
    "export": true,
    "importPath": "./scripts/vectormath.js",
    "importStyle": "{Quat}",
    "description": null,
    "lineNumber": 1506,
    "undocument": true,
    "interface": false,
    "extends": [
      "Vector4"
    ]
  },
  {
    "__docId__": 2874,
    "kind": "method",
    "name": "makeUnitQuat",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#makeUnitQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1507,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2875,
    "kind": "member",
    "name": "[0]",
    "memberof": "scripts/vectormath.js~Quat",
    "static": false,
    "longname": "scripts/vectormath.js~Quat#[0]",
    "access": "public",
    "description": null,
    "lineNumber": 1508,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2876,
    "kind": "member",
    "name": "[1]",
    "memberof": "scripts/vectormath.js~Quat",
    "static": false,
    "longname": "scripts/vectormath.js~Quat#[1]",
    "access": "public",
    "description": null,
    "lineNumber": 1509,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2877,
    "kind": "method",
    "name": "isZero",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#isZero",
    "access": "public",
    "description": null,
    "lineNumber": 1512,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2878,
    "kind": "method",
    "name": "mulQuat",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#mulQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1516,
    "undocument": true,
    "params": [
      {
        "name": "qt",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2879,
    "kind": "member",
    "name": "[3]",
    "memberof": "scripts/vectormath.js~Quat",
    "static": false,
    "longname": "scripts/vectormath.js~Quat#[3]",
    "access": "public",
    "description": null,
    "lineNumber": 1520,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2882,
    "kind": "member",
    "name": "[2]",
    "memberof": "scripts/vectormath.js~Quat",
    "static": false,
    "longname": "scripts/vectormath.js~Quat#[2]",
    "access": "public",
    "description": null,
    "lineNumber": 1523,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2883,
    "kind": "method",
    "name": "conjugate",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#conjugate",
    "access": "public",
    "description": null,
    "lineNumber": 1526,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2887,
    "kind": "method",
    "name": "dotWithQuat",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#dotWithQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1532,
    "undocument": true,
    "params": [
      {
        "name": "q2",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2888,
    "kind": "method",
    "name": "invert",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#invert",
    "access": "public",
    "description": null,
    "lineNumber": 1536,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 2889,
    "kind": "method",
    "name": "sub",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#sub",
    "access": "public",
    "description": null,
    "lineNumber": 1546,
    "undocument": true,
    "params": [
      {
        "name": "q2",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2890,
    "kind": "method",
    "name": "mulScalarWithFactor",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#mulScalarWithFactor",
    "access": "public",
    "description": null,
    "lineNumber": 1557,
    "undocument": true,
    "params": [
      {
        "name": "fac",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2895,
    "kind": "method",
    "name": "toMatrix",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#toMatrix",
    "access": "public",
    "description": null,
    "lineNumber": 1573,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2896,
    "kind": "method",
    "name": "matrixToQuat",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#matrixToQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1609,
    "undocument": true,
    "params": [
      {
        "name": "wmat",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2913,
    "kind": "method",
    "name": "normalize",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#normalize",
    "access": "public",
    "description": null,
    "lineNumber": 1672,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2916,
    "kind": "method",
    "name": "axisAngleToQuat",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#axisAngleToQuat",
    "access": "public",
    "description": null,
    "lineNumber": 1685,
    "undocument": true,
    "params": [
      {
        "name": "axis",
        "types": [
          "*"
        ]
      },
      {
        "name": "angle",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2921,
    "kind": "method",
    "name": "rotationBetweenVecs",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#rotationBetweenVecs",
    "access": "public",
    "description": null,
    "lineNumber": 1703,
    "undocument": true,
    "params": [
      {
        "name": "v1",
        "types": [
          "*"
        ]
      },
      {
        "name": "v2",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "__docId__": 2922,
    "kind": "method",
    "name": "quatInterp",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#quatInterp",
    "access": "public",
    "description": null,
    "lineNumber": 1714,
    "undocument": true,
    "params": [
      {
        "name": "quat2",
        "types": [
          "*"
        ]
      },
      {
        "name": "t",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2927,
    "kind": "method",
    "name": "loadSTRUCT",
    "memberof": "scripts/vectormath.js~Quat",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "scripts/vectormath.js~Quat#loadSTRUCT",
    "access": "public",
    "description": null,
    "lineNumber": 1749,
    "undocument": true,
    "params": [
      {
        "name": "reader",
        "types": [
          "*"
        ]
      }
    ],
    "return": null
  },
  {
    "kind": "index",
    "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <base data-ice=\"baseUrl\" href=\"./\">\n  <title data-ice=\"title\">Manual | path.ux</title>\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"css/style.css\">\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"css/prettify-tomorrow.css\">\n  <script src=\"script/prettify/prettify.js\"></script>\n  <script src=\"script/manual.js\"></script>\n<meta name=\"description\" content=\"this is awesome library\"><meta property=\"twitter:card\" content=\"summary\"><meta property=\"twitter:title\" content=\"path.ux\"><meta property=\"twitter:description\" content=\"this is awesome library\"></head>\n<body class=\"layout-container manual-root manual-index\" data-ice=\"rootContainer\">\n\n<header>\n  <a href=\"./\">Home</a>\n  \n  <a href=\"identifiers.html\">Reference</a>\n  <a href=\"source.html\">Source</a>\n  \n  <div class=\"search-box\">\n  <span>\n    <img src=\"./image/search.png\">\n    <span class=\"search-input-edge\"></span><input class=\"search-input\"><span class=\"search-input-edge\"></span>\n  </span>\n    <ul class=\"search-result\"></ul>\n  </div>\n<a style=\"position:relative; top:3px;\" href=\"https://github.com/joeedh/path.ux.git\"><img width=\"20px\" src=\"./image/github.png\"></a></header>\n\n<nav class=\"navigation\" data-ice=\"nav\"><div class=\"manual-toc-root\">\n  \n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    <li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/architecture.html\"><a href=\"manual/architecture.html#introduction\" data-ice=\"link\">Introduction</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/architecture.html\"><a href=\"manual/architecture.html#context\" data-ice=\"link\">Context</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/architecture.html\"><a href=\"manual/architecture.html#tool-contexts\" data-ice=\"link\">Tool Contexts</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/architecture.html\"><a href=\"manual/architecture.html#history\" data-ice=\"link\">History</a></li>\n</ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    <li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/nstructjs.html\"><a href=\"manual/nstructjs.html\" data-ice=\"link\">NStructJS</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/nstructjs.html\"><a href=\"manual/nstructjs.html#controller-how-fields-are-saved\" data-ice=\"link\">Controller How Fields Are Saved</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/nstructjs.html\"><a href=\"manual/nstructjs.html#versioning\" data-ice=\"link\">Versioning</a></li>\n</ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    <li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/toolsystem.html\"><a href=\"manual/toolsystem.html\" data-ice=\"link\">Tool System</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/toolsystem.html\"><a href=\"manual/toolsystem.html#context\" data-ice=\"link\">Context</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/toolsystem.html\"><a href=\"manual/toolsystem.html#undo\" data-ice=\"link\">Undo</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/toolsystem.html\"><a href=\"manual/toolsystem.html#tooldef--\" data-ice=\"link\">tooldef()</a></li>\n<li data-ice=\"manualNav\" class=\"indent-h2\" data-link=\"manual/toolsystem.html\"><a href=\"manual/toolsystem.html#tool-properties\" data-ice=\"link\">Tool Properties</a></li>\n</ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    <li data-ice=\"manualNav\" class=\"indent-h1\" data-link=\"manual/controller.html\"><a href=\"manual/controller.html\" data-ice=\"link\">Object Wrapping Example</a></li>\n</ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    </ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    </ul>\n  </div>\n<div data-ice=\"manual\">\n    <ul class=\"manual-toc\">\n      \n    </ul>\n  </div>\n</div>\n</nav>\n\n<div class=\"content\" data-ice=\"content\"><div class=\"github-markdown\">\n  <div class=\"manual-user-index\" data-ice=\"manualUserIndex\"><h1 id=\"introduction\">Introduction</h1><p>Path.ux is a small app framework based on the Blender&apos;s architecture.</p>\n<h1 id=\"architecture\">Architecture</h1><ul>\n<li><a href=\"manual/architecture.html\">Overview</a></li>\n<li><a href=\"manual/context.html\">Context</a></li>\n<li><a href=\"manual/toolprop.html\">Tool Properties</a></li>\n<li><a href=\"manual/toolsystem.html\">Tool System</a></li>\n<li><a href=\"manual/controller.html\">Controller</a></li>\n<li><a href=\"manual/nstructjs.html\">STRUCT</a></li>\n<li><a href=\"manual/FrameManager.html\">FrameManager</a></li>\n</ul>\n</div>\n\n  \n\n  <div class=\"manual-cards\">\n    \n  <div class=\"manual-card-wrap\" data-ice=\"cards\">\n      <div class=\"manual-card\">\n        <div data-ice=\"card\"><h1>History</h1><p>Path.ux is roughly based on <a href=\"http://www.blender.org\">Blender&apos;s</a> architecture.</p><p><a href=\"./manual/manual/controller.html\">Main page</a></p><p>The Blender 2.5 project refactored the internal architecture into a rough MVC pattern.  The model is the core code, the view is the UI, and the controller is the glue between them.</p><p>The controller is called &quot;RNA&quot; and it uses the concept of object paths. So if you have an object, you could look up type information (and the value of) a property with a simple path, e.g. &quot;object.subobject.some_property&quot;.  Blender uses RNA for its user interface, its python api and its animation system (you can associate object paths with animation curves).</p><p>Internally the controller has a special wrapper API for blender&apos;s c-struct-based pseudo-objects.  This works extremely well as it keeps type information that&apos;s only used by the UI out of the model codebase (e.g. the model might not care that a specific color should be clamped to 0-2 instead of 0-1).  Even better, the object model presented by the controller need not match the internal data structures.</p><p>Since the controller provides type info to the UI a lot of messy boilerplate is avoided, leading to very consise layout code:</p><pre><code><code class=\"source-code prettyprint\">def panel(layout, context):\n    row = layout.row\n    row.prop(context.object, &quot;some_object_property&quot;)\n    row.tool(&quot;mesh.subdivide&quot;)</code>\n</code></pre></div>\n        <a data-ice=\"link\" href=\"manual/architecture.html#history\"></a>\n      </div>\n    </div>\n<div class=\"manual-card-wrap\" data-ice=\"cards\">\n      <div class=\"manual-card\">\n        <div data-ice=\"card\"><h1>NStructJS</h1><p>NStructJS is a little library for saving/loading highly structured JS objects as binary data\n(for more info, see the <a href=\"https://github.com/joeedh/STRUCT/wiki\">official documentation</a> ).\nIt is not suited for unstructed data (use JSON for that).<br>NStructJS arose out of the following shortcomings of JSON:</p><ul>\n<li>JSON allocates objects twice.</li>\n<li>JSON is slow compared to what you can get with a structured binary format</li>\n</ul><p>The idea of NStructJS is to attach little scripts to your classes that define that \nclass&apos;s data and how it is saved.  For example:</p><pre><code><code class=\"source-code prettyprint\">class SomeClass {\n  constructor() {\n    this.data1 = 0;\n    this.data2 = [1, 2, 3];\n  }\n\n  //reader &quot;fills in&quot; fields in a newly created object with loaded data\n  static fromSTRUCT(reader) {\n    let ret = new SomeClass();\n\n    reader(ret);\n\n    return ret;\n  }\n}\nSomeClass.STRUCT = `\nmy_module.SomeClass {\n  data1 : int;\n  data2 : array;\n}\nnstructjs.manager.add_class(SomeClass);\n`;</code>\n</code></pre><h2>Controller How Fields Are Saved</h2><p>Note that you can specify little code snippets to control how fields are saved.\nFor example, if you want to save an integer ID instead of a reference for an \nobject property, you might do this:</p><pre><code><code class=\"source-code prettyprint\">my_module.AnotherClass {\n  someclass : int | obj.someclass !== undefined ? obj.someclass.id : -1;\n}</code>\n</code></pre><p>Here, everything after &apos;|&apos; until &apos;;&apos; defines how someclass is saved.  For various dumb reasons\n&apos;this&apos; is bound to &apos;obj&apos;; as you can see, the basic idea is to check if this.someclass exists,\nif so use this.someclass.id, else use -1.</p><h2>Versioning</h2><p>To a certain extend nstructjs will gracefully handle version changes.  The basic idea is to save a\ncopy of your struct scripts with each file, that way each file knows how to load itself.</p><p>For more advanced versioning, see AppState.prototype.do_versions and AppState.prototype.do_versions_post.\nThey&apos;re used when the automatic versioning from nstructjs isn&apos;t enough.</p></div>\n        <a data-ice=\"link\" href=\"manual/nstructjs.html\"></a>\n      </div>\n    </div>\n<div class=\"manual-card-wrap\" data-ice=\"cards\">\n      <div class=\"manual-card\">\n        <div data-ice=\"card\"><h1>Tool System</h1><p>Tools are what the user uses to change state in the model.  They handle undo, can take control of events if needed and in generate are foundational to path.ux and it&apos;s associated projects.  </p><p>Tools all inherit from ToolOp, which roughly looks like this (see Context section for an explanation for what the &quot;ctx&quot; parameters are):</p><pre><code><code class=\"source-code prettyprint\">class SomeTool extends ToolOp {\n  static tooldef() {return {\n    uiname   : &quot;Tool&quot;,\n    path     : &quot;module.tool&quot;\n    inputs   : ToolOp.inherit({}), //inherit properties from base class\n    outputs  : {}\n  }}\n  static invoke(ctx, args) {\n    /*create a new tool instance.\n      args is simple key:val mapping\n      where val is either a string, a number\n      or a boolean.*/\n    return new ToolOp()\n  }\n  undoPre(ctx) {\n    //create undo data\n  }\n  undo(ctx) {\n    //execute undo with data made in previous call to this.undoPre\n  }\n  exec(ctx) {\n    //execute tool\n  }\n  modalStart(ctx) {\n    //start interactice mode\n  }\n  modalEnd(ctx) {\n    //end interactive mode\n  }\n  on_[mousedown/mousemove/mouseup/keydown](ctx) {\n    //interactive mode event\n  }\n\n  ToolOp.register(SomeTool);\n}</code>\n</code></pre><h2>Context</h2><p>The foundation of the tool system is a special Context struct that&apos;s provided by client code.  Think of it as defining &quot;arguments&quot; for tools.  Path.ux can use any context struct, but requires the following properties be defined:</p><pre><code><code class=\"source-code prettyprint\">class Context {\n  get api() {\n    //return reference to a controller.ModelInterface\n  }\n\n  get appstate() {\n    //return reference to main appstate global\n  }\n\n  get screen() {\n    //return reference to main FrameManager.screen\n  }\n}</code>\n</code></pre><p>In addition, path.ux has hooks to provide UI context, specifically which are is currently active.  To do this,\neither override the following methods in ScreenArea.Area.prototype, or subclass Area:</p><pre><code><code class=\"source-code prettyprint\">  //called when area should be considered &quot;active&quot;\n  push_ctx_active() {\n  }\n\n  //called when area should be considered &quot;inactive&quot;\n  pop_ctx_active() {\n  }</code>\n</code></pre><h2>Undo</h2><p>Typically tools will inherit from a base class with a general, brute-force undo (i.e. saving the \nentire application and then reloading it on undo).  Additionally to save on speed and memory subclasses \ncan override undoPre and undo with their own implementation.</p><h2>tooldef()</h2><p>Tools have a special tooldef() static function that &quot;defines&quot; the tool.  It returns things like\nwhat properties the tool has, it&apos;s name, it&apos;s path in the data path system, etc.</p><h2>Tool Properties</h2><p>Tools have input and output slots.  See toolprop.js.  There are integer properties, float properties, \nvarious linear algebra properties (vectors, matrices), enumerations, bitflags, and in addition client code\nmay provide it&apos;s own property classes.</p></div>\n        <a data-ice=\"link\" href=\"manual/toolsystem.html\"></a>\n      </div>\n    </div>\n<div class=\"manual-card-wrap\" data-ice=\"cards\">\n      <div class=\"manual-card\">\n        <div data-ice=\"card\"><h1>Object Wrapping Example</h1><pre><code><code class=\"source-code prettyprint\">//our test class we want to wrap\nclass Thing {\n  constructor(name, id, location, opacity) {\n    this.name = name; //str\n    this.id = id; //int\n    this.location = location; //enumeration\n    this.opacity = opacity; //float\n  }\n}\n\n//enumeration for .location member\nconst LocationEnum = {\n  LIVING_ROOM : 0,\n  BEDROOM : 1,\n  DRIVEWAY : 2\n};\n\nimport {DataAPI} from &apos;controller.js&apos;;\n\nexport api = new DataAPI();\n\n//create a structure mapping to Thing\nlet st = api.mapStruct(Thing);\n\n//define properties and their types\n//these all have the prototype (membername, apiname, ui_name, description)\n\nst.string(&quot;name&quot;, &quot;name&quot;, &quot;Name&quot;, &quot;Name of thing&quot;);\nst.int(&quot;id&quot;, &quot;id&quot;, &quot;ID&quot;, &quot;Unique ID of thing&quot;);\nst.enum(&quot;location&quot;, &quot;location&quot;, &quot;Location&quot;, &quot;Location of thing&quot;).icons({\n  LIVING_ROOM : [some icon id],\n  BEDROOM : [some icon id],\n  DRIVEWAY : [some icon id],\n});\nst.float(&quot;opacity&quot;, &quot;opacity&quot;, &quot;Opacity&quot;, &quot;Transparency of thing&quot;).range(0, 1);\n</code>\n</code></pre></div>\n        <a data-ice=\"link\" href=\"manual/controller.html\"></a>\n      </div>\n    </div>\n</div>\n</div>\n</div>\n\n<footer class=\"footer\">\n  Generated by <a href=\"https://esdoc.org\">ESDoc<span data-ice=\"esdocVersion\">(1.1.0)</span><img src=\"./image/esdoc-logo-mini-black.png\"></a>\n</footer>\n\n<script src=\"script/search_index.js\"></script>\n<script src=\"script/search.js\"></script>\n<script src=\"script/pretty-print.js\"></script>\n<script src=\"script/inherited-summary.js\"></script>\n<script src=\"script/test-summary.js\"></script>\n<script src=\"script/inner-link.js\"></script>\n<script src=\"script/patch-for-local.js\"></script>\n</body>\n</html>\n",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs\\index.html",
    "name": "../docs/index.html",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "",
    "longname": "",
    "name": "",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manualIndex",
    "globalIndex": true,
    "content": "# Introduction\n\nPath.ux is a small app framework based on the Blender's architecture.\n\n# Architecture\n\n- [Overview](manual/architecture.html)\n- [Context](manual/context.html)\n- [Tool Properties](manual/toolprop.html)\n- [Tool System](manual/toolsystem.html)\n- [Controller](manual/controller.html)\n- [STRUCT](manual/nstructjs.html)\n- [FrameManager](manual/FrameManager.html)\n",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\index.md",
    "name": "index.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\architecture.md",
    "name": "architecture.md",
    "content": "# Introduction\n\nPath.ux follows a strict model/view/controller paradigm.  The application state\nis the model, path.ux is the (or a) view, and the controller is the means by which\npath.ux queries the model.\n\nThe controller is based on the concept of object paths.  \nFor example, you might see code like this:\n\n```\nfunction makePanel(layout) {\n  layout.prop(\"view3d.selectmode\", PackFlags.USE_ICONS);\n  layout.tool(\"view3d.select_all()\", PackFlags.USE_ICONS);\n}\n```\n\nThe controller is responsible for telling path.ux what type \"view3d.selectmode\" is, \nwhat its icon is, the current value, etc.  Similarly the controller tells path.ux\nwhat the tool view3d.select_all() is: it's icon, if it can run in the current context (more on context later),\nit's hotkey, etc.\n\nPath.ux allows different controller implementations (though they must all pass type information via the \nclasses in toolprop.js).  The included implementation can be found in \"simple_controller.js\", and the abstract interface\nin \"controller.js\".\n\n# Context\nContexts are bundles of data that tell the UI (and tools, and whatever else needs them) the current application state.\n\nPath.ux requires the following context abstract class:\n\n```\nclass Context {\n  get screen() {\n    //get current Screen instance, or instance of a subclass of it\n  }\n  \n  get area() {\n    //get active area editor\n    return Area.getActiveArea()\n  }\n  \n  get state() {\n    //get application state\n  }\n  \n  get api() {\n    //returns a subclass of controller.js:ModalInterface\n    //this is the controller\n  }\n  \n  get toolstack() {\n    //returns an instance (or subclass instance) of simple_toolsys.js:ToolStack\n  }\n}\n```\n\nTo use a ctx class, simply assign an instance of one \nto .ctx on a Screen instance.  For example:\n\n```\nlet screen = document.createElement(\"screen-x\");\nscreen.ctx = new Context();\n```\n\n## Tool Contexts\n\nIt's encouraged to have a restricted Context struct for the model to use, and have \npath.ux's context subclass off of that.  This is so the model doesnt have access to \nthe screen and area properties.  For example:\n\n```\nclass ToolContext {\n  get state() {\n    //get application state\n  }\n  \n  get api() {\n    //returns a subclass of controller.js:ModalInterface\n    //this is the controller\n  }\n  \n  get toolstack() {\n    //returns an instance (or subclass instance) of simple_toolsys.js:ToolStack\n  }\n  \n  get selected_3d_object() {\n    //this is how you would pass things like the current selected object in\n    //CAD apps to tool operators.\n  }\n}\n\nclass Context extends ToolContext {\n  get screen() {\n    //get current Screen instance, or instance of a subclass of it\n  }\n  \n  get area() {\n    //get active area editor\n    return Area.getActiveArea()\n  }\n}\n```\n\n# History\n\nPath.ux is roughly based on [Blender's](http://www.blender.org) architecture.\n\n[Main page](manual/controller.html)\n\nThe Blender 2.5 project refactored the internal architecture into a rough MVC pattern.  The model is the core code, the view is the UI, and the controller is the glue between them.\n\nThe controller is called \"RNA\" and it uses the concept of object paths. So if you have an object, you could look up type information (and the value of) a property with a simple path, e.g. \"object.subobject.some_property\".  Blender uses RNA for its user interface, its python api and its animation system (you can associate object paths with animation curves).\n\nInternally the controller has a special wrapper API for blender's c-struct-based pseudo-objects.  This works extremely well as it keeps type information that's only used by the UI out of the model codebase (e.g. the model might not care that a specific color should be clamped to 0-2 instead of 0-1).  Even better, the object model presented by the controller need not match the internal data structures.\n\nSince the controller provides type info to the UI a lot of messy boilerplate is avoided, leading to very consise layout code:\n\n    def panel(layout, context):\n        row = layout.row\n        row.prop(context.object, \"some_object_property\")\n        row.tool(\"mesh.subdivide\")\n\n\n\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\nstructjs.md",
    "name": "nstructjs.md",
    "content": "# NStructJS\n\nNStructJS is a little library for saving/loading highly structured JS objects as binary data\n(for more info, see the [official documentation](https://github.com/joeedh/STRUCT/wiki) ).\nIt is not suited for unstructed data (use JSON for that).  \nNStructJS arose out of the following shortcomings of JSON:\n\n- JSON allocates objects twice.\n- JSON is slow compared to what you can get with a structured binary format\n\nThe idea of NStructJS is to attach little scripts to your classes that define that \nclass's data and how it is saved.  For example:\n\n```\nclass SomeClass {\n  constructor() {\n    this.data1 = 0;\n    this.data2 = [1, 2, 3];\n  }\n  \n  //reader \"fills in\" fields in a newly created object with loaded data\n  static fromSTRUCT(reader) {\n    let ret = new SomeClass();\n    \n    reader(ret);\n    \n    return ret;\n  }\n}\nSomeClass.STRUCT = `\nmy_module.SomeClass {\n  data1 : int;\n  data2 : array;\n}\nnstructjs.manager.add_class(SomeClass);\n`;\n```\n\n## Controller How Fields Are Saved\n\nNote that you can specify little code snippets to control how fields are saved.\nFor example, if you want to save an integer ID instead of a reference for an \nobject property, you might do this:\n\n```\nmy_module.AnotherClass {\n  someclass : int | obj.someclass !== undefined ? obj.someclass.id : -1;\n}\n```\n\nHere, everything after '|' until ';' defines how someclass is saved.  For various dumb reasons\n'this' is bound to 'obj'; as you can see, the basic idea is to check if this.someclass exists,\nif so use this.someclass.id, else use -1.\n\n## Versioning\n\nTo a certain extend nstructjs will gracefully handle version changes.  The basic idea is to save a\ncopy of your struct scripts with each file, that way each file knows how to load itself.\n\nFor more advanced versioning, see AppState.prototype.do_versions and AppState.prototype.do_versions_post.\nThey're used when the automatic versioning from nstructjs isn't enough.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\toolsystem.md",
    "name": "toolsystem.md",
    "content": "# Tool System\n\nTools are what the user uses to change state in the model.  They handle undo, can take control of events if needed and in generate are foundational to path.ux and it's associated projects.  \n\nTools all inherit from ToolOp, which roughly looks like this (see Context section for an explanation for what the \"ctx\" parameters are):\n\n```\nclass SomeTool extends ToolOp {\n  static tooldef() {return {\n    uiname   : \"Tool\",\n    path     : \"module.tool\"\n    inputs   : ToolOp.inherit({}), //inherit properties from base class\n    outputs  : {}\n  }}\n  static invoke(ctx, args) {\n    /*create a new tool instance.\n      args is simple key:val mapping\n      where val is either a string, a number\n      or a boolean.*/\n    return new ToolOp()\n  }\n  undoPre(ctx) {\n    //create undo data\n  }\n  undo(ctx) {\n    //execute undo with data made in previous call to this.undoPre\n  }\n  exec(ctx) {\n    //execute tool\n  }\n  modalStart(ctx) {\n    //start interactice mode\n  }\n  modalEnd(ctx) {\n    //end interactive mode\n  }\n  on_[mousedown/mousemove/mouseup/keydown](ctx) {\n    //interactive mode event\n  }\n  \n  ToolOp.register(SomeTool);\n}\n```\n\n## Context\nThe foundation of the tool system is a special Context struct that's provided by client code.  Think of it as defining \"arguments\" for tools.  Path.ux can use any context struct, but requires the following properties be defined:\n\n```\nclass Context {\n  get api() {\n    //return reference to a controller.ModelInterface\n  }\n  \n  get appstate() {\n    //return reference to main appstate global\n  }\n  \n  get screen() {\n    //return reference to main FrameManager.screen\n  }\n}\n```\n\nIn addition, path.ux has hooks to provide UI context, specifically which are is currently active.  To do this,\neither override the following methods in ScreenArea.Area.prototype, or subclass Area:\n\n```\n  //called when area should be considered \"active\"\n  push_ctx_active() {\n  }\n  \n  //called when area should be considered \"inactive\"\n  pop_ctx_active() {\n  }\n```\n\n## Undo\nTypically tools will inherit from a base class with a general, brute-force undo (i.e. saving the \nentire application and then reloading it on undo).  Additionally to save on speed and memory subclasses \ncan override undoPre and undo with their own implementation.\n\n\n## tooldef()\nTools have a special tooldef() static function that \"defines\" the tool.  It returns things like\nwhat properties the tool has, it's name, it's path in the data path system, etc.\n\n## Tool Properties\nTools have input and output slots.  See toolprop.js.  There are integer properties, float properties, \nvarious linear algebra properties (vectors, matrices), enumerations, bitflags, and in addition client code\nmay provide it's own property classes.\n\n\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\controller.md",
    "name": "controller.md",
    "content": "The controller is the glue by which the UI queries the model (application state).  By design, UI code isn't allowed to hold direct references to model objects; instead it stores special object paths.\n\nThese arn't direct paths to real objects though, they operate via a special wrapper API, and in fact the object model the controller presents need not match the real underlying data structures.\n\nNote that path.ux allows plugging in different controller implementations; shown here is the one shipped with the code.\n\n# Object Wrapping Example\n\n```\n//our test class we want to wrap\nclass Thing {\n  constructor(name, id, location, opacity) {\n    this.name = name; //str\n    this.id = id; //int\n    this.location = location; //enumeration\n    this.opacity = opacity; //float\n  }\n}\n\n//enumeration for .location member\nconst LocationEnum = {\n  LIVING_ROOM : 0,\n  BEDROOM : 1,\n  DRIVEWAY : 2\n};\n\nimport {DataAPI} from 'controller.js';\n\nexport api = new DataAPI();\n\n//create a structure mapping to Thing\nlet st = api.mapStruct(Thing);\n\n//define properties and their types\n//these all have the prototype (membername, apiname, ui_name, description)\n\nst.string(\"name\", \"name\", \"Name\", \"Name of thing\");\nst.int(\"id\", \"id\", \"ID\", \"Unique ID of thing\");\nst.enum(\"location\", \"location\", \"Location\", \"Location of thing\").icons({\n  LIVING_ROOM : [some icon id],\n  BEDROOM : [some icon id],\n  DRIVEWAY : [some icon id],\n});\nst.float(\"opacity\", \"opacity\", \"Opacity\", \"Transparency of thing\").range(0, 1);\n\n```\n",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\libblock.md",
    "name": "libblock.md",
    "content": "",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\toolprop.md",
    "name": "toolprop.md",
    "content": "",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\tutorial.md",
    "name": "tutorial.md",
    "content": "",
    "static": true,
    "access": "public"
  },
  {
    "kind": "manual",
    "longname": "C:\\dev\\potreeviewer\\scripts\\path.ux\\docs_src\\context.md",
    "name": "context.md",
    "content": "# Context design:\r\n\r\nContext is a simplified API to access the application model.  Contexts are passed around\r\nto ToolOps and used by path.ux.\r\n\r\n# Context Overlay:\r\nA context overlay is a class that overrides context fields.  It has a validate()\r\nmethod that is polled regularly; if it returns false the overlay is removed.\r\n\r\nContexts can be \"frozen\" with .lock.  When frozen they should *have no direct object \r\nreferences at all*, other then .state, .datalib and .api.  \r\nProperties can control this with \"_save\" and \"_load\" methods inside\r\nof the overlay classes.\r\n\r\nExample of a context overlay:\r\n\r\n    class ContextOverlay {\r\n      validate() {\r\n        //check if this overlay is still valid or needs to be removed\r\n      }\r\n    \r\n      static contextDefine() {return {\r\n        flag    :   0 //see ContextFlags\r\n    \r\n        //an example of inheritance.  inheritance is automatic for fields\r\n        //that are missing from contextDefine().\r\n        flag    :   Context.inherit([a bitmask to or with parent])\r\n      }}\r\n        \r\n      get selectedObjects() {\r\n        /*\r\n          if you want to get a property from below the stack in the ctx\r\n          use this.ctx or return Context.super\r\n        */\r\n        if (some_reason) {\r\n            //tell ctx to \r\n            return Context.super();\r\n        } else {\r\n            //this will also work\r\n            return this.ctx.selectedObjects;\r\n        }\r\n        \r\n        return this.ctx.scene.objects.selected.editable;\r\n      }\r\n    \r\n      selectedObjects_save() {\r\n        let ret = [];\r\n        for (let ob of this.selectedObjects) {\r\n            ret.push(ob.id);        \r\n        }\r\n        \r\n        return ret;\r\n      }\r\n    \r\n      selectedObjects_load(data) {\r\n        let ret = [];\r\n        \r\n        for (let id of data) {\r\n            ret.push([lookup object from data])\r\n        }\r\n        \r\n        return ret;\r\n      }\r\n    }\r\n\r\n# Locked contexts\r\n\r\nLocked contexts are contexts whose properties are \"saved\", but not as direct references.\r\nInstead, each property is (ideally) saved as some sort of ID or datapath to look up\r\nthe true value on property access.\r\n\r\nWe suggest you subclass Context and implement a defaultPropertyWrapper function which\r\nwill generate id/datapath wrappers.  The laternative is to use _save and _load methods:\r\n\r\n    class Overlay extends ContextOverlay {\r\n      get something() {\r\n        return something;\r\n      }\r\n    \r\n      something_save() {\r\n        return this.state.something.id;\r\n      }\r\n    \r\n      something_load(id) {\r\n        return [lookup id somewhere to get something];\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n",
    "static": true,
    "access": "public"
  }
]