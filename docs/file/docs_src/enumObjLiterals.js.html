<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">docs_src/enumObjLiterals.js | path.ux</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="this is awesome library"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="path.ux"><meta property="twitter:description" content="this is awesome library"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/joeedh/path.ux.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Flags">Flags</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">docs_src/enumObjLiterals.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">const marked = require(&quot;marked&quot;)

const ASTNodeContainer = require(&apos;esdoc/out/src/Util/ASTNodeContainer.js&apos;).default;
const ASTUtil = require(&apos;esdoc/out/src/Util/ASTUtil&apos;).default;
const EPlugin = require(&apos;esdoc/out/src/Plugin/Plugin&apos;).default;

function stop() {
  process.exit();
}

function lpad(n, s) {
  while (s.length &lt; n) {
    s = &quot; &quot; + s;
  }

  return s;
}

function traverse(node, cb) {
  if (!(node &amp;&amp; typeof node === &quot;object&quot; &amp;&amp; typeof node.type === &quot;string&quot;)) {
    return;
  }

  cb(node);

  for (let k in node) {
    let v = node[k];

    if (Array.isArray(v)) {
      for (let v2 of v) {
        traverse(v2, cb);
      }
    } else {
      traverse(v, cb);
    }
  }
}

function makeCommentMap(node) {
  let map = {};
  traverse(node, (n) =&gt; {
    if (n.leadingComments) {
      for (let c of n.leadingComments) {
        for (let i=c.loc.start.line; i&lt;=c.loc.end.line; i++) {
          map[i] = c;
        }
      }
      if (n.trailingComments) {
        for (let c of n.trailingComments) {
          for (let i = c.loc.start.line; i &lt;= c.loc.end.line; i++) {
            map[i] = c;
          }
        }
      }
    }
  });

  return map;
}

class Plugin {
  onHandleDocs(ev) {
    this._docs = ev.data.docs;
    this._option = ev.data.option || {};

    this._ev = ev;
    
    if (!(&apos;enable&apos; in this._option)) this._option.enable = true;


    function genjs(node) {
      let s = &quot;&quot;, last = &quot;&quot;, last2 = &quot;&quot;;
      let stack = [];

      function out(s2) {
        last2 = last;
        last = s;
        s += s2;
      }

      let walkers = {
        StringLiteral(n, p, path) {
          out(&apos;&quot;&apos;+n.value+&apos;&quot;&apos;);
        },
        NumericLiteral(n, p, path) {
          out(n.value);
        },
        Identifier(n, p, path) {
          out(n.name);
        },
        MemberExpression(n, p, path) {
          stack.push(&quot;.&quot;)
        },
        BinaryExpression(n, p, path) {
          stack.push(n.operator)
        }
      };

      traverse(node, (node, parent, path) =&gt; {
        if (node.type in walkers) {
          let slen = stack.length;

          walkers[node.type](node, parent, path);

          if (slen === stack.length &amp;&amp; stack.length &gt; 0) {
            s += stack.pop();
          }
        }
      });

      while (stack.length &gt; 0) {
        s += stack.pop();
      }

      return s;
    }

    function getComments(node) {
      let ret = &quot;/*&quot;;
      let ok = 0;

      traverse(node, (n, p, path) =&gt; {
        if (n.leadingComments) {
          for (let c of n.leadingComments) {
            ok = 1;
            ret += c.value;
          }
        }
        if (n.trailingComments) {
          for (let c of n.trailingComments) {
            ok = 1;
            ret += c.value;
          }
        }
      });

      if (ok) {
        return ret + &quot;*/&quot;;
      } else {
        return &quot;&quot;;
      }
    }


    for (let doc of ev.data.docs) {
      if (doc.kind === &quot;variable&quot;) {
        let n = ASTNodeContainer.getNode(doc.__docId__);

        let ok = n.declarations.length === 1;
        ok = ok &amp;&amp; doc.export;
        ok = ok &amp;&amp; n.declarations[0].id;
        ok = ok &amp;&amp; n.declarations[0].id.type === &quot;Identifier&quot;;

        if (!ok) {
          continue;
        }

        let init = n.declarations[0].init;
        let name = n.declarations[0].id.name;


        ok = ok &amp;&amp; init.type === &quot;ObjectExpression&quot;;

        if (!ok) {
          continue;
        }

        let map = makeCommentMap(n);

        let s = `export ${n.kind} ${name} = {\n`;
        let maxline = 1;
        for (let prop of init.properties) {
          maxline = Math.max(maxline, genjs(prop).length+2);
        }


        let lastn = init;
        for (let prop of init.properties) {
          let line = genjs(prop.key);

          if (prop.computed) {
            line = &apos;[&apos; + line + &apos;]&apos;;
          }

          line = &quot;    &quot; + line;

          while (line.length &lt; maxline) {
            line += &quot; &quot;;
          }

          line += &quot;: &quot;;
          line += genjs(prop.value);

          s += line + &quot;,&quot;;

          let cmt = map[prop.value.loc.start.line];
          if (cmt) {
            s += &quot;  //&quot; + cmt.value + &quot;&quot;;
          }
          s += &quot;\n&quot;;
          //lastn = prop;
          //console.log(prop)
        }

        s += &quot;}&quot;;

        s = `&lt;pre&gt;${s}&lt;/pre&gt;`;

        doc.description = s;
      }

    }

  }

}
module.exports = new Plugin();
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
